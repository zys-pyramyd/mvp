/*! For license information please see main.2d6f1158.js.LICENSE.txt */
(()=>{"use strict";var e={43(e,t,r){e.exports=r(202)},153(e,t,r){var a=r(43),n=Symbol.for("react.element"),s=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,o=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var a,s={},c=null,d=null;for(a in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)l.call(t,a)&&!i.hasOwnProperty(a)&&(s[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===s[a]&&(s[a]=t[a]);return{$$typeof:n,type:e,key:c,ref:d,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202(e,t){var r=Symbol.for("react.element"),a=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),i=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.iterator;var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,f={};function g(e,t,r){this.props=e,this.context=t,this.refs=f,this.updater=r||h}function y(){}function b(e,t,r){this.props=e,this.context=t,this.refs=f,this.updater=r||h}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var v=b.prototype=new y;v.constructor=b,x(v,g.prototype),v.isPureReactComponent=!0;var j=Array.isArray,w=Object.prototype.hasOwnProperty,N={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,a){var n,s={},l=null,o=null;if(null!=t)for(n in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(l=""+t.key),t)w.call(t,n)&&!_.hasOwnProperty(n)&&(s[n]=t[n]);var i=arguments.length-2;if(1===i)s.children=a;else if(1<i){for(var c=Array(i),d=0;d<i;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(n in i=e.defaultProps)void 0===s[n]&&(s[n]=i[n]);return{$$typeof:r,type:e,key:l,ref:o,props:s,_owner:N.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var C=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function P(e,t,n,s,l){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var i=!1;if(null===e)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case r:case a:i=!0}}if(i)return l=l(i=e),e=""===s?"."+E(i,0):s,j(l)?(n="",null!=e&&(n=e.replace(C,"$&/")+"/"),P(l,t,n,"",function(e){return e})):null!=l&&(S(l)&&(l=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(l,n+(!l.key||i&&i.key===l.key?"":(""+l.key).replace(C,"$&/")+"/")+e)),t.push(l)),1;if(i=0,s=""===s?".":s+":",j(e))for(var c=0;c<e.length;c++){var d=s+E(o=e[c],c);i+=P(o,t,n,d,l)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(o=e.next()).done;)i+=P(o=o.value,t,n,d=s+E(o,c++),l);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function R(e,t,r){if(null==e)return e;var a=[],n=0;return P(e,a,"","",function(e){return t.call(r,e,n++)}),a}function T(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var L={current:null},D={transition:null},A={ReactCurrentDispatcher:L,ReactCurrentBatchConfig:D,ReactCurrentOwner:N};function O(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:R,forEach:function(e,t,r){R(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return R(e,function(){t++}),t},toArray:function(e){return R(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=n,t.Profiler=l,t.PureComponent=b,t.StrictMode=s,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A,t.act=O,t.cloneElement=function(e,t,a){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=x({},e.props),s=e.key,l=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(l=t.ref,o=N.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(c in t)w.call(t,c)&&!_.hasOwnProperty(c)&&(n[c]=void 0===t[c]&&void 0!==i?i[c]:t[c])}var c=arguments.length-2;if(1===c)n.children=a;else if(1<c){i=Array(c);for(var d=0;d<c;d++)i[d]=arguments[d+2];n.children=i}return{$$typeof:r,type:e.type,key:s,ref:l,props:n,_owner:o}},t.createContext=function(e){return(e={$$typeof:i,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:m,_payload:{_status:-1,_result:e},_init:T}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=O,t.useCallback=function(e,t){return L.current.useCallback(e,t)},t.useContext=function(e){return L.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return L.current.useDeferredValue(e)},t.useEffect=function(e,t){return L.current.useEffect(e,t)},t.useId=function(){return L.current.useId()},t.useImperativeHandle=function(e,t,r){return L.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return L.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return L.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return L.current.useMemo(e,t)},t.useReducer=function(e,t,r){return L.current.useReducer(e,t,r)},t.useRef=function(e){return L.current.useRef(e)},t.useState=function(e){return L.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return L.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return L.current.useTransition()},t.version="18.3.1"},234(e,t){function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var a=r-1>>>1,n=e[a];if(!(0<s(n,t)))break e;e[a]=t,e[r]=n,r=a}}function a(e){return 0===e.length?null:e[0]}function n(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var a=0,n=e.length,l=n>>>1;a<l;){var o=2*(a+1)-1,i=e[o],c=o+1,d=e[c];if(0>s(i,r))c<n&&0>s(d,i)?(e[a]=d,e[c]=r,a=c):(e[a]=i,e[o]=r,a=o);else{if(!(c<n&&0>s(d,r)))break e;e[a]=d,e[c]=r,a=c}}}return t}function s(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var l=performance;t.unstable_now=function(){return l.now()}}else{var o=Date,i=o.now();t.unstable_now=function(){return o.now()-i}}var c=[],d=[],u=1,m=null,p=3,h=!1,x=!1,f=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function v(e){for(var t=a(d);null!==t;){if(null===t.callback)n(d);else{if(!(t.startTime<=e))break;n(d),t.sortIndex=t.expirationTime,r(c,t)}t=a(d)}}function j(e){if(f=!1,v(e),!x)if(null!==a(c))x=!0,D(w);else{var t=a(d);null!==t&&A(j,t.startTime-e)}}function w(e,r){x=!1,f&&(f=!1,y(S),S=-1),h=!0;var s=p;try{for(v(r),m=a(c);null!==m&&(!(m.expirationTime>r)||e&&!P());){var l=m.callback;if("function"===typeof l){m.callback=null,p=m.priorityLevel;var o=l(m.expirationTime<=r);r=t.unstable_now(),"function"===typeof o?m.callback=o:m===a(c)&&n(c),v(r)}else n(c);m=a(c)}if(null!==m)var i=!0;else{var u=a(d);null!==u&&A(j,u.startTime-r),i=!1}return i}finally{m=null,p=s,h=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var N,_=!1,k=null,S=-1,C=5,E=-1;function P(){return!(t.unstable_now()-E<C)}function R(){if(null!==k){var e=t.unstable_now();E=e;var r=!0;try{r=k(!0,e)}finally{r?N():(_=!1,k=null)}}else _=!1}if("function"===typeof b)N=function(){b(R)};else if("undefined"!==typeof MessageChannel){var T=new MessageChannel,L=T.port2;T.port1.onmessage=R,N=function(){L.postMessage(null)}}else N=function(){g(R,0)};function D(e){k=e,_||(_=!0,N())}function A(e,r){S=g(function(){e(t.unstable_now())},r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){x||h||(x=!0,D(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return a(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var r=p;p=t;try{return e()}finally{p=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=p;p=e;try{return t()}finally{p=r}},t.unstable_scheduleCallback=function(e,n,s){var l=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?l+s:l:s=l,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:n,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>l?(e.sortIndex=s,r(d,e),null===a(c)&&e===a(d)&&(f?(y(S),S=-1):f=!0,A(j,s-l))):(e.sortIndex=o,r(c,e),x||h||(x=!0,D(w))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=p;return function(){var r=p;p=t;try{return e.apply(this,arguments)}finally{p=r}}}},391(e,t,r){var a=r(950);t.createRoot=a.createRoot,t.hydrateRoot=a.hydrateRoot},579(e,t,r){e.exports=r(153)},730(e,t,r){var a=r(43),n=r(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=new Set,o={};function i(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)l.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},h={};function x(e,t,r,a,n,s,l){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=a,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=l}var f={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){f[e]=new x(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];f[t]=new x(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){f[e]=new x(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){f[e]=new x(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){f[e]=new x(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){f[e]=new x(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){f[e]=new x(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){f[e]=new x(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){f[e]=new x(e,5,!1,e.toLowerCase(),null,!1,!1)});var g=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,r,a){var n=f.hasOwnProperty(t)?f[t]:null;(null!==n?0!==n.type:a||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,a){if(null===t||"undefined"===typeof t||function(e,t,r,a){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!a&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,a))return!0;if(a)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,n,a)&&(r=null),a||null===n?function(e){return!!u.call(h,e)||!u.call(p,e)&&(m.test(e)?h[e]=!0:(p[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):n.mustUseProperty?e[n.propertyName]=null===r?3!==n.type&&"":r:(t=n.attributeName,a=n.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(n=n.type)||4===n&&!0===r?"":""+r,a?e.setAttributeNS(a,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(g,y);f[t]=new x(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(g,y);f[t]=new x(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(g,y);f[t]=new x(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){f[e]=new x(e,1,!1,e.toLowerCase(),null,!1,!1)}),f.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){f[e]=new x(e,1,!1,e.toLowerCase(),null,!0,!0)});var v=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,j=Symbol.for("react.element"),w=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),C=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),L=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var A=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=A&&e[A]||e["@@iterator"])?e:null}var z,F=Object.assign;function M(e){if(void 0===z)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);z=t&&t[1]||""}return"\n"+z+e}var B=!1;function I(e,t){if(!e||B)return"";B=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var a=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){a=c}e.call(t.prototype)}else{try{throw Error()}catch(c){a=c}e()}}catch(c){if(c&&a&&"string"===typeof c.stack){for(var n=c.stack.split("\n"),s=a.stack.split("\n"),l=n.length-1,o=s.length-1;1<=l&&0<=o&&n[l]!==s[o];)o--;for(;1<=l&&0<=o;l--,o--)if(n[l]!==s[o]){if(1!==l||1!==o)do{if(l--,0>--o||n[l]!==s[o]){var i="\n"+n[l].replace(" at new "," at ");return e.displayName&&i.includes("<anonymous>")&&(i=i.replace("<anonymous>",e.displayName)),i}}while(1<=l&&0<=o);break}}}finally{B=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?M(e):""}function q(e){switch(e.tag){case 5:return M(e.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return e=I(e.type,!1);case 11:return e=I(e.type.render,!1);case 1:return e=I(e.type,!0);default:return""}}function U(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case N:return"Fragment";case w:return"Portal";case k:return"Profiler";case _:return"StrictMode";case P:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case T:return null!==(t=e.displayName||null)?t:U(e.type)||"Memo";case L:t=e._payload,e=e._init;try{return U(e(t))}catch(r){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(t);case 8:return t===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function V(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=V(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var n=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(e){a=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(e){a=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),a="";return e&&(a=V(e)?e.checked?"true":"false":e.value),(e=a)!==r&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var r=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function G(e,t){var r=null==t.defaultValue?"":t.defaultValue,a=null!=t.checked?t.checked:t.defaultChecked;r=W(null!=t.value?t.value:r),e._wrapperState={initialChecked:a,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Z(e,t){Q(e,t);var r=W(t.value),a=t.type;if(null!=r)"number"===a?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===a||"reset"===a)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,r):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function X(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!("submit"!==a&&"reset"!==a||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ee(e,t,r){"number"===t&&J(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var te=Array.isArray;function re(e,t,r,a){if(e=e.options,t){t={};for(var n=0;n<r.length;n++)t["$"+r[n]]=!0;for(r=0;r<e.length;r++)n=t.hasOwnProperty("$"+e[r].value),e[r].selected!==n&&(e[r].selected=n),n&&a&&(e[r].defaultSelected=!0)}else{for(r=""+W(r),t=null,n=0;n<e.length;n++){if(e[n].value===r)return e[n].selected=!0,void(a&&(e[n].defaultSelected=!0));null!==t||e[n].disabled||(t=e[n])}null!==t&&(t.selected=!0)}}function ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ne(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(s(92));if(te(r)){if(1<r.length)throw Error(s(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:W(r)}}function se(e,t){var r=W(t.value),a=W(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=a&&(e.defaultValue=""+a)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ie(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,a){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function me(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},he=["Webkit","ms","Moz","O"];function xe(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function fe(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var a=0===r.indexOf("--"),n=xe(r,t[r],a);"float"===r&&(r="cssFloat"),a?e.setProperty(r,n):e[r]=n}}Object.keys(pe).forEach(function(e){he.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]})});var ge=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ve=null;function je(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Ne=null,_e=null;function ke(e){if(e=bn(e)){if("function"!==typeof we)throw Error(s(280));var t=e.stateNode;t&&(t=jn(t),we(e.stateNode,e.type,t))}}function Se(e){Ne?_e?_e.push(e):_e=[e]:Ne=e}function Ce(){if(Ne){var e=Ne,t=_e;if(_e=Ne=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Ee(e,t){return e(t)}function Pe(){}var Re=!1;function Te(e,t,r){if(Re)return e(t,r);Re=!0;try{return Ee(e,t,r)}finally{Re=!1,(null!==Ne||null!==_e)&&(Pe(),Ce())}}function Le(e,t){var r=e.stateNode;if(null===r)return null;var a=jn(r);if(null===a)return null;r=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(a=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!a;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(s(231,t,typeof r));return r}var De=!1;if(d)try{var Ae={};Object.defineProperty(Ae,"passive",{get:function(){De=!0}}),window.addEventListener("test",Ae,Ae),window.removeEventListener("test",Ae,Ae)}catch(de){De=!1}function Oe(e,t,r,a,n,s,l,o,i){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(d){this.onError(d)}}var ze=!1,Fe=null,Me=!1,Be=null,Ie={onError:function(e){ze=!0,Fe=e}};function qe(e,t,r,a,n,s,l,o,i){ze=!1,Fe=null,Oe.apply(Ie,arguments)}function Ue(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Ue(e)!==e)throw Error(s(188))}function Ve(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ue(e)))throw Error(s(188));return t!==e?null:e}for(var r=e,a=t;;){var n=r.return;if(null===n)break;var l=n.alternate;if(null===l){if(null!==(a=n.return)){r=a;continue}break}if(n.child===l.child){for(l=n.child;l;){if(l===r)return We(n),e;if(l===a)return We(n),t;l=l.sibling}throw Error(s(188))}if(r.return!==a.return)r=n,a=l;else{for(var o=!1,i=n.child;i;){if(i===r){o=!0,r=n,a=l;break}if(i===a){o=!0,a=n,r=l;break}i=i.sibling}if(!o){for(i=l.child;i;){if(i===r){o=!0,r=l,a=n;break}if(i===a){o=!0,a=l,r=n;break}i=i.sibling}if(!o)throw Error(s(189))}}if(r.alternate!==a)throw Error(s(190))}if(3!==r.tag)throw Error(s(188));return r.stateNode.current===r?e:t}(e))?Ye(e):null}function Ye(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ye(e);if(null!==t)return t;e=e.sibling}return null}var Ke=n.unstable_scheduleCallback,Je=n.unstable_cancelCallback,$e=n.unstable_shouldYield,Ge=n.unstable_requestPaint,Qe=n.unstable_now,Ze=n.unstable_getCurrentPriorityLevel,Xe=n.unstable_ImmediatePriority,et=n.unstable_UserBlockingPriority,tt=n.unstable_NormalPriority,rt=n.unstable_LowPriority,at=n.unstable_IdlePriority,nt=null,st=null;var lt=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/it|0)|0},ot=Math.log,it=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function mt(e,t){var r=e.pendingLanes;if(0===r)return 0;var a=0,n=e.suspendedLanes,s=e.pingedLanes,l=268435455&r;if(0!==l){var o=l&~n;0!==o?a=ut(o):0!==(s&=l)&&(a=ut(s))}else 0!==(l=r&~n)?a=ut(l):0!==s&&(a=ut(s));if(0===a)return 0;if(0!==t&&t!==a&&0===(t&n)&&((n=a&-a)>=(s=t&-t)||16===n&&0!==(4194240&s)))return t;if(0!==(4&a)&&(a|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=a;0<t;)n=1<<(r=31-lt(t)),a|=e[r],t&=~n;return a}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ht(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function xt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function ft(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function gt(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-lt(t)]=r}function yt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var a=31-lt(r),n=1<<a;n&t|e[a]&t&&(e[a]|=t),r&=~n}}var bt=0;function vt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var jt,wt,Nt,_t,kt,St=!1,Ct=[],Et=null,Pt=null,Rt=null,Tt=new Map,Lt=new Map,Dt=[],At="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":Tt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lt.delete(t.pointerId)}}function zt(e,t,r,a,n,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:a,nativeEvent:s,targetContainers:[n]},null!==t&&(null!==(t=bn(t))&&wt(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,null!==n&&-1===t.indexOf(n)&&t.push(n),e)}function Ft(e){var t=yn(e.target);if(null!==t){var r=Ue(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=He(r)))return e.blockedOn=t,void kt(e.priority,function(){Nt(r)})}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Mt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=bn(r))&&wt(t),e.blockedOn=r,!1;var a=new(r=e.nativeEvent).constructor(r.type,r);ve=a,r.target.dispatchEvent(a),ve=null,t.shift()}return!0}function Bt(e,t,r){Mt(e)&&r.delete(t)}function It(){St=!1,null!==Et&&Mt(Et)&&(Et=null),null!==Pt&&Mt(Pt)&&(Pt=null),null!==Rt&&Mt(Rt)&&(Rt=null),Tt.forEach(Bt),Lt.forEach(Bt)}function qt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,It)))}function Ut(e){function t(t){return qt(t,e)}if(0<Ct.length){qt(Ct[0],e);for(var r=1;r<Ct.length;r++){var a=Ct[r];a.blockedOn===e&&(a.blockedOn=null)}}for(null!==Et&&qt(Et,e),null!==Pt&&qt(Pt,e),null!==Rt&&qt(Rt,e),Tt.forEach(t),Lt.forEach(t),r=0;r<Dt.length;r++)(a=Dt[r]).blockedOn===e&&(a.blockedOn=null);for(;0<Dt.length&&null===(r=Dt[0]).blockedOn;)Ft(r),null===r.blockedOn&&Dt.shift()}var Ht=v.ReactCurrentBatchConfig,Wt=!0;function Vt(e,t,r,a){var n=bt,s=Ht.transition;Ht.transition=null;try{bt=1,Kt(e,t,r,a)}finally{bt=n,Ht.transition=s}}function Yt(e,t,r,a){var n=bt,s=Ht.transition;Ht.transition=null;try{bt=4,Kt(e,t,r,a)}finally{bt=n,Ht.transition=s}}function Kt(e,t,r,a){if(Wt){var n=$t(e,t,r,a);if(null===n)Ha(e,t,a,Jt,r),Ot(e,a);else if(function(e,t,r,a,n){switch(t){case"focusin":return Et=zt(Et,e,t,r,a,n),!0;case"dragenter":return Pt=zt(Pt,e,t,r,a,n),!0;case"mouseover":return Rt=zt(Rt,e,t,r,a,n),!0;case"pointerover":var s=n.pointerId;return Tt.set(s,zt(Tt.get(s)||null,e,t,r,a,n)),!0;case"gotpointercapture":return s=n.pointerId,Lt.set(s,zt(Lt.get(s)||null,e,t,r,a,n)),!0}return!1}(n,e,t,r,a))a.stopPropagation();else if(Ot(e,a),4&t&&-1<At.indexOf(e)){for(;null!==n;){var s=bn(n);if(null!==s&&jt(s),null===(s=$t(e,t,r,a))&&Ha(e,t,a,Jt,r),s===n)break;n=s}null!==n&&a.stopPropagation()}else Ha(e,t,a,null,r)}}var Jt=null;function $t(e,t,r,a){if(Jt=null,null!==(e=yn(e=je(a))))if(null===(t=Ue(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Jt=e,null}function Gt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case Xe:return 1;case et:return 4;case tt:case rt:return 16;case at:return 536870912;default:return 16}default:return 16}}var Qt=null,Zt=null,Xt=null;function er(){if(Xt)return Xt;var e,t,r=Zt,a=r.length,n="value"in Qt?Qt.value:Qt.textContent,s=n.length;for(e=0;e<a&&r[e]===n[e];e++);var l=a-e;for(t=1;t<=l&&r[a-t]===n[s-t];t++);return Xt=n.slice(e,1<t?1-t:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rr(){return!0}function ar(){return!1}function nr(e){function t(t,r,a,n,s){for(var l in this._reactName=t,this._targetInst=a,this.type=r,this.nativeEvent=n,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(l)&&(t=e[l],this[l]=t?t(n):n[l]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?rr:ar,this.isPropagationStopped=ar,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var sr,lr,or,ir={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cr=nr(ir),dr=F({},ir,{view:0,detail:0}),ur=nr(dr),mr=F({},dr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_r,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==or&&(or&&"mousemove"===e.type?(sr=e.screenX-or.screenX,lr=e.screenY-or.screenY):lr=sr=0,or=e),sr)},movementY:function(e){return"movementY"in e?e.movementY:lr}}),pr=nr(mr),hr=nr(F({},mr,{dataTransfer:0})),xr=nr(F({},dr,{relatedTarget:0})),fr=nr(F({},ir,{animationName:0,elapsedTime:0,pseudoElement:0})),gr=F({},ir,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yr=nr(gr),br=nr(F({},ir,{data:0})),vr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=wr[e])&&!!t[e]}function _r(){return Nr}var kr=F({},dr,{key:function(e){if(e.key){var t=vr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?jr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_r,charCode:function(e){return"keypress"===e.type?tr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sr=nr(kr),Cr=nr(F({},mr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Er=nr(F({},dr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_r})),Pr=nr(F({},ir,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rr=F({},mr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Tr=nr(Rr),Lr=[9,13,27,32],Dr=d&&"CompositionEvent"in window,Ar=null;d&&"documentMode"in document&&(Ar=document.documentMode);var Or=d&&"TextEvent"in window&&!Ar,zr=d&&(!Dr||Ar&&8<Ar&&11>=Ar),Fr=String.fromCharCode(32),Mr=!1;function Br(e,t){switch(e){case"keyup":return-1!==Lr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ir(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qr=!1;var Ur={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Ur[e.type]:"textarea"===t}function Wr(e,t,r,a){Se(a),0<(t=Va(t,"onChange")).length&&(r=new cr("onChange","change",null,r,a),e.push({event:r,listeners:t}))}var Vr=null,Yr=null;function Kr(e){Fa(e,0)}function Jr(e){if(K(vn(e)))return e}function $r(e,t){if("change"===e)return t}var Gr=!1;if(d){var Qr;if(d){var Zr="oninput"in document;if(!Zr){var Xr=document.createElement("div");Xr.setAttribute("oninput","return;"),Zr="function"===typeof Xr.oninput}Qr=Zr}else Qr=!1;Gr=Qr&&(!document.documentMode||9<document.documentMode)}function ea(){Vr&&(Vr.detachEvent("onpropertychange",ta),Yr=Vr=null)}function ta(e){if("value"===e.propertyName&&Jr(Yr)){var t=[];Wr(t,Yr,e,je(e)),Te(Kr,t)}}function ra(e,t,r){"focusin"===e?(ea(),Yr=r,(Vr=t).attachEvent("onpropertychange",ta)):"focusout"===e&&ea()}function aa(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jr(Yr)}function na(e,t){if("click"===e)return Jr(t)}function sa(e,t){if("input"===e||"change"===e)return Jr(t)}var la="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function oa(e,t){if(la(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var n=r[a];if(!u.call(t,n)||!la(e[n],t[n]))return!1}return!0}function ia(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ca(e,t){var r,a=ia(e);for(e=0;a;){if(3===a.nodeType){if(r=e+a.textContent.length,e<=t&&r>=t)return{node:a,offset:t-e};e=r}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ia(a)}}function da(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?da(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ua(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(a){r=!1}if(!r)break;t=J((e=t.contentWindow).document)}return t}function ma(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pa(e){var t=ua(),r=e.focusedElem,a=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&da(r.ownerDocument.documentElement,r)){if(null!==a&&ma(r))if(t=a.start,void 0===(e=a.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var n=r.textContent.length,s=Math.min(a.start,n);a=void 0===a.end?s:Math.min(a.end,n),!e.extend&&s>a&&(n=a,a=s,s=n),n=ca(r,s);var l=ca(r,a);n&&l&&(1!==e.rangeCount||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&((t=t.createRange()).setStart(n.node,n.offset),e.removeAllRanges(),s>a?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ha=d&&"documentMode"in document&&11>=document.documentMode,xa=null,fa=null,ga=null,ya=!1;function ba(e,t,r){var a=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;ya||null==xa||xa!==J(a)||("selectionStart"in(a=xa)&&ma(a)?a={start:a.selectionStart,end:a.selectionEnd}:a={anchorNode:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset},ga&&oa(ga,a)||(ga=a,0<(a=Va(fa,"onSelect")).length&&(t=new cr("onSelect","select",null,t,r),e.push({event:t,listeners:a}),t.target=xa)))}function va(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var ja={animationend:va("Animation","AnimationEnd"),animationiteration:va("Animation","AnimationIteration"),animationstart:va("Animation","AnimationStart"),transitionend:va("Transition","TransitionEnd")},wa={},Na={};function _a(e){if(wa[e])return wa[e];if(!ja[e])return e;var t,r=ja[e];for(t in r)if(r.hasOwnProperty(t)&&t in Na)return wa[e]=r[t];return e}d&&(Na=document.createElement("div").style,"AnimationEvent"in window||(delete ja.animationend.animation,delete ja.animationiteration.animation,delete ja.animationstart.animation),"TransitionEvent"in window||delete ja.transitionend.transition);var ka=_a("animationend"),Sa=_a("animationiteration"),Ca=_a("animationstart"),Ea=_a("transitionend"),Pa=new Map,Ra="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ta(e,t){Pa.set(e,t),i(t,[e])}for(var La=0;La<Ra.length;La++){var Da=Ra[La];Ta(Da.toLowerCase(),"on"+(Da[0].toUpperCase()+Da.slice(1)))}Ta(ka,"onAnimationEnd"),Ta(Sa,"onAnimationIteration"),Ta(Ca,"onAnimationStart"),Ta("dblclick","onDoubleClick"),Ta("focusin","onFocus"),Ta("focusout","onBlur"),Ta(Ea,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Aa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Oa=new Set("cancel close invalid load scroll toggle".split(" ").concat(Aa));function za(e,t,r){var a=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,a,n,l,o,i,c){if(qe.apply(this,arguments),ze){if(!ze)throw Error(s(198));var d=Fe;ze=!1,Fe=null,Me||(Me=!0,Be=d)}}(a,t,void 0,e),e.currentTarget=null}function Fa(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var a=e[r],n=a.event;a=a.listeners;e:{var s=void 0;if(t)for(var l=a.length-1;0<=l;l--){var o=a[l],i=o.instance,c=o.currentTarget;if(o=o.listener,i!==s&&n.isPropagationStopped())break e;za(n,o,c),s=i}else for(l=0;l<a.length;l++){if(i=(o=a[l]).instance,c=o.currentTarget,o=o.listener,i!==s&&n.isPropagationStopped())break e;za(n,o,c),s=i}}}if(Me)throw e=Be,Me=!1,Be=null,e}function Ma(e,t){var r=t[xn];void 0===r&&(r=t[xn]=new Set);var a=e+"__bubble";r.has(a)||(Ua(t,e,2,!1),r.add(a))}function Ba(e,t,r){var a=0;t&&(a|=4),Ua(r,e,a,t)}var Ia="_reactListening"+Math.random().toString(36).slice(2);function qa(e){if(!e[Ia]){e[Ia]=!0,l.forEach(function(t){"selectionchange"!==t&&(Oa.has(t)||Ba(t,!1,e),Ba(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ia]||(t[Ia]=!0,Ba("selectionchange",!1,t))}}function Ua(e,t,r,a){switch(Gt(t)){case 1:var n=Vt;break;case 4:n=Yt;break;default:n=Kt}r=n.bind(null,t,r,e),n=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(n=!0),a?void 0!==n?e.addEventListener(t,r,{capture:!0,passive:n}):e.addEventListener(t,r,!0):void 0!==n?e.addEventListener(t,r,{passive:n}):e.addEventListener(t,r,!1)}function Ha(e,t,r,a,n){var s=a;if(0===(1&t)&&0===(2&t)&&null!==a)e:for(;;){if(null===a)return;var l=a.tag;if(3===l||4===l){var o=a.stateNode.containerInfo;if(o===n||8===o.nodeType&&o.parentNode===n)break;if(4===l)for(l=a.return;null!==l;){var i=l.tag;if((3===i||4===i)&&((i=l.stateNode.containerInfo)===n||8===i.nodeType&&i.parentNode===n))return;l=l.return}for(;null!==o;){if(null===(l=yn(o)))return;if(5===(i=l.tag)||6===i){a=s=l;continue e}o=o.parentNode}}a=a.return}Te(function(){var a=s,n=je(r),l=[];e:{var o=Pa.get(e);if(void 0!==o){var i=cr,c=e;switch(e){case"keypress":if(0===tr(r))break e;case"keydown":case"keyup":i=Sr;break;case"focusin":c="focus",i=xr;break;case"focusout":c="blur",i=xr;break;case"beforeblur":case"afterblur":i=xr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":i=pr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":i=hr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":i=Er;break;case ka:case Sa:case Ca:i=fr;break;case Ea:i=Pr;break;case"scroll":i=ur;break;case"wheel":i=Tr;break;case"copy":case"cut":case"paste":i=yr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":i=Cr}var d=0!==(4&t),u=!d&&"scroll"===e,m=d?null!==o?o+"Capture":null:o;d=[];for(var p,h=a;null!==h;){var x=(p=h).stateNode;if(5===p.tag&&null!==x&&(p=x,null!==m&&(null!=(x=Le(h,m))&&d.push(Wa(h,x,p)))),u)break;h=h.return}0<d.length&&(o=new i(o,c,null,r,n),l.push({event:o,listeners:d}))}}if(0===(7&t)){if(i="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||r===ve||!(c=r.relatedTarget||r.fromElement)||!yn(c)&&!c[hn])&&(i||o)&&(o=n.window===n?n:(o=n.ownerDocument)?o.defaultView||o.parentWindow:window,i?(i=a,null!==(c=(c=r.relatedTarget||r.toElement)?yn(c):null)&&(c!==(u=Ue(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(i=null,c=a),i!==c)){if(d=pr,x="onMouseLeave",m="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(d=Cr,x="onPointerLeave",m="onPointerEnter",h="pointer"),u=null==i?o:vn(i),p=null==c?o:vn(c),(o=new d(x,h+"leave",i,r,n)).target=u,o.relatedTarget=p,x=null,yn(n)===a&&((d=new d(m,h+"enter",c,r,n)).target=p,d.relatedTarget=u,x=d),u=x,i&&c)e:{for(m=c,h=0,p=d=i;p;p=Ya(p))h++;for(p=0,x=m;x;x=Ya(x))p++;for(;0<h-p;)d=Ya(d),h--;for(;0<p-h;)m=Ya(m),p--;for(;h--;){if(d===m||null!==m&&d===m.alternate)break e;d=Ya(d),m=Ya(m)}d=null}else d=null;null!==i&&Ka(l,o,i,d,!1),null!==c&&null!==u&&Ka(l,u,c,d,!0)}if("select"===(i=(o=a?vn(a):window).nodeName&&o.nodeName.toLowerCase())||"input"===i&&"file"===o.type)var f=$r;else if(Hr(o))if(Gr)f=sa;else{f=aa;var g=ra}else(i=o.nodeName)&&"input"===i.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(f=na);switch(f&&(f=f(e,a))?Wr(l,f,r,n):(g&&g(e,o,a),"focusout"===e&&(g=o._wrapperState)&&g.controlled&&"number"===o.type&&ee(o,"number",o.value)),g=a?vn(a):window,e){case"focusin":(Hr(g)||"true"===g.contentEditable)&&(xa=g,fa=a,ga=null);break;case"focusout":ga=fa=xa=null;break;case"mousedown":ya=!0;break;case"contextmenu":case"mouseup":case"dragend":ya=!1,ba(l,r,n);break;case"selectionchange":if(ha)break;case"keydown":case"keyup":ba(l,r,n)}var y;if(Dr)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else qr?Br(e,r)&&(b="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(b="onCompositionStart");b&&(zr&&"ko"!==r.locale&&(qr||"onCompositionStart"!==b?"onCompositionEnd"===b&&qr&&(y=er()):(Zt="value"in(Qt=n)?Qt.value:Qt.textContent,qr=!0)),0<(g=Va(a,b)).length&&(b=new br(b,e,null,r,n),l.push({event:b,listeners:g}),y?b.data=y:null!==(y=Ir(r))&&(b.data=y))),(y=Or?function(e,t){switch(e){case"compositionend":return Ir(t);case"keypress":return 32!==t.which?null:(Mr=!0,Fr);case"textInput":return(e=t.data)===Fr&&Mr?null:e;default:return null}}(e,r):function(e,t){if(qr)return"compositionend"===e||!Dr&&Br(e,t)?(e=er(),Xt=Zt=Qt=null,qr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return zr&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(a=Va(a,"onBeforeInput")).length&&(n=new br("onBeforeInput","beforeinput",null,r,n),l.push({event:n,listeners:a}),n.data=y))}Fa(l,t)})}function Wa(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Va(e,t){for(var r=t+"Capture",a=[];null!==e;){var n=e,s=n.stateNode;5===n.tag&&null!==s&&(n=s,null!=(s=Le(e,r))&&a.unshift(Wa(e,s,n)),null!=(s=Le(e,t))&&a.push(Wa(e,s,n))),e=e.return}return a}function Ya(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ka(e,t,r,a,n){for(var s=t._reactName,l=[];null!==r&&r!==a;){var o=r,i=o.alternate,c=o.stateNode;if(null!==i&&i===a)break;5===o.tag&&null!==c&&(o=c,n?null!=(i=Le(r,s))&&l.unshift(Wa(r,i,o)):n||null!=(i=Le(r,s))&&l.push(Wa(r,i,o))),r=r.return}0!==l.length&&e.push({event:t,listeners:l})}var Ja=/\r\n?/g,$a=/\u0000|\uFFFD/g;function Ga(e){return("string"===typeof e?e:""+e).replace(Ja,"\n").replace($a,"")}function Qa(e,t,r){if(t=Ga(t),Ga(e)!==t&&r)throw Error(s(425))}function Za(){}var Xa=null,en=null;function tn(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var rn="function"===typeof setTimeout?setTimeout:void 0,an="function"===typeof clearTimeout?clearTimeout:void 0,nn="function"===typeof Promise?Promise:void 0,sn="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof nn?function(e){return nn.resolve(null).then(e).catch(ln)}:rn;function ln(e){setTimeout(function(){throw e})}function on(e,t){var r=t,a=0;do{var n=r.nextSibling;if(e.removeChild(r),n&&8===n.nodeType)if("/$"===(r=n.data)){if(0===a)return e.removeChild(n),void Ut(t);a--}else"$"!==r&&"$?"!==r&&"$!"!==r||a++;r=n}while(r);Ut(t)}function cn(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function dn(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var un=Math.random().toString(36).slice(2),mn="__reactFiber$"+un,pn="__reactProps$"+un,hn="__reactContainer$"+un,xn="__reactEvents$"+un,fn="__reactListeners$"+un,gn="__reactHandles$"+un;function yn(e){var t=e[mn];if(t)return t;for(var r=e.parentNode;r;){if(t=r[hn]||r[mn]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=dn(e);null!==e;){if(r=e[mn])return r;e=dn(e)}return t}r=(e=r).parentNode}return null}function bn(e){return!(e=e[mn]||e[hn])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function vn(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function jn(e){return e[pn]||null}var wn=[],Nn=-1;function _n(e){return{current:e}}function kn(e){0>Nn||(e.current=wn[Nn],wn[Nn]=null,Nn--)}function Sn(e,t){Nn++,wn[Nn]=e.current,e.current=t}var Cn={},En=_n(Cn),Pn=_n(!1),Rn=Cn;function Tn(e,t){var r=e.type.contextTypes;if(!r)return Cn;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var n,s={};for(n in r)s[n]=t[n];return a&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ln(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Dn(){kn(Pn),kn(En)}function An(e,t,r){if(En.current!==Cn)throw Error(s(168));Sn(En,t),Sn(Pn,r)}function On(e,t,r){var a=e.stateNode;if(t=t.childContextTypes,"function"!==typeof a.getChildContext)return r;for(var n in a=a.getChildContext())if(!(n in t))throw Error(s(108,H(e)||"Unknown",n));return F({},r,a)}function zn(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Cn,Rn=En.current,Sn(En,e),Sn(Pn,Pn.current),!0}function Fn(e,t,r){var a=e.stateNode;if(!a)throw Error(s(169));r?(e=On(e,t,Rn),a.__reactInternalMemoizedMergedChildContext=e,kn(Pn),kn(En),Sn(En,e)):kn(Pn),Sn(Pn,r)}var Mn=null,Bn=!1,In=!1;function qn(e){null===Mn?Mn=[e]:Mn.push(e)}function Un(){if(!In&&null!==Mn){In=!0;var e=0,t=bt;try{var r=Mn;for(bt=1;e<r.length;e++){var a=r[e];do{a=a(!0)}while(null!==a)}Mn=null,Bn=!1}catch(n){throw null!==Mn&&(Mn=Mn.slice(e+1)),Ke(Xe,Un),n}finally{bt=t,In=!1}}return null}var Hn=[],Wn=0,Vn=null,Yn=0,Kn=[],Jn=0,$n=null,Gn=1,Qn="";function Zn(e,t){Hn[Wn++]=Yn,Hn[Wn++]=Vn,Vn=e,Yn=t}function Xn(e,t,r){Kn[Jn++]=Gn,Kn[Jn++]=Qn,Kn[Jn++]=$n,$n=e;var a=Gn;e=Qn;var n=32-lt(a)-1;a&=~(1<<n),r+=1;var s=32-lt(t)+n;if(30<s){var l=n-n%5;s=(a&(1<<l)-1).toString(32),a>>=l,n-=l,Gn=1<<32-lt(t)+n|r<<n|a,Qn=s+e}else Gn=1<<s|r<<n|a,Qn=e}function es(e){null!==e.return&&(Zn(e,1),Xn(e,1,0))}function ts(e){for(;e===Vn;)Vn=Hn[--Wn],Hn[Wn]=null,Yn=Hn[--Wn],Hn[Wn]=null;for(;e===$n;)$n=Kn[--Jn],Kn[Jn]=null,Qn=Kn[--Jn],Kn[Jn]=null,Gn=Kn[--Jn],Kn[Jn]=null}var rs=null,as=null,ns=!1,ss=null;function ls(e,t){var r=Rc(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function os(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,rs=e,as=cn(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,rs=e,as=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==$n?{id:Gn,overflow:Qn}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Rc(18,null,null,0)).stateNode=t,r.return=e,e.child=r,rs=e,as=null,!0);default:return!1}}function is(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(ns){var t=as;if(t){var r=t;if(!os(e,t)){if(is(e))throw Error(s(418));t=cn(r.nextSibling);var a=rs;t&&os(e,t)?ls(a,r):(e.flags=-4097&e.flags|2,ns=!1,rs=e)}}else{if(is(e))throw Error(s(418));e.flags=-4097&e.flags|2,ns=!1,rs=e}}}function ds(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;rs=e}function us(e){if(e!==rs)return!1;if(!ns)return ds(e),ns=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!tn(e.type,e.memoizedProps)),t&&(t=as)){if(is(e))throw ms(),Error(s(418));for(;t;)ls(e,t),t=cn(t.nextSibling)}if(ds(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){as=cn(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}as=null}}else as=rs?cn(e.stateNode.nextSibling):null;return!0}function ms(){for(var e=as;e;)e=cn(e.nextSibling)}function ps(){as=rs=null,ns=!1}function hs(e){null===ss?ss=[e]:ss.push(e)}var xs=v.ReactCurrentBatchConfig;function fs(e,t,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(s(309));var a=r.stateNode}if(!a)throw Error(s(147,e));var n=a,l=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===l?t.ref:(t=function(e){var t=n.refs;null===e?delete t[l]:t[l]=e},t._stringRef=l,t)}if("string"!==typeof e)throw Error(s(284));if(!r._owner)throw Error(s(290,e))}return e}function gs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ys(e){return(0,e._init)(e._payload)}function bs(e){function t(t,r){if(e){var a=t.deletions;null===a?(t.deletions=[r],t.flags|=16):a.push(r)}}function r(r,a){if(!e)return null;for(;null!==a;)t(r,a),a=a.sibling;return null}function a(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function n(e,t){return(e=Lc(e,t)).index=0,e.sibling=null,e}function l(t,r,a){return t.index=a,e?null!==(a=t.alternate)?(a=a.index)<r?(t.flags|=2,r):a:(t.flags|=2,r):(t.flags|=1048576,r)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function i(e,t,r,a){return null===t||6!==t.tag?((t=zc(r,e.mode,a)).return=e,t):((t=n(t,r)).return=e,t)}function c(e,t,r,a){var s=r.type;return s===N?u(e,t,r.props.children,a,r.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===L&&ys(s)===t.type)?((a=n(t,r.props)).ref=fs(e,t,r),a.return=e,a):((a=Dc(r.type,r.key,r.props,null,e.mode,a)).ref=fs(e,t,r),a.return=e,a)}function d(e,t,r,a){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Fc(r,e.mode,a)).return=e,t):((t=n(t,r.children||[])).return=e,t)}function u(e,t,r,a,s){return null===t||7!==t.tag?((t=Ac(r,e.mode,a,s)).return=e,t):((t=n(t,r)).return=e,t)}function m(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=zc(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case j:return(r=Dc(t.type,t.key,t.props,null,e.mode,r)).ref=fs(e,null,t),r.return=e,r;case w:return(t=Fc(t,e.mode,r)).return=e,t;case L:return m(e,(0,t._init)(t._payload),r)}if(te(t)||O(t))return(t=Ac(t,e.mode,r,null)).return=e,t;gs(e,t)}return null}function p(e,t,r,a){var n=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r)return null!==n?null:i(e,t,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case j:return r.key===n?c(e,t,r,a):null;case w:return r.key===n?d(e,t,r,a):null;case L:return p(e,t,(n=r._init)(r._payload),a)}if(te(r)||O(r))return null!==n?null:u(e,t,r,a,null);gs(e,r)}return null}function h(e,t,r,a,n){if("string"===typeof a&&""!==a||"number"===typeof a)return i(t,e=e.get(r)||null,""+a,n);if("object"===typeof a&&null!==a){switch(a.$$typeof){case j:return c(t,e=e.get(null===a.key?r:a.key)||null,a,n);case w:return d(t,e=e.get(null===a.key?r:a.key)||null,a,n);case L:return h(e,t,r,(0,a._init)(a._payload),n)}if(te(a)||O(a))return u(t,e=e.get(r)||null,a,n,null);gs(t,a)}return null}function x(n,s,o,i){for(var c=null,d=null,u=s,x=s=0,f=null;null!==u&&x<o.length;x++){u.index>x?(f=u,u=null):f=u.sibling;var g=p(n,u,o[x],i);if(null===g){null===u&&(u=f);break}e&&u&&null===g.alternate&&t(n,u),s=l(g,s,x),null===d?c=g:d.sibling=g,d=g,u=f}if(x===o.length)return r(n,u),ns&&Zn(n,x),c;if(null===u){for(;x<o.length;x++)null!==(u=m(n,o[x],i))&&(s=l(u,s,x),null===d?c=u:d.sibling=u,d=u);return ns&&Zn(n,x),c}for(u=a(n,u);x<o.length;x++)null!==(f=h(u,n,x,o[x],i))&&(e&&null!==f.alternate&&u.delete(null===f.key?x:f.key),s=l(f,s,x),null===d?c=f:d.sibling=f,d=f);return e&&u.forEach(function(e){return t(n,e)}),ns&&Zn(n,x),c}function f(n,o,i,c){var d=O(i);if("function"!==typeof d)throw Error(s(150));if(null==(i=d.call(i)))throw Error(s(151));for(var u=d=null,x=o,f=o=0,g=null,y=i.next();null!==x&&!y.done;f++,y=i.next()){x.index>f?(g=x,x=null):g=x.sibling;var b=p(n,x,y.value,c);if(null===b){null===x&&(x=g);break}e&&x&&null===b.alternate&&t(n,x),o=l(b,o,f),null===u?d=b:u.sibling=b,u=b,x=g}if(y.done)return r(n,x),ns&&Zn(n,f),d;if(null===x){for(;!y.done;f++,y=i.next())null!==(y=m(n,y.value,c))&&(o=l(y,o,f),null===u?d=y:u.sibling=y,u=y);return ns&&Zn(n,f),d}for(x=a(n,x);!y.done;f++,y=i.next())null!==(y=h(x,n,f,y.value,c))&&(e&&null!==y.alternate&&x.delete(null===y.key?f:y.key),o=l(y,o,f),null===u?d=y:u.sibling=y,u=y);return e&&x.forEach(function(e){return t(n,e)}),ns&&Zn(n,f),d}return function e(a,s,l,i){if("object"===typeof l&&null!==l&&l.type===N&&null===l.key&&(l=l.props.children),"object"===typeof l&&null!==l){switch(l.$$typeof){case j:e:{for(var c=l.key,d=s;null!==d;){if(d.key===c){if((c=l.type)===N){if(7===d.tag){r(a,d.sibling),(s=n(d,l.props.children)).return=a,a=s;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===L&&ys(c)===d.type){r(a,d.sibling),(s=n(d,l.props)).ref=fs(a,d,l),s.return=a,a=s;break e}r(a,d);break}t(a,d),d=d.sibling}l.type===N?((s=Ac(l.props.children,a.mode,i,l.key)).return=a,a=s):((i=Dc(l.type,l.key,l.props,null,a.mode,i)).ref=fs(a,s,l),i.return=a,a=i)}return o(a);case w:e:{for(d=l.key;null!==s;){if(s.key===d){if(4===s.tag&&s.stateNode.containerInfo===l.containerInfo&&s.stateNode.implementation===l.implementation){r(a,s.sibling),(s=n(s,l.children||[])).return=a,a=s;break e}r(a,s);break}t(a,s),s=s.sibling}(s=Fc(l,a.mode,i)).return=a,a=s}return o(a);case L:return e(a,s,(d=l._init)(l._payload),i)}if(te(l))return x(a,s,l,i);if(O(l))return f(a,s,l,i);gs(a,l)}return"string"===typeof l&&""!==l||"number"===typeof l?(l=""+l,null!==s&&6===s.tag?(r(a,s.sibling),(s=n(s,l)).return=a,a=s):(r(a,s),(s=zc(l,a.mode,i)).return=a,a=s),o(a)):r(a,s)}}var vs=bs(!0),js=bs(!1),ws=_n(null),Ns=null,_s=null,ks=null;function Ss(){ks=_s=Ns=null}function Cs(e){var t=ws.current;kn(ws),e._currentValue=t}function Es(e,t,r){for(;null!==e;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==a&&(a.childLanes|=t)):null!==a&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===r)break;e=e.return}}function Ps(e,t){Ns=e,ks=_s=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bo=!0),e.firstContext=null)}function Rs(e){var t=e._currentValue;if(ks!==e)if(e={context:e,memoizedValue:t,next:null},null===_s){if(null===Ns)throw Error(s(308));_s=e,Ns.dependencies={lanes:0,firstContext:e}}else _s=_s.next=e;return t}var Ts=null;function Ls(e){null===Ts?Ts=[e]:Ts.push(e)}function Ds(e,t,r,a){var n=t.interleaved;return null===n?(r.next=r,Ls(t)):(r.next=n.next,n.next=r),t.interleaved=r,As(e,a)}function As(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var Os=!1;function zs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ms(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Bs(e,t,r){var a=e.updateQueue;if(null===a)return null;if(a=a.shared,0!==(2&Ci)){var n=a.pending;return null===n?t.next=t:(t.next=n.next,n.next=t),a.pending=t,As(e,r)}return null===(n=a.interleaved)?(t.next=t,Ls(a)):(t.next=n.next,n.next=t),a.interleaved=t,As(e,r)}function Is(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&r))){var a=t.lanes;r|=a&=e.pendingLanes,t.lanes=r,yt(e,r)}}function qs(e,t){var r=e.updateQueue,a=e.alternate;if(null!==a&&r===(a=a.updateQueue)){var n=null,s=null;if(null!==(r=r.firstBaseUpdate)){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===s?n=s=l:s=s.next=l,r=r.next}while(null!==r);null===s?n=s=t:s=s.next=t}else n=s=t;return r={baseState:a.baseState,firstBaseUpdate:n,lastBaseUpdate:s,shared:a.shared,effects:a.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Us(e,t,r,a){var n=e.updateQueue;Os=!1;var s=n.firstBaseUpdate,l=n.lastBaseUpdate,o=n.shared.pending;if(null!==o){n.shared.pending=null;var i=o,c=i.next;i.next=null,null===l?s=c:l.next=c,l=i;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==l&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=i))}if(null!==s){var u=n.baseState;for(l=0,d=c=i=null,o=s;;){var m=o.lane,p=o.eventTime;if((a&m)===m){null!==d&&(d=d.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var h=e,x=o;switch(m=t,p=r,x.tag){case 1:if("function"===typeof(h=x.payload)){u=h.call(p,u,m);break e}u=h;break e;case 3:h.flags=-65537&h.flags|128;case 0:if(null===(m="function"===typeof(h=x.payload)?h.call(p,u,m):h)||void 0===m)break e;u=F({},u,m);break e;case 2:Os=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(m=n.effects)?n.effects=[o]:m.push(o))}else p={eventTime:p,lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=p,i=u):d=d.next=p,l|=m;if(null===(o=o.next)){if(null===(o=n.shared.pending))break;o=(m=o).next,m.next=null,n.lastBaseUpdate=m,n.shared.pending=null}}if(null===d&&(i=u),n.baseState=i,n.firstBaseUpdate=c,n.lastBaseUpdate=d,null!==(t=n.shared.interleaved)){n=t;do{l|=n.lane,n=n.next}while(n!==t)}else null===s&&(n.shared.lanes=0);Oi|=l,e.lanes=l,e.memoizedState=u}}function Hs(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var a=e[t],n=a.callback;if(null!==n){if(a.callback=null,a=r,"function"!==typeof n)throw Error(s(191,n));n.call(a)}}}var Ws={},Vs=_n(Ws),Ys=_n(Ws),Ks=_n(Ws);function Js(e){if(e===Ws)throw Error(s(174));return e}function $s(e,t){switch(Sn(Ks,t),Sn(Ys,e),Sn(Vs,Ws),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ie(null,"");break;default:t=ie(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}kn(Vs),Sn(Vs,t)}function Gs(){kn(Vs),kn(Ys),kn(Ks)}function Qs(e){Js(Ks.current);var t=Js(Vs.current),r=ie(t,e.type);t!==r&&(Sn(Ys,e),Sn(Vs,r))}function Zs(e){Ys.current===e&&(kn(Vs),kn(Ys))}var Xs=_n(0);function el(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var tl=[];function rl(){for(var e=0;e<tl.length;e++)tl[e]._workInProgressVersionPrimary=null;tl.length=0}var al=v.ReactCurrentDispatcher,nl=v.ReactCurrentBatchConfig,sl=0,ll=null,ol=null,il=null,cl=!1,dl=!1,ul=0,ml=0;function pl(){throw Error(s(321))}function hl(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!la(e[r],t[r]))return!1;return!0}function xl(e,t,r,a,n,l){if(sl=l,ll=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,al.current=null===e||null===e.memoizedState?Zl:Xl,e=r(a,n),dl){l=0;do{if(dl=!1,ul=0,25<=l)throw Error(s(301));l+=1,il=ol=null,t.updateQueue=null,al.current=eo,e=r(a,n)}while(dl)}if(al.current=Ql,t=null!==ol&&null!==ol.next,sl=0,il=ol=ll=null,cl=!1,t)throw Error(s(300));return e}function fl(){var e=0!==ul;return ul=0,e}function gl(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===il?ll.memoizedState=il=e:il=il.next=e,il}function yl(){if(null===ol){var e=ll.alternate;e=null!==e?e.memoizedState:null}else e=ol.next;var t=null===il?ll.memoizedState:il.next;if(null!==t)il=t,ol=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ol=e).memoizedState,baseState:ol.baseState,baseQueue:ol.baseQueue,queue:ol.queue,next:null},null===il?ll.memoizedState=il=e:il=il.next=e}return il}function bl(e,t){return"function"===typeof t?t(e):t}function vl(e){var t=yl(),r=t.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=e;var a=ol,n=a.baseQueue,l=r.pending;if(null!==l){if(null!==n){var o=n.next;n.next=l.next,l.next=o}a.baseQueue=n=l,r.pending=null}if(null!==n){l=n.next,a=a.baseState;var i=o=null,c=null,d=l;do{var u=d.lane;if((sl&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),a=d.hasEagerState?d.eagerState:e(a,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(i=c=m,o=a):c=c.next=m,ll.lanes|=u,Oi|=u}d=d.next}while(null!==d&&d!==l);null===c?o=a:c.next=i,la(a,t.memoizedState)||(bo=!0),t.memoizedState=a,t.baseState=o,t.baseQueue=c,r.lastRenderedState=a}if(null!==(e=r.interleaved)){n=e;do{l=n.lane,ll.lanes|=l,Oi|=l,n=n.next}while(n!==e)}else null===n&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function jl(e){var t=yl(),r=t.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=e;var a=r.dispatch,n=r.pending,l=t.memoizedState;if(null!==n){r.pending=null;var o=n=n.next;do{l=e(l,o.action),o=o.next}while(o!==n);la(l,t.memoizedState)||(bo=!0),t.memoizedState=l,null===t.baseQueue&&(t.baseState=l),r.lastRenderedState=l}return[l,a]}function wl(){}function Nl(e,t){var r=ll,a=yl(),n=t(),l=!la(a.memoizedState,n);if(l&&(a.memoizedState=n,bo=!0),a=a.queue,Ol(Sl.bind(null,r,a,e),[e]),a.getSnapshot!==t||l||null!==il&&1&il.memoizedState.tag){if(r.flags|=2048,Rl(9,kl.bind(null,r,a,n,t),void 0,null),null===Ei)throw Error(s(349));0!==(30&sl)||_l(r,t,n)}return n}function _l(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=ll.updateQueue)?(t={lastEffect:null,stores:null},ll.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function kl(e,t,r,a){t.value=r,t.getSnapshot=a,Cl(t)&&El(e)}function Sl(e,t,r){return r(function(){Cl(t)&&El(e)})}function Cl(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!la(e,r)}catch(a){return!0}}function El(e){var t=As(e,1);null!==t&&tc(t,e,1,-1)}function Pl(e){var t=gl();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bl,lastRenderedState:e},t.queue=e,e=e.dispatch=Kl.bind(null,ll,e),[t.memoizedState,e]}function Rl(e,t,r,a){return e={tag:e,create:t,destroy:r,deps:a,next:null},null===(t=ll.updateQueue)?(t={lastEffect:null,stores:null},ll.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(a=r.next,r.next=e,e.next=a,t.lastEffect=e),e}function Tl(){return yl().memoizedState}function Ll(e,t,r,a){var n=gl();ll.flags|=e,n.memoizedState=Rl(1|t,r,void 0,void 0===a?null:a)}function Dl(e,t,r,a){var n=yl();a=void 0===a?null:a;var s=void 0;if(null!==ol){var l=ol.memoizedState;if(s=l.destroy,null!==a&&hl(a,l.deps))return void(n.memoizedState=Rl(t,r,s,a))}ll.flags|=e,n.memoizedState=Rl(1|t,r,s,a)}function Al(e,t){return Ll(8390656,8,e,t)}function Ol(e,t){return Dl(2048,8,e,t)}function zl(e,t){return Dl(4,2,e,t)}function Fl(e,t){return Dl(4,4,e,t)}function Ml(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Bl(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Dl(4,4,Ml.bind(null,t,e),r)}function Il(){}function ql(e,t){var r=yl();t=void 0===t?null:t;var a=r.memoizedState;return null!==a&&null!==t&&hl(t,a[1])?a[0]:(r.memoizedState=[e,t],e)}function Ul(e,t){var r=yl();t=void 0===t?null:t;var a=r.memoizedState;return null!==a&&null!==t&&hl(t,a[1])?a[0]:(e=e(),r.memoizedState=[e,t],e)}function Hl(e,t,r){return 0===(21&sl)?(e.baseState&&(e.baseState=!1,bo=!0),e.memoizedState=r):(la(r,t)||(r=xt(),ll.lanes|=r,Oi|=r,e.baseState=!0),t)}function Wl(e,t){var r=bt;bt=0!==r&&4>r?r:4,e(!0);var a=nl.transition;nl.transition={};try{e(!1),t()}finally{bt=r,nl.transition=a}}function Vl(){return yl().memoizedState}function Yl(e,t,r){var a=ec(e);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},Jl(e))$l(t,r);else if(null!==(r=Ds(e,t,r,a))){tc(r,e,a,Xi()),Gl(r,t,a)}}function Kl(e,t,r){var a=ec(e),n={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(Jl(e))$l(t,n);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var l=t.lastRenderedState,o=s(l,r);if(n.hasEagerState=!0,n.eagerState=o,la(o,l)){var i=t.interleaved;return null===i?(n.next=n,Ls(t)):(n.next=i.next,i.next=n),void(t.interleaved=n)}}catch(c){}null!==(r=Ds(e,t,n,a))&&(tc(r,e,a,n=Xi()),Gl(r,t,a))}}function Jl(e){var t=e.alternate;return e===ll||null!==t&&t===ll}function $l(e,t){dl=cl=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Gl(e,t,r){if(0!==(4194240&r)){var a=t.lanes;r|=a&=e.pendingLanes,t.lanes=r,yt(e,r)}}var Ql={readContext:Rs,useCallback:pl,useContext:pl,useEffect:pl,useImperativeHandle:pl,useInsertionEffect:pl,useLayoutEffect:pl,useMemo:pl,useReducer:pl,useRef:pl,useState:pl,useDebugValue:pl,useDeferredValue:pl,useTransition:pl,useMutableSource:pl,useSyncExternalStore:pl,useId:pl,unstable_isNewReconciler:!1},Zl={readContext:Rs,useCallback:function(e,t){return gl().memoizedState=[e,void 0===t?null:t],e},useContext:Rs,useEffect:Al,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Ll(4194308,4,Ml.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ll(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ll(4,2,e,t)},useMemo:function(e,t){var r=gl();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var a=gl();return t=void 0!==r?r(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=Yl.bind(null,ll,e),[a.memoizedState,e]},useRef:function(e){return e={current:e},gl().memoizedState=e},useState:Pl,useDebugValue:Il,useDeferredValue:function(e){return gl().memoizedState=e},useTransition:function(){var e=Pl(!1),t=e[0];return e=Wl.bind(null,e[1]),gl().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var a=ll,n=gl();if(ns){if(void 0===r)throw Error(s(407));r=r()}else{if(r=t(),null===Ei)throw Error(s(349));0!==(30&sl)||_l(a,t,r)}n.memoizedState=r;var l={value:r,getSnapshot:t};return n.queue=l,Al(Sl.bind(null,a,l,e),[e]),a.flags|=2048,Rl(9,kl.bind(null,a,l,r,t),void 0,null),r},useId:function(){var e=gl(),t=Ei.identifierPrefix;if(ns){var r=Qn;t=":"+t+"R"+(r=(Gn&~(1<<32-lt(Gn)-1)).toString(32)+r),0<(r=ul++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=ml++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Xl={readContext:Rs,useCallback:ql,useContext:Rs,useEffect:Ol,useImperativeHandle:Bl,useInsertionEffect:zl,useLayoutEffect:Fl,useMemo:Ul,useReducer:vl,useRef:Tl,useState:function(){return vl(bl)},useDebugValue:Il,useDeferredValue:function(e){return Hl(yl(),ol.memoizedState,e)},useTransition:function(){return[vl(bl)[0],yl().memoizedState]},useMutableSource:wl,useSyncExternalStore:Nl,useId:Vl,unstable_isNewReconciler:!1},eo={readContext:Rs,useCallback:ql,useContext:Rs,useEffect:Ol,useImperativeHandle:Bl,useInsertionEffect:zl,useLayoutEffect:Fl,useMemo:Ul,useReducer:jl,useRef:Tl,useState:function(){return jl(bl)},useDebugValue:Il,useDeferredValue:function(e){var t=yl();return null===ol?t.memoizedState=e:Hl(t,ol.memoizedState,e)},useTransition:function(){return[jl(bl)[0],yl().memoizedState]},useMutableSource:wl,useSyncExternalStore:Nl,useId:Vl,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var r in t=F({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}function ro(e,t,r,a){r=null===(r=r(a,t=e.memoizedState))||void 0===r?t:F({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var ao={isMounted:function(e){return!!(e=e._reactInternals)&&Ue(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var a=Xi(),n=ec(e),s=Ms(a,n);s.payload=t,void 0!==r&&null!==r&&(s.callback=r),null!==(t=Bs(e,s,n))&&(tc(t,e,n,a),Is(t,e,n))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var a=Xi(),n=ec(e),s=Ms(a,n);s.tag=1,s.payload=t,void 0!==r&&null!==r&&(s.callback=r),null!==(t=Bs(e,s,n))&&(tc(t,e,n,a),Is(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Xi(),a=ec(e),n=Ms(r,a);n.tag=2,void 0!==t&&null!==t&&(n.callback=t),null!==(t=Bs(e,n,a))&&(tc(t,e,a,r),Is(t,e,a))}};function no(e,t,r,a,n,s,l){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(a,s,l):!t.prototype||!t.prototype.isPureReactComponent||(!oa(r,a)||!oa(n,s))}function so(e,t,r){var a=!1,n=Cn,s=t.contextType;return"object"===typeof s&&null!==s?s=Rs(s):(n=Ln(t)?Rn:En.current,s=(a=null!==(a=t.contextTypes)&&void 0!==a)?Tn(e,n):Cn),t=new t(r,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ao,e.stateNode=t,t._reactInternals=e,a&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=s),t}function lo(e,t,r,a){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,a),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,a),t.state!==e&&ao.enqueueReplaceState(t,t.state,null)}function oo(e,t,r,a){var n=e.stateNode;n.props=r,n.state=e.memoizedState,n.refs={},zs(e);var s=t.contextType;"object"===typeof s&&null!==s?n.context=Rs(s):(s=Ln(t)?Rn:En.current,n.context=Tn(e,s)),n.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ro(e,t,s,r),n.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof n.getSnapshotBeforeUpdate||"function"!==typeof n.UNSAFE_componentWillMount&&"function"!==typeof n.componentWillMount||(t=n.state,"function"===typeof n.componentWillMount&&n.componentWillMount(),"function"===typeof n.UNSAFE_componentWillMount&&n.UNSAFE_componentWillMount(),t!==n.state&&ao.enqueueReplaceState(n,n.state,null),Us(e,r,n,a),n.state=e.memoizedState),"function"===typeof n.componentDidMount&&(e.flags|=4194308)}function io(e,t){try{var r="",a=t;do{r+=q(a),a=a.return}while(a);var n=r}catch(s){n="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:n,digest:null}}function co(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var mo="function"===typeof WeakMap?WeakMap:Map;function po(e,t,r){(r=Ms(-1,r)).tag=3,r.payload={element:null};var a=t.value;return r.callback=function(){Hi||(Hi=!0,Wi=a),uo(0,t)},r}function ho(e,t,r){(r=Ms(-1,r)).tag=3;var a=e.type.getDerivedStateFromError;if("function"===typeof a){var n=t.value;r.payload=function(){return a(n)},r.callback=function(){uo(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(r.callback=function(){uo(0,t),"function"!==typeof a&&(null===Vi?Vi=new Set([this]):Vi.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function xo(e,t,r){var a=e.pingCache;if(null===a){a=e.pingCache=new mo;var n=new Set;a.set(t,n)}else void 0===(n=a.get(t))&&(n=new Set,a.set(t,n));n.has(r)||(n.add(r),e=_c.bind(null,e,t,r),t.then(e,e))}function fo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function go(e,t,r,a,n){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=Ms(-1,1)).tag=2,Bs(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=n,e)}var yo=v.ReactCurrentOwner,bo=!1;function vo(e,t,r,a){t.child=null===e?js(t,null,r,a):vs(t,e.child,r,a)}function jo(e,t,r,a,n){r=r.render;var s=t.ref;return Ps(t,n),a=xl(e,t,r,a,s,n),r=fl(),null===e||bo?(ns&&r&&es(t),t.flags|=1,vo(e,t,a,n),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Ho(e,t,n))}function wo(e,t,r,a,n){if(null===e){var s=r.type;return"function"!==typeof s||Tc(s)||void 0!==s.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Dc(r.type,null,a,t,t.mode,n)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,No(e,t,s,a,n))}if(s=e.child,0===(e.lanes&n)){var l=s.memoizedProps;if((r=null!==(r=r.compare)?r:oa)(l,a)&&e.ref===t.ref)return Ho(e,t,n)}return t.flags|=1,(e=Lc(s,a)).ref=t.ref,e.return=t,t.child=e}function No(e,t,r,a,n){if(null!==e){var s=e.memoizedProps;if(oa(s,a)&&e.ref===t.ref){if(bo=!1,t.pendingProps=a=s,0===(e.lanes&n))return t.lanes=e.lanes,Ho(e,t,n);0!==(131072&e.flags)&&(bo=!0)}}return So(e,t,r,a,n)}function _o(e,t,r){var a=t.pendingProps,n=a.children,s=null!==e?e.memoizedState:null;if("hidden"===a.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Sn(Li,Ti),Ti|=r;else{if(0===(1073741824&r))return e=null!==s?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Sn(Li,Ti),Ti|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=null!==s?s.baseLanes:r,Sn(Li,Ti),Ti|=a}else null!==s?(a=s.baseLanes|r,t.memoizedState=null):a=r,Sn(Li,Ti),Ti|=a;return vo(e,t,n,r),t.child}function ko(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function So(e,t,r,a,n){var s=Ln(r)?Rn:En.current;return s=Tn(t,s),Ps(t,n),r=xl(e,t,r,a,s,n),a=fl(),null===e||bo?(ns&&a&&es(t),t.flags|=1,vo(e,t,r,n),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Ho(e,t,n))}function Co(e,t,r,a,n){if(Ln(r)){var s=!0;zn(t)}else s=!1;if(Ps(t,n),null===t.stateNode)Uo(e,t),so(t,r,a),oo(t,r,a,n),a=!0;else if(null===e){var l=t.stateNode,o=t.memoizedProps;l.props=o;var i=l.context,c=r.contextType;"object"===typeof c&&null!==c?c=Rs(c):c=Tn(t,c=Ln(r)?Rn:En.current);var d=r.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof l.getSnapshotBeforeUpdate;u||"function"!==typeof l.UNSAFE_componentWillReceiveProps&&"function"!==typeof l.componentWillReceiveProps||(o!==a||i!==c)&&lo(t,l,a,c),Os=!1;var m=t.memoizedState;l.state=m,Us(t,a,l,n),i=t.memoizedState,o!==a||m!==i||Pn.current||Os?("function"===typeof d&&(ro(t,r,d,a),i=t.memoizedState),(o=Os||no(t,r,o,a,m,i,c))?(u||"function"!==typeof l.UNSAFE_componentWillMount&&"function"!==typeof l.componentWillMount||("function"===typeof l.componentWillMount&&l.componentWillMount(),"function"===typeof l.UNSAFE_componentWillMount&&l.UNSAFE_componentWillMount()),"function"===typeof l.componentDidMount&&(t.flags|=4194308)):("function"===typeof l.componentDidMount&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=i),l.props=a,l.state=i,l.context=c,a=o):("function"===typeof l.componentDidMount&&(t.flags|=4194308),a=!1)}else{l=t.stateNode,Fs(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),l.props=c,u=t.pendingProps,m=l.context,"object"===typeof(i=r.contextType)&&null!==i?i=Rs(i):i=Tn(t,i=Ln(r)?Rn:En.current);var p=r.getDerivedStateFromProps;(d="function"===typeof p||"function"===typeof l.getSnapshotBeforeUpdate)||"function"!==typeof l.UNSAFE_componentWillReceiveProps&&"function"!==typeof l.componentWillReceiveProps||(o!==u||m!==i)&&lo(t,l,a,i),Os=!1,m=t.memoizedState,l.state=m,Us(t,a,l,n);var h=t.memoizedState;o!==u||m!==h||Pn.current||Os?("function"===typeof p&&(ro(t,r,p,a),h=t.memoizedState),(c=Os||no(t,r,c,a,m,h,i)||!1)?(d||"function"!==typeof l.UNSAFE_componentWillUpdate&&"function"!==typeof l.componentWillUpdate||("function"===typeof l.componentWillUpdate&&l.componentWillUpdate(a,h,i),"function"===typeof l.UNSAFE_componentWillUpdate&&l.UNSAFE_componentWillUpdate(a,h,i)),"function"===typeof l.componentDidUpdate&&(t.flags|=4),"function"===typeof l.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof l.componentDidUpdate||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),"function"!==typeof l.getSnapshotBeforeUpdate||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=h),l.props=a,l.state=h,l.context=i,a=c):("function"!==typeof l.componentDidUpdate||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),"function"!==typeof l.getSnapshotBeforeUpdate||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),a=!1)}return Eo(e,t,r,a,s,n)}function Eo(e,t,r,a,n,s){ko(e,t);var l=0!==(128&t.flags);if(!a&&!l)return n&&Fn(t,r,!1),Ho(e,t,s);a=t.stateNode,yo.current=t;var o=l&&"function"!==typeof r.getDerivedStateFromError?null:a.render();return t.flags|=1,null!==e&&l?(t.child=vs(t,e.child,null,s),t.child=vs(t,null,o,s)):vo(e,t,o,s),t.memoizedState=a.state,n&&Fn(t,r,!0),t.child}function Po(e){var t=e.stateNode;t.pendingContext?An(0,t.pendingContext,t.pendingContext!==t.context):t.context&&An(0,t.context,!1),$s(e,t.containerInfo)}function Ro(e,t,r,a,n){return ps(),hs(n),t.flags|=256,vo(e,t,r,a),t.child}var To,Lo,Do,Ao={dehydrated:null,treeContext:null,retryLane:0};function Oo(e){return{baseLanes:e,cachePool:null,transitions:null}}function zo(e,t,r){var a,n=t.pendingProps,l=Xs.current,o=!1,i=0!==(128&t.flags);if((a=i)||(a=(null===e||null!==e.memoizedState)&&0!==(2&l)),a?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(l|=1),Sn(Xs,1&l),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(i=n.children,e=n.fallback,o?(n=t.mode,o=t.child,i={mode:"hidden",children:i},0===(1&n)&&null!==o?(o.childLanes=0,o.pendingProps=i):o=Oc(i,n,0,null),e=Ac(e,n,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Oo(r),t.memoizedState=Ao,e):Fo(t,i));if(null!==(l=e.memoizedState)&&null!==(a=l.dehydrated))return function(e,t,r,a,n,l,o){if(r)return 256&t.flags?(t.flags&=-257,Mo(e,t,o,a=co(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(l=a.fallback,n=t.mode,a=Oc({mode:"visible",children:a.children},n,0,null),(l=Ac(l,n,o,null)).flags|=2,a.return=t,l.return=t,a.sibling=l,t.child=a,0!==(1&t.mode)&&vs(t,e.child,null,o),t.child.memoizedState=Oo(o),t.memoizedState=Ao,l);if(0===(1&t.mode))return Mo(e,t,o,null);if("$!"===n.data){if(a=n.nextSibling&&n.nextSibling.dataset)var i=a.dgst;return a=i,Mo(e,t,o,a=co(l=Error(s(419)),a,void 0))}if(i=0!==(o&e.childLanes),bo||i){if(null!==(a=Ei)){switch(o&-o){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}0!==(n=0!==(n&(a.suspendedLanes|o))?0:n)&&n!==l.retryLane&&(l.retryLane=n,As(e,n),tc(a,e,n,-1))}return hc(),Mo(e,t,o,a=co(Error(s(421))))}return"$?"===n.data?(t.flags|=128,t.child=e.child,t=Sc.bind(null,e),n._reactRetry=t,null):(e=l.treeContext,as=cn(n.nextSibling),rs=t,ns=!0,ss=null,null!==e&&(Kn[Jn++]=Gn,Kn[Jn++]=Qn,Kn[Jn++]=$n,Gn=e.id,Qn=e.overflow,$n=t),t=Fo(t,a.children),t.flags|=4096,t)}(e,t,i,n,a,l,r);if(o){o=n.fallback,i=t.mode,a=(l=e.child).sibling;var c={mode:"hidden",children:n.children};return 0===(1&i)&&t.child!==l?((n=t.child).childLanes=0,n.pendingProps=c,t.deletions=null):(n=Lc(l,c)).subtreeFlags=14680064&l.subtreeFlags,null!==a?o=Lc(a,o):(o=Ac(o,i,r,null)).flags|=2,o.return=t,n.return=t,n.sibling=o,t.child=n,n=o,o=t.child,i=null===(i=e.child.memoizedState)?Oo(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=e.childLanes&~r,t.memoizedState=Ao,n}return e=(o=e.child).sibling,n=Lc(o,{mode:"visible",children:n.children}),0===(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Fo(e,t){return(t=Oc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Mo(e,t,r,a){return null!==a&&hs(a),vs(t,e.child,null,r),(e=Fo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bo(e,t,r){e.lanes|=t;var a=e.alternate;null!==a&&(a.lanes|=t),Es(e.return,t,r)}function Io(e,t,r,a,n){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:n}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=a,s.tail=r,s.tailMode=n)}function qo(e,t,r){var a=t.pendingProps,n=a.revealOrder,s=a.tail;if(vo(e,t,a.children,r),0!==(2&(a=Xs.current)))a=1&a|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bo(e,r,t);else if(19===e.tag)Bo(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Sn(Xs,a),0===(1&t.mode))t.memoizedState=null;else switch(n){case"forwards":for(r=t.child,n=null;null!==r;)null!==(e=r.alternate)&&null===el(e)&&(n=r),r=r.sibling;null===(r=n)?(n=t.child,t.child=null):(n=r.sibling,r.sibling=null),Io(t,!1,n,r,s);break;case"backwards":for(r=null,n=t.child,t.child=null;null!==n;){if(null!==(e=n.alternate)&&null===el(e)){t.child=n;break}e=n.sibling,n.sibling=r,r=n,n=e}Io(t,!0,r,null,s);break;case"together":Io(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Uo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ho(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Oi|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(r=Lc(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Lc(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Wo(e,t){if(!ns)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var a=null;null!==r;)null!==r.alternate&&(a=r),r=r.sibling;null===a?t||null===e.tail?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Vo(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,a=0;if(t)for(var n=e.child;null!==n;)r|=n.lanes|n.childLanes,a|=14680064&n.subtreeFlags,a|=14680064&n.flags,n.return=e,n=n.sibling;else for(n=e.child;null!==n;)r|=n.lanes|n.childLanes,a|=n.subtreeFlags,a|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=a,e.childLanes=r,t}function Yo(e,t,r){var a=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vo(t),null;case 1:case 17:return Ln(t.type)&&Dn(),Vo(t),null;case 3:return a=t.stateNode,Gs(),kn(Pn),kn(En),rl(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),null!==e&&null!==e.child||(us(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(sc(ss),ss=null))),Vo(t),null;case 5:Zs(t);var n=Js(Ks.current);if(r=t.type,null!==e&&null!=t.stateNode)Lo(e,t,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(null===t.stateNode)throw Error(s(166));return Vo(t),null}if(e=Js(Vs.current),us(t)){a=t.stateNode,r=t.type;var l=t.memoizedProps;switch(a[mn]=t,a[pn]=l,e=0!==(1&t.mode),r){case"dialog":Ma("cancel",a),Ma("close",a);break;case"iframe":case"object":case"embed":Ma("load",a);break;case"video":case"audio":for(n=0;n<Aa.length;n++)Ma(Aa[n],a);break;case"source":Ma("error",a);break;case"img":case"image":case"link":Ma("error",a),Ma("load",a);break;case"details":Ma("toggle",a);break;case"input":G(a,l),Ma("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!l.multiple},Ma("invalid",a);break;case"textarea":ne(a,l),Ma("invalid",a)}for(var i in ye(r,l),n=null,l)if(l.hasOwnProperty(i)){var c=l[i];"children"===i?"string"===typeof c?a.textContent!==c&&(!0!==l.suppressHydrationWarning&&Qa(a.textContent,c,e),n=["children",c]):"number"===typeof c&&a.textContent!==""+c&&(!0!==l.suppressHydrationWarning&&Qa(a.textContent,c,e),n=["children",""+c]):o.hasOwnProperty(i)&&null!=c&&"onScroll"===i&&Ma("scroll",a)}switch(r){case"input":Y(a),X(a,l,!0);break;case"textarea":Y(a),le(a);break;case"select":case"option":break;default:"function"===typeof l.onClick&&(a.onclick=Za)}a=n,t.updateQueue=a,null!==a&&(t.flags|=4)}else{i=9===n.nodeType?n:n.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof a.is?e=i.createElement(r,{is:a.is}):(e=i.createElement(r),"select"===r&&(i=e,a.multiple?i.multiple=!0:a.size&&(i.size=a.size))):e=i.createElementNS(e,r),e[mn]=t,e[pn]=a,To(e,t),t.stateNode=e;e:{switch(i=be(r,a),r){case"dialog":Ma("cancel",e),Ma("close",e),n=a;break;case"iframe":case"object":case"embed":Ma("load",e),n=a;break;case"video":case"audio":for(n=0;n<Aa.length;n++)Ma(Aa[n],e);n=a;break;case"source":Ma("error",e),n=a;break;case"img":case"image":case"link":Ma("error",e),Ma("load",e),n=a;break;case"details":Ma("toggle",e),n=a;break;case"input":G(e,a),n=$(e,a),Ma("invalid",e);break;case"option":default:n=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},n=F({},a,{value:void 0}),Ma("invalid",e);break;case"textarea":ne(e,a),n=ae(e,a),Ma("invalid",e)}for(l in ye(r,n),c=n)if(c.hasOwnProperty(l)){var d=c[l];"style"===l?fe(e,d):"dangerouslySetInnerHTML"===l?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===l?"string"===typeof d?("textarea"!==r||""!==d)&&me(e,d):"number"===typeof d&&me(e,""+d):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(o.hasOwnProperty(l)?null!=d&&"onScroll"===l&&Ma("scroll",e):null!=d&&b(e,l,d,i))}switch(r){case"input":Y(e),X(e,a,!1);break;case"textarea":Y(e),le(e);break;case"option":null!=a.value&&e.setAttribute("value",""+W(a.value));break;case"select":e.multiple=!!a.multiple,null!=(l=a.value)?re(e,!!a.multiple,l,!1):null!=a.defaultValue&&re(e,!!a.multiple,a.defaultValue,!0);break;default:"function"===typeof n.onClick&&(e.onclick=Za)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Vo(t),null;case 6:if(e&&null!=t.stateNode)Do(0,t,e.memoizedProps,a);else{if("string"!==typeof a&&null===t.stateNode)throw Error(s(166));if(r=Js(Ks.current),Js(Vs.current),us(t)){if(a=t.stateNode,r=t.memoizedProps,a[mn]=t,(l=a.nodeValue!==r)&&null!==(e=rs))switch(e.tag){case 3:Qa(a.nodeValue,r,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qa(a.nodeValue,r,0!==(1&e.mode))}l&&(t.flags|=4)}else(a=(9===r.nodeType?r:r.ownerDocument).createTextNode(a))[mn]=t,t.stateNode=a}return Vo(t),null;case 13:if(kn(Xs),a=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ns&&null!==as&&0!==(1&t.mode)&&0===(128&t.flags))ms(),ps(),t.flags|=98560,l=!1;else if(l=us(t),null!==a&&null!==a.dehydrated){if(null===e){if(!l)throw Error(s(318));if(!(l=null!==(l=t.memoizedState)?l.dehydrated:null))throw Error(s(317));l[mn]=t}else ps(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Vo(t),l=!1}else null!==ss&&(sc(ss),ss=null),l=!0;if(!l)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=r,t):((a=null!==a)!==(null!==e&&null!==e.memoizedState)&&a&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Xs.current)?0===Di&&(Di=3):hc())),null!==t.updateQueue&&(t.flags|=4),Vo(t),null);case 4:return Gs(),null===e&&qa(t.stateNode.containerInfo),Vo(t),null;case 10:return Cs(t.type._context),Vo(t),null;case 19:if(kn(Xs),null===(l=t.memoizedState))return Vo(t),null;if(a=0!==(128&t.flags),null===(i=l.rendering))if(a)Wo(l,!1);else{if(0!==Di||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(i=el(e))){for(t.flags|=128,Wo(l,!1),null!==(a=i.updateQueue)&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=r,r=t.child;null!==r;)e=a,(l=r).flags&=14680066,null===(i=l.alternate)?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,l.type=i.type,e=i.dependencies,l.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Sn(Xs,1&Xs.current|2),t.child}e=e.sibling}null!==l.tail&&Qe()>qi&&(t.flags|=128,a=!0,Wo(l,!1),t.lanes=4194304)}else{if(!a)if(null!==(e=el(i))){if(t.flags|=128,a=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Wo(l,!0),null===l.tail&&"hidden"===l.tailMode&&!i.alternate&&!ns)return Vo(t),null}else 2*Qe()-l.renderingStartTime>qi&&1073741824!==r&&(t.flags|=128,a=!0,Wo(l,!1),t.lanes=4194304);l.isBackwards?(i.sibling=t.child,t.child=i):(null!==(r=l.last)?r.sibling=i:t.child=i,l.last=i)}return null!==l.tail?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Qe(),t.sibling=null,r=Xs.current,Sn(Xs,a?1&r|2:1&r),t):(Vo(t),null);case 22:case 23:return dc(),a=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==a&&(t.flags|=8192),a&&0!==(1&t.mode)?0!==(1073741824&Ti)&&(Vo(t),6&t.subtreeFlags&&(t.flags|=8192)):Vo(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ko(e,t){switch(ts(t),t.tag){case 1:return Ln(t.type)&&Dn(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Gs(),kn(Pn),kn(En),rl(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zs(t),null;case 13:if(kn(Xs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ps()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return kn(Xs),null;case 4:return Gs(),null;case 10:return Cs(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}To=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Lo=function(e,t,r,a){var n=e.memoizedProps;if(n!==a){e=t.stateNode,Js(Vs.current);var s,l=null;switch(r){case"input":n=$(e,n),a=$(e,a),l=[];break;case"select":n=F({},n,{value:void 0}),a=F({},a,{value:void 0}),l=[];break;case"textarea":n=ae(e,n),a=ae(e,a),l=[];break;default:"function"!==typeof n.onClick&&"function"===typeof a.onClick&&(e.onclick=Za)}for(d in ye(r,a),r=null,n)if(!a.hasOwnProperty(d)&&n.hasOwnProperty(d)&&null!=n[d])if("style"===d){var i=n[d];for(s in i)i.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(o.hasOwnProperty(d)?l||(l=[]):(l=l||[]).push(d,null));for(d in a){var c=a[d];if(i=null!=n?n[d]:void 0,a.hasOwnProperty(d)&&c!==i&&(null!=c||null!=i))if("style"===d)if(i){for(s in i)!i.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in c)c.hasOwnProperty(s)&&i[s]!==c[s]&&(r||(r={}),r[s]=c[s])}else r||(l||(l=[]),l.push(d,r)),r=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,i=i?i.__html:void 0,null!=c&&i!==c&&(l=l||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(l=l||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(o.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Ma("scroll",e),l||i===c||(l=[])):(l=l||[]).push(d,c))}r&&(l=l||[]).push("style",r);var d=l;(t.updateQueue=d)&&(t.flags|=4)}},Do=function(e,t,r,a){r!==a&&(t.flags|=4)};var Jo=!1,$o=!1,Go="function"===typeof WeakSet?WeakSet:Set,Qo=null;function Zo(e,t){var r=e.ref;if(null!==r)if("function"===typeof r)try{r(null)}catch(a){Nc(e,t,a)}else r.current=null}function Xo(e,t,r){try{r()}catch(a){Nc(e,t,a)}}var ei=!1;function ti(e,t,r){var a=t.updateQueue;if(null!==(a=null!==a?a.lastEffect:null)){var n=a=a.next;do{if((n.tag&e)===e){var s=n.destroy;n.destroy=void 0,void 0!==s&&Xo(t,r,s)}n=n.next}while(n!==a)}}function ri(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var a=r.create;r.destroy=a()}r=r.next}while(r!==t)}}function ai(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"===typeof t?t(e):t.current=e}}function ni(e){var t=e.alternate;null!==t&&(e.alternate=null,ni(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[mn],delete t[pn],delete t[xn],delete t[fn],delete t[gn])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function si(e){return 5===e.tag||3===e.tag||4===e.tag}function li(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||si(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function oi(e,t,r){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=Za));else if(4!==a&&null!==(e=e.child))for(oi(e,t,r),e=e.sibling;null!==e;)oi(e,t,r),e=e.sibling}function ii(e,t,r){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==a&&null!==(e=e.child))for(ii(e,t,r),e=e.sibling;null!==e;)ii(e,t,r),e=e.sibling}var ci=null,di=!1;function ui(e,t,r){for(r=r.child;null!==r;)mi(e,t,r),r=r.sibling}function mi(e,t,r){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(nt,r)}catch(o){}switch(r.tag){case 5:$o||Zo(r,t);case 6:var a=ci,n=di;ci=null,ui(e,t,r),di=n,null!==(ci=a)&&(di?(e=ci,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):ci.removeChild(r.stateNode));break;case 18:null!==ci&&(di?(e=ci,r=r.stateNode,8===e.nodeType?on(e.parentNode,r):1===e.nodeType&&on(e,r),Ut(e)):on(ci,r.stateNode));break;case 4:a=ci,n=di,ci=r.stateNode.containerInfo,di=!0,ui(e,t,r),ci=a,di=n;break;case 0:case 11:case 14:case 15:if(!$o&&(null!==(a=r.updateQueue)&&null!==(a=a.lastEffect))){n=a=a.next;do{var s=n,l=s.destroy;s=s.tag,void 0!==l&&(0!==(2&s)||0!==(4&s))&&Xo(r,t,l),n=n.next}while(n!==a)}ui(e,t,r);break;case 1:if(!$o&&(Zo(r,t),"function"===typeof(a=r.stateNode).componentWillUnmount))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(o){Nc(r,t,o)}ui(e,t,r);break;case 21:ui(e,t,r);break;case 22:1&r.mode?($o=(a=$o)||null!==r.memoizedState,ui(e,t,r),$o=a):ui(e,t,r);break;default:ui(e,t,r)}}function pi(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Go),t.forEach(function(t){var a=Cc.bind(null,e,t);r.has(t)||(r.add(t),t.then(a,a))})}}function hi(e,t){var r=t.deletions;if(null!==r)for(var a=0;a<r.length;a++){var n=r[a];try{var l=e,o=t,i=o;e:for(;null!==i;){switch(i.tag){case 5:ci=i.stateNode,di=!1;break e;case 3:case 4:ci=i.stateNode.containerInfo,di=!0;break e}i=i.return}if(null===ci)throw Error(s(160));mi(l,o,n),ci=null,di=!1;var c=n.alternate;null!==c&&(c.return=null),n.return=null}catch(d){Nc(n,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)xi(t,e),t=t.sibling}function xi(e,t){var r=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(hi(t,e),fi(e),4&a){try{ti(3,e,e.return),ri(3,e)}catch(f){Nc(e,e.return,f)}try{ti(5,e,e.return)}catch(f){Nc(e,e.return,f)}}break;case 1:hi(t,e),fi(e),512&a&&null!==r&&Zo(r,r.return);break;case 5:if(hi(t,e),fi(e),512&a&&null!==r&&Zo(r,r.return),32&e.flags){var n=e.stateNode;try{me(n,"")}catch(f){Nc(e,e.return,f)}}if(4&a&&null!=(n=e.stateNode)){var l=e.memoizedProps,o=null!==r?r.memoizedProps:l,i=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===i&&"radio"===l.type&&null!=l.name&&Q(n,l),be(i,o);var d=be(i,l);for(o=0;o<c.length;o+=2){var u=c[o],m=c[o+1];"style"===u?fe(n,m):"dangerouslySetInnerHTML"===u?ue(n,m):"children"===u?me(n,m):b(n,u,m,d)}switch(i){case"input":Z(n,l);break;case"textarea":se(n,l);break;case"select":var p=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!l.multiple;var h=l.value;null!=h?re(n,!!l.multiple,h,!1):p!==!!l.multiple&&(null!=l.defaultValue?re(n,!!l.multiple,l.defaultValue,!0):re(n,!!l.multiple,l.multiple?[]:"",!1))}n[pn]=l}catch(f){Nc(e,e.return,f)}}break;case 6:if(hi(t,e),fi(e),4&a){if(null===e.stateNode)throw Error(s(162));n=e.stateNode,l=e.memoizedProps;try{n.nodeValue=l}catch(f){Nc(e,e.return,f)}}break;case 3:if(hi(t,e),fi(e),4&a&&null!==r&&r.memoizedState.isDehydrated)try{Ut(t.containerInfo)}catch(f){Nc(e,e.return,f)}break;case 4:default:hi(t,e),fi(e);break;case 13:hi(t,e),fi(e),8192&(n=e.child).flags&&(l=null!==n.memoizedState,n.stateNode.isHidden=l,!l||null!==n.alternate&&null!==n.alternate.memoizedState||(Ii=Qe())),4&a&&pi(e);break;case 22:if(u=null!==r&&null!==r.memoizedState,1&e.mode?($o=(d=$o)||u,hi(t,e),$o=d):hi(t,e),fi(e),8192&a){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Qo=e,u=e.child;null!==u;){for(m=Qo=u;null!==Qo;){switch(h=(p=Qo).child,p.tag){case 0:case 11:case 14:case 15:ti(4,p,p.return);break;case 1:Zo(p,p.return);var x=p.stateNode;if("function"===typeof x.componentWillUnmount){a=p,r=p.return;try{t=a,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(f){Nc(a,r,f)}}break;case 5:Zo(p,p.return);break;case 22:if(null!==p.memoizedState){vi(m);continue}}null!==h?(h.return=p,Qo=h):vi(m)}u=u.sibling}e:for(u=null,m=e;;){if(5===m.tag){if(null===u){u=m;try{n=m.stateNode,d?"function"===typeof(l=n.style).setProperty?l.setProperty("display","none","important"):l.display="none":(i=m.stateNode,o=void 0!==(c=m.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,i.style.display=xe("display",o))}catch(f){Nc(e,e.return,f)}}}else if(6===m.tag){if(null===u)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(f){Nc(e,e.return,f)}}else if((22!==m.tag&&23!==m.tag||null===m.memoizedState||m===e)&&null!==m.child){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;null===m.sibling;){if(null===m.return||m.return===e)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:hi(t,e),fi(e),4&a&&pi(e);case 21:}}function fi(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(si(r)){var a=r;break e}r=r.return}throw Error(s(160))}switch(a.tag){case 5:var n=a.stateNode;32&a.flags&&(me(n,""),a.flags&=-33),ii(e,li(e),n);break;case 3:case 4:var l=a.stateNode.containerInfo;oi(e,li(e),l);break;default:throw Error(s(161))}}catch(o){Nc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gi(e,t,r){Qo=e,yi(e,t,r)}function yi(e,t,r){for(var a=0!==(1&e.mode);null!==Qo;){var n=Qo,s=n.child;if(22===n.tag&&a){var l=null!==n.memoizedState||Jo;if(!l){var o=n.alternate,i=null!==o&&null!==o.memoizedState||$o;o=Jo;var c=$o;if(Jo=l,($o=i)&&!c)for(Qo=n;null!==Qo;)i=(l=Qo).child,22===l.tag&&null!==l.memoizedState?ji(n):null!==i?(i.return=l,Qo=i):ji(n);for(;null!==s;)Qo=s,yi(s,t,r),s=s.sibling;Qo=n,Jo=o,$o=c}bi(e)}else 0!==(8772&n.subtreeFlags)&&null!==s?(s.return=n,Qo=s):bi(e)}}function bi(e){for(;null!==Qo;){var t=Qo;if(0!==(8772&t.flags)){var r=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$o||ri(5,t);break;case 1:var a=t.stateNode;if(4&t.flags&&!$o)if(null===r)a.componentDidMount();else{var n=t.elementType===t.type?r.memoizedProps:to(t.type,r.memoizedProps);a.componentDidUpdate(n,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;null!==l&&Hs(t,l,a);break;case 3:var o=t.updateQueue;if(null!==o){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}Hs(t,o,r)}break;case 5:var i=t.stateNode;if(null===r&&4&t.flags){r=i;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var m=u.dehydrated;null!==m&&Ut(m)}}}break;default:throw Error(s(163))}$o||512&t.flags&&ai(t)}catch(p){Nc(t,t.return,p)}}if(t===e){Qo=null;break}if(null!==(r=t.sibling)){r.return=t.return,Qo=r;break}Qo=t.return}}function vi(e){for(;null!==Qo;){var t=Qo;if(t===e){Qo=null;break}var r=t.sibling;if(null!==r){r.return=t.return,Qo=r;break}Qo=t.return}}function ji(e){for(;null!==Qo;){var t=Qo;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{ri(4,t)}catch(i){Nc(t,r,i)}break;case 1:var a=t.stateNode;if("function"===typeof a.componentDidMount){var n=t.return;try{a.componentDidMount()}catch(i){Nc(t,n,i)}}var s=t.return;try{ai(t)}catch(i){Nc(t,s,i)}break;case 5:var l=t.return;try{ai(t)}catch(i){Nc(t,l,i)}}}catch(i){Nc(t,t.return,i)}if(t===e){Qo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Qo=o;break}Qo=t.return}}var wi,Ni=Math.ceil,_i=v.ReactCurrentDispatcher,ki=v.ReactCurrentOwner,Si=v.ReactCurrentBatchConfig,Ci=0,Ei=null,Pi=null,Ri=0,Ti=0,Li=_n(0),Di=0,Ai=null,Oi=0,zi=0,Fi=0,Mi=null,Bi=null,Ii=0,qi=1/0,Ui=null,Hi=!1,Wi=null,Vi=null,Yi=!1,Ki=null,Ji=0,$i=0,Gi=null,Qi=-1,Zi=0;function Xi(){return 0!==(6&Ci)?Qe():-1!==Qi?Qi:Qi=Qe()}function ec(e){return 0===(1&e.mode)?1:0!==(2&Ci)&&0!==Ri?Ri&-Ri:null!==xs.transition?(0===Zi&&(Zi=xt()),Zi):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Gt(e.type)}function tc(e,t,r,a){if(50<$i)throw $i=0,Gi=null,Error(s(185));gt(e,r,a),0!==(2&Ci)&&e===Ei||(e===Ei&&(0===(2&Ci)&&(zi|=r),4===Di&&lc(e,Ri)),rc(e,a),1===r&&0===Ci&&0===(1&t.mode)&&(qi=Qe()+500,Bn&&Un()))}function rc(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,a=e.pingedLanes,n=e.expirationTimes,s=e.pendingLanes;0<s;){var l=31-lt(s),o=1<<l,i=n[l];-1===i?0!==(o&r)&&0===(o&a)||(n[l]=pt(o,t)):i<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var a=mt(e,e===Ei?Ri:0);if(0===a)null!==r&&Je(r),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(null!=r&&Je(r),1===t)0===e.tag?function(e){Bn=!0,qn(e)}(oc.bind(null,e)):qn(oc.bind(null,e)),sn(function(){0===(6&Ci)&&Un()}),r=null;else{switch(vt(a)){case 1:r=Xe;break;case 4:r=et;break;case 16:default:r=tt;break;case 536870912:r=at}r=Ec(r,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function ac(e,t){if(Qi=-1,Zi=0,0!==(6&Ci))throw Error(s(327));var r=e.callbackNode;if(jc()&&e.callbackNode!==r)return null;var a=mt(e,e===Ei?Ri:0);if(0===a)return null;if(0!==(30&a)||0!==(a&e.expiredLanes)||t)t=xc(e,a);else{t=a;var n=Ci;Ci|=2;var l=pc();for(Ei===e&&Ri===t||(Ui=null,qi=Qe()+500,uc(e,t));;)try{gc();break}catch(i){mc(e,i)}Ss(),_i.current=l,Ci=n,null!==Pi?t=0:(Ei=null,Ri=0,t=Di)}if(0!==t){if(2===t&&(0!==(n=ht(e))&&(a=n,t=nc(e,n))),1===t)throw r=Ai,uc(e,0),lc(e,a),rc(e,Qe()),r;if(6===t)lc(e,a);else{if(n=e.current.alternate,0===(30&a)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var a=0;a<r.length;a++){var n=r[a],s=n.getSnapshot;n=n.value;try{if(!la(s(),n))return!1}catch(o){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(n)&&(2===(t=xc(e,a))&&(0!==(l=ht(e))&&(a=l,t=nc(e,l))),1===t))throw r=Ai,uc(e,0),lc(e,a),rc(e,Qe()),r;switch(e.finishedWork=n,e.finishedLanes=a,t){case 0:case 1:throw Error(s(345));case 2:case 5:vc(e,Bi,Ui);break;case 3:if(lc(e,a),(130023424&a)===a&&10<(t=Ii+500-Qe())){if(0!==mt(e,0))break;if(((n=e.suspendedLanes)&a)!==a){Xi(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=rn(vc.bind(null,e,Bi,Ui),t);break}vc(e,Bi,Ui);break;case 4:if(lc(e,a),(4194240&a)===a)break;for(t=e.eventTimes,n=-1;0<a;){var o=31-lt(a);l=1<<o,(o=t[o])>n&&(n=o),a&=~l}if(a=n,10<(a=(120>(a=Qe()-a)?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Ni(a/1960))-a)){e.timeoutHandle=rn(vc.bind(null,e,Bi,Ui),a);break}vc(e,Bi,Ui);break;default:throw Error(s(329))}}}return rc(e,Qe()),e.callbackNode===r?ac.bind(null,e):null}function nc(e,t){var r=Mi;return e.current.memoizedState.isDehydrated&&(uc(e,t).flags|=256),2!==(e=xc(e,t))&&(t=Bi,Bi=r,null!==t&&sc(t)),e}function sc(e){null===Bi?Bi=e:Bi.push.apply(Bi,e)}function lc(e,t){for(t&=~Fi,t&=~zi,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-lt(t),a=1<<r;e[r]=-1,t&=~a}}function oc(e){if(0!==(6&Ci))throw Error(s(327));jc();var t=mt(e,0);if(0===(1&t))return rc(e,Qe()),null;var r=xc(e,t);if(0!==e.tag&&2===r){var a=ht(e);0!==a&&(t=a,r=nc(e,a))}if(1===r)throw r=Ai,uc(e,0),lc(e,t),rc(e,Qe()),r;if(6===r)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,vc(e,Bi,Ui),rc(e,Qe()),null}function ic(e,t){var r=Ci;Ci|=1;try{return e(t)}finally{0===(Ci=r)&&(qi=Qe()+500,Bn&&Un())}}function cc(e){null!==Ki&&0===Ki.tag&&0===(6&Ci)&&jc();var t=Ci;Ci|=1;var r=Si.transition,a=bt;try{if(Si.transition=null,bt=1,e)return e()}finally{bt=a,Si.transition=r,0===(6&(Ci=t))&&Un()}}function dc(){Ti=Li.current,kn(Li)}function uc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,an(r)),null!==Pi)for(r=Pi.return;null!==r;){var a=r;switch(ts(a),a.tag){case 1:null!==(a=a.type.childContextTypes)&&void 0!==a&&Dn();break;case 3:Gs(),kn(Pn),kn(En),rl();break;case 5:Zs(a);break;case 4:Gs();break;case 13:case 19:kn(Xs);break;case 10:Cs(a.type._context);break;case 22:case 23:dc()}r=r.return}if(Ei=e,Pi=e=Lc(e.current,null),Ri=Ti=t,Di=0,Ai=null,Fi=zi=Oi=0,Bi=Mi=null,null!==Ts){for(t=0;t<Ts.length;t++)if(null!==(a=(r=Ts[t]).interleaved)){r.interleaved=null;var n=a.next,s=r.pending;if(null!==s){var l=s.next;s.next=n,a.next=l}r.pending=a}Ts=null}return e}function mc(e,t){for(;;){var r=Pi;try{if(Ss(),al.current=Ql,cl){for(var a=ll.memoizedState;null!==a;){var n=a.queue;null!==n&&(n.pending=null),a=a.next}cl=!1}if(sl=0,il=ol=ll=null,dl=!1,ul=0,ki.current=null,null===r||null===r.return){Di=1,Ai=t,Pi=null;break}e:{var l=e,o=r.return,i=r,c=t;if(t=Ri,i.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=i,m=u.tag;if(0===(1&u.mode)&&(0===m||11===m||15===m)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=fo(o);if(null!==h){h.flags&=-257,go(h,o,i,0,t),1&h.mode&&xo(l,d,t),c=d;var x=(t=h).updateQueue;if(null===x){var f=new Set;f.add(c),t.updateQueue=f}else x.add(c);break e}if(0===(1&t)){xo(l,d,t),hc();break e}c=Error(s(426))}else if(ns&&1&i.mode){var g=fo(o);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),go(g,o,i,0,t),hs(io(c,i));break e}}l=c=io(c,i),4!==Di&&(Di=2),null===Mi?Mi=[l]:Mi.push(l),l=o;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t,qs(l,po(0,c,t));break e;case 1:i=c;var y=l.type,b=l.stateNode;if(0===(128&l.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Vi||!Vi.has(b)))){l.flags|=65536,t&=-t,l.lanes|=t,qs(l,ho(l,i,t));break e}}l=l.return}while(null!==l)}bc(r)}catch(v){t=v,Pi===r&&null!==r&&(Pi=r=r.return);continue}break}}function pc(){var e=_i.current;return _i.current=Ql,null===e?Ql:e}function hc(){0!==Di&&3!==Di&&2!==Di||(Di=4),null===Ei||0===(268435455&Oi)&&0===(268435455&zi)||lc(Ei,Ri)}function xc(e,t){var r=Ci;Ci|=2;var a=pc();for(Ei===e&&Ri===t||(Ui=null,uc(e,t));;)try{fc();break}catch(n){mc(e,n)}if(Ss(),Ci=r,_i.current=a,null!==Pi)throw Error(s(261));return Ei=null,Ri=0,Di}function fc(){for(;null!==Pi;)yc(Pi)}function gc(){for(;null!==Pi&&!$e();)yc(Pi)}function yc(e){var t=wi(e.alternate,e,Ti);e.memoizedProps=e.pendingProps,null===t?bc(e):Pi=t,ki.current=null}function bc(e){var t=e;do{var r=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(r=Yo(r,t,Ti)))return void(Pi=r)}else{if(null!==(r=Ko(r,t)))return r.flags&=32767,void(Pi=r);if(null===e)return Di=6,void(Pi=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pi=t);Pi=t=e}while(null!==t);0===Di&&(Di=5)}function vc(e,t,r){var a=bt,n=Si.transition;try{Si.transition=null,bt=1,function(e,t,r,a){do{jc()}while(null!==Ki);if(0!==(6&Ci))throw Error(s(327));r=e.finishedWork;var n=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var l=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<r;){var n=31-lt(r),s=1<<n;t[n]=0,a[n]=-1,e[n]=-1,r&=~s}}(e,l),e===Ei&&(Pi=Ei=null,Ri=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Yi||(Yi=!0,Ec(tt,function(){return jc(),null})),l=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||l){l=Si.transition,Si.transition=null;var o=bt;bt=1;var i=Ci;Ci|=4,ki.current=null,function(e,t){if(Xa=Wt,ma(e=ua())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var a=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(a&&0!==a.rangeCount){r=a.anchorNode;var n=a.anchorOffset,l=a.focusNode;a=a.focusOffset;try{r.nodeType,l.nodeType}catch(j){r=null;break e}var o=0,i=-1,c=-1,d=0,u=0,m=e,p=null;t:for(;;){for(var h;m!==r||0!==n&&3!==m.nodeType||(i=o+n),m!==l||0!==a&&3!==m.nodeType||(c=o+a),3===m.nodeType&&(o+=m.nodeValue.length),null!==(h=m.firstChild);)p=m,m=h;for(;;){if(m===e)break t;if(p===r&&++d===n&&(i=o),p===l&&++u===a&&(c=o),null!==(h=m.nextSibling))break;p=(m=p).parentNode}m=h}r=-1===i||-1===c?null:{start:i,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(en={focusedElem:e,selectionRange:r},Wt=!1,Qo=t;null!==Qo;)if(e=(t=Qo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Qo=e;else for(;null!==Qo;){t=Qo;try{var x=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==x){var f=x.memoizedProps,g=x.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?f:to(t.type,f),g);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var v=t.stateNode.containerInfo;1===v.nodeType?v.textContent="":9===v.nodeType&&v.documentElement&&v.removeChild(v.documentElement);break;default:throw Error(s(163))}}catch(j){Nc(t,t.return,j)}if(null!==(e=t.sibling)){e.return=t.return,Qo=e;break}Qo=t.return}x=ei,ei=!1}(e,r),xi(r,e),pa(en),Wt=!!Xa,en=Xa=null,e.current=r,gi(r,e,n),Ge(),Ci=i,bt=o,Si.transition=l}else e.current=r;if(Yi&&(Yi=!1,Ki=e,Ji=n),l=e.pendingLanes,0===l&&(Vi=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(nt,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),rc(e,Qe()),null!==t)for(a=e.onRecoverableError,r=0;r<t.length;r++)n=t[r],a(n.value,{componentStack:n.stack,digest:n.digest});if(Hi)throw Hi=!1,e=Wi,Wi=null,e;0!==(1&Ji)&&0!==e.tag&&jc(),l=e.pendingLanes,0!==(1&l)?e===Gi?$i++:($i=0,Gi=e):$i=0,Un()}(e,t,r,a)}finally{Si.transition=n,bt=a}return null}function jc(){if(null!==Ki){var e=vt(Ji),t=Si.transition,r=bt;try{if(Si.transition=null,bt=16>e?16:e,null===Ki)var a=!1;else{if(e=Ki,Ki=null,Ji=0,0!==(6&Ci))throw Error(s(331));var n=Ci;for(Ci|=4,Qo=e.current;null!==Qo;){var l=Qo,o=l.child;if(0!==(16&Qo.flags)){var i=l.deletions;if(null!==i){for(var c=0;c<i.length;c++){var d=i[c];for(Qo=d;null!==Qo;){var u=Qo;switch(u.tag){case 0:case 11:case 15:ti(8,u,l)}var m=u.child;if(null!==m)m.return=u,Qo=m;else for(;null!==Qo;){var p=(u=Qo).sibling,h=u.return;if(ni(u),u===d){Qo=null;break}if(null!==p){p.return=h,Qo=p;break}Qo=h}}}var x=l.alternate;if(null!==x){var f=x.child;if(null!==f){x.child=null;do{var g=f.sibling;f.sibling=null,f=g}while(null!==f)}}Qo=l}}if(0!==(2064&l.subtreeFlags)&&null!==o)o.return=l,Qo=o;else e:for(;null!==Qo;){if(0!==(2048&(l=Qo).flags))switch(l.tag){case 0:case 11:case 15:ti(9,l,l.return)}var y=l.sibling;if(null!==y){y.return=l.return,Qo=y;break e}Qo=l.return}}var b=e.current;for(Qo=b;null!==Qo;){var v=(o=Qo).child;if(0!==(2064&o.subtreeFlags)&&null!==v)v.return=o,Qo=v;else e:for(o=b;null!==Qo;){if(0!==(2048&(i=Qo).flags))try{switch(i.tag){case 0:case 11:case 15:ri(9,i)}}catch(w){Nc(i,i.return,w)}if(i===o){Qo=null;break e}var j=i.sibling;if(null!==j){j.return=i.return,Qo=j;break e}Qo=i.return}}if(Ci=n,Un(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(nt,e)}catch(w){}a=!0}return a}finally{bt=r,Si.transition=t}}return!1}function wc(e,t,r){e=Bs(e,t=po(0,t=io(r,t),1),1),t=Xi(),null!==e&&(gt(e,1,t),rc(e,t))}function Nc(e,t,r){if(3===e.tag)wc(e,e,r);else for(;null!==t;){if(3===t.tag){wc(t,e,r);break}if(1===t.tag){var a=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof a.componentDidCatch&&(null===Vi||!Vi.has(a))){t=Bs(t,e=ho(t,e=io(r,e),1),1),e=Xi(),null!==t&&(gt(t,1,e),rc(t,e));break}}t=t.return}}function _c(e,t,r){var a=e.pingCache;null!==a&&a.delete(t),t=Xi(),e.pingedLanes|=e.suspendedLanes&r,Ei===e&&(Ri&r)===r&&(4===Di||3===Di&&(130023424&Ri)===Ri&&500>Qe()-Ii?uc(e,0):Fi|=r),rc(e,t)}function kc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var r=Xi();null!==(e=As(e,t))&&(gt(e,t,r),rc(e,r))}function Sc(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),kc(e,r)}function Cc(e,t){var r=0;switch(e.tag){case 13:var a=e.stateNode,n=e.memoizedState;null!==n&&(r=n.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(s(314))}null!==a&&a.delete(t),kc(e,r)}function Ec(e,t){return Ke(e,t)}function Pc(e,t,r,a){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,r,a){return new Pc(e,t,r,a)}function Tc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Lc(e,t){var r=e.alternate;return null===r?((r=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Dc(e,t,r,a,n,l){var o=2;if(a=e,"function"===typeof e)Tc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case N:return Ac(r.children,n,l,t);case _:o=8,n|=8;break;case k:return(e=Rc(12,r,t,2|n)).elementType=k,e.lanes=l,e;case P:return(e=Rc(13,r,t,n)).elementType=P,e.lanes=l,e;case R:return(e=Rc(19,r,t,n)).elementType=R,e.lanes=l,e;case D:return Oc(r,n,l,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:o=10;break e;case C:o=9;break e;case E:o=11;break e;case T:o=14;break e;case L:o=16,a=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Rc(o,r,t,n)).elementType=e,t.type=a,t.lanes=l,t}function Ac(e,t,r,a){return(e=Rc(7,e,a,t)).lanes=r,e}function Oc(e,t,r,a){return(e=Rc(22,e,a,t)).elementType=D,e.lanes=r,e.stateNode={isHidden:!1},e}function zc(e,t,r){return(e=Rc(6,e,null,t)).lanes=r,e}function Fc(e,t,r){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Mc(e,t,r,a,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ft(0),this.expirationTimes=ft(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ft(0),this.identifierPrefix=a,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function Bc(e,t,r,a,n,s,l,o,i){return e=new Mc(e,t,r,o,i),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Rc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},zs(s),e}function Ic(e){if(!e)return Cn;e:{if(Ue(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ln(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var r=e.type;if(Ln(r))return On(e,r,t)}return t}function qc(e,t,r,a,n,s,l,o,i){return(e=Bc(r,a,!0,e,0,s,0,o,i)).context=Ic(null),r=e.current,(s=Ms(a=Xi(),n=ec(r))).callback=void 0!==t&&null!==t?t:null,Bs(r,s,n),e.current.lanes=n,gt(e,n,a),rc(e,a),e}function Uc(e,t,r,a){var n=t.current,s=Xi(),l=ec(n);return r=Ic(r),null===t.context?t.context=r:t.pendingContext=r,(t=Ms(s,l)).payload={element:e},null!==(a=void 0===a?null:a)&&(t.callback=a),null!==(e=Bs(n,t,l))&&(tc(e,n,l,s),Is(e,n,l)),l}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Vc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}wi=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Pn.current)bo=!0;else{if(0===(e.lanes&r)&&0===(128&t.flags))return bo=!1,function(e,t,r){switch(t.tag){case 3:Po(t),ps();break;case 5:Qs(t);break;case 1:Ln(t.type)&&zn(t);break;case 4:$s(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,n=t.memoizedProps.value;Sn(ws,a._currentValue),a._currentValue=n;break;case 13:if(null!==(a=t.memoizedState))return null!==a.dehydrated?(Sn(Xs,1&Xs.current),t.flags|=128,null):0!==(r&t.child.childLanes)?zo(e,t,r):(Sn(Xs,1&Xs.current),null!==(e=Ho(e,t,r))?e.sibling:null);Sn(Xs,1&Xs.current);break;case 19:if(a=0!==(r&t.childLanes),0!==(128&e.flags)){if(a)return qo(e,t,r);t.flags|=128}if(null!==(n=t.memoizedState)&&(n.rendering=null,n.tail=null,n.lastEffect=null),Sn(Xs,Xs.current),a)break;return null;case 22:case 23:return t.lanes=0,_o(e,t,r)}return Ho(e,t,r)}(e,t,r);bo=0!==(131072&e.flags)}else bo=!1,ns&&0!==(1048576&t.flags)&&Xn(t,Yn,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Uo(e,t),e=t.pendingProps;var n=Tn(t,En.current);Ps(t,r),n=xl(null,t,a,e,n,r);var l=fl();return t.flags|=1,"object"===typeof n&&null!==n&&"function"===typeof n.render&&void 0===n.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ln(a)?(l=!0,zn(t)):l=!1,t.memoizedState=null!==n.state&&void 0!==n.state?n.state:null,zs(t),n.updater=ao,t.stateNode=n,n._reactInternals=t,oo(t,a,e,r),t=Eo(null,t,a,!0,l,r)):(t.tag=0,ns&&l&&es(t),vo(null,t,n,r),t=t.child),t;case 16:a=t.elementType;e:{switch(Uo(e,t),e=t.pendingProps,a=(n=a._init)(a._payload),t.type=a,n=t.tag=function(e){if("function"===typeof e)return Tc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===T)return 14}return 2}(a),e=to(a,e),n){case 0:t=So(null,t,a,e,r);break e;case 1:t=Co(null,t,a,e,r);break e;case 11:t=jo(null,t,a,e,r);break e;case 14:t=wo(null,t,a,to(a.type,e),r);break e}throw Error(s(306,a,""))}return t;case 0:return a=t.type,n=t.pendingProps,So(e,t,a,n=t.elementType===a?n:to(a,n),r);case 1:return a=t.type,n=t.pendingProps,Co(e,t,a,n=t.elementType===a?n:to(a,n),r);case 3:e:{if(Po(t),null===e)throw Error(s(387));a=t.pendingProps,n=(l=t.memoizedState).element,Fs(e,t),Us(t,a,null,r);var o=t.memoizedState;if(a=o.element,l.isDehydrated){if(l={element:a,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=l,t.memoizedState=l,256&t.flags){t=Ro(e,t,a,r,n=io(Error(s(423)),t));break e}if(a!==n){t=Ro(e,t,a,r,n=io(Error(s(424)),t));break e}for(as=cn(t.stateNode.containerInfo.firstChild),rs=t,ns=!0,ss=null,r=js(t,null,a,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(ps(),a===n){t=Ho(e,t,r);break e}vo(e,t,a,r)}t=t.child}return t;case 5:return Qs(t),null===e&&cs(t),a=t.type,n=t.pendingProps,l=null!==e?e.memoizedProps:null,o=n.children,tn(a,n)?o=null:null!==l&&tn(a,l)&&(t.flags|=32),ko(e,t),vo(e,t,o,r),t.child;case 6:return null===e&&cs(t),null;case 13:return zo(e,t,r);case 4:return $s(t,t.stateNode.containerInfo),a=t.pendingProps,null===e?t.child=vs(t,null,a,r):vo(e,t,a,r),t.child;case 11:return a=t.type,n=t.pendingProps,jo(e,t,a,n=t.elementType===a?n:to(a,n),r);case 7:return vo(e,t,t.pendingProps,r),t.child;case 8:case 12:return vo(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(a=t.type._context,n=t.pendingProps,l=t.memoizedProps,o=n.value,Sn(ws,a._currentValue),a._currentValue=o,null!==l)if(la(l.value,o)){if(l.children===n.children&&!Pn.current){t=Ho(e,t,r);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var i=l.dependencies;if(null!==i){o=l.child;for(var c=i.firstContext;null!==c;){if(c.context===a){if(1===l.tag){(c=Ms(-1,r&-r)).tag=2;var d=l.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}l.lanes|=r,null!==(c=l.alternate)&&(c.lanes|=r),Es(l.return,r,t),i.lanes|=r;break}c=c.next}}else if(10===l.tag)o=l.type===t.type?null:l.child;else if(18===l.tag){if(null===(o=l.return))throw Error(s(341));o.lanes|=r,null!==(i=o.alternate)&&(i.lanes|=r),Es(o,r,t),o=l.sibling}else o=l.child;if(null!==o)o.return=l;else for(o=l;null!==o;){if(o===t){o=null;break}if(null!==(l=o.sibling)){l.return=o.return,o=l;break}o=o.return}l=o}vo(e,t,n.children,r),t=t.child}return t;case 9:return n=t.type,a=t.pendingProps.children,Ps(t,r),a=a(n=Rs(n)),t.flags|=1,vo(e,t,a,r),t.child;case 14:return n=to(a=t.type,t.pendingProps),wo(e,t,a,n=to(a.type,n),r);case 15:return No(e,t,t.type,t.pendingProps,r);case 17:return a=t.type,n=t.pendingProps,n=t.elementType===a?n:to(a,n),Uo(e,t),t.tag=1,Ln(a)?(e=!0,zn(t)):e=!1,Ps(t,r),so(t,a,n),oo(t,a,n,r),Eo(null,t,a,!0,e,r);case 19:return qo(e,t,r);case 22:return _o(e,t,r)}throw Error(s(156,t.tag))};var Yc="function"===typeof reportError?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}function Jc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Gc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qc(){}function Zc(e,t,r,a,n){var s=r._reactRootContainer;if(s){var l=s;if("function"===typeof n){var o=n;n=function(){var e=Hc(l);o.call(e)}}Uc(t,l,e,n)}else l=function(e,t,r,a,n){if(n){if("function"===typeof a){var s=a;a=function(){var e=Hc(l);s.call(e)}}var l=qc(t,a,e,0,null,!1,0,"",Qc);return e._reactRootContainer=l,e[hn]=l.current,qa(8===e.nodeType?e.parentNode:e),cc(),l}for(;n=e.lastChild;)e.removeChild(n);if("function"===typeof a){var o=a;a=function(){var e=Hc(i);o.call(e)}}var i=Bc(e,0,!1,null,0,!1,0,"",Qc);return e._reactRootContainer=i,e[hn]=i.current,qa(8===e.nodeType?e.parentNode:e),cc(function(){Uc(t,i,r,a)}),i}(r,t,e,n,a);return Hc(l)}Jc.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Uc(e,t,null,null)},Jc.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cc(function(){Uc(null,e,null,null)}),t[hn]=null}},Jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=_t();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Dt.length&&0!==t&&t<Dt[r].priority;r++);Dt.splice(r,0,e),0===r&&Ft(e)}},jt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ut(t.pendingLanes);0!==r&&(yt(t,1|r),rc(t,Qe()),0===(6&Ci)&&(qi=Qe()+500,Un()))}break;case 13:cc(function(){var t=As(e,1);if(null!==t){var r=Xi();tc(t,e,1,r)}}),Vc(e,1)}},wt=function(e){if(13===e.tag){var t=As(e,134217728);if(null!==t)tc(t,e,134217728,Xi());Vc(e,134217728)}},Nt=function(e){if(13===e.tag){var t=ec(e),r=As(e,t);if(null!==r)tc(r,e,t,Xi());Vc(e,t)}},_t=function(){return bt},kt=function(e,t){var r=bt;try{return bt=e,t()}finally{bt=r}},we=function(e,t,r){switch(t){case"input":if(Z(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var a=r[t];if(a!==e&&a.form===e.form){var n=jn(a);if(!n)throw Error(s(90));K(a),Z(a,n)}}}break;case"textarea":se(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},Ee=ic,Pe=cc;var Xc={usingClientEntryPoint:!1,Events:[bn,vn,jn,Se,Ce,ic]},ed={findFiberByHostInstance:yn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},td={bundleType:ed.bundleType,version:ed.version,rendererPackageName:ed.rendererPackageName,rendererConfig:ed.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:v.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ve(e))?null:e.stateNode},findFiberByHostInstance:ed.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rd.isDisabled&&rd.supportsFiber)try{nt=rd.inject(td),st=rd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xc,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(s(200));return function(e,t,r){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==a?null:""+a,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.createRoot=function(e,t){if(!$c(e))throw Error(s(299));var r=!1,a="",n=Yc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(a=t.identifierPrefix),void 0!==t.onRecoverableError&&(n=t.onRecoverableError)),t=Bc(e,1,!1,null,0,r,0,a,n),e[hn]=t.current,qa(8===e.nodeType?e.parentNode:e),new Kc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ve(t))?null:e.stateNode},t.flushSync=function(e){return cc(e)},t.hydrate=function(e,t,r){if(!Gc(t))throw Error(s(200));return Zc(null,e,t,!0,r)},t.hydrateRoot=function(e,t,r){if(!$c(e))throw Error(s(405));var a=null!=r&&r.hydratedSources||null,n=!1,l="",o=Yc;if(null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(n=!0),void 0!==r.identifierPrefix&&(l=r.identifierPrefix),void 0!==r.onRecoverableError&&(o=r.onRecoverableError)),t=qc(t,null,e,1,null!=r?r:null,n,0,l,o),e[hn]=t.current,qa(e),a)for(e=0;e<a.length;e++)n=(n=(r=a[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,n]:t.mutableSourceEagerHydrationData.push(r,n);return new Jc(t)},t.render=function(e,t,r){if(!Gc(t))throw Error(s(200));return Zc(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!Gc(e))throw Error(s(40));return!!e._reactRootContainer&&(cc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[hn]=null})}),!0)},t.unstable_batchedUpdates=ic,t.unstable_renderSubtreeIntoContainer=function(e,t,r,a){if(!Gc(r))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Zc(e,t,r,!1,a)},t.version="18.3.1-next-f1338f8080-20240426"},853(e,t,r){e.exports=r(234)},950(e,t,r){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(730)}},t={};function r(a){var n=t[a];if(void 0!==n)return n.exports;var s=t[a]={exports:{}};return e[a](s,s.exports,r),s.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(a,n){if(1&n&&(a=this(a)),8&n)return a;if("object"===typeof a&&a){if(4&n&&a.__esModule)return a;if(16&n&&"function"===typeof a.then)return a}var s=Object.create(null);r.r(s);var l={};e=e||[null,t({}),t([]),t(t)];for(var o=2&n&&a;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>l[e]=()=>a[e]);return l.default=()=>a,r.d(s,l),s}})(),r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};r.r(a),r.d(a,{hasBrowserEnv:()=>qr,hasStandardBrowserEnv:()=>Hr,hasStandardBrowserWebWorkerEnv:()=>Wr,navigator:()=>Ur,origin:()=>Vr});var n=r(43),s=r.t(n,2),l=r(391);function o(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function c(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=i(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}function d(e,t,r){return(t=c(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach(function(t){d(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}const p=["sri"],h=["page"],x=["page","matches"],f=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition","unstable_defaultShouldRevalidate"],g=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],y=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition","unstable_defaultShouldRevalidate"];var b="popstate";function v(){return C(function(e,t){let{pathname:r,search:a,hash:n}=e.location;return _("",{pathname:r,search:a,hash:n},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:k(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function j(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function w(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(r){}}}function N(e,t){return{usr:e.state,key:e.key,idx:t}}function _(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3?arguments[3]:void 0;return m(m({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?S(t):t),{},{state:r,key:t&&t.key||a||Math.random().toString(36).substring(2,10)})}function k(e){let{pathname:t="/",search:r="",hash:a=""}=e;return r&&"?"!==r&&(t+="?"===r.charAt(0)?r:"?"+r),a&&"#"!==a&&(t+="#"===a.charAt(0)?a:"#"+a),t}function S(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let a=e.indexOf("?");a>=0&&(t.search=e.substring(a),e=e.substring(0,a)),e&&(t.pathname=e)}return t}function C(e,t,r){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:n=document.defaultView,v5Compat:s=!1}=a,l=n.history,o="POP",i=null,c=d();function d(){return(l.state||{idx:null}).idx}function u(){o="POP";let e=d(),t=null==e?null:e-c;c=e,i&&i({action:o,location:h.location,delta:t})}function p(e){return E(e)}null==c&&(c=0,l.replaceState(m(m({},l.state),{},{idx:c}),""));let h={get action(){return o},get location(){return e(n,l)},listen(e){if(i)throw new Error("A history only accepts one active listener");return n.addEventListener(b,u),i=e,()=>{n.removeEventListener(b,u),i=null}},createHref:e=>t(n,e),createURL:p,encodeLocation(e){let t=p(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){o="PUSH";let a=_(h.location,e,t);r&&r(a,e),c=d()+1;let u=N(a,c),m=h.createHref(a);try{l.pushState(u,"",m)}catch(p){if(p instanceof DOMException&&"DataCloneError"===p.name)throw p;n.location.assign(m)}s&&i&&i({action:o,location:h.location,delta:1})},replace:function(e,t){o="REPLACE";let a=_(h.location,e,t);r&&r(a,e),c=d();let n=N(a,c),u=h.createHref(a);l.replaceState(n,"",u),s&&i&&i({action:o,location:h.location,delta:0})},go:e=>l.go(e)};return h}function E(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r="http://localhost";"undefined"!==typeof window&&(r="null"!==window.location.origin?window.location.origin:window.location.href),j(r,"No window.location.(origin|href) available to create URL");let a="string"===typeof e?e:k(e);return a=a.replace(/ $/,"%20"),!t&&a.startsWith("//")&&(a=r+a),new URL(a,r)}new WeakMap;function P(e,t){return R(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function R(e,t,r,a){let n=V(("string"===typeof t?S(t):t).pathname||"/",r);if(null==n)return null;let s=T(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let r=e.length===t.length&&e.slice(0,-1).every((e,r)=>e===t[r]);return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let l=null;for(let o=0;null==l&&o<s.length;++o){let e=W(n);l=q(s[o],e,a)}return l}function T(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=function(e,s){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n,o=arguments.length>3?arguments[3]:void 0,i={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};if(i.relativePath.startsWith("/")){if(!i.relativePath.startsWith(a)&&l)return;j(i.relativePath.startsWith(a),'Absolute route path "'.concat(i.relativePath,'" nested under path "').concat(a,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),i.relativePath=i.relativePath.slice(a.length)}let c=X([a,i.relativePath]),d=r.concat(i);e.children&&e.children.length>0&&(j(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(c,'".')),T(e.children,t,d,c,l)),(null!=e.path||e.index)&&t.push({path:c,score:I(c,e.index),routesMeta:d})};return e.forEach((e,t)=>{var r;if(""!==e.path&&null!==(r=e.path)&&void 0!==r&&r.includes("?"))for(let a of L(e.path))s(e,t,!0,a);else s(e,t)}),t}function L(e){let t=e.split("/");if(0===t.length)return[];let[r,...a]=t,n=r.endsWith("?"),s=r.replace(/\?$/,"");if(0===a.length)return n?[s,""]:[s];let l=L(a.join("/")),o=[];return o.push(...l.map(e=>""===e?s:[s,e].join("/"))),n&&o.push(...l),o.map(t=>e.startsWith("/")&&""===t?"/":t)}var D=/^:[\w-]+$/,A=3,O=2,z=1,F=10,M=-2,B=e=>"*"===e;function I(e,t){let r=e.split("/"),a=r.length;return r.some(B)&&(a+=M),t&&(a+=O),r.filter(e=>!B(e)).reduce((e,t)=>e+(D.test(t)?A:""===t?z:F),a)}function q(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:a}=e,n={},s="/",l=[];for(let o=0;o<a.length;++o){let e=a[o],i=o===a.length-1,c="/"===s?t:t.slice(s.length)||"/",d=U({path:e.relativePath,caseSensitive:e.caseSensitive,end:i},c),u=e.route;if(!d&&i&&r&&!a[a.length-1].route.index&&(d=U({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(n,d.params),l.push({params:n,pathname:X([s,d.pathname]),pathnameBase:ee(X([s,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(s=X([s,d.pathnameBase]))}return l}function U(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,a]=H(e.path,e.caseSensitive,e.end),n=t.match(r);if(!n)return null;let s=n[0],l=s.replace(/(.)\/+$/,"$1"),o=n.slice(1);return{params:a.reduce((e,t,r)=>{let{paramName:a,isOptional:n}=t;if("*"===a){let e=o[r]||"";l=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const i=o[r];return e[a]=n&&!i?void 0:(i||"").replace(/%2F/g,"/"),e},{}),pathname:s,pathnameBase:l,pattern:e}}function H(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];w("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let a=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,r)=>(a.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(a.push({paramName:"*"}),n+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":""!==e&&"/"!==e&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),a]}function W(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return w(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function V(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,a=e.charAt(r);return a&&"/"!==a?null:e.slice(r)||"/"}var Y=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,K=e=>Y.test(e);function J(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)}),r.length>1?r.join("/"):"/"}function $(e,t,r,a){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(a),"].  Please separate it out to the `to.").concat(r,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function G(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function Q(e){let t=G(e);return t.map((e,r)=>r===t.length-1?e.pathname:e.pathnameBase)}function Z(e,t,r){let a,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?a=S(e):(a=m({},e),j(!a.pathname||!a.pathname.includes("?"),$("?","pathname","search",a)),j(!a.pathname||!a.pathname.includes("#"),$("#","pathname","hash",a)),j(!a.search||!a.search.includes("#"),$("#","search","hash",a)));let s,l=""===e||""===a.pathname,o=l?"/":a.pathname;if(null==o)s=r;else{let e=t.length-1;if(!n&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}s=e>=0?t[e]:"/"}let i=function(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:a,search:n="",hash:s=""}="string"===typeof e?S(e):e;if(a)if(K(a))t=a;else{if(a.includes("//")){let e=a;a=a.replace(/\/\/+/g,"/"),w(!1,"Pathnames cannot have embedded double slashes - normalizing ".concat(e," -> ").concat(a))}t=a.startsWith("/")?J(a.substring(1),"/"):J(a,r)}else t=r;return{pathname:t,search:te(n),hash:re(s)}}(a,s),c=o&&"/"!==o&&o.endsWith("/"),d=(l||"."===o)&&r.endsWith("/");return i.pathname.endsWith("/")||!c&&!d||(i.pathname+="/"),i}var X=e=>e.join("/").replace(/\/\/+/g,"/"),ee=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),te=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",re=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";var ae=class{constructor(e,t,r){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.status=e,this.statusText=t||"",this.internal=a,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}};function ne(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}function se(e){return e.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var le="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;function oe(e,t){let r=e;if("string"!==typeof r||!Y.test(r))return{absoluteURL:void 0,isExternal:!1,to:r};let a=r,n=!1;if(le)try{let e=new URL(window.location.href),a=r.startsWith("//")?new URL(e.protocol+r):new URL(r),s=V(a.pathname,t);a.origin===e.origin&&null!=s?r=s+a.search+a.hash:n=!0}catch(s){w(!1,'<Link to="'.concat(r,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}return{absoluteURL:a,isExternal:n,to:r}}Symbol("Uninstrumented");Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var ie=["POST","PUT","PATCH","DELETE"],ce=(new Set(ie),["GET",...ie]);new Set(ce),Symbol("ResetLoaderData");var de=n.createContext(null);de.displayName="DataRouter";var ue=n.createContext(null);ue.displayName="DataRouterState";var me=n.createContext(!1);function pe(){return n.useContext(me)}var he=n.createContext({isTransitioning:!1});he.displayName="ViewTransition";var xe=n.createContext(new Map);xe.displayName="Fetchers";var fe=n.createContext(null);fe.displayName="Await";var ge=n.createContext(null);ge.displayName="Navigation";var ye=n.createContext(null);ye.displayName="Location";var be=n.createContext({outlet:null,matches:[],isDataRoute:!1});be.displayName="Route";var ve=n.createContext(null);ve.displayName="RouteError";var je="REACT_ROUTER_ERROR";function we(){return null!=n.useContext(ye)}function Ne(){return j(we(),"useLocation() may be used only in the context of a <Router> component."),n.useContext(ye).location}var _e="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ke(e){n.useContext(ge).static||n.useLayoutEffect(e)}function Se(){let{isDataRoute:e}=n.useContext(be);return e?function(){let{router:e}=Me("useNavigate"),t=Ie("useNavigate"),r=n.useRef(!1);ke(()=>{r.current=!0});let a=n.useCallback(async function(a){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};w(r.current,_e),r.current&&("number"===typeof a?await e.navigate(a):await e.navigate(a,m({fromRouteId:t},n)))},[e,t]);return a}():function(){j(we(),"useNavigate() may be used only in the context of a <Router> component.");let e=n.useContext(de),{basename:t,navigator:r}=n.useContext(ge),{matches:a}=n.useContext(be),{pathname:s}=Ne(),l=JSON.stringify(Q(a)),o=n.useRef(!1);ke(()=>{o.current=!0});let i=n.useCallback(function(a){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(w(o.current,_e),!o.current)return;if("number"===typeof a)return void r.go(a);let i=Z(a,JSON.parse(l),s,"path"===n.relative);null==e&&"/"!==t&&(i.pathname="/"===i.pathname?t:X([t,i.pathname])),(n.replace?r.replace:r.push)(i,n.state,n)},[t,r,l,s,e]);return i}()}n.createContext(null);function Ce(){let{matches:e}=n.useContext(be),t=e[e.length-1];return t?t.params:{}}function Ee(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:r}=n.useContext(be),{pathname:a}=Ne(),s=JSON.stringify(Q(r));return n.useMemo(()=>Z(e,JSON.parse(s),a,"path"===t),[e,s,a,t])}function Pe(e,t,r,a,s){j(we(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=n.useContext(ge),{matches:o}=n.useContext(be),i=o[o.length-1],c=i?i.params:{},d=i?i.pathname:"/",u=i?i.pathnameBase:"/",p=i&&i.route;{let e=p&&p.path||"";He(d,!p||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(d,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let h,x=Ne();if(t){var f;let e="string"===typeof t?S(t):t;j("/"===u||(null===(f=e.pathname)||void 0===f?void 0:f.startsWith(u)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(u,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),h=e}else h=x;let g=h.pathname||"/",y=g;if("/"!==u){let e=u.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=P(e,{pathname:y});w(p||null!=b,'No routes matched location "'.concat(h.pathname).concat(h.search).concat(h.hash,'" ')),w(null==b||void 0!==b[b.length-1].route.element||void 0!==b[b.length-1].route.Component||void 0!==b[b.length-1].route.lazy,'Matched leaf route at location "'.concat(h.pathname).concat(h.search).concat(h.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let v=ze(b&&b.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:X([u,l.encodeLocation?l.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:X([u,l.encodeLocation?l.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),o,r,a,s);return t&&v?n.createElement(ye.Provider,{value:{location:m({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:"POP"}},v):v}function Re(){let e=qe(),t=ne(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:a},l={padding:"2px 4px",backgroundColor:a},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=n.createElement(n.Fragment,null,n.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),n.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",n.createElement("code",{style:l},"ErrorBoundary")," or"," ",n.createElement("code",{style:l},"errorElement")," prop on your route.")),n.createElement(n.Fragment,null,n.createElement("h2",null,"Unexpected Application Error!"),n.createElement("h3",{style:{fontStyle:"italic"}},t),r?n.createElement("pre",{style:s},r):null,o)}var Te=n.createElement(Re,null),Le=class extends n.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&"object"===typeof e&&e&&"digest"in e&&"string"===typeof e.digest){const t=function(e){if(e.startsWith("".concat(je,":").concat("ROUTE_ERROR_RESPONSE",":{")))try{let t=JSON.parse(e.slice(40));if("object"===typeof t&&t&&"number"===typeof t.status&&"string"===typeof t.statusText)return new ae(t.status,t.statusText,t.data)}catch(t){}}(e.digest);t&&(e=t)}let t=void 0!==e?n.createElement(be.Provider,{value:this.props.routeContext},n.createElement(ve.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?n.createElement(Ae,{error:e},t):t}};Le.contextType=me;var De=new WeakMap;function Ae(e){let{children:t,error:r}=e,{basename:a}=n.useContext(ge);if("object"===typeof r&&r&&"digest"in r&&"string"===typeof r.digest){let e=function(e){if(e.startsWith("".concat(je,":").concat("REDIRECT",":{")))try{let t=JSON.parse(e.slice(28));if("object"===typeof t&&t&&"number"===typeof t.status&&"string"===typeof t.statusText&&"string"===typeof t.location&&"boolean"===typeof t.reloadDocument&&"boolean"===typeof t.replace)return t}catch(t){}}(r.digest);if(e){let t=De.get(r);if(t)throw t;let s=oe(e.location,a);if(le&&!De.get(r)){if(!s.isExternal&&!e.reloadDocument){const t=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(s.to,{replace:e.replace}));throw De.set(r,t),t}window.location.href=s.absoluteURL||s.to}return n.createElement("meta",{httpEquiv:"refresh",content:"0;url=".concat(s.absoluteURL||s.to)})}}return t}function Oe(e){let{routeContext:t,match:r,children:a}=e,s=n.useContext(de);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),n.createElement(be.Provider,{value:t},a)}function ze(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==e){if(!r)return null;if(r.errors)e=r.matches;else{if(0!==t.length||r.initialized||!(r.matches.length>0))return null;e=r.matches}}let s=e,l=null===r||void 0===r?void 0:r.errors;if(null!=l){let e=s.findIndex(e=>e.route.id&&void 0!==(null===l||void 0===l?void 0:l[e.route.id]));j(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(l).join(","))),s=s.slice(0,Math.min(s.length,e+1))}let o=!1,i=-1;if(r)for(let n=0;n<s.length;n++){let e=s[n];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(i=n),e.route.id){let{loaderData:t,errors:a}=r,n=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!a||void 0===a[e.route.id]);if(e.route.lazy||n){o=!0,s=i>=0?s.slice(0,i+1):[s[0]];break}}}let c=r&&a?(e,t)=>{var n,s;a(e,{location:r.location,params:null!==(n=null===(s=r.matches)||void 0===s||null===(s=s[0])||void 0===s?void 0:s.params)&&void 0!==n?n:{},unstable_pattern:se(r.matches),errorInfo:t})}:void 0;return s.reduceRight((e,a,d)=>{let u,m=!1,p=null,h=null;r&&(u=l&&a.route.id?l[a.route.id]:void 0,p=a.route.errorElement||Te,o&&(i<0&&0===d?(He("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,h=null):i===d&&(m=!0,h=a.route.hydrateFallbackElement||null)));let x=t.concat(s.slice(0,d+1)),f=()=>{let t;return t=u?p:m?h:a.route.Component?n.createElement(a.route.Component,null):a.route.element?a.route.element:e,n.createElement(Oe,{match:a,routeContext:{outlet:e,matches:x,isDataRoute:null!=r},children:t})};return r&&(a.route.ErrorBoundary||a.route.errorElement||0===d)?n.createElement(Le,{location:r.location,revalidation:r.revalidation,component:p,error:u,children:f(),routeContext:{outlet:null,matches:x,isDataRoute:!0},onError:c}):f()},null)}function Fe(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Me(e){let t=n.useContext(de);return j(t,Fe(e)),t}function Be(e){let t=n.useContext(ue);return j(t,Fe(e)),t}function Ie(e){let t=function(e){let t=n.useContext(be);return j(t,Fe(e)),t}(e),r=t.matches[t.matches.length-1];return j(r.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),r.route.id}function qe(){var e;let t=n.useContext(ve),r=Be("useRouteError"),a=Ie("useRouteError");return void 0!==t?t:null===(e=r.errors)||void 0===e?void 0:e[a]}var Ue={};function He(e,t,r){t||Ue[e]||(Ue[e]=!0,w(!1,r))}var We={};function Ve(e,t){e||We[t]||(We[t]=!0,console.warn(t))}s.useOptimistic;n.memo(function(e){let{routes:t,future:r,state:a,onError:n}=e;return Pe(t,void 0,a,n,r)});function Ye(e){j(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Ke(e){let{basename:t="/",children:r=null,location:a,navigationType:s="POP",navigator:l,static:o=!1,unstable_useTransitions:i}=e;j(!we(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),d=n.useMemo(()=>({basename:c,navigator:l,static:o,unstable_useTransitions:i,future:{}}),[c,l,o,i]);"string"===typeof a&&(a=S(a));let{pathname:u="/",search:m="",hash:p="",state:h=null,key:x="default"}=a,f=n.useMemo(()=>{let e=V(u,c);return null==e?null:{location:{pathname:e,search:m,hash:p,state:h,key:x},navigationType:s}},[c,u,m,p,h,x,s]);return w(null!=f,'<Router basename="'.concat(c,'"> is not able to match the URL "').concat(u).concat(m).concat(p,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==f?null:n.createElement(ge.Provider,{value:d},n.createElement(ye.Provider,{children:r,value:f}))}function Je(e){let{children:t,location:r}=e;return Pe($e(t),r)}n.Component;function $e(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[];return n.Children.forEach(e,(e,a)=>{if(!n.isValidElement(e))return;let s=[...t,a];if(e.type===n.Fragment)return void r.push.apply(r,$e(e.props.children,s));j(e.type===Ye,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),j(!e.props.index||!e.props.children,"An index route cannot have child routes.");let l={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,middleware:e.props.middleware,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(l.children=$e(e.props.children,s)),r.push(l)}),r}var Ge="get",Qe="application/x-www-form-urlencoded";function Ze(e){return"undefined"!==typeof HTMLElement&&e instanceof HTMLElement}var Xe=null;var et=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function tt(e){return null==e||et.has(e)?e:(w(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Qe,'"')),null)}function rt(e,t){let r,a,n,s,l;if(Ze(o=e)&&"form"===o.tagName.toLowerCase()){let l=e.getAttribute("action");a=l?V(l,t):null,r=e.getAttribute("method")||Ge,n=tt(e.getAttribute("enctype"))||Qe,s=new FormData(e)}else if(function(e){return Ze(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Ze(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let l=e.form;if(null==l)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||l.getAttribute("action");if(a=o?V(o,t):null,r=e.getAttribute("formmethod")||l.getAttribute("method")||Ge,n=tt(e.getAttribute("formenctype"))||tt(l.getAttribute("enctype"))||Qe,s=new FormData(l,e),!function(){if(null===Xe)try{new FormData(document.createElement("form"),0),Xe=!1}catch(e){Xe=!0}return Xe}()){let{name:t,type:r,value:a}=e;if("image"===r){let e=t?"".concat(t,"."):"";s.append("".concat(e,"x"),"0"),s.append("".concat(e,"y"),"0")}else t&&s.append(t,a)}}else{if(Ze(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Ge,a=null,n=Qe,l=e}var o;return s&&"text/plain"===n&&(l=s,s=void 0),{action:a,method:r.toLowerCase(),encType:n,formData:s,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function at(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function nt(e,t,r,a){let n="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return r?n.pathname.endsWith("/")?n.pathname="".concat(n.pathname,"_.").concat(a):n.pathname="".concat(n.pathname,".").concat(a):"/"===n.pathname?n.pathname="_root.".concat(a):t&&"/"===V(n.pathname,t)?n.pathname="".concat(t.replace(/\/$/,""),"/_root.").concat(a):n.pathname="".concat(n.pathname.replace(/\/$/,""),".").concat(a),n}async function st(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function lt(e){return null!=e&&"string"===typeof e.page}function ot(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function it(e,t,r,a,n,s){let l=(e,t)=>!r[t]||e.route.id!==r[t].route.id,o=(e,t)=>{var a;return r[t].pathname!==e.pathname||(null===(a=r[t].route.path)||void 0===a?void 0:a.endsWith("*"))&&r[t].params["*"]!==e.params["*"]};return"assets"===s?t.filter((e,t)=>l(e,t)||o(e,t)):"data"===s?t.filter((t,s)=>{let i=a.routes[t.route.id];if(!i||!i.hasLoader)return!1;if(l(t,s)||o(t,s))return!0;if(t.route.shouldRevalidate){var c;let a=t.route.shouldRevalidate({currentUrl:new URL(n.pathname+n.search+n.hash,window.origin),currentParams:(null===(c=r[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof a)return a}return!0}):[]}function ct(e,t){let{includeHydrateFallback:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a=e.map(e=>{let a=t.routes[e.route.id];if(!a)return[];let n=[a.module];return a.clientActionModule&&(n=n.concat(a.clientActionModule)),a.clientLoaderModule&&(n=n.concat(a.clientLoaderModule)),r&&a.hydrateFallbackModule&&(n=n.concat(a.hydrateFallbackModule)),a.imports&&(n=n.concat(a.imports)),n}).flat(1),[...new Set(a)];var a}function dt(e,t){let r=new Set,a=new Set(t);return e.reduce((e,n)=>{if(t&&!lt(n)&&"script"===n.as&&n.href&&a.has(n.href))return e;let s=JSON.stringify(function(e){let t={},r=Object.keys(e).sort();for(let a of r)t[a]=e[a];return t}(n));return r.has(s)||(r.add(s),e.push({key:s,link:n})),e},[])}function ut(e,t){return"lazy"===e.mode&&!0===t}function mt(){let e=n.useContext(de);return at(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function pt(){let e=n.useContext(ue);return at(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var ht=n.createContext(void 0);function xt(){let e=n.useContext(ht);return at(e,"You must render this element inside a <HydratedRouter> element"),e}function ft(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function gt(e,t,r){if(r&&!jt)return[e[0]];if(t){let r=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,r+1)}return e}ht.displayName="FrameworkContext";function yt(e){let{page:t}=e,r=o(e,h),{router:a}=mt(),s=n.useMemo(()=>P(a.routes,t,a.basename),[a.routes,t,a.basename]);return s?n.createElement(vt,m({page:t,matches:s},r)):null}function bt(e){let{manifest:t,routeModules:r}=xt(),[a,s]=n.useState([]);return n.useEffect(()=>{let a=!1;return async function(e,t,r){return dt((await Promise.all(e.map(async e=>{let a=t.routes[e.route.id];if(a){let e=await st(a,r);return e.links?e.links():[]}return[]}))).flat(1).filter(ot).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?m(m({},e),{},{rel:"prefetch",as:"style"}):m(m({},e),{},{rel:"prefetch"})))}(e,t,r).then(e=>{a||s(e)}),()=>{a=!0}},[e,t,r]),a}function vt(e){let{page:t,matches:r}=e,a=o(e,x),s=Ne(),{future:l,manifest:i,routeModules:c}=xt(),{basename:d}=mt(),{loaderData:u,matches:p}=pt(),h=n.useMemo(()=>it(t,r,p,i,s,"data"),[t,r,p,i,s]),f=n.useMemo(()=>it(t,r,p,i,s,"assets"),[t,r,p,i,s]),g=n.useMemo(()=>{if(t===s.pathname+s.search+s.hash)return[];let e=new Set,a=!1;if(r.forEach(t=>{var r;let n=i.routes[t.route.id];n&&n.hasLoader&&(!h.some(e=>e.route.id===t.route.id)&&t.route.id in u&&null!==(r=c[t.route.id])&&void 0!==r&&r.shouldRevalidate||n.hasClientLoader?a=!0:e.add(t.route.id))}),0===e.size)return[];let n=nt(t,d,l.unstable_trailingSlashAwareDataRequests,"data");return a&&e.size>0&&n.searchParams.set("_routes",r.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[n.pathname+n.search]},[d,l.unstable_trailingSlashAwareDataRequests,u,s,i,h,r,t,c]),y=n.useMemo(()=>ct(f,i),[f,i]),b=bt(f);return n.createElement(n.Fragment,null,g.map(e=>n.createElement("link",m({key:e,rel:"prefetch",as:"fetch",href:e},a))),y.map(e=>n.createElement("link",m({key:e,rel:"modulepreload",href:e},a))),b.map(e=>{let{key:t,link:r}=e;return n.createElement("link",m({key:t,nonce:a.nonce},r))}))}var jt=!1;function wt(e){let{manifest:t,serverHandoffString:r,isSpaMode:a,renderMeta:s,routeDiscovery:l,ssr:i}=xt(),{router:c,static:d,staticContext:u}=mt(),{matches:h}=pt(),x=pe(),f=ut(l,i);s&&(s.didRenderScripts=!0);let g=gt(h,null,a);n.useEffect(()=>{jt=!0},[]);let y=n.useMemo(()=>{var a;if(x)return null;let s=u?"window.__reactRouterContext = ".concat(r,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",l=d?"".concat(null!==(a=t.hmr)&&void 0!==a&&a.runtime?"import ".concat(JSON.stringify(t.hmr.runtime),";"):"").concat(f?"":"import ".concat(JSON.stringify(t.url)),";\n").concat(g.map((e,r)=>{let a="route".concat(r),n=t.routes[e.route.id];at(n,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:s,clientLoaderModule:l,clientMiddlewareModule:o,hydrateFallbackModule:i,module:c}=n,d=[...s?[{module:s,varName:"".concat(a,"_clientAction")}]:[],...l?[{module:l,varName:"".concat(a,"_clientLoader")}]:[],...o?[{module:o,varName:"".concat(a,"_clientMiddleware")}]:[],...i?[{module:i,varName:"".concat(a,"_HydrateFallback")}]:[],{module:c,varName:"".concat(a,"_main")}];return 1===d.length?"import * as ".concat(a," from ").concat(JSON.stringify(c),";"):[d.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(a," = {").concat(d.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(f?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:r}=e,a=o(e,p),n=new Set(t.state.matches.map(e=>e.route.id)),s=t.state.location.pathname.split("/").filter(Boolean),l=["/"];for(s.pop();s.length>0;)l.push("/".concat(s.join("/"))),s.pop();l.forEach(e=>{let r=P(t.routes,e,t.basename);r&&r.forEach(e=>n.add(e.route.id))});let i=[...n].reduce((e,t)=>Object.assign(e,{[t]:a.routes[t]}),{});return m(m({},a),{},{routes:i,sri:!!r||void 0})}(t,c),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(g.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(t.entry.module),");"):" ";return n.createElement(n.Fragment,null,n.createElement("script",m(m({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:s},type:void 0})),n.createElement("script",m(m({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:l},type:"module",async:!0})))},[]),b=jt||x?[]:(v=t.entry.imports.concat(ct(g,t,{includeHydrateFallback:!0})),[...new Set(v)]);var v;let j="object"===typeof t.sri?t.sri:{};return Ve(!x,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),jt||x?null:n.createElement(n.Fragment,null,"object"===typeof t.sri?n.createElement("script",m(m({},e),{},{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:j})}})):null,f?null:n.createElement("link",{rel:"modulepreload",href:t.url,crossOrigin:e.crossOrigin,integrity:j[t.url],suppressHydrationWarning:!0}),n.createElement("link",{rel:"modulepreload",href:t.entry.module,crossOrigin:e.crossOrigin,integrity:j[t.entry.module],suppressHydrationWarning:!0}),b.map(t=>n.createElement("link",{key:t,rel:"modulepreload",href:t,crossOrigin:e.crossOrigin,integrity:j[t],suppressHydrationWarning:!0})),y)}function Nt(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}n.Component;function _t(e){let{error:t,isOutsideRemixApp:r}=e;console.error(t);let a,s=n.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(ne(t))return n.createElement(kt,{title:"Unhandled Thrown Response!"},n.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),s);if(t instanceof Error)a=t;else{let e=null==t?"Unknown Error":"object"===typeof t&&"toString"in t?t.toString():JSON.stringify(t);a=new Error(e)}return n.createElement(kt,{title:"Application Error!",isOutsideRemixApp:r},n.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),n.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},a.stack),s)}function kt(e){var t;let{title:r,renderScripts:a,isOutsideRemixApp:s,children:l}=e,{routeModules:o}=xt();return null!==(t=o.root)&&void 0!==t&&t.Layout&&!s?l:n.createElement("html",{lang:"en"},n.createElement("head",null,n.createElement("meta",{charSet:"utf-8"}),n.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),n.createElement("title",null,r)),n.createElement("body",null,n.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},l,a?n.createElement(wt,null):null)))}var St="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{St&&(window.__reactRouterVersion="7.12.0")}catch(Js){}function Ct(e){let{basename:t,children:r,unstable_useTransitions:a,window:s}=e,l=n.useRef();null==l.current&&(l.current=v({window:s,v5Compat:!0}));let o=l.current,[i,c]=n.useState({action:o.action,location:o.location}),d=n.useCallback(e=>{!1===a?c(e):n.startTransition(()=>c(e))},[a]);return n.useLayoutEffect(()=>o.listen(d),[o,d]),n.createElement(Ke,{basename:t,children:r,location:i.location,navigationType:i.action,navigator:o,unstable_useTransitions:a})}var Et=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Pt=n.forwardRef(function(e,t){let{onClick:r,discover:a="render",prefetch:s="none",relative:l,reloadDocument:i,replace:c,state:d,target:u,to:p,preventScrollReset:h,viewTransition:x,unstable_defaultShouldRevalidate:g}=e,y=o(e,f),{basename:b,unstable_useTransitions:v}=n.useContext(ge),w="string"===typeof p&&Et.test(p),N=oe(p,b);p=N.to;let _=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};j(we(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:a}=n.useContext(ge),{hash:s,pathname:l,search:o}=Ee(e,{relative:t}),i=l;return"/"!==r&&(i="/"===l?r:X([r,l])),a.createHref({pathname:i,search:o,hash:s})}(p,{relative:l}),[S,C,E]=function(e,t){let r=n.useContext(ht),[a,s]=n.useState(!1),[l,o]=n.useState(!1),{onFocus:i,onBlur:c,onMouseEnter:d,onMouseLeave:u,onTouchStart:m}=t,p=n.useRef(null);n.useEffect(()=>{if("render"===e&&o(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{o(e.isIntersecting)})},{threshold:.5});return p.current&&e.observe(p.current),()=>{e.disconnect()}}},[e]),n.useEffect(()=>{if(a){let e=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(e)}}},[a]);let h=()=>{s(!0)},x=()=>{s(!1),o(!1)};return r?"intent"!==e?[l,p,{}]:[l,p,{onFocus:ft(i,h),onBlur:ft(c,x),onMouseEnter:ft(d,h),onMouseLeave:ft(u,x),onTouchStart:ft(m,h)}]:[!1,p,{}]}(s,y),P=function(e){let{target:t,replace:r,state:a,preventScrollReset:s,relative:l,viewTransition:o,unstable_defaultShouldRevalidate:i,unstable_useTransitions:c}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=Se(),u=Ne(),m=Ee(e,{relative:l});return n.useCallback(p=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(p,t)){p.preventDefault();let t=void 0!==r?r:k(u)===k(m),h=()=>d(e,{replace:t,state:a,preventScrollReset:s,relative:l,viewTransition:o,unstable_defaultShouldRevalidate:i});c?n.startTransition(()=>h()):h()}},[u,d,m,r,a,t,e,s,l,o,i,c])}(p,{replace:c,state:d,target:u,preventScrollReset:h,relative:l,viewTransition:x,unstable_defaultShouldRevalidate:g,unstable_useTransitions:v});let R=n.createElement("a",m(m(m({},y),E),{},{href:N.absoluteURL||_,onClick:N.isExternal||i?r:function(e){r&&r(e),e.defaultPrevented||P(e)},ref:Nt(t,C),target:u,"data-discover":w||"render"!==a?void 0:"true"}));return S&&!w?n.createElement(n.Fragment,null,R,n.createElement(yt,{page:_})):R});Pt.displayName="Link",n.forwardRef(function(e,t){let{"aria-current":r="page",caseSensitive:a=!1,className:s="",end:l=!1,style:i,to:c,viewTransition:d,children:u}=e,p=o(e,g),h=Ee(c,{relative:p.relative}),x=Ne(),f=n.useContext(ue),{navigator:y,basename:b}=n.useContext(ge),v=null!=f&&function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.useContext(he);j(null!=r,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=Lt("useViewTransitionState"),s=Ee(e,{relative:t});if(!r.isTransitioning)return!1;let l=V(r.currentLocation.pathname,a)||r.currentLocation.pathname,o=V(r.nextLocation.pathname,a)||r.nextLocation.pathname;return null!=U(s.pathname,o)||null!=U(s.pathname,l)}(h)&&!0===d,w=y.encodeLocation?y.encodeLocation(h).pathname:h.pathname,N=x.pathname,_=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;a||(N=N.toLowerCase(),_=_?_.toLowerCase():null,w=w.toLowerCase()),_&&b&&(_=V(_,b)||_);const k="/"!==w&&w.endsWith("/")?w.length-1:w.length;let S,C=N===w||!l&&N.startsWith(w)&&"/"===N.charAt(k),E=null!=_&&(_===w||!l&&_.startsWith(w)&&"/"===_.charAt(w.length)),P={isActive:C,isPending:E,isTransitioning:v},R=C?r:void 0;S="function"===typeof s?s(P):[s,C?"active":null,E?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let T="function"===typeof i?i(P):i;return n.createElement(Pt,m(m({},p),{},{"aria-current":R,className:S,ref:t,style:T,to:c,viewTransition:d}),"function"===typeof u?u(P):u)}).displayName="NavLink";var Rt=n.forwardRef((e,t)=>{let{discover:r="render",fetcherKey:a,navigate:s,reloadDocument:l,replace:i,state:c,method:d=Ge,action:u,onSubmit:p,relative:h,preventScrollReset:x,viewTransition:f,unstable_defaultShouldRevalidate:g}=e,b=o(e,y),{unstable_useTransitions:v}=n.useContext(ge),w=Ot(),N=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:r}=n.useContext(ge),a=n.useContext(be);j(a,"useFormAction must be used inside a RouteContext");let[s]=a.matches.slice(-1),l=m({},Ee(e||".",{relative:t})),o=Ne();if(null==e){l.search=o.search;let e=new URLSearchParams(l.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let r=e.toString();l.search=r?"?".concat(r):""}}e&&"."!==e||!s.route.index||(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index");"/"!==r&&(l.pathname="/"===l.pathname?r:X([r,l.pathname]));return k(l)}(u,{relative:h}),_="get"===d.toLowerCase()?"get":"post",S="string"===typeof u&&Et.test(u);return n.createElement("form",m(m({ref:t,method:_,action:N,onSubmit:l?p:e=>{if(p&&p(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,r=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||d,l=()=>w(t||e.currentTarget,{fetcherKey:a,method:r,navigate:s,replace:i,state:c,relative:h,preventScrollReset:x,viewTransition:f,unstable_defaultShouldRevalidate:g});v&&!1!==s?n.startTransition(()=>l()):l()}},b),{},{"data-discover":S||"render"!==r?void 0:"true"}))});function Tt(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Lt(e){let t=n.useContext(de);return j(t,Tt(e)),t}Rt.displayName="Form";var Dt=0,At=()=>"__".concat(String(++Dt),"__");function Ot(){let{router:e}=Lt("useSubmit"),{basename:t}=n.useContext(ge),r=Ie("useRouteId"),a=e.fetch,s=e.navigate;return n.useCallback(async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:l,method:o,encType:i,formData:c,body:d}=rt(e,t);if(!1===n.navigate){let e=n.fetcherKey||At();await a(e,r,n.action||l,{unstable_defaultShouldRevalidate:n.unstable_defaultShouldRevalidate,preventScrollReset:n.preventScrollReset,formData:c,body:d,formMethod:n.method||o,formEncType:n.encType||i,flushSync:n.flushSync})}else await s(n.action||l,{unstable_defaultShouldRevalidate:n.unstable_defaultShouldRevalidate,preventScrollReset:n.preventScrollReset,formData:c,body:d,formMethod:n.method||o,formEncType:n.encType||i,replace:n.replace,state:n.state,fromRouteId:r,flushSync:n.flushSync,viewTransition:n.viewTransition})},[a,s,t,r])}function zt(e,t){return function(){return e.apply(t,arguments)}}const{toString:Ft}=Object.prototype,{getPrototypeOf:Mt}=Object,{iterator:Bt,toStringTag:It}=Symbol,qt=(Ut=Object.create(null),e=>{const t=Ft.call(e);return Ut[t]||(Ut[t]=t.slice(8,-1).toLowerCase())});var Ut;const Ht=e=>(e=e.toLowerCase(),t=>qt(t)===e),Wt=e=>t=>typeof t===e,{isArray:Vt}=Array,Yt=Wt("undefined");function Kt(e){return null!==e&&!Yt(e)&&null!==e.constructor&&!Yt(e.constructor)&&Gt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Jt=Ht("ArrayBuffer");const $t=Wt("string"),Gt=Wt("function"),Qt=Wt("number"),Zt=e=>null!==e&&"object"===typeof e,Xt=e=>{if("object"!==qt(e))return!1;const t=Mt(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(It in e)&&!(Bt in e)},er=Ht("Date"),tr=Ht("File"),rr=Ht("Blob"),ar=Ht("FileList"),nr=Ht("URLSearchParams"),[sr,lr,or,ir]=["ReadableStream","Request","Response","Headers"].map(Ht);function cr(e,t){let r,a,{allOwnKeys:n=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),Vt(e))for(r=0,a=e.length;r<a;r++)t.call(null,e[r],r,e);else{if(Kt(e))return;const a=n?Object.getOwnPropertyNames(e):Object.keys(e),s=a.length;let l;for(r=0;r<s;r++)l=a[r],t.call(null,e[l],l,e)}}function dr(e,t){if(Kt(e))return null;t=t.toLowerCase();const r=Object.keys(e);let a,n=r.length;for(;n-- >0;)if(a=r[n],t===a.toLowerCase())return a;return null}const ur="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:r.g,mr=e=>!Yt(e)&&e!==ur;const pr=(hr="undefined"!==typeof Uint8Array&&Mt(Uint8Array),e=>hr&&e instanceof hr);var hr;const xr=Ht("HTMLFormElement"),fr=(e=>{let{hasOwnProperty:t}=e;return(e,r)=>t.call(e,r)})(Object.prototype),gr=Ht("RegExp"),yr=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),a={};cr(r,(r,n)=>{let s;!1!==(s=t(r,n,e))&&(a[n]=s||r)}),Object.defineProperties(e,a)};const br=Ht("AsyncFunction"),vr=((e,t)=>{return e?setImmediate:t?(r="axios@".concat(Math.random()),a=[],ur.addEventListener("message",e=>{let{source:t,data:n}=e;t===ur&&n===r&&a.length&&a.shift()()},!1),e=>{a.push(e),ur.postMessage(r,"*")}):e=>setTimeout(e);var r,a})("function"===typeof setImmediate,Gt(ur.postMessage)),jr="undefined"!==typeof queueMicrotask?queueMicrotask.bind(ur):"undefined"!==typeof process&&process.nextTick||vr,wr={isArray:Vt,isArrayBuffer:Jt,isBuffer:Kt,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||Gt(e.append)&&("formdata"===(t=qt(e))||"object"===t&&Gt(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Jt(e.buffer),t},isString:$t,isNumber:Qt,isBoolean:e=>!0===e||!1===e,isObject:Zt,isPlainObject:Xt,isEmptyObject:e=>{if(!Zt(e)||Kt(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(Js){return!1}},isReadableStream:sr,isRequest:lr,isResponse:or,isHeaders:ir,isUndefined:Yt,isDate:er,isFile:tr,isBlob:rr,isRegExp:gr,isFunction:Gt,isStream:e=>Zt(e)&&Gt(e.pipe),isURLSearchParams:nr,isTypedArray:pr,isFileList:ar,forEach:cr,merge:function e(){const{caseless:t,skipUndefined:r}=mr(this)&&this||{},a={},n=(n,s)=>{const l=t&&dr(a,s)||s;Xt(a[l])&&Xt(n)?a[l]=e(a[l],n):Xt(n)?a[l]=e({},n):Vt(n)?a[l]=n.slice():r&&Yt(n)||(a[l]=n)};for(let s=0,l=arguments.length;s<l;s++)arguments[s]&&cr(arguments[s],n);return a},extend:function(e,t,r){let{allOwnKeys:a}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return cr(t,(t,a)=>{r&&Gt(t)?e[a]=zt(t,r):e[a]=t},{allOwnKeys:a}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,a)=>{e.prototype=Object.create(t.prototype,a),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,a)=>{let n,s,l;const o={};if(t=t||{},null==e)return t;do{for(n=Object.getOwnPropertyNames(e),s=n.length;s-- >0;)l=n[s],a&&!a(l,e,t)||o[l]||(t[l]=e[l],o[l]=!0);e=!1!==r&&Mt(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:qt,kindOfTest:Ht,endsWith:(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;const a=e.indexOf(t,r);return-1!==a&&a===r},toArray:e=>{if(!e)return null;if(Vt(e))return e;let t=e.length;if(!Qt(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{const r=(e&&e[Bt]).call(e);let a;for(;(a=r.next())&&!a.done;){const r=a.value;t.call(e,r[0],r[1])}},matchAll:(e,t)=>{let r;const a=[];for(;null!==(r=e.exec(t));)a.push(r);return a},isHTMLForm:xr,hasOwnProperty:fr,hasOwnProp:fr,reduceDescriptors:yr,freezeMethods:e=>{yr(e,(t,r)=>{if(Gt(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const a=e[r];Gt(a)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))})},toObjectSet:(e,t)=>{const r={},a=e=>{e.forEach(e=>{r[e]=!0})};return Vt(e)?a(e):a(String(e).split(t)),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,r){return t.toUpperCase()+r}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:dr,global:ur,isContextDefined:mr,isSpecCompliantForm:function(e){return!!(e&&Gt(e.append)&&"FormData"===e[It]&&e[Bt])},toJSONObject:e=>{const t=new Array(10),r=(e,a)=>{if(Zt(e)){if(t.indexOf(e)>=0)return;if(Kt(e))return e;if(!("toJSON"in e)){t[a]=e;const n=Vt(e)?[]:{};return cr(e,(e,t)=>{const s=r(e,a+1);!Yt(s)&&(n[t]=s)}),t[a]=void 0,n}}return e};return r(e,0)},isAsyncFn:br,isThenable:e=>e&&(Zt(e)||Gt(e))&&Gt(e.then)&&Gt(e.catch),setImmediate:vr,asap:jr,isIterable:e=>null!=e&&Gt(e[Bt])};function Nr(e,t,r,a,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),a&&(this.request=a),n&&(this.response=n,this.status=n.status?n.status:null)}wr.inherits(Nr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:wr.toJSONObject(this.config),code:this.code,status:this.status}}});const _r=Nr.prototype,kr={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{kr[e]={value:e}}),Object.defineProperties(Nr,kr),Object.defineProperty(_r,"isAxiosError",{value:!0}),Nr.from=(e,t,r,a,n,s)=>{const l=Object.create(_r);wr.toFlatObject(e,l,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);const o=e&&e.message?e.message:"Error",i=null==t&&e?e.code:t;return Nr.call(l,o,i,r,a,n),e&&null==l.cause&&Object.defineProperty(l,"cause",{value:e,configurable:!0}),l.name=e&&e.name||"Error",s&&Object.assign(l,s),l};const Sr=Nr;function Cr(e){return wr.isPlainObject(e)||wr.isArray(e)}function Er(e){return wr.endsWith(e,"[]")?e.slice(0,-2):e}function Pr(e,t,r){return e?e.concat(t).map(function(e,t){return e=Er(e),!r&&t?"["+e+"]":e}).join(r?".":""):t}const Rr=wr.toFlatObject(wr,{},null,function(e){return/^is[A-Z]/.test(e)});const Tr=function(e,t,r){if(!wr.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const a=(r=wr.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!wr.isUndefined(t[e])})).metaTokens,n=r.visitor||c,s=r.dots,l=r.indexes,o=(r.Blob||"undefined"!==typeof Blob&&Blob)&&wr.isSpecCompliantForm(t);if(!wr.isFunction(n))throw new TypeError("visitor must be a function");function i(e){if(null===e)return"";if(wr.isDate(e))return e.toISOString();if(wr.isBoolean(e))return e.toString();if(!o&&wr.isBlob(e))throw new Sr("Blob is not supported. Use a Buffer instead.");return wr.isArrayBuffer(e)||wr.isTypedArray(e)?o&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,r,n){let o=e;if(e&&!n&&"object"===typeof e)if(wr.endsWith(r,"{}"))r=a?r:r.slice(0,-2),e=JSON.stringify(e);else if(wr.isArray(e)&&function(e){return wr.isArray(e)&&!e.some(Cr)}(e)||(wr.isFileList(e)||wr.endsWith(r,"[]"))&&(o=wr.toArray(e)))return r=Er(r),o.forEach(function(e,a){!wr.isUndefined(e)&&null!==e&&t.append(!0===l?Pr([r],a,s):null===l?r:r+"[]",i(e))}),!1;return!!Cr(e)||(t.append(Pr(n,r,s),i(e)),!1)}const d=[],u=Object.assign(Rr,{defaultVisitor:c,convertValue:i,isVisitable:Cr});if(!wr.isObject(e))throw new TypeError("data must be an object");return function e(r,a){if(!wr.isUndefined(r)){if(-1!==d.indexOf(r))throw Error("Circular reference detected in "+a.join("."));d.push(r),wr.forEach(r,function(r,s){!0===(!(wr.isUndefined(r)||null===r)&&n.call(t,r,wr.isString(s)?s.trim():s,a,u))&&e(r,a?a.concat(s):[s])}),d.pop()}}(e),t};function Lr(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function Dr(e,t){this._pairs=[],e&&Tr(e,this,t)}const Ar=Dr.prototype;Ar.append=function(e,t){this._pairs.push([e,t])},Ar.toString=function(e){const t=e?function(t){return e.call(this,t,Lr)}:Lr;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const Or=Dr;function zr(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Fr(e,t,r){if(!t)return e;const a=r&&r.encode||zr;wr.isFunction(r)&&(r={serialize:r});const n=r&&r.serialize;let s;if(s=n?n(t,r):wr.isURLSearchParams(t)?t.toString():new Or(t,r).toString(a),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}const Mr=class{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){wr.forEach(this.handlers,function(t){null!==t&&e(t)})}},Br={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ir={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Or,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},qr="undefined"!==typeof window&&"undefined"!==typeof document,Ur="object"===typeof navigator&&navigator||void 0,Hr=qr&&(!Ur||["ReactNative","NativeScript","NS"].indexOf(Ur.product)<0),Wr="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,Vr=qr&&window.location.href||"http://localhost",Yr=m(m({},a),Ir);const Kr=function(e){function t(e,r,a,n){let s=e[n++];if("__proto__"===s)return!0;const l=Number.isFinite(+s),o=n>=e.length;if(s=!s&&wr.isArray(a)?a.length:s,o)return wr.hasOwnProp(a,s)?a[s]=[a[s],r]:a[s]=r,!l;a[s]&&wr.isObject(a[s])||(a[s]=[]);return t(e,r,a[s],n)&&wr.isArray(a[s])&&(a[s]=function(e){const t={},r=Object.keys(e);let a;const n=r.length;let s;for(a=0;a<n;a++)s=r[a],t[s]=e[s];return t}(a[s])),!l}if(wr.isFormData(e)&&wr.isFunction(e.entries)){const r={};return wr.forEachEntry(e,(e,a)=>{t(function(e){return wr.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),a,r,0)}),r}return null};const Jr={transitional:Br,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",a=r.indexOf("application/json")>-1,n=wr.isObject(e);n&&wr.isHTMLForm(e)&&(e=new FormData(e));if(wr.isFormData(e))return a?JSON.stringify(Kr(e)):e;if(wr.isArrayBuffer(e)||wr.isBuffer(e)||wr.isStream(e)||wr.isFile(e)||wr.isBlob(e)||wr.isReadableStream(e))return e;if(wr.isArrayBufferView(e))return e.buffer;if(wr.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(n){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Tr(e,new Yr.classes.URLSearchParams,m({visitor:function(e,t,r,a){return Yr.isNode&&wr.isBuffer(e)?(this.append(t,e.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((s=wr.isFileList(e))||r.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Tr(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return n||a?(t.setContentType("application/json",!1),function(e,t,r){if(wr.isString(e))try{return(t||JSON.parse)(e),wr.trim(e)}catch(Js){if("SyntaxError"!==Js.name)throw Js}return(r||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Jr.transitional,r=t&&t.forcedJSONParsing,a="json"===this.responseType;if(wr.isResponse(e)||wr.isReadableStream(e))return e;if(e&&wr.isString(e)&&(r&&!this.responseType||a)){const r=!(t&&t.silentJSONParsing)&&a;try{return JSON.parse(e,this.parseReviver)}catch(Js){if(r){if("SyntaxError"===Js.name)throw Sr.from(Js,Sr.ERR_BAD_RESPONSE,this,null,this.response);throw Js}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Yr.classes.FormData,Blob:Yr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};wr.forEach(["delete","get","head","post","put","patch"],e=>{Jr.headers[e]={}});const $r=Jr,Gr=wr.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Qr=Symbol("internals");function Zr(e){return e&&String(e).trim().toLowerCase()}function Xr(e){return!1===e||null==e?e:wr.isArray(e)?e.map(Xr):String(e)}function ea(e,t,r,a,n){return wr.isFunction(a)?a.call(this,t,r):(n&&(t=r),wr.isString(t)?wr.isString(a)?-1!==t.indexOf(a):wr.isRegExp(a)?a.test(t):void 0:void 0)}class ta{constructor(e){e&&this.set(e)}set(e,t,r){const a=this;function n(e,t,r){const n=Zr(t);if(!n)throw new Error("header name must be a non-empty string");const s=wr.findKey(a,n);(!s||void 0===a[s]||!0===r||void 0===r&&!1!==a[s])&&(a[s||t]=Xr(e))}const s=(e,t)=>wr.forEach(e,(e,r)=>n(e,r,t));if(wr.isPlainObject(e)||e instanceof this.constructor)s(e,t);else if(wr.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))s((e=>{const t={};let r,a,n;return e&&e.split("\n").forEach(function(e){n=e.indexOf(":"),r=e.substring(0,n).trim().toLowerCase(),a=e.substring(n+1).trim(),!r||t[r]&&Gr[r]||("set-cookie"===r?t[r]?t[r].push(a):t[r]=[a]:t[r]=t[r]?t[r]+", "+a:a)}),t})(e),t);else if(wr.isObject(e)&&wr.isIterable(e)){let r,a,n={};for(const t of e){if(!wr.isArray(t))throw TypeError("Object iterator must return a key-value pair");n[a=t[0]]=(r=n[a])?wr.isArray(r)?[...r,t[1]]:[r,t[1]]:t[1]}s(n,t)}else null!=e&&n(t,e,r);return this}get(e,t){if(e=Zr(e)){const r=wr.findKey(this,e);if(r){const e=this[r];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=r.exec(e);)t[a[1]]=a[2];return t}(e);if(wr.isFunction(t))return t.call(this,e,r);if(wr.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Zr(e)){const r=wr.findKey(this,e);return!(!r||void 0===this[r]||t&&!ea(0,this[r],r,t))}return!1}delete(e,t){const r=this;let a=!1;function n(e){if(e=Zr(e)){const n=wr.findKey(r,e);!n||t&&!ea(0,r[n],n,t)||(delete r[n],a=!0)}}return wr.isArray(e)?e.forEach(n):n(e),a}clear(e){const t=Object.keys(this);let r=t.length,a=!1;for(;r--;){const n=t[r];e&&!ea(0,this[n],n,e,!0)||(delete this[n],a=!0)}return a}normalize(e){const t=this,r={};return wr.forEach(this,(a,n)=>{const s=wr.findKey(r,n);if(s)return t[s]=Xr(a),void delete t[n];const l=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}(n):String(n).trim();l!==n&&delete t[n],t[l]=Xr(a),r[l]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return wr.forEach(this,(r,a)=>{null!=r&&!1!==r&&(t[a]=e&&wr.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,r]=e;return t+": "+r}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var r=arguments.length,a=new Array(r>1?r-1:0),n=1;n<r;n++)a[n-1]=arguments[n];return a.forEach(e=>t.set(e)),t}static accessor(e){const t=(this[Qr]=this[Qr]={accessors:{}}).accessors,r=this.prototype;function a(e){const a=Zr(e);t[a]||(!function(e,t){const r=wr.toCamelCase(" "+t);["get","set","has"].forEach(a=>{Object.defineProperty(e,a+r,{value:function(e,r,n){return this[a].call(this,t,e,r,n)},configurable:!0})})}(r,e),t[a]=!0)}return wr.isArray(e)?e.forEach(a):a(e),this}}ta.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),wr.reduceDescriptors(ta.prototype,(e,t)=>{let{value:r}=e,a=t[0].toUpperCase()+t.slice(1);return{get:()=>r,set(e){this[a]=e}}}),wr.freezeMethods(ta);const ra=ta;function aa(e,t){const r=this||$r,a=t||r,n=ra.from(a.headers);let s=a.data;return wr.forEach(e,function(e){s=e.call(r,s,n.normalize(),t?t.status:void 0)}),n.normalize(),s}function na(e){return!(!e||!e.__CANCEL__)}function sa(e,t,r){Sr.call(this,null==e?"canceled":e,Sr.ERR_CANCELED,t,r),this.name="CanceledError"}wr.inherits(sa,Sr,{__CANCEL__:!0});const la=sa;function oa(e,t,r){const a=r.config.validateStatus;r.status&&a&&!a(r.status)?t(new Sr("Request failed with status code "+r.status,[Sr.ERR_BAD_REQUEST,Sr.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}const ia=function(e,t){e=e||10;const r=new Array(e),a=new Array(e);let n,s=0,l=0;return t=void 0!==t?t:1e3,function(o){const i=Date.now(),c=a[l];n||(n=i),r[s]=o,a[s]=i;let d=l,u=0;for(;d!==s;)u+=r[d++],d%=e;if(s=(s+1)%e,s===l&&(l=(l+1)%e),i-n<t)return;const m=c&&i-c;return m?Math.round(1e3*u/m):void 0}};const ca=function(e,t){let r,a,n=0,s=1e3/t;const l=function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();n=s,r=null,a&&(clearTimeout(a),a=null),e(...t)};return[function(){const e=Date.now(),t=e-n;for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];t>=s?l(i,e):(r=i,a||(a=setTimeout(()=>{a=null,l(r)},s-t)))},()=>r&&l(r)]},da=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,a=0;const n=ia(50,250);return ca(r=>{const s=r.loaded,l=r.lengthComputable?r.total:void 0,o=s-a,i=n(o);a=s;e({loaded:s,total:l,progress:l?s/l:void 0,bytes:o,rate:i||void 0,estimated:i&&l&&s<=l?(l-s)/i:void 0,event:r,lengthComputable:null!=l,[t?"download":"upload"]:!0})},r)},ua=(e,t)=>{const r=null!=e;return[a=>t[0]({lengthComputable:r,total:e,loaded:a}),t[1]]},ma=e=>function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return wr.asap(()=>e(...r))},pa=Yr.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,Yr.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(Yr.origin),Yr.navigator&&/(msie|trident)/i.test(Yr.navigator.userAgent)):()=>!0,ha=Yr.hasStandardBrowserEnv?{write(e,t,r,a,n,s,l){if("undefined"===typeof document)return;const o=["".concat(e,"=").concat(encodeURIComponent(t))];wr.isNumber(r)&&o.push("expires=".concat(new Date(r).toUTCString())),wr.isString(a)&&o.push("path=".concat(a)),wr.isString(n)&&o.push("domain=".concat(n)),!0===s&&o.push("secure"),wr.isString(l)&&o.push("SameSite=".concat(l)),document.cookie=o.join("; ")},read(e){if("undefined"===typeof document)return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read:()=>null,remove(){}};function xa(e,t,r){let a=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(a||0==r)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const fa=e=>e instanceof ra?m({},e):e;function ga(e,t){t=t||{};const r={};function a(e,t,r,a){return wr.isPlainObject(e)&&wr.isPlainObject(t)?wr.merge.call({caseless:a},e,t):wr.isPlainObject(t)?wr.merge({},t):wr.isArray(t)?t.slice():t}function n(e,t,r,n){return wr.isUndefined(t)?wr.isUndefined(e)?void 0:a(void 0,e,0,n):a(e,t,0,n)}function s(e,t){if(!wr.isUndefined(t))return a(void 0,t)}function l(e,t){return wr.isUndefined(t)?wr.isUndefined(e)?void 0:a(void 0,e):a(void 0,t)}function o(r,n,s){return s in t?a(r,n):s in e?a(void 0,r):void 0}const i={url:s,method:s,data:s,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:o,headers:(e,t,r)=>n(fa(e),fa(t),0,!0)};return wr.forEach(Object.keys(m(m({},e),t)),function(a){const s=i[a]||n,l=s(e[a],t[a],a);wr.isUndefined(l)&&s!==o||(r[a]=l)}),r}const ya=e=>{const t=ga({},e);let{data:r,withXSRFToken:a,xsrfHeaderName:n,xsrfCookieName:s,headers:l,auth:o}=t;if(t.headers=l=ra.from(l),t.url=Fr(xa(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&l.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),wr.isFormData(r))if(Yr.hasStandardBrowserEnv||Yr.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(wr.isFunction(r.getHeaders)){const e=r.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(e=>{let[r,a]=e;t.includes(r.toLowerCase())&&l.set(r,a)})}if(Yr.hasStandardBrowserEnv&&(a&&wr.isFunction(a)&&(a=a(t)),a||!1!==a&&pa(t.url))){const e=n&&s&&ha.read(s);e&&l.set(n,e)}return t},ba="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise(function(t,r){const a=ya(e);let n=a.data;const s=ra.from(a.headers).normalize();let l,o,i,c,d,{responseType:u,onUploadProgress:m,onDownloadProgress:p}=a;function h(){c&&c(),d&&d(),a.cancelToken&&a.cancelToken.unsubscribe(l),a.signal&&a.signal.removeEventListener("abort",l)}let x=new XMLHttpRequest;function f(){if(!x)return;const a=ra.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders());oa(function(e){t(e),h()},function(e){r(e),h()},{data:u&&"text"!==u&&"json"!==u?x.response:x.responseText,status:x.status,statusText:x.statusText,headers:a,config:e,request:x}),x=null}x.open(a.method.toUpperCase(),a.url,!0),x.timeout=a.timeout,"onloadend"in x?x.onloadend=f:x.onreadystatechange=function(){x&&4===x.readyState&&(0!==x.status||x.responseURL&&0===x.responseURL.indexOf("file:"))&&setTimeout(f)},x.onabort=function(){x&&(r(new Sr("Request aborted",Sr.ECONNABORTED,e,x)),x=null)},x.onerror=function(t){const a=t&&t.message?t.message:"Network Error",n=new Sr(a,Sr.ERR_NETWORK,e,x);n.event=t||null,r(n),x=null},x.ontimeout=function(){let t=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const n=a.transitional||Br;a.timeoutErrorMessage&&(t=a.timeoutErrorMessage),r(new Sr(t,n.clarifyTimeoutError?Sr.ETIMEDOUT:Sr.ECONNABORTED,e,x)),x=null},void 0===n&&s.setContentType(null),"setRequestHeader"in x&&wr.forEach(s.toJSON(),function(e,t){x.setRequestHeader(t,e)}),wr.isUndefined(a.withCredentials)||(x.withCredentials=!!a.withCredentials),u&&"json"!==u&&(x.responseType=a.responseType),p&&([i,d]=da(p,!0),x.addEventListener("progress",i)),m&&x.upload&&([o,c]=da(m),x.upload.addEventListener("progress",o),x.upload.addEventListener("loadend",c)),(a.cancelToken||a.signal)&&(l=t=>{x&&(r(!t||t.type?new la(null,e,x):t),x.abort(),x=null)},a.cancelToken&&a.cancelToken.subscribe(l),a.signal&&(a.signal.aborted?l():a.signal.addEventListener("abort",l)));const g=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(a.url);g&&-1===Yr.protocols.indexOf(g)?r(new Sr("Unsupported protocol "+g+":",Sr.ERR_BAD_REQUEST,e)):x.send(n||null)})},va=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let r,a=new AbortController;const n=function(e){if(!r){r=!0,l();const t=e instanceof Error?e:this.reason;a.abort(t instanceof Sr?t:new la(t instanceof Error?t.message:t))}};let s=t&&setTimeout(()=>{s=null,n(new Sr("timeout ".concat(t," of ms exceeded"),Sr.ETIMEDOUT))},t);const l=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(n):e.removeEventListener("abort",n)}),e=null)};e.forEach(e=>e.addEventListener("abort",n));const{signal:o}=a;return o.unsubscribe=()=>wr.asap(l),o}};function ja(e,t){this.v=e,this.k=t}function wa(e){return function(){return new Na(e.apply(this,arguments))}}function Na(e){var t,r;function a(t,r){try{var s=e[t](r),l=s.value,o=l instanceof ja;Promise.resolve(o?l.v:l).then(function(r){if(o){var i="return"===t?"return":"next";if(!l.k||r.done)return a(i,r);r=e[i](r).value}n(s.done?"return":"normal",r)},function(e){a("throw",e)})}catch(e){n("throw",e)}}function n(e,n){switch(e){case"return":t.resolve({value:n,done:!0});break;case"throw":t.reject(n);break;default:t.resolve({value:n,done:!1})}(t=t.next)?a(t.key,t.arg):r=null}this._invoke=function(e,n){return new Promise(function(s,l){var o={key:e,arg:n,resolve:s,reject:l,next:null};r?r=r.next=o:(t=r=o,a(e,n))})},"function"!=typeof e.return&&(this.return=void 0)}function _a(e){return new ja(e,0)}function ka(e){var t={},r=!1;function a(t,a){return r=!0,a=new Promise(function(r){r(e[t](a))}),{done:!1,value:new ja(a,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return r?(r=!1,e):a("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(r)throw r=!1,e;return a("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return r?(r=!1,e):a("return",e)}),t}function Sa(e){var t,r,a,n=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,a=Symbol.iterator);n--;){if(r&&null!=(t=e[r]))return t.call(e);if(a&&null!=(t=e[a]))return new Ca(t.call(e));r="@@asyncIterator",a="@@iterator"}throw new TypeError("Object is not async iterable")}function Ca(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return Ca=function(e){this.s=e,this.n=e.next},Ca.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var r=this.s.return;return void 0===r?Promise.resolve({value:e,done:!0}):t(r.apply(this.s,arguments))},throw:function(e){var r=this.s.return;return void 0===r?Promise.reject(e):t(r.apply(this.s,arguments))}},new Ca(e)}Na.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Na.prototype.next=function(e){return this._invoke("next",e)},Na.prototype.throw=function(e){return this._invoke("throw",e)},Na.prototype.return=function(e){return this._invoke("return",e)};const Ea=function*(e,t){let r=e.byteLength;if(!t||r<t)return void(yield e);let a,n=0;for(;n<r;)a=n+t,yield e.slice(n,a),n=a},Pa=function(){var e=wa(function*(e,t){var r,a=!1,n=!1;try{for(var s,l=Sa(Ra(e));a=!(s=yield _a(l.next())).done;a=!1){const e=s.value;yield*ka(Sa(Ea(e,t)))}}catch(o){n=!0,r=o}finally{try{a&&null!=l.return&&(yield _a(l.return()))}finally{if(n)throw r}}});return function(t,r){return e.apply(this,arguments)}}(),Ra=function(){var e=wa(function*(e){if(e[Symbol.asyncIterator])return void(yield*ka(Sa(e)));const t=e.getReader();try{for(;;){const{done:e,value:r}=yield _a(t.read());if(e)break;yield r}}finally{yield _a(t.cancel())}});return function(t){return e.apply(this,arguments)}}(),Ta=(e,t,r,a)=>{const n=Pa(e,t);let s,l=0,o=e=>{s||(s=!0,a&&a(e))};return new ReadableStream({async pull(e){try{const{done:t,value:a}=await n.next();if(t)return o(),void e.close();let s=a.byteLength;if(r){let e=l+=s;r(e)}e.enqueue(new Uint8Array(a))}catch(t){throw o(t),t}},cancel:e=>(o(e),n.return())},{highWaterMark:2})},{isFunction:La}=wr,Da=(e=>{let{Request:t,Response:r}=e;return{Request:t,Response:r}})(wr.global),{ReadableStream:Aa,TextEncoder:Oa}=wr.global,za=function(e){try{for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return!!e(...r)}catch(Js){return!1}},Fa=e=>{e=wr.merge.call({skipUndefined:!0},Da,e);const{fetch:t,Request:r,Response:a}=e,n=t?La(t):"function"===typeof fetch,s=La(r),l=La(a);if(!n)return!1;const o=n&&La(Aa),i=n&&("function"===typeof Oa?(c=new Oa,e=>c.encode(e)):async e=>new Uint8Array(await new r(e).arrayBuffer()));var c;const d=s&&o&&za(()=>{let e=!1;const t=new r(Yr.origin,{body:new Aa,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),u=l&&o&&za(()=>wr.isReadableStream(new a("").body)),p={stream:u&&(e=>e.body)};n&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!p[e]&&(p[e]=(t,r)=>{let a=t&&t[e];if(a)return a.call(t);throw new Sr("Response type '".concat(e,"' is not supported"),Sr.ERR_NOT_SUPPORT,r)})});const h=async(e,t)=>{const a=wr.toFiniteNumber(e.getContentLength());return null==a?(async e=>{if(null==e)return 0;if(wr.isBlob(e))return e.size;if(wr.isSpecCompliantForm(e)){const t=new r(Yr.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return wr.isArrayBufferView(e)||wr.isArrayBuffer(e)?e.byteLength:(wr.isURLSearchParams(e)&&(e+=""),wr.isString(e)?(await i(e)).byteLength:void 0)})(t):a};return async e=>{let{url:n,method:l,data:o,signal:i,cancelToken:c,timeout:x,onDownloadProgress:f,onUploadProgress:g,responseType:y,headers:b,withCredentials:v="same-origin",fetchOptions:j}=ya(e),w=t||fetch;y=y?(y+"").toLowerCase():"text";let N=va([i,c&&c.toAbortSignal()],x),_=null;const k=N&&N.unsubscribe&&(()=>{N.unsubscribe()});let S;try{if(g&&d&&"get"!==l&&"head"!==l&&0!==(S=await h(b,o))){let e,t=new r(n,{method:"POST",body:o,duplex:"half"});if(wr.isFormData(o)&&(e=t.headers.get("content-type"))&&b.setContentType(e),t.body){const[e,r]=ua(S,da(ma(g)));o=Ta(t.body,65536,e,r)}}wr.isString(v)||(v=v?"include":"omit");const t=s&&"credentials"in r.prototype,i=m(m({},j),{},{signal:N,method:l.toUpperCase(),headers:b.normalize().toJSON(),body:o,duplex:"half",credentials:t?v:void 0});_=s&&new r(n,i);let c=await(s?w(_,j):w(n,i));const x=u&&("stream"===y||"response"===y);if(u&&(f||x&&k)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=c[t]});const t=wr.toFiniteNumber(c.headers.get("content-length")),[r,n]=f&&ua(t,da(ma(f),!0))||[];c=new a(Ta(c.body,65536,r,()=>{n&&n(),k&&k()}),e)}y=y||"text";let C=await p[wr.findKey(p,y)||"text"](c,e);return!x&&k&&k(),await new Promise((t,r)=>{oa(t,r,{data:C,headers:ra.from(c.headers),status:c.status,statusText:c.statusText,config:e,request:_})})}catch(C){if(k&&k(),C&&"TypeError"===C.name&&/Load failed|fetch/i.test(C.message))throw Object.assign(new Sr("Network Error",Sr.ERR_NETWORK,e,_),{cause:C.cause||C});throw Sr.from(C,C&&C.code,e,_)}}},Ma=new Map,Ba=e=>{let t=e&&e.env||{};const{fetch:r,Request:a,Response:n}=t,s=[a,n,r];let l,o,i=s.length,c=Ma;for(;i--;)l=s[i],o=c.get(l),void 0===o&&c.set(l,o=i?new Map:Fa(t)),c=o;return o},Ia=(Ba(),{http:null,xhr:ba,fetch:{get:Ba}});wr.forEach(Ia,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(Js){}Object.defineProperty(e,"adapterName",{value:t})}});const qa=e=>"- ".concat(e),Ua=e=>wr.isFunction(e)||null===e||!1===e;const Ha={getAdapter:function(e,t){e=wr.isArray(e)?e:[e];const{length:r}=e;let a,n;const s={};for(let l=0;l<r;l++){let r;if(a=e[l],n=a,!Ua(a)&&(n=Ia[(r=String(a)).toLowerCase()],void 0===n))throw new Sr("Unknown adapter '".concat(r,"'"));if(n&&(wr.isFunction(n)||(n=n.get(t))))break;s[r||"#"+l]=n}if(!n){const e=Object.entries(s).map(e=>{let[t,r]=e;return"adapter ".concat(t," ")+(!1===r?"is not supported by the environment":"is not available in the build")});let t=r?e.length>1?"since :\n"+e.map(qa).join("\n"):" "+qa(e[0]):"as no adapter specified";throw new Sr("There is no suitable adapter to dispatch the request "+t,"ERR_NOT_SUPPORT")}return n},adapters:Ia};function Wa(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new la(null,e)}function Va(e){Wa(e),e.headers=ra.from(e.headers),e.data=aa.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Ha.getAdapter(e.adapter||$r.adapter,e)(e).then(function(t){return Wa(e),t.data=aa.call(e,e.transformResponse,t),t.headers=ra.from(t.headers),t},function(t){return na(t)||(Wa(e),t&&t.response&&(t.response.data=aa.call(e,e.transformResponse,t.response),t.response.headers=ra.from(t.response.headers))),Promise.reject(t)})}const Ya="1.13.2",Ka={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Ka[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const Ja={};Ka.transitional=function(e,t,r){function a(e,t){return"[Axios v"+Ya+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return(r,n,s)=>{if(!1===e)throw new Sr(a(n," has been removed"+(t?" in "+t:"")),Sr.ERR_DEPRECATED);return t&&!Ja[n]&&(Ja[n]=!0,console.warn(a(n," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,n,s)}},Ka.spelling=function(e){return(t,r)=>(console.warn("".concat(r," is likely a misspelling of ").concat(e)),!0)};const $a={assertOptions:function(e,t,r){if("object"!==typeof e)throw new Sr("options must be an object",Sr.ERR_BAD_OPTION_VALUE);const a=Object.keys(e);let n=a.length;for(;n-- >0;){const s=a[n],l=t[s];if(l){const t=e[s],r=void 0===t||l(t,s,e);if(!0!==r)throw new Sr("option "+s+" must be "+r,Sr.ERR_BAD_OPTION_VALUE);continue}if(!0!==r)throw new Sr("Unknown option "+s,Sr.ERR_BAD_OPTION)}},validators:Ka},Ga=$a.validators;class Qa{constructor(e){this.defaults=e||{},this.interceptors={request:new Mr,response:new Mr}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{r.stack?t&&!String(r.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(r.stack+="\n"+t):r.stack=t}catch(Js){}}throw r}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=ga(this.defaults,t);const{transitional:r,paramsSerializer:a,headers:n}=t;void 0!==r&&$a.assertOptions(r,{silentJSONParsing:Ga.transitional(Ga.boolean),forcedJSONParsing:Ga.transitional(Ga.boolean),clarifyTimeoutError:Ga.transitional(Ga.boolean)},!1),null!=a&&(wr.isFunction(a)?t.paramsSerializer={serialize:a}:$a.assertOptions(a,{encode:Ga.function,serialize:Ga.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),$a.assertOptions(t,{baseUrl:Ga.spelling("baseURL"),withXsrfToken:Ga.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=n&&wr.merge(n.common,n[t.method]);n&&wr.forEach(["delete","get","head","post","put","patch","common"],e=>{delete n[e]}),t.headers=ra.concat(s,n);const l=[];let o=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,l.unshift(e.fulfilled,e.rejected))});const i=[];let c;this.interceptors.response.forEach(function(e){i.push(e.fulfilled,e.rejected)});let d,u=0;if(!o){const e=[Va.bind(this),void 0];for(e.unshift(...l),e.push(...i),d=e.length,c=Promise.resolve(t);u<d;)c=c.then(e[u++],e[u++]);return c}d=l.length;let m=t;for(;u<d;){const e=l[u++],t=l[u++];try{m=e(m)}catch(p){t.call(this,p);break}}try{c=Va.call(this,m)}catch(p){return Promise.reject(p)}for(u=0,d=i.length;u<d;)c=c.then(i[u++],i[u++]);return c}getUri(e){return Fr(xa((e=ga(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}wr.forEach(["delete","get","head","options"],function(e){Qa.prototype[e]=function(t,r){return this.request(ga(r||{},{method:e,url:t,data:(r||{}).data}))}}),wr.forEach(["post","put","patch"],function(e){function t(t){return function(r,a,n){return this.request(ga(n||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:a}))}}Qa.prototype[e]=t(),Qa.prototype[e+"Form"]=t(!0)});const Za=Qa;class Xa{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const r=this;this.promise.then(e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null}),this.promise.then=e=>{let t;const a=new Promise(e=>{r.subscribe(e),t=e}).then(e);return a.cancel=function(){r.unsubscribe(t)},a},e(function(e,a,n){r.reason||(r.reason=new la(e,a,n),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Xa(function(t){e=t}),cancel:e}}}const en=Xa;const tn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(tn).forEach(e=>{let[t,r]=e;tn[r]=t});const rn=tn;const an=function e(t){const r=new Za(t),a=zt(Za.prototype.request,r);return wr.extend(a,Za.prototype,r,{allOwnKeys:!0}),wr.extend(a,r,null,{allOwnKeys:!0}),a.create=function(r){return e(ga(t,r))},a}($r);an.Axios=Za,an.CanceledError=la,an.CancelToken=en,an.isCancel=na,an.VERSION=Ya,an.toFormData=Tr,an.AxiosError=Sr,an.Cancel=an.CanceledError,an.all=function(e){return Promise.all(e)},an.spread=function(e){return function(t){return e.apply(null,t)}},an.isAxiosError=function(e){return wr.isObject(e)&&!0===e.isAxiosError},an.mergeConfig=ga,an.AxiosHeaders=ra,an.formToJSON=e=>Kr(wr.isHTMLForm(e)?new FormData(e):e),an.getAdapter=Ha.getAdapter,an.HttpStatusCode=rn,an.default=an;const nn=an,sn=nn.create({baseURL:"https://mvp-2-u8e9.onrender.com",headers:{"Content-Type":"application/json"}});sn.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e));const ln=sn;var on=r(579);const cn=["Tonnes","Crates","Baskets","Barrels","Bags (50kg)","Bags (25kg)","Truck (6-wheeler)","Truck (10-wheeler)","Truck (12-wheeler)","Truck (14-wheeler)","Custom"],dn=e=>{let{publishDate:t,expiryDate:r}=e;const[a,s]=(0,n.useState)("");return(0,n.useEffect)(()=>{if(!r)return;const e=()=>{const e=(new Date).getTime();if(t){const r=new Date(t).getTime();if(r>e){const t=r-e,a=Math.floor(t/864e5),n=Math.floor(t%864e5/36e5);return void s("Starts in ".concat(a,"d ").concat(n,"h"))}}const a=new Date(r).getTime()-e;if(a<0)return void s("Expired");const n=Math.floor(a/864e5),l=Math.floor(a%864e5/36e5),o=Math.floor(a%36e5/6e4);s(n>0?"".concat(n,"d ").concat(l,"h left"):"".concat(l,"h ").concat(o,"m left"))};e();const a=setInterval(e,6e4);return()=>clearInterval(a)},[t,r]),(0,on.jsx)("span",{children:a})},un=e=>{var t,r,a,s,l,o,i,c;let{requests:d,onMakeOffer:u,onRefresh:p,userRole:h}=e;const[x,f]=(0,n.useState)("FarmDeals"),[g,y]=(0,n.useState)(null),[b,v]=(0,n.useState)([]),[j,w]=(0,n.useState)([]),[N,_]=(0,n.useState)(""),[k,S]=(0,n.useState)(""),[C,E]=(0,n.useState)(""),[P,R]=(0,n.useState)([]),[T,L]=(0,n.useState)(!1),[D,A]=(0,n.useState)(null),O=async()=>{try{const e=await ln.get("/requests/offers/mine");v(e.data)}catch(e){console.error("Failed to fetch my offers",e)}},z=d.filter(e=>"active"===e.status&&("FarmDeals"===x?"farm_deals"===e.platform||"standard"===e.type:"pyexpress"===e.platform||"instant"===e.type)),F=()=>{y(null),w([])},M=(e,t,r)=>{w(a=>{const n=[...a];if(n[e]=m(m({},n[e]),{},{[t]:r}),"quantity"===t||"unit_price"===t){const a=parseFloat("quantity"===t?r:n[e].quantity)||0,s=parseFloat("unit_price"===t?r:n[e].unit_price)||0;n[e].total=a*s}return n})},B=j.reduce((e,t)=>e+(t.total||0),0);return(0,on.jsxs)("div",{className:"rfq-container",style:{padding:"20px"},children:[(0,on.jsxs)("div",{className:"tabs-header",style:{display:"flex",gap:"20px",borderBottom:"2px solid #eee",marginBottom:"20px"},children:[(0,on.jsx)("button",{onClick:()=>f("FarmDeals"),style:{padding:"10px 20px",border:"none",background:"none",borderBottom:"FarmDeals"===x?"3px solid #f39c12":"none",fontWeight:"bold",cursor:"pointer"},children:"\ud83c\udf3e Farm Deals (Standard)"}),(0,on.jsx)("button",{onClick:()=>f("PyExpress"),style:{padding:"10px 20px",border:"none",background:"none",borderBottom:"PyExpress"===x?"3px solid #2ecc71":"none",fontWeight:"bold",cursor:"pointer"},children:"\u26a1 PyExpress (Instant)"}),(0,on.jsxs)("button",{onClick:()=>{f("MyOffers"),O()},style:{padding:"10px 20px",border:"none",background:"none",borderBottom:"MyOffers"===x?"3px solid #9b59b6":"none",fontWeight:"bold",cursor:"pointer",position:"relative"},children:["\ud83d\udccb My Offers",b.filter(e=>"accepted_by_buyer"===e.status).length>0&&(0,on.jsx)("span",{style:{position:"absolute",top:"0",right:"5px",background:"#e74c3c",color:"white",borderRadius:"50%",padding:"2px 6px",fontSize:"0.7em"},children:b.filter(e=>"accepted_by_buyer"===e.status).length})]}),(0,on.jsx)("button",{onClick:()=>{f("MyJobs"),O()},style:{padding:"10px 20px",border:"none",background:"none",borderBottom:"MyJobs"===x?"3px solid #3498db":"none",fontWeight:"bold",cursor:"pointer"},children:"\ud83d\ude9a My Active Jobs"})]}),(0,on.jsx)("div",{className:"deals-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"20px"},children:"MyJobs"===x?0===b.filter(e=>["accepted","delivered","completed"].includes(e.status)).length?(0,on.jsx)("p",{children:"No active jobs found."}):b.filter(e=>["accepted","delivered","completed"].includes(e.status)).map(e=>{var t;return(0,on.jsxs)("div",{className:"deal-card",style:{padding:"15px",border:"1px solid #eee",borderRadius:"8px",boxShadow:"0 2px 5px rgba(0,0,0,0.05)",position:"relative"},children:[(0,on.jsx)("div",{style:{position:"absolute",top:"10px",right:"10px",background:"accepted"===e.status?"#f1c40f":"#eee",color:"#333",padding:"2px 8px",borderRadius:"4px",fontSize:"0.75em",fontWeight:"bold"},children:e.status.toUpperCase()}),(0,on.jsx)("h3",{style:{marginRight:"100px"},children:e.request_title||"Unknown Request"}),(0,on.jsxs)("p",{style:{color:"#666",fontSize:"0.9em"},children:["My Bid: \u20a6",null===(t=e.price)||void 0===t?void 0:t.toLocaleString()]}),"delivered"===e.status&&(0,on.jsx)("div",{style:{marginTop:"12px",padding:"10px",background:"#d1ecf1",borderRadius:"4px",color:"#0c5460"},children:"\u2705 Delivered. Waiting for buyer confirmation."})]},e.id)}):"MyOffers"===x?0===b.filter(e=>["pending","accepted_by_buyer","terms_rejected"].includes(e.status)).length?(0,on.jsx)("p",{children:"No pending offers found."}):b.filter(e=>["pending","accepted_by_buyer","terms_rejected"].includes(e.status)).map(e=>{var t;return(0,on.jsxs)("div",{className:"deal-card",style:{padding:"15px",border:"1px solid #eee",borderRadius:"8px",boxShadow:"0 2px 5px rgba(0,0,0,0.05)",position:"relative"},children:[(0,on.jsx)("div",{style:{position:"absolute",top:"10px",right:"10px",background:"accepted_by_buyer"===e.status?"#e74c3c":"#eee",color:"accepted_by_buyer"===e.status?"#fff":"#333",padding:"2px 8px",borderRadius:"4px",fontSize:"0.75em",fontWeight:"bold"},children:"accepted_by_buyer"===e.status?"\u26a0\ufe0f ACTION REQUIRED":e.status.toUpperCase()}),(0,on.jsx)("h3",{style:{marginRight:"100px"},children:e.request_title||"Unknown Request"}),(0,on.jsxs)("p",{style:{color:"#666",fontSize:"0.9em"},children:["My Bid: \u20a6",null===(t=e.price)||void 0===t?void 0:t.toLocaleString()]}),"accepted_by_buyer"===e.status&&(0,on.jsxs)("div",{style:{marginTop:"12px",padding:"10px",background:"#fef3cd",borderRadius:"6px",border:"1px solid #ffc107"},children:[(0,on.jsx)("p",{style:{fontSize:"0.85em",color:"#856404",marginBottom:"8px"},children:"\ud83c\udf89 Buyer accepted your bid! Review their terms and respond."}),(0,on.jsx)("button",{onClick:()=>A(e),style:{width:"100%",padding:"8px",background:"#007bff",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:"View Terms & Respond"})]}),"terms_rejected"===e.status&&(0,on.jsx)("div",{style:{marginTop:"12px",padding:"10px",background:"#f8d7da",borderRadius:"4px",color:"#721c24"},children:"\u274c You rejected the buyer's terms. They may re-negotiate."})]},e.id)}):0===z.length?(0,on.jsx)("p",{children:"No active requests in this category."}):z.map(e=>{var t,r,a,n,s,l,o,i,c,d;return(0,on.jsxs)("div",{className:"deal-card",style:{padding:"15px",border:"1px solid #eee",borderRadius:"8px",boxShadow:"0 2px 5px rgba(0,0,0,0.05)",position:"relative"},children:[(0,on.jsx)("div",{style:{position:"absolute",top:"10px",right:"10px",background:"#eee",padding:"2px 8px",borderRadius:"4px",fontSize:"0.8em"},children:"instant"===e.type?"\u26a1 INSTANT":"\ud83c\udf3e STANDARD"}),(0,on.jsx)("h3",{style:{marginRight:"80px"},children:(null===(t=e.items)||void 0===t||null===(r=t[0])||void 0===r?void 0:r.name)||e.title||"Request"}),(0,on.jsxs)("p",{style:{color:"#666",fontSize:"0.85em",marginBottom:"8px"},children:["\ud83d\udccd ",e.region_state||e.location,e.expiry_date&&(0,on.jsxs)("span",{style:{marginLeft:"8px",color:"#e67e22"},children:["\u23f3 ",(0,on.jsx)(dn,{publishDate:e.publish_date,expiryDate:e.expiry_date})]})]}),(0,on.jsxs)("div",{style:{margin:"8px 0",padding:"8px",background:"#f9f9f9",borderRadius:"4px"},children:[null===(a=e.items)||void 0===a?void 0:a.slice(0,3).map((e,t)=>(0,on.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.88em"},children:[(0,on.jsx)("span",{children:e.name}),(0,on.jsxs)("span",{style:{color:"#555"},children:[e.quantity," ",e.unit]})]},t)),(null===(n=e.items)||void 0===n?void 0:n.length)>3&&(0,on.jsxs)("small",{style:{color:"#888"},children:["+",e.items.length-3," more items"]})]}),((null===(s=e.price_range)||void 0===s?void 0:s.min)||(null===(l=e.price_range)||void 0===l?void 0:l.max))&&(0,on.jsxs)("p",{style:{fontSize:"0.85em",color:"#27ae60"},children:["\ud83d\udcb0 Budget: \u20a6",null===(o=e.price_range)||void 0===o||null===(i=o.min)||void 0===i?void 0:i.toLocaleString()," \u2013 \u20a6",null===(c=e.price_range)||void 0===c||null===(d=c.max)||void 0===d?void 0:d.toLocaleString()]}),(0,on.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"12px"},children:[(0,on.jsxs)("span",{style:{fontSize:"0.8em",color:"#888"},children:[e.offers_count||0," bids"]}),"instant"===e.type?(0,on.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Confirm you want to take this job instantly? You are agreeing to the fixed price."))try{const t=await ln.post("/requests/".concat(e,"/take"));alert("Job Taken! Tracking ID: ".concat(t.data.tracking_id)),p&&p(),O()}catch(a){var t,r;alert((null===(t=a.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||"Failed to take job")}})(e.id),style:{padding:"8px 16px",background:"#2ecc71",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"bold"},children:"\u26a1 Take Job"}):(0,on.jsx)("button",{onClick:()=>{return y(t=e),w((t.items||[]).map(e=>({name:e.name,quantity:e.quantity||"",unit:e.unit||"Tonnes",unit_price:"",total:0}))),_(""),S(""),E(""),void R([]);var t},style:{padding:"8px 16px",background:"#f39c12",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"bold"},children:"Place Bid"})]})]},e.id)})}),g&&(0,on.jsx)("div",{className:"modal-overlay",children:(0,on.jsxs)("div",{className:"modal-content",style:{maxWidth:"620px",width:"95%",maxHeight:"90vh",overflowY:"auto"},children:[(0,on.jsxs)("div",{className:"modal-header",children:[(0,on.jsxs)("h3",{children:["Place Bid \u2014 ",null===(t=g.items)||void 0===t||null===(r=t[0])||void 0===r?void 0:r.name]}),(0,on.jsx)("button",{className:"close-button",onClick:F,children:"\xd7"})]}),(0,on.jsxs)("div",{className:"modal-body",children:[(0,on.jsx)("h4",{style:{marginBottom:"8px"},children:"Quotation"}),(0,on.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.88em",marginBottom:"12px"},children:[(0,on.jsx)("thead",{children:(0,on.jsxs)("tr",{style:{background:"#f5f5f5"},children:[(0,on.jsx)("th",{style:{padding:"6px 8px",textAlign:"left"},children:"Item"}),(0,on.jsx)("th",{style:{padding:"6px 8px",textAlign:"right",width:"80px"},children:"Qty"}),(0,on.jsx)("th",{style:{padding:"6px 8px",width:"120px"},children:"Unit"}),(0,on.jsx)("th",{style:{padding:"6px 8px",textAlign:"right",width:"110px"},children:"Unit Price (\u20a6)"}),(0,on.jsx)("th",{style:{padding:"6px 8px",textAlign:"right",width:"100px"},children:"Total (\u20a6)"})]})}),(0,on.jsx)("tbody",{children:j.map((e,t)=>(0,on.jsxs)("tr",{style:{borderBottom:"1px solid #eee"},children:[(0,on.jsx)("td",{style:{padding:"6px 8px"},children:e.name}),(0,on.jsx)("td",{style:{padding:"4px 8px"},children:(0,on.jsx)("input",{type:"number",value:e.quantity,onChange:e=>M(t,"quantity",e.target.value),style:{width:"70px",padding:"4px",border:"1px solid #ddd",borderRadius:"4px",textAlign:"right"}})}),(0,on.jsx)("td",{style:{padding:"4px 8px"},children:(0,on.jsx)("select",{value:e.unit,onChange:e=>M(t,"unit",e.target.value),style:{width:"100%",padding:"4px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"0.85em"},children:cn.map(e=>(0,on.jsx)("option",{children:e},e))})}),(0,on.jsx)("td",{style:{padding:"4px 8px"},children:(0,on.jsx)("input",{type:"number",value:e.unit_price,onChange:e=>M(t,"unit_price",e.target.value),style:{width:"100px",padding:"4px",border:"1px solid #ddd",borderRadius:"4px",textAlign:"right"},placeholder:"0"})}),(0,on.jsxs)("td",{style:{padding:"6px 8px",textAlign:"right",fontWeight:"bold",color:"#27ae60"},children:["\u20a6",(e.total||0).toLocaleString()]})]},t))}),(0,on.jsx)("tfoot",{children:(0,on.jsxs)("tr",{style:{background:"#f0fdf4"},children:[(0,on.jsx)("td",{colSpan:4,style:{padding:"8px",textAlign:"right",fontWeight:"bold"},children:"Grand Total:"}),(0,on.jsxs)("td",{style:{padding:"8px",textAlign:"right",fontWeight:"bold",color:"#16a34a",fontSize:"1.05em"},children:["\u20a6",B.toLocaleString()]})]})})]}),(0,on.jsxs)("div",{className:"form-group",style:{marginBottom:"12px"},children:[(0,on.jsxs)("label",{style:{fontSize:"0.88em",fontWeight:"500"},children:["Moisture Content % ",(0,on.jsx)("span",{style:{color:"#888"},children:"(optional)"})]}),(0,on.jsx)("input",{type:"number",className:"form-input",value:C,onChange:e=>E(e.target.value),placeholder:"e.g. 12.5",style:{width:"120px"}})]}),(0,on.jsxs)("div",{className:"form-group",style:{marginBottom:"12px"},children:[(0,on.jsx)("label",{style:{fontSize:"0.88em",fontWeight:"500"},children:"Earliest Delivery Date *"}),(0,on.jsx)("input",{type:"date",className:"form-input",value:k,onChange:e=>S(e.target.value)})]}),(0,on.jsxs)("div",{className:"form-group",style:{marginBottom:"12px"},children:[(0,on.jsx)("label",{style:{fontSize:"0.88em",fontWeight:"500"},children:"Notes / Additional Info"}),(0,on.jsx)("textarea",{className:"form-input",rows:2,value:N,onChange:e=>_(e.target.value),placeholder:"Quality details, packaging, payment preference..."})]}),(0,on.jsxs)("div",{className:"form-group",style:{marginBottom:"16px"},children:[(0,on.jsxs)("label",{style:{fontSize:"0.88em",fontWeight:"500"},children:["Proof Images ",(0,on.jsx)("span",{style:{color:"#888"},children:"(optional)"})]}),(0,on.jsx)("input",{type:"file",accept:"image/*",onChange:async e=>{const t=e.target.files[0];if(!t)return;const r={url:"",uploading:!0,name:t.name};R(e=>[...e,r]);try{const e=await ln.post("/upload/sign-public",{folder:"rfq_images",filename:t.name,contentType:t.type});await fetch(e.data.uploadUrl,{method:"PUT",body:t,headers:{"Content-Type":t.type}}),R(r=>r.map(r=>r.name===t.name&&r.uploading?{url:e.data.publicUrl,uploading:!1,name:t.name}:r))}catch(a){alert("Image upload failed. Please try again."),R(e=>e.filter(e=>!(e.name===t.name&&e.uploading)))}},style:{display:"block",marginBottom:"8px"}}),(0,on.jsx)("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:P.map((e,t)=>(0,on.jsx)("div",{style:{position:"relative"},children:e.uploading?(0,on.jsx)("div",{style:{width:"60px",height:"60px",background:"#f0f0f0",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.7em",color:"#888"},children:"Uploading\u2026"}):(0,on.jsx)("img",{src:e.url,alt:"proof",style:{width:"60px",height:"60px",objectFit:"cover",borderRadius:"4px",border:"1px solid #ddd"}})},t))})]}),(0,on.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"8px"},children:[(0,on.jsx)("button",{className:"btn-secondary",onClick:F,children:"Cancel"}),(0,on.jsx)("button",{className:"btn-primary",onClick:async()=>{if(k)if(j.some(e=>!e.unit_price))alert("Please fill in unit prices for all items.");else{L(!0);try{var e;const t={price:B,items:j.map(e=>({name:e.name,quantity:parseFloat(e.quantity)||0,unit:e.unit,target_price:parseFloat(e.unit_price)||0,moisture_content_percent:C?parseFloat(C):null})),images:P.filter(e=>!e.uploading).map(e=>e.url),moisture_content_percent:C?parseFloat(C):null,delivery_date:new Date(k).toISOString(),notes:N,quantity_offered:(null===(e=j[0])||void 0===e?void 0:e.quantity)||null};await ln.post("/requests/".concat(g.id,"/offers"),t),alert("Bid Submitted Successfully!"),F(),p&&p()}catch(a){var t,r;alert((null===(t=a.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||"Failed to submit bid")}finally{L(!1)}}else alert("Please select a delivery date.")},disabled:T||P.some(e=>e.uploading),children:T?"Submitting\u2026":"Submit Bid \u2014 \u20a6".concat(B.toLocaleString())})]})]})]})}),D&&(0,on.jsx)("div",{className:"modal-overlay",children:(0,on.jsxs)("div",{className:"modal-content",style:{maxWidth:"500px",width:"95%"},children:[(0,on.jsxs)("div",{className:"modal-header",children:[(0,on.jsx)("h3",{children:"\ud83d\udccb Buyer's Terms"}),(0,on.jsx)("button",{className:"close-button",onClick:()=>A(null),children:"\xd7"})]}),(0,on.jsxs)("div",{className:"modal-body",children:[(0,on.jsxs)("div",{style:{background:"#f8f9fa",padding:"14px",borderRadius:"8px",marginBottom:"16px"},children:[(0,on.jsxs)("p",{children:[(0,on.jsx)("strong",{children:"Your Bid:"})," \u20a6",null===(a=D.price)||void 0===a?void 0:a.toLocaleString()]}),(null===(s=D.buyer_terms)||void 0===s?void 0:s.confirmed_delivery_date)&&(0,on.jsxs)("p",{children:[(0,on.jsx)("strong",{children:"Confirmed Delivery:"})," ",new Date(D.buyer_terms.confirmed_delivery_date).toLocaleDateString()]}),(null===(l=D.buyer_terms)||void 0===l?void 0:l.payment_terms)&&(0,on.jsxs)("p",{children:[(0,on.jsx)("strong",{children:"Payment Terms:"})," ",JSON.stringify(D.buyer_terms.payment_terms)]}),(null===(o=D.buyer_terms)||void 0===o?void 0:o.acknowledgment_note)&&(0,on.jsxs)("div",{style:{marginTop:"8px",padding:"8px",background:"#fff",borderRadius:"4px",border:"1px solid #dee2e6"},children:[(0,on.jsx)("strong",{children:"Note from Buyer:"}),(0,on.jsx)("p",{style:{marginTop:"4px",color:"#555"},children:D.buyer_terms.acknowledgment_note})]}),(null===(i=D.buyer_terms)||void 0===i||null===(c=i.acknowledgment_files)||void 0===c?void 0:c.length)>0&&(0,on.jsxs)("div",{style:{marginTop:"10px"},children:[(0,on.jsx)("strong",{children:"Attached Documents:"}),(0,on.jsx)("ul",{style:{marginTop:"4px"},children:D.buyer_terms.acknowledgment_files.map((e,t)=>(0,on.jsx)("li",{children:(0,on.jsxs)("a",{href:e,target:"_blank",rel:"noreferrer",style:{color:"#007bff"},children:["Document ",t+1]})},t))})]})]}),(0,on.jsxs)("div",{style:{display:"flex",gap:"12px"},children:[(0,on.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Reject the buyer's terms? They will be notified."))try{await ln.post("/requests/offers/".concat(e,"/reject-terms")),alert("Terms rejected. Buyer has been notified."),A(null),O()}catch(a){var t,r;alert((null===(t=a.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||"Failed to reject terms")}})(D.id),style:{flex:1,padding:"10px",background:"#dc3545",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"bold"},children:"\u2717 Reject Terms"}),(0,on.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Accept the buyer's terms and create the order?"))try{const t=await ln.post("/requests/offers/".concat(e,"/confirm-terms"));alert("Terms accepted! Order created: ".concat(t.data.order_id)),A(null),O()}catch(a){var t,r;alert((null===(t=a.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||"Failed to confirm terms")}})(D.id),style:{flex:1,padding:"10px",background:"#28a745",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"bold"},children:"\u2713 Accept Terms & Create Order"})]})]})]})})]})},mn=e=>{var t,r,a,s,l,o,i;let{isOpen:c,onClose:d,onSubmit:u,userProfile:p,initialType:h=null,editData:x=null}=e;const[f,g]=(0,n.useState)(h?2:1),[y,b]=(0,n.useState)(h),[v,j]=(0,n.useState)(""),[w,N]=(0,n.useState)([{name:"",quantity:"",unit:"",specifications:""}]),[_,k]=(0,n.useState)(2),[S,C]=(0,n.useState)(4),[E,P]=(0,n.useState)(""),[R,T]=(0,n.useState)(""),[L,D]=(0,n.useState)((null===p||void 0===p?void 0:p.state)||""),[A,O]=(0,n.useState)((null===p||void 0===p?void 0:p.phone)||""),[z,F]=(0,n.useState)(!1),[M,B]=(0,n.useState)(null),[I,q]=(0,n.useState)({}),[U,H]=(0,n.useState)({});(0,n.useEffect)(()=>{if(c)if(B(null),x){if(g(2),b(x.type),j(x.notes||""),N(x.items&&x.items.length>0?x.items:[{name:"",quantity:"",unit:"",specifications:""}]),D(x.location||x.region_state||(null===p||void 0===p?void 0:p.state)||""),O(x.contact_phone||(null===p||void 0===p?void 0:p.phone)||""),x.publish_date){const e=new Date(x.publish_date);P(new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString().slice(0,16))}else P("");if(x.expiry_date){const e=new Date(x.expiry_date);T(new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString().slice(0,16))}else{const e=new Date(Date.now()+6048e5);T(new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString().slice(0,16))}}else{g(h?2:1),b(h),N([{name:"",quantity:"",unit:"",specifications:""}]),j(""),P("");const e=new Date(Date.now()+6048e5);T(new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString().slice(0,16))}},[c,x,h,p]);const W=(e,t,r)=>{const a=[...w];a[e][t]=r,N(a),"name"===t&&r.length>2&&"instant"===y&&V(e,r)},V=async(e,t)=>{H(t=>m(m({},t),{},{[e]:!0}));try{const r=await ln.get("/products/recent-prices?name=".concat(encodeURIComponent(t)));"available"===r.data.status?q(t=>m(m({},t),{},{[e]:{average_price:r.data.average_price,price_range:r.data.price_range,sample_count:r.data.sample_count}})):q(t=>{const r=m({},t);return delete r[e],r})}catch(r){console.log("Price estimation unavailable:",r),q(t=>{const r=m({},t);return delete r[e],r})}finally{H(t=>m(m({},t),{},{[e]:!1}))}},Y=()=>"standard"===y?0:w.reduce((e,t,r)=>{var a;return e+((null===(a=I[r])||void 0===a?void 0:a.average_price)||0)*(parseFloat(t.quantity)||1)},0);return c?(0,on.jsx)("div",{className:"modal-overlay",children:(0,on.jsxs)("div",{className:"modal-content",style:{maxWidth:"800px",width:"90%"},children:[(0,on.jsxs)("div",{className:"modal-header",children:[(0,on.jsx)("h3",{children:x?"Edit Request":"Create New Request"}),(0,on.jsx)("button",{className:"close-button",onClick:d,children:"\xd7"})]}),(0,on.jsxs)("div",{className:"modal-body",children:[!x&&(0,on.jsxs)("div",{className:"wizard-progress",style:{display:"flex",justifyContent:"space-between",marginBottom:"20px",borderBottom:"1px solid #eee",paddingBottom:"10px"},children:[(0,on.jsx)("span",{style:1===f?{color:"#2ecc71",fontWeight:"bold"}:{color:"#ccc"},children:"1. Type"}),(0,on.jsx)("span",{style:2===f?{color:"#2ecc71",fontWeight:"bold"}:{color:"#ccc"},children:"2. Details"}),(0,on.jsx)("span",{style:3===f?{color:"#2ecc71",fontWeight:"bold"}:{color:"#ccc"},children:"3. Review"}),(0,on.jsx)("span",{style:4===f?{color:"#2ecc71",fontWeight:"bold"}:{color:"#ccc"},children:"4. Pay Fee"})]}),1===f&&(0,on.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,on.jsxs)("div",{className:"p-6 border rounded-lg cursor-pointer transition-all ".concat("standard"===y?"border-green-500 bg-green-50 shadow-md":"border-gray-200 hover:border-green-300"),onClick:()=>b("standard"),children:[(0,on.jsx)("h4",{className:"text-xl font-bold mb-2",children:"Standard Request"}),(0,on.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Post a single commodity. Get competitive bids from verified farmers & agents. Best for bulk."}),(0,on.jsxs)("ul",{className:"text-xs text-gray-500 list-disc pl-4 space-y-1",children:[(0,on.jsx)("li",{children:"Delivery: 2 days - 2 weeks"}),(0,on.jsx)("li",{children:"Agents bid with proof"}),(0,on.jsx)("li",{children:"Tiered Service Charge"})]})]}),(0,on.jsxs)("div",{onClick:()=>{},className:"p-6 border rounded-lg relative overflow-hidden bg-gray-50 border-gray-200 cursor-not-allowed opacity-75",children:[(0,on.jsx)("div",{className:"absolute top-3 right-3 bg-yellow-500 text-white text-xs font-bold px-2 py-1 rounded-full z-10",children:"COMING SOON"}),(0,on.jsx)("h4",{className:"text-xl font-bold mb-2 text-gray-500",children:"Instant Request \u26a1"}),(0,on.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Buy directly from warehouses at affordable market prices to pick up now or later."}),(0,on.jsxs)("ul",{className:"text-xs text-gray-500 list-disc pl-4 space-y-1",children:[(0,on.jsx)("li",{children:"Delivery: 2 - 12 Hours"}),(0,on.jsx)("li",{children:"System-generated Price"}),(0,on.jsx)("li",{children:"Multi-item support"}),(0,on.jsx)("li",{children:"5% Service Charge"})]})]}),(0,on.jsx)("div",{className:"col-span-1 md:col-span-2 text-right mt-4",children:(0,on.jsx)("button",{className:"btn-primary",disabled:!y,onClick:()=>y&&g(2),children:"Next \u2192"})})]}),2===f&&(0,on.jsxs)("div",{children:[(0,on.jsxs)("div",{className:"mb-4",children:[(0,on.jsx)("label",{children:"Description / Other Details"}),(0,on.jsx)("input",{type:"text",className:"form-input",value:v,onChange:e=>j(e.target.value),placeholder:"instant"===y?"Quick Grocery Restock":"Bulk Onions Supply \u2014 specify grade, packaging, etc."})]}),(0,on.jsxs)("div",{className:"mb-4",children:[(0,on.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,on.jsx)("label",{children:"Items Needed"}),"instant"===y&&(0,on.jsx)("button",{className:"text-sm text-green-600",onClick:()=>{N([...w,{name:"",quantity:"",unit:"",specifications:""}])},children:"+ Add Item"})]}),w.map((e,t)=>(0,on.jsxs)("div",{className:"mb-3",children:[(0,on.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,on.jsx)("input",{placeholder:"Item Name (e.g. Onions)",className:"form-input flex-2",style:{minWidth:"140px"},value:e.name,onChange:e=>W(t,"name",e.target.value)}),(0,on.jsx)("input",{type:"number",placeholder:"Qty",className:"form-input",style:{width:"70px"},value:e.quantity,onChange:e=>W(t,"quantity",e.target.value)}),(0,on.jsxs)("select",{className:"form-input",style:{width:"150px"},value:e.unit,onChange:e=>W(t,"unit",e.target.value),children:[(0,on.jsx)("option",{value:"",children:"Unit"}),["Tonnes","Crates","Baskets","Barrels","Bags (50kg)","Bags (25kg)","Truck (6-wheeler)","Truck (10-wheeler)","Truck (12-wheeler)","Truck (14-wheeler)","Custom"].map(e=>(0,on.jsx)("option",{value:e,children:e},e))]}),"instant"===y&&w.length>1&&(0,on.jsx)("button",{onClick:()=>(e=>{const t=w.filter((t,r)=>r!==e);N(t)})(t),className:"text-red-500 px-2",children:"\xd7"})]}),"standard"===y&&(0,on.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,on.jsx)("input",{type:"number",placeholder:"Moisture Content % (optional)",className:"form-input",style:{width:"220px"},value:e.moisture_content_percent||"",onChange:e=>W(t,"moisture_content_percent",e.target.value)}),(0,on.jsx)("span",{className:"text-xs text-gray-400",children:"e.g. 12.5%"})]}),"instant"===y&&e.name&&(0,on.jsx)("div",{className:"mt-1 ml-1 text-sm",children:U[t]?(0,on.jsx)("span",{className:"text-gray-400",children:"\ud83d\udcad Checking prices..."}):I[t]?(0,on.jsxs)("div",{className:"text-green-600",children:["\ud83d\udcb0 Est. Price: \u20a6",I[t].average_price.toLocaleString(),"/",e.unit||"unit",(0,on.jsxs)("span",{className:"text-gray-500 ml-2",children:["(\u20a6",I[t].price_range.min.toLocaleString()," - \u20a6",I[t].price_range.max.toLocaleString(),")"]})]}):e.name.length>2?(0,on.jsx)("span",{className:"text-gray-400",children:"\u2139\ufe0f No recent price data"}):null})]},t)),"standard"===y&&(0,on.jsx)("p",{className:"text-xs text-gray-500",children:"Standard requests are for a single commodity type."})]}),(0,on.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{children:"Country"}),(0,on.jsx)("input",{className:"form-input",value:"Nigeria",readOnly:!0,style:{background:"#f5f5f5",color:"#888"}})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{children:"State *"}),(0,on.jsxs)("select",{className:"form-input",value:L,onChange:e=>D(e.target.value),children:[(0,on.jsx)("option",{value:"",children:"Select State"}),["Abia","Adamawa","Akwa Ibom","Anambra","Bauchi","Bayelsa","Benue","Borno","Cross River","Delta","Ebonyi","Edo","Ekiti","Enugu","FCT","Gombe","Imo","Jigawa","Kaduna","Kano","Katsina","Kebbi","Kogi","Kwara","Lagos","Nasarawa","Niger","Ogun","Ondo","Osun","Oyo","Plateau","Rivers","Sokoto","Taraba","Yobe","Zamfara"].map(e=>(0,on.jsx)("option",{value:e,children:e},e))]})]})]}),(0,on.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{children:"Specific Delivery Address"}),(0,on.jsx)("input",{className:"form-input",value:L,onChange:e=>D(e.target.value),placeholder:"Street / Area / City"})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{children:"Contact Phone"}),(0,on.jsx)("input",{className:"form-input",value:A,onChange:e=>O(e.target.value),placeholder:"+234..."})]})]}),"standard"===y&&(0,on.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[(0,on.jsxs)("div",{children:[(0,on.jsxs)("label",{children:["Budget Min (\u20a6) ",(0,on.jsx)("span",{className:"text-gray-400 text-xs",children:"optional"})]}),(0,on.jsx)("input",{type:"number",className:"form-input",value:(null===(t=w[0])||void 0===t?void 0:t.price_range_min)||"",onChange:e=>W(0,"price_range_min",e.target.value),placeholder:"0"})]}),(0,on.jsxs)("div",{children:[(0,on.jsxs)("label",{children:["Budget Max (\u20a6) ",(0,on.jsx)("span",{className:"text-gray-400 text-xs",children:"optional"})]}),(0,on.jsx)("input",{type:"number",className:"form-input",value:(null===(r=w[0])||void 0===r?void 0:r.price_range_max)||"",onChange:e=>W(0,"price_range_max",e.target.value),placeholder:"0"})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{children:"Currency"}),(0,on.jsx)("input",{className:"form-input",value:"NGN",readOnly:!0,style:{background:"#f5f5f5",color:"#888"}})]})]}),(0,on.jsx)("div",{className:"mb-4",children:"instant"===y?(0,on.jsxs)(on.Fragment,{children:[(0,on.jsx)("label",{children:"Needed Within (Hours)"}),(0,on.jsxs)("div",{className:"flex items-center gap-2",children:[(0,on.jsx)("input",{type:"range",min:"2",max:"12",value:S,onChange:e=>C(e.target.value),className:"w-full"}),(0,on.jsxs)("span",{className:"font-bold",children:[S,"h"]})]})]}):(0,on.jsxs)(on.Fragment,{children:[(0,on.jsx)("label",{children:"Delivery Timeline (Days)"}),(0,on.jsx)("input",{type:"number",min:"2",className:"form-input",value:_,onChange:e=>k(e.target.value),placeholder:"e.g. 14"}),(0,on.jsx)("small",{className:"text-gray-400",children:"Minimum 2 days for standard requests"})]})}),(0,on.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{children:"Publish Date (Optional)"}),(0,on.jsx)("input",{type:"datetime-local",className:"form-input",value:E,onChange:e=>P(e.target.value)}),(0,on.jsx)("small",{className:"text-gray-400",children:"Leave empty to publish now"})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{children:"Expiry Date *"}),(0,on.jsx)("input",{type:"datetime-local",className:"form-input",value:R,onChange:e=>T(e.target.value),required:!0}),(0,on.jsx)("small",{className:"text-gray-400",children:"When should bids close?"})]})]}),(0,on.jsxs)("div",{className:"flex justify-between mt-6",children:[!x&&(0,on.jsx)("button",{className:"btn-secondary",onClick:()=>g(1),children:"\u2190 Back"}),x?(0,on.jsx)("button",{className:"btn-primary",style:{marginLeft:"auto"},onClick:async()=>{if(R){F(!0);try{const e={items:w.map(e=>({name:e.name,quantity:e.quantity?parseFloat(e.quantity):1,unit:e.unit||"units",specifications:e.specifications||null,moisture_content_percent:e.moisture_content_percent?parseFloat(e.moisture_content_percent):null})),location:L,region_state:L,contact_phone:A,notes:v||null,publish_date:E?new Date(E).toISOString():null,expiry_date:new Date(R).toISOString()};await ln.put("/requests/".concat(x.id),e),alert("Request updated successfully!"),u(),d()}catch(r){var e,t;console.error("Failed to update request:",r),alert((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"Failed to update request.")}finally{F(!1)}}else alert("Please select an expiry date.")},disabled:z,children:z?"Saving...":"Save Changes"}):(0,on.jsx)("button",{className:"btn-primary",style:{marginLeft:x||2!==f?"0":"auto"},onClick:()=>{R?g(3):alert("Please select an expiry date.")},children:"Next \u2192"})]})]}),3===f&&(0,on.jsxs)("div",{className:"text-center",children:[(0,on.jsxs)("h4",{className:"text-lg font-bold mb-4",children:["Review Your ","instant"===y?"Instant":"Standard"," Request"]}),(0,on.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg text-left mb-6",children:[(0,on.jsxs)("p",{children:[(0,on.jsx)("strong",{children:"Title:"})," ",v]}),(0,on.jsxs)("p",{children:[(0,on.jsx)("strong",{children:"Items:"})," ",w.length," items"]}),(0,on.jsx)("ul",{className:"list-disc pl-5 mb-2",children:w.map((e,t)=>(0,on.jsxs)("li",{className:"text-sm",children:[e.quantity," ",e.unit," ",e.name]},t))}),(0,on.jsxs)("p",{children:[(0,on.jsx)("strong",{children:"Delivery:"})," ","instant"===y?"".concat(S," Hours"):"".concat(_," Days")]}),(0,on.jsxs)("p",{children:[(0,on.jsx)("strong",{children:"Location:"})," ",L]})]}),(0,on.jsx)("div",{className:"bg-blue-50 border border-blue-200 p-4 rounded-lg mb-6",children:(0,on.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,on.jsx)("strong",{children:"Note:"})," You will be required to pay a Service Charge to activate this request. The actual cost of goods is paid on delivery.","instant"===y?(0,on.jsxs)(on.Fragment,{children:[(0,on.jsx)("br",{}),(0,on.jsx)("br",{}),(0,on.jsx)("strong",{children:"\ud83d\ude9a Delivery Fee:"})," This estimate covers ",(0,on.jsx)("strong",{children:"Goods Only"}),". Standard delivery rates apply and will be added to your total on delivery."]}):" Agents will bid competitively."]})}),(0,on.jsxs)("div",{className:"flex justify-between",children:[(0,on.jsx)("button",{className:"btn-secondary",onClick:()=>g(2),children:"\u2190 Back"}),(0,on.jsx)("button",{className:"btn-primary",onClick:async()=>{F(!0);try{const e=await ln.post("/requests/initialize-payment",{type:y,items:w.map(e=>({name:e.name,quantity:parseFloat(e.quantity)||1,unit:e.unit,specifications:e.specifications})),estimated_budget:Y()}),{payment_url:t,payment_reference:r,amount:a,service_charge:n,agent_fee:s,breakdown:l}=e.data;B({estimated_total_price:Y(),service_charge:n,agent_fee:s,amount_to_pay:a,payment_reference:r,payment_url:t,email:(null===p||void 0===p?void 0:p.email)||"customer@example.com"}),g(4)}catch(r){var e,t;console.error("Payment initialization failed:",r),alert((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"Failed to initialize payment. Please try again.")}finally{F(!1)}},disabled:z,children:z?"Processing...":"Proceed to Payment"})]})]}),4===f&&M&&(0,on.jsxs)("div",{className:"text-center py-6",children:[(0,on.jsx)("div",{className:"text-green-500 text-5xl mb-4",children:"\ud83d\udcb3"}),(0,on.jsx)("h4",{className:"text-2xl font-bold mb-2",children:"Activate Your Request"}),(0,on.jsx)("p",{className:"text-gray-600 mb-6",children:"Service Charge & Agent Allocation Fee"}),(0,on.jsxs)("div",{className:"bg-gray-100 p-6 rounded-lg max-w-sm mx-auto mb-8 text-left",children:[(0,on.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,on.jsx)("span",{children:"Estimated Goods Budget:"}),(0,on.jsxs)("span",{className:"font-bold",children:["\u20a6",null===(a=M.estimated_total_price)||void 0===a?void 0:a.toLocaleString()]})]}),(0,on.jsxs)("div",{className:"flex justify-between mb-1 text-gray-700",children:[(0,on.jsx)("span",{children:"Platform Service Charge:"}),(0,on.jsxs)("span",{children:["\u20a6",null===(s=M.service_charge)||void 0===s?void 0:s.toLocaleString()]})]}),"instant"===y&&(0,on.jsxs)("div",{className:"flex justify-between mb-1 text-gray-700",children:[(0,on.jsx)("span",{children:"Agent Allocation Fee (4%):"}),(0,on.jsxs)("span",{children:["\u20a6",null===(l=M.agent_fee)||void 0===l?void 0:l.toLocaleString()]})]}),(0,on.jsx)("hr",{className:"my-2"}),(0,on.jsxs)("div",{className:"flex justify-between mb-2 text-green-600 font-bold text-lg",children:[(0,on.jsx)("span",{children:"Total To Pay Now:"}),(0,on.jsxs)("span",{children:["\u20a6",null===(o=M.amount_to_pay)||void 0===o?void 0:o.toLocaleString()]})]}),(0,on.jsx)("div",{className:"text-xs text-orange-600 mt-2 italic",children:"* Goods cost is paid separately on delivery."})]}),(0,on.jsxs)("button",{className:"bg-green-600 text-white px-8 py-3 rounded-lg font-bold hover:bg-green-700 w-full max-w-sm",onClick:()=>{const e=window.PaystackPop;if(e&&M.payment_reference){(new e).newTransaction({key:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKEND_URL:"https://mvp-2-u8e9.onrender.com"}.REACT_APP_PAYSTACK_PUBLIC_KEY,email:M.email,amount:100*M.amount_to_pay,ref:M.payment_reference,onSuccess:e=>{(async e=>{F(!0);try{var t,r;const a=m(m({type:y,items:w.map(e=>({name:e.name,quantity:e.quantity?parseFloat(e.quantity):1,unit:e.unit||"units",specifications:e.specifications||null,moisture_content_percent:e.moisture_content_percent?parseFloat(e.moisture_content_percent):null})),location:L,region_country:"Nigeria",region_state:L,contact_phone:A,notes:v||null,price_range_min:null!==(t=w[0])&&void 0!==t&&t.price_range_min?parseFloat(w[0].price_range_min):null,price_range_max:null!==(r=w[0])&&void 0!==r&&r.price_range_max?parseFloat(w[0].price_range_max):null,currency:"NGN",payment_reference:e,amount_paid:M.amount_to_pay,estimated_budget:M.estimated_total_price||0},"instant"===y?{delivery_days:Math.ceil(parseInt(S)/24)||1}:{delivery_days:parseInt(_)}),{},{publish_date:E?new Date(E).toISOString():null,expiry_date:new Date(R).toISOString()}),n=await ln.post("/requests/verify-payment",a);alert("Payment confirmed! Your request is now live. Agents & businesses will bid shortly."),u(n.data),d()}catch(s){var a,n;console.error("Request creation failed:",s),alert((null===(a=s.response)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.detail)||"Payment verification failed. Please contact support if payment was deducted.")}finally{F(!1)}})(M.payment_reference)},onCancel:()=>{alert("Payment Cancelled")}})}else M.payment_url?window.location.href=M.payment_url:alert("Payment initialization failed. Please try again.")},children:["Pay \u20a6",null===(i=M.amount_to_pay)||void 0===i?void 0:i.toLocaleString()," Securely"]})]})]})]})}):null},pn=e=>{let{type:t,userRole:r}=e;const[a,s]=(0,n.useState)([]),[l,o]=(0,n.useState)(!1);(0,n.useEffect)(()=>{i();const e=setInterval(i,3e4);return()=>clearInterval(e)},[t]);const i=async()=>{try{o(!0);const e=localStorage.getItem("token"),r=e?{Authorization:"Bearer ".concat(e)}:{},a=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/requests?type=").concat(t),{headers:r});if(a.ok){const e=await a.json();s(e)}}catch(e){console.error("Failed to fetch requests",e)}finally{o(!1)}};return 0!==a.length||l?(0,on.jsxs)("div",{className:"mb-8",children:[(0,on.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,on.jsxs)("div",{children:[(0,on.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"instant"===t?"\u26a1 Live Instant Requests":"\ud83c\udf3e Active Farm Requests"}),(0,on.jsx)("p",{className:"text-sm text-gray-600",children:"instant"===t?"Urgent orders needing delivery in 2-6 hours":"Bulk commodity requests to be filled"})]})}),(0,on.jsx)("div",{className:"space-y-4",children:a.slice(0,5).map(e=>{var a,n,s;return(0,on.jsxs)("div",{className:"bg-white border border-gray-100 rounded-xl p-4 shadow-sm hover:shadow-md transition-shadow",children:[(0,on.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,on.jsxs)("div",{children:[(0,on.jsxs)("h4",{className:"font-bold text-gray-900",children:[null===(a=e.items[0])||void 0===a?void 0:a.name," ",e.items.length>1&&"+ ".concat(e.items.length-1," others")]}),(0,on.jsxs)("p",{className:"text-xs text-gray-500",children:[new Date(e.created_at).toLocaleString()," \u2022 ",e.location]})]}),(0,on.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-bold ".concat("instant"===t?"bg-emerald-100 text-emerald-800":"bg-green-100 text-green-800"),children:"instant"===t?"".concat(e.delivery_hours,"h Delivery"):"".concat(e.delivery_days," Days")})]}),(0,on.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,on.jsxs)("div",{className:"text-gray-700",children:[(0,on.jsxs)("span",{className:"font-medium",children:[null===(n=e.items[0])||void 0===n?void 0:n.quantity," ",null===(s=e.items[0])||void 0===s?void 0:s.unit]}),e.budget&&(0,on.jsxs)("span",{className:"text-gray-400",children:[" \u2022 Budget: \u20a6",e.budget.toLocaleString()]})]}),("agent"===r||"farmer"===r||"business"===r)&&(0,on.jsx)("button",{className:"text-emerald-600 font-medium hover:text-emerald-700 text-sm",children:"Make Offer \u2192"})]})]},e.id)})}),a.length>5&&(0,on.jsx)("div",{className:"text-center mt-4",children:(0,on.jsxs)("button",{className:"text-emerald-600 font-medium text-sm hover:underline",children:["View All Requests (",a.length,")"]})})]}):null},hn=["Tonnes","Crates","Baskets","Barrels","Bags (50kg)","Bags (25kg)","Truck (6-wheeler)","Truck (10-wheeler)","Truck (12-wheeler)","Truck (14-wheeler)","Custom"],xn=e=>{var t,r;let{userRole:a,onClose:s}=e;const[l,o]=(0,n.useState)([]),[i,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)({type:"all",location:"",status:"active"}),[p,h]=(0,n.useState)([]),[x,f]=(0,n.useState)(null),[g,y]=(0,n.useState)([]),[b,v]=(0,n.useState)(""),[j,w]=(0,n.useState)(""),[N,_]=(0,n.useState)(""),[k,S]=(0,n.useState)([]),[C,E]=(0,n.useState)(!1);(0,n.useEffect)(()=>{P(),R();const e=setInterval(P,3e4);return()=>clearInterval(e)},[d]);const P=async()=>{try{c(!0);const e=new URLSearchParams;d.status&&e.append("status",d.status),"all"!==d.type&&e.append("type",d.type),d.location&&e.append("location",d.location);const t=await ln.get("/requests?".concat(e.toString()));o(t.data||[])}catch(e){console.error("Failed to fetch requests",e)}finally{c(!1)}},R=async()=>{try{const e=(await ln.get("/requests")).data||[],t=[...new Set(e.map(e=>e.location).filter(Boolean))];h(t)}catch(e){console.error("Failed to fetch locations",e)}},T=()=>{f(null),y([])},L=(e,t,r)=>{y(a=>{const n=[...a];if(n[e]=m(m({},n[e]),{},{[t]:r}),"quantity"===t||"unit_price"===t){const a=parseFloat("quantity"===t?r:n[e].quantity)||0,s=parseFloat("unit_price"===t?r:n[e].unit_price)||0;n[e].total=a*s}return n})},D=g.reduce((e,t)=>e+(t.total||0),0),A=l;return(0,on.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,on.jsx)("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:(0,on.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[(0,on.jsxs)("div",{className:"flex justify-between items-center",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"\ud83c\udfaf Buyer Requests"}),(0,on.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Browse and respond to buyer requests"})]}),s&&(0,on.jsx)("button",{onClick:s,className:"text-gray-500 hover:text-gray-700 text-2xl",children:"\xd7"})]}),(0,on.jsxs)("div",{className:"mt-4 flex flex-col space-y-4",children:[(0,on.jsxs)("div",{className:"flex border-b border-gray-200",children:[(0,on.jsx)("button",{onClick:()=>u(e=>m(m({},e),{},{status:"active"})),className:"px-6 py-2 border-b-2 font-medium text-sm transition-colors ".concat("active"===d.status?"border-emerald-500 text-emerald-600":"border-transparent text-gray-500"),children:"Live Requests"}),(0,on.jsx)("button",{onClick:()=>u(e=>m(m({},e),{},{status:"completed"})),className:"px-6 py-2 border-b-2 font-medium text-sm transition-colors ".concat("completed"===d.status?"border-emerald-500 text-emerald-600":"border-transparent text-gray-500"),children:"Delivered"}),(0,on.jsx)("button",{onClick:()=>u(e=>m(m({},e),{},{status:"on_hold"})),className:"px-6 py-2 border-b-2 font-medium text-sm transition-colors ".concat("on_hold"===d.status?"border-emerald-500 text-emerald-600":"border-transparent text-gray-500"),children:"On Hold"})]}),(0,on.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,on.jsx)("button",{onClick:()=>u(e=>m(m({},e),{},{type:"all"})),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors ".concat("all"===d.type?"bg-emerald-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"All Requests"}),(0,on.jsx)("button",{onClick:()=>u(e=>m(m({},e),{},{type:"standard"})),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors ".concat("standard"===d.type?"bg-orange-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"\ud83c\udf3e Standard (Farm Deals)"}),(0,on.jsxs)("select",{value:d.location,onChange:e=>u(t=>m(m({},t),{},{location:e.target.value})),className:"px-4 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-emerald-500",children:[(0,on.jsx)("option",{value:"",children:"All Locations"}),p.map(e=>(0,on.jsx)("option",{value:e,children:e},e))]})]})]})]})}),(0,on.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:i?(0,on.jsxs)("div",{className:"text-center py-12",children:[(0,on.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,on.jsx)("p",{children:"Loading requests..."})]}):0===A.length?(0,on.jsxs)("div",{className:"text-center py-12 bg-white rounded-lg border border-gray-200",children:[(0,on.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udced"}),(0,on.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Requests Found"}),(0,on.jsx)("p",{className:"text-gray-600",children:"Try adjusting your filters."})]}):(0,on.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:A.map(e=>{var t,r,n,s,l;return(0,on.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl p-5 shadow-sm hover:shadow-md transition-shadow",children:[(0,on.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,on.jsxs)("div",{className:"flex-1",children:[(0,on.jsxs)("h3",{className:"font-bold text-gray-900 text-lg mb-1",children:[null===(t=e.items[0])||void 0===t?void 0:t.name,e.items.length>1&&(0,on.jsxs)("span",{className:"text-sm text-gray-500 font-normal",children:[" + ",e.items.length-1," more"]})]}),(0,on.jsx)("p",{className:"text-xs text-gray-500",children:new Date(e.created_at).toLocaleString()})]}),(0,on.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-bold ".concat("instant"===e.type?"bg-emerald-100 text-emerald-800":"bg-orange-100 text-orange-800"),children:"instant"===e.type?"\u26a1 Instant":"\ud83c\udf3e Standard"})]}),(0,on.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,on.jsxs)("div",{className:"flex items-center text-sm",children:[(0,on.jsx)("span",{className:"text-gray-600 w-20",children:"Quantity:"}),(0,on.jsxs)("span",{className:"font-medium text-gray-900",children:[null===(r=e.items[0])||void 0===r?void 0:r.quantity," ",null===(n=e.items[0])||void 0===n?void 0:n.unit]})]}),(0,on.jsxs)("div",{className:"flex items-center text-sm",children:[(0,on.jsx)("span",{className:"text-gray-600 w-20",children:"Location:"}),(0,on.jsxs)("span",{className:"font-medium text-gray-900",children:["\ud83d\udccd ",e.location]})]}),(null===(s=e.price_range)||void 0===s?void 0:s.min)&&(0,on.jsxs)("div",{className:"flex items-center text-sm",children:[(0,on.jsx)("span",{className:"text-gray-600 w-20",children:"Budget:"}),(0,on.jsxs)("span",{className:"font-medium text-emerald-600",children:["\u20a6",e.price_range.min.toLocaleString()," - ",null===(l=e.price_range.max)||void 0===l?void 0:l.toLocaleString()]})]}),(0,on.jsxs)("div",{className:"flex items-center text-sm",children:[(0,on.jsx)("span",{className:"text-gray-600 w-20",children:"Delivery:"}),(0,on.jsx)("span",{className:"font-medium text-gray-900",children:"instant"===e.type?"".concat(e.delivery_hours||6,"hrs"):"".concat(e.delivery_days," days")})]})]}),("agent"===a||"farmer"===a||"business"===a)&&(0,on.jsx)("button",{onClick:()=>(e=>{f(e),y((e.items||[]).map(e=>({name:e.name,quantity:e.quantity||"",unit:e.unit||"Tonnes",unit_price:"",total:0}))),v(""),w(""),_(""),S([])})(e),className:"w-full bg-emerald-600 text-white py-2 px-4 rounded-lg font-medium hover:bg-emerald-700 transition-colors",children:"Make Offer"})]},e.id)})})}),x&&(0,on.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,on.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[(0,on.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,on.jsxs)("h2",{className:"text-xl font-bold text-gray-900",children:["Place Bid \u2014 ",null===(t=x.items)||void 0===t||null===(r=t[0])||void 0===r?void 0:r.name]}),(0,on.jsx)("button",{onClick:T,className:"text-gray-500 hover:text-gray-700 text-2xl",children:"\xd7"})]}),(0,on.jsx)("div",{className:"mb-4 overflow-x-auto",children:(0,on.jsxs)("table",{className:"w-full text-sm border-collapse",children:[(0,on.jsx)("thead",{className:"bg-gray-50",children:(0,on.jsxs)("tr",{children:[(0,on.jsx)("th",{className:"p-2 text-left",children:"Item"}),(0,on.jsx)("th",{className:"p-2 text-right w-20",children:"Qty"}),(0,on.jsx)("th",{className:"p-2 w-32",children:"Unit"}),(0,on.jsx)("th",{className:"p-2 text-right w-28",children:"Price (\u20a6)"}),(0,on.jsx)("th",{className:"p-2 text-right w-28",children:"Total (\u20a6)"})]})}),(0,on.jsx)("tbody",{children:g.map((e,t)=>(0,on.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,on.jsx)("td",{className:"p-2",children:e.name}),(0,on.jsx)("td",{className:"p-2",children:(0,on.jsx)("input",{type:"number",value:e.quantity,onChange:e=>L(t,"quantity",e.target.value),className:"w-full text-right p-1 border rounded"})}),(0,on.jsx)("td",{className:"p-2",children:(0,on.jsx)("select",{value:e.unit,onChange:e=>L(t,"unit",e.target.value),className:"w-full p-1 border rounded",children:hn.map(e=>(0,on.jsx)("option",{children:e},e))})}),(0,on.jsx)("td",{className:"p-2",children:(0,on.jsx)("input",{type:"number",value:e.unit_price,onChange:e=>L(t,"unit_price",e.target.value),className:"w-full text-right p-1 border rounded",placeholder:"0"})}),(0,on.jsxs)("td",{className:"p-2 text-right font-bold text-emerald-600",children:["\u20a6",(e.total||0).toLocaleString()]})]},t))}),(0,on.jsx)("tfoot",{children:(0,on.jsxs)("tr",{className:"bg-emerald-50",children:[(0,on.jsx)("td",{colSpan:4,className:"p-2 text-right font-bold",children:"Grand Total:"}),(0,on.jsxs)("td",{className:"p-2 text-right font-bold text-emerald-700 text-lg",children:["\u20a6",D.toLocaleString()]})]})})]})}),(0,on.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Earliest Delivery Date *"}),(0,on.jsx)("input",{type:"date",value:j,onChange:e=>w(e.target.value),className:"w-full p-2 border rounded-lg"})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Moisture Content % (Optional)"}),(0,on.jsx)("input",{type:"number",value:N,onChange:e=>_(e.target.value),className:"w-full p-2 border rounded-lg",placeholder:"e.g. 12.5"})]})]}),(0,on.jsxs)("div",{className:"mb-4",children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes / Additional Info"}),(0,on.jsx)("textarea",{value:b,onChange:e=>v(e.target.value),className:"w-full p-2 border rounded-lg",rows:"3",placeholder:"Quality details, packaging, payment preference..."})]}),(0,on.jsxs)("div",{className:"mb-6",children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Proof Images (Optional)"}),(0,on.jsx)("input",{type:"file",accept:"image/*",onChange:async e=>{const t=e.target.files[0];if(!t)return;const r={url:"",uploading:!0,name:t.name};S(e=>[...e,r]);try{const e=await ln.post("/upload/sign-public",{folder:"rfq_images",filename:t.name,contentType:t.type});await fetch(e.data.uploadUrl,{method:"PUT",body:t,headers:{"Content-Type":t.type}}),S(r=>r.map(r=>r.name===t.name&&r.uploading?{url:e.data.publicUrl,uploading:!1,name:t.name}:r))}catch(a){alert("Image upload failed. Please try again."),S(e=>e.filter(e=>!(e.name===t.name&&e.uploading)))}},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-emerald-50 file:text-emerald-700 hover:file:bg-emerald-100 mb-2"}),(0,on.jsx)("div",{className:"flex gap-2 flex-wrap",children:k.map((e,t)=>(0,on.jsx)("div",{className:"relative",children:e.uploading?(0,on.jsx)("div",{className:"w-16 h-16 bg-gray-100 flex items-center justify-center text-xs text-gray-500 rounded",children:"..."}):(0,on.jsx)("img",{src:e.url,alt:"proof",className:"w-16 h-16 object-cover rounded border"})},t))})]}),(0,on.jsxs)("div",{className:"flex gap-3",children:[(0,on.jsx)("button",{onClick:T,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,on.jsx)("button",{onClick:async()=>{if(j)if(g.some(e=>!e.unit_price))alert("Please fill in unit prices for all items.");else{E(!0);try{var e;const t={price:D,items:g.map(e=>({name:e.name,quantity:parseFloat(e.quantity)||0,unit:e.unit,target_price:parseFloat(e.unit_price)||0,moisture_content_percent:N?parseFloat(N):null})),images:k.filter(e=>!e.uploading).map(e=>e.url),moisture_content_percent:N?parseFloat(N):null,delivery_date:new Date(j).toISOString(),notes:b,quantity_offered:(null===(e=g[0])||void 0===e?void 0:e.quantity)||null};await ln.post("/requests/".concat(x.id,"/offers"),t),alert("Bid Submitted Successfully!"),T(),P()}catch(a){var t,r;alert((null===(t=a.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||"Failed to submit bid")}finally{E(!1)}}else alert("Please select a delivery date.")},disabled:C||k.some(e=>e.uploading),className:"flex-1 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 disabled:bg-gray-300 disabled:cursor-not-allowed",children:C?"Submitting...":"Submit Bid \u2014 \u20a6".concat(D.toLocaleString())})]})]})})]})},fn=e=>{var t;let{isOpen:r,onClose:a,userProfile:s}=e;const[l,o]=(0,n.useState)(null),[i,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)(!1),[m,p]=(0,n.useState)("");(0,n.useEffect)(()=>{r&&h()},[r]);const h=async()=>{c(!0);try{const e=await ln.get("/users/wallet/balance");o(e.data)}catch(e){console.error("Failed to fetch wallet balance:",e)}finally{c(!1)}};return r?(0,on.jsx)("div",{className:"modal-overlay",children:(0,on.jsxs)("div",{className:"modal-content",style:{maxWidth:"600px"},children:[(0,on.jsxs)("div",{className:"modal-header",children:[(0,on.jsx)("h3",{children:"\ud83d\udcb0 My Wallet"}),(0,on.jsx)("button",{className:"close-button",onClick:a,children:"\xd7"})]}),(0,on.jsx)("div",{className:"modal-body",children:i?(0,on.jsx)("div",{className:"text-center py-8",children:(0,on.jsx)("p",{children:"Loading wallet..."})}):l?(0,on.jsxs)(on.Fragment,{children:[(0,on.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 p-6 rounded-lg mb-4",children:[(0,on.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Available Balance"}),(0,on.jsxs)("h2",{className:"text-4xl font-bold text-green-600",children:["\u20a6",(null===(t=l.balance)||void 0===t?void 0:t.toLocaleString())||"0"]})]}),l.has_dva?(0,on.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:[(0,on.jsxs)("h4",{className:"font-semibold mb-3 flex items-center",children:[(0,on.jsx)("span",{className:"text-2xl mr-2",children:"\ud83c\udfe6"}),"Dedicated Virtual Account"]}),(0,on.jsxs)("div",{className:"space-y-2",children:[(0,on.jsxs)("div",{className:"flex justify-between",children:[(0,on.jsx)("span",{className:"text-gray-600",children:"Bank Name:"}),(0,on.jsx)("span",{className:"font-semibold",children:l.dva_bank_name})]}),(0,on.jsxs)("div",{className:"flex justify-between",children:[(0,on.jsx)("span",{className:"text-gray-600",children:"Account Number:"}),(0,on.jsx)("span",{className:"font-semibold text-lg",children:l.dva_account_number})]})]}),(0,on.jsx)("div",{className:"mt-3 p-3 bg-white rounded border border-blue-200",children:(0,on.jsxs)("p",{className:"text-xs text-gray-600",children:["\ud83d\udca1 ",(0,on.jsx)("strong",{children:"How to fund:"})," Transfer money to this account from any bank. Your wallet will be credited automatically within minutes."]})})]}):(0,on.jsx)("div",{className:"bg-yellow-50 p-4 rounded-lg mb-4",children:(0,on.jsx)("p",{className:"text-sm text-gray-700",children:"\u26a0\ufe0f No dedicated virtual account found. Please contact support to activate your wallet."})}),d?(0,on.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[(0,on.jsx)("h4",{className:"font-semibold text-green-700 mb-2",children:"\u2705 Funding Instructions"}),(0,on.jsxs)("p",{className:"text-sm mb-3",children:["Transfer ",(0,on.jsxs)("strong",{children:["\u20a6",parseFloat(m).toLocaleString()]})," to:"]}),(0,on.jsxs)("div",{className:"bg-white p-3 rounded border border-green-300 mb-3",children:[(0,on.jsx)("p",{className:"font-semibold",children:l.dva_bank_name}),(0,on.jsx)("p",{className:"text-2xl font-bold text-green-600",children:l.dva_account_number})]}),(0,on.jsx)("p",{className:"text-xs text-gray-600",children:"Your wallet will be credited automatically once the transfer is confirmed."}),(0,on.jsx)("button",{className:"btn-secondary mt-3 w-full",onClick:()=>{u(!1),p("")},children:"Done"})]}):(0,on.jsxs)("div",{className:"border-t pt-4",children:[(0,on.jsx)("h4",{className:"font-semibold mb-3",children:"Fund Wallet"}),(0,on.jsxs)("div",{className:"flex gap-2",children:[(0,on.jsx)("input",{type:"number",className:"form-input flex-1",placeholder:"Enter amount",value:m,onChange:e=>p(e.target.value)}),(0,on.jsx)("button",{className:"btn-primary",onClick:async()=>{if(!m||parseFloat(m)<=0)alert("Please enter a valid amount");else try{await ln.post("/users/wallet/fund",{amount:parseFloat(m)});u(!0)}catch(r){var e,t;alert((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"Failed to initiate funding")}},disabled:!l.has_dva,children:"Get Details"})]})]}),(0,on.jsxs)("div",{className:"mt-4 pt-4 border-t",children:[(0,on.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"Quick Actions:"}),(0,on.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,on.jsx)("button",{className:"btn-secondary text-sm py-2",children:"\ud83d\udcca Transaction History"}),(0,on.jsx)("button",{className:"btn-secondary text-sm py-2",children:"\ud83d\udcb8 Withdraw Funds"})]})]})]}):(0,on.jsxs)("div",{className:"text-center py-8",children:[(0,on.jsx)("p",{children:"Failed to load wallet data"}),(0,on.jsx)("button",{className:"btn-primary mt-4",onClick:h,children:"Retry"})]})})]})}):null},gn=e=>{let{onJoin:t}=e;const[r,a]=(0,n.useState)(""),[s,l]=(0,n.useState)([]),[o,i]=(0,n.useState)(!1),c=async e=>{e&&e.preventDefault(),i(!0);try{const e=r.trim()?"?q=".concat(r,"&type=community"):"?type=community",t=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/communities/search").concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(t.ok){const e=await t.json();l(e.communities||[])}}catch(t){console.error("Search failed",t)}finally{i(!1)}};return n.useEffect(()=>{c()},[]),(0,on.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[(0,on.jsx)("h3",{className:"font-bold text-gray-900 mb-3 text-sm",children:"Find Communities"}),(0,on.jsx)("form",{onSubmit:c,className:"mb-4",children:(0,on.jsxs)("div",{className:"flex gap-2",children:[(0,on.jsx)("input",{type:"text",className:"flex-1 px-3 py-2 border border-gray-300 rounded text-sm focus:ring-1 focus:ring-emerald-500",placeholder:"Search...",value:r,onChange:e=>a(e.target.value)}),(0,on.jsx)("button",{type:"submit",className:"px-3 py-2 bg-emerald-600 text-white rounded text-sm hover:bg-emerald-700 disabled:opacity-50",disabled:o,children:"\ud83d\udd0d"})]})}),(0,on.jsxs)("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:[0===s.length&&!o&&r&&(0,on.jsx)("p",{className:"text-gray-500 text-center text-xs",children:"No result."}),s.map(e=>(0,on.jsx)("div",{className:"flex flex-col gap-2 p-2 border border-gray-100 rounded hover:bg-gray-50",children:(0,on.jsxs)("div",{className:"flex justify-between items-start",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("h4",{className:"font-semibold text-sm text-gray-900 line-clamp-1",children:e.name}),(0,on.jsx)("p",{className:"text-xs text-gray-500 line-clamp-1",children:e.category})]}),(0,on.jsx)("button",{onClick:()=>t(e.id),className:"text-xs bg-emerald-100 text-emerald-700 px-2 py-1 rounded hover:bg-emerald-200",children:"Join"})]})},e.id))]})]})},yn=e=>{let{onSelect:t,refreshTrigger:r,onCreate:a}=e;const[s,l]=(0,n.useState)([]),[o,i]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{localStorage.getItem("token")&&(async()=>{try{const e=localStorage.getItem("token"),t=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/communities/my-communities"),{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){const e=await t.json();l(e)}}catch(e){console.error("Failed to fetch my communities",e)}finally{i(!1)}})()},[r]),o?(0,on.jsx)("div",{className:"p-4 text-center text-gray-500",children:"Loading your communities..."}):(0,on.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[(0,on.jsx)("div",{className:"p-4 bg-emerald-50 border-b border-emerald-100 flex justify-between items-center",children:(0,on.jsx)("h3",{className:"font-semibold text-emerald-900",children:"My Communities"})}),0===s.length?(0,on.jsxs)("div",{className:"p-8 text-center",children:[(0,on.jsx)("p",{className:"text-gray-500 mb-2",children:"You haven't joined any communities yet."}),(0,on.jsx)("p",{className:"text-xs text-gray-400",children:"Use the search to find groups!"})]}):(0,on.jsx)("div",{className:"divide-y divide-gray-100",children:s.map(e=>(0,on.jsxs)("button",{onClick:()=>t(e),className:"w-full text-left p-4 hover:bg-gray-50 transition-colors flex items-center justify-between group",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("h4",{className:"font-medium text-gray-900 group-hover:text-emerald-700",children:e.name}),(0,on.jsxs)("p",{className:"text-xs text-gray-500",children:[e.members_count||0," members"]})]}),(0,on.jsx)("span",{className:"text-gray-300 group-hover:text-emerald-500",children:"\u2192"})]},e.id))})]})},bn=(0,n.createContext)(null),vn=e=>{let{children:t}=e;const[r,a]=(0,n.useState)(null),[s,l]=(0,n.useState)(!0),[o,i]=(0,n.useState)(!1),[c,d]=(0,n.useState)("login");(0,n.useEffect)(()=>{(async()=>{if(localStorage.getItem("token"))try{const e=localStorage.getItem("user");e&&a(JSON.parse(e))}catch(e){console.error("Auth verification failed",e),localStorage.removeItem("token"),localStorage.removeItem("user")}l(!1)})()},[]);return(0,on.jsx)(bn.Provider,{value:{user:r,updateUser:e=>{a(e),localStorage.setItem("user",JSON.stringify(e))},loading:s,login:async e=>{try{const t=await ln.post("/api/auth/login",e),{user:r,token:n}=t.data;return localStorage.setItem("token",n),localStorage.setItem("user",JSON.stringify(r)),a(r),i(!1),{success:!0}}catch(n){var t,r;return console.error("Login failed",n),{success:!1,message:(null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"Login failed"}}},register:async(e,t)=>{try{const r=await ln.post(e,t),{user:n,token:s}=r.data;return localStorage.setItem("token",s),localStorage.setItem("user",JSON.stringify(n)),a(n),i(!1),{success:!0}}catch(s){var r,n;return console.error("Registration failed",s),{success:!1,message:(null===(r=s.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message)||"Registration failed"}}},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),a(null),i(!1)},showAuthModal:o,setShowAuthModal:i,authMode:c,setAuthMode:d},children:t})},jn=()=>(0,n.useContext)(bn),wn=["Abia","Adamawa","Akwa Ibom","Anambra","Bauchi","Bayelsa","Benue","Borno","Cross River","Delta","Ebonyi","Edo","Ekiti","Enugu","FCT - Abuja","Gombe","Imo","Jigawa","Kaduna","Kano","Katsina","Kebbi","Kogi","Kwara","Lagos","Nasarawa","Niger","Ogun","Ondo","Osun","Oyo","Plateau","Rivers","Sokoto","Taraba","Yobe","Zamfara"],Nn={grains_cereals:{label:"Grains & Cereals",subcategories:["maize","rice","wheat","oat","barley","sorghum","millet","rye","triticale"]},beans_legumes:{label:"Beans & Legumes",subcategories:["lentils","peas","beans","broad_beans","groundnut","soybeans"]},fish_meat:{label:"Fish & Meat",subcategories:["fresh_fish","dried_fish","poultry","beef","goat_mutton","pork","snails"]},spices_vegetables:{label:"Spices & Vegetables",subcategories:["leafy_vegetables","peppers","tomatoes","onions","ginger_garlic","herbs_spices","okra","cucumber"]},tubers_roots:{label:"Tubers & Roots",subcategories:["yam","cassava","sweet_potato","chinese_yam","taro","potato","carrots","turnips","parsnips","radish","celeriac","ginger","turmeric","beets","burdock_root"]},drinks_beverage:{label:"Drinks & Beverage",subcategories:["milk","chocolate_drinks","water","soft_drinks_carbonated","juices_smoothies","hot_beverage","energy_drinks","health_drinks","dairy_plant_based","cordials_squash"]},snacks_confectionaries:{label:"Snacks & Confectionaries",subcategories:["chocolates","candy_gummy","chips_crisps","pretzels_crackers","popcorn","nuts_seeds","dried_fruits_trail_mix","granola_energy_bars","cookies_biscuits","snack_cakes_pastries"]},sweets_sugar:{label:"Sweets & Sugar",subcategories:["sugar","honey","dates","agave","artificial_sweetener","syrups"]},farm_inputs:{label:"Farm Inputs",subcategories:[]},flour_flakes:{label:"Flour & Flakes",subcategories:["all_purpose_flour","yam_flour","cassava_flakes_garri","cassava_flour","bread_flour","cake_flour","pastry_flour","whole_wheat","self_rising_flour","semolina_flour","nut_flour","coconut_flour","rice_flour","others"]},other:{label:"Other",subcategories:[]}},_n=["white","brown","green","red","yellow","silver","black","grey","ash"],kn=e=>{var t,r;let{community:a,onClose:s,onSuccess:l}=e;const[o,i]=(0,n.useState)({title:"",description:"",category:"grains_cereals",subcategory:"",processing_level:"unprocessed",price_per_unit:"",unit:"kg",quantity:"",location:a.location||"",city:"",pickup_address:"",country:"Nigeria",colors:[],seller_delivery_fee:0,images:[],min_order_quantity:1,is_preorder:!1,preorder_deadline:"",target_quantity:"",community_id:a.id}),[c,d]=(0,n.useState)(!1),[u,p]=(0,n.useState)(!1),h=localStorage.getItem("token");return(0,on.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 overflow-y-auto",children:(0,on.jsxs)("div",{className:"bg-white rounded-xl max-w-2xl w-full p-6 my-8 max-h-[90vh] overflow-y-auto",children:[(0,on.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,on.jsxs)("div",{children:[(0,on.jsxs)("h2",{className:"text-xl font-bold",children:["Sell in ",a.name]}),(0,on.jsx)("p",{className:"text-sm text-gray-500",children:"List an item for community members"})]}),(0,on.jsx)("button",{onClick:s,className:"text-gray-500 hover:text-gray-700 text-2xl",children:"\xd7"})]}),(0,on.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),d(!0);try{const e=m(m({},o),{},{type:o.is_preorder?"preorder":"standard",platform:"community",unit_of_measure:o.unit,quantity_available:parseInt(o.quantity)||0,minimum_order_quantity:parseInt(o.min_order_quantity)||1,colors:o.colors}),t=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/products"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)},body:JSON.stringify(e)});if(t.ok)alert("Item listed in community marketplace!"),l();else{const e=await t.json();alert(e.detail||"Failed to list item")}}catch(t){console.error(t),alert("Error creating listing")}finally{d(!1)}},className:"space-y-4",children:[(0,on.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Title"}),(0,on.jsx)("input",{type:"text",required:!0,className:"w-full border rounded p-2",value:o.title,onChange:e=>i(m(m({},o),{},{title:e.target.value})),placeholder:"What are you selling?"})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),(0,on.jsx)("select",{className:"w-full border rounded p-2",value:o.category,onChange:e=>i(m(m({},o),{},{category:e.target.value,subcategory:""})),children:Object.entries(Nn).map(e=>{let[t,r]=e;return(0,on.jsx)("option",{value:t,children:r.label},t)})})]}),(null===(t=Nn[o.category])||void 0===t||null===(r=t.subcategories)||void 0===r?void 0:r.length)>0&&(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Subcategory"}),(0,on.jsxs)("select",{required:!0,className:"w-full border rounded p-2",value:o.subcategory,onChange:e=>i(m(m({},o),{},{subcategory:e.target.value})),children:[(0,on.jsx)("option",{value:"",children:"Select Subcategory"}),Nn[o.category].subcategories.map(e=>{return(0,on.jsx)("option",{value:e,children:(t=e,t.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()))},e);var t})]})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Nutritional Mode"}),(0,on.jsxs)("select",{className:"w-full border rounded p-2",value:o.processing_level,onChange:e=>i(m(m({},o),{},{processing_level:e.target.value})),children:[(0,on.jsx)("option",{value:"unprocessed",children:"Unprocessed"}),(0,on.jsx)("option",{value:"processed",children:"Processed"}),(0,on.jsx)("option",{value:"ultraprocessed",children:"Ultra-processed"})]})]})]}),(0,on.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,on.jsxs)("div",{className:"col-span-2",children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Price (\u20a6)"}),(0,on.jsx)("input",{type:"number",required:!0,className:"w-full border rounded p-2",value:o.price_per_unit,onChange:e=>i(m(m({},o),{},{price_per_unit:e.target.value}))})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Quantity"}),(0,on.jsx)("input",{type:"number",required:!0,className:"w-full border rounded p-2",value:o.quantity,onChange:e=>i(m(m({},o),{},{quantity:e.target.value}))})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Unit"}),(0,on.jsxs)("select",{className:"w-full border rounded p-2",value:o.unit,onChange:e=>i(m(m({},o),{},{unit:e.target.value})),children:[(0,on.jsx)("option",{value:"kg",children:"kg"}),(0,on.jsx)("option",{value:"bag",children:"bag"}),(0,on.jsx)("option",{value:"litre",children:"litre"}),(0,on.jsx)("option",{value:"basket",children:"basket"}),(0,on.jsx)("option",{value:"crate",children:"crate"}),(0,on.jsx)("option",{value:"piece",children:"piece"})]})]})]}),(0,on.jsxs)("div",{className:"border border-gray-200 p-4 rounded-lg my-4",children:[(0,on.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Available Colors (Optional)"}),(0,on.jsx)("p",{className:"text-xs text-gray-500 mb-3",children:"Select one or multiple colors if applicable to your product."}),(0,on.jsx)("div",{className:"flex flex-wrap gap-3",children:_n.map(e=>(0,on.jsxs)("label",{className:"flex items-center gap-2 text-sm bg-gray-50 px-3 py-2 rounded-lg border cursor-pointer hover:bg-gray-100 transition-colors",children:[(0,on.jsx)("input",{type:"checkbox",checked:o.colors.includes(e),onChange:t=>{t.target.checked?i(m(m({},o),{},{colors:[...o.colors,e]})):i(m(m({},o),{},{colors:o.colors.filter(t=>t!==e)}))},className:"rounded text-emerald-600 focus:ring-emerald-500 w-4 h-4"}),e.charAt(0).toUpperCase()+e.slice(1)]},e))})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Photos"}),(0,on.jsxs)("div",{className:"flex flex-wrap gap-2 mb-2",children:[o.images.map((e,t)=>(0,on.jsxs)("div",{className:"relative w-20 h-20 border rounded overflow-hidden",children:[(0,on.jsx)("img",{src:e,alt:"Product",className:"w-full h-full object-cover"}),(0,on.jsx)("button",{type:"button",onClick:()=>{return e=t,void i(t=>m(m({},t),{},{images:t.images.filter((t,r)=>r!==e)}));var e},className:"absolute top-0 right-0 bg-red-500 text-white rounded-bl p-1 text-xs",children:"\u2715"})]},t)),(0,on.jsx)("div",{className:"w-20 h-20 border-2 border-dashed border-gray-300 rounded flex items-center justify-center relative hover:bg-gray-50",children:u?(0,on.jsx)("span",{className:"text-xs text-gray-500",children:"Uploading..."}):(0,on.jsxs)(on.Fragment,{children:[(0,on.jsx)("span",{className:"text-2xl text-gray-400",children:"+"}),(0,on.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:async e=>{const t=Array.from(e.target.files);p(!0);try{const e=[];for(const r of t){const t=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/upload/sign"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)},body:JSON.stringify({folder:"products",filename:r.name,contentType:r.type})});if(!t.ok)throw new Error("Failed to get upload signature");const{uploadUrl:a,publicUrl:n}=await t.json();if(!(await fetch(a,{method:"PUT",headers:{"Content-Type":r.type},body:r})).ok)throw new Error("Failed to upload image");e.push(n)}i(t=>m(m({},t),{},{images:[...t.images,...e]}))}catch(r){console.error("Upload error:",r),alert("Failed to upload image(s)")}finally{p(!1)}},className:"absolute inset-0 opacity-0 cursor-pointer"})]})})]})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,on.jsx)("textarea",{required:!0,className:"w-full border rounded p-2 h-24",value:o.description,onChange:e=>i(m(m({},o),{},{description:e.target.value})),placeholder:"Describe your item..."})]}),(0,on.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"State"}),(0,on.jsxs)("select",{required:!0,className:"w-full border rounded p-2",value:o.location,onChange:e=>i(m(m({},o),{},{location:e.target.value})),children:[(0,on.jsx)("option",{value:"",children:"Select State"}),wn.map(e=>(0,on.jsx)("option",{value:e,children:e},e))]})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"City / Location"}),(0,on.jsx)("input",{type:"text",required:!0,className:"w-full border rounded p-2",value:o.city,onChange:e=>i(m(m({},o),{},{city:e.target.value})),placeholder:"e.g. Ikeja"})]})]}),(0,on.jsxs)("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[(0,on.jsx)("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),(0,on.jsx)("button",{type:"submit",disabled:c||u,className:"px-6 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 disabled:bg-gray-400",children:c?"Listing...":"List Item"})]})]})]})})},Sn=e=>{let{product:t,onClose:r}=e;const[a,s]=(0,n.useState)([]),[l,o]=(0,n.useState)({count:0}),[i,c]=(0,n.useState)(!0),[d,u]=(0,n.useState)(""),[m,p]=(0,n.useState)(!1),h=localStorage.getItem("token"),x="https://mvp-2-u8e9.onrender.com";(0,n.useEffect)(()=>{f()},[t.id]);const f=async()=>{try{const e=await fetch("".concat(x,"/api/products/").concat(t.id,"/comments"),{headers:{Authorization:"Bearer ".concat(h)}});if(e.ok){const t=await e.json();s(t),o({count:t.length})}}catch(e){console.error("Failed to fetch comments",e)}finally{c(!1)}};return(0,on.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,on.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full overflow-hidden flex flex-col max-h-[80vh]",children:[(0,on.jsxs)("div",{className:"p-4 border-b flex justify-between items-center bg-gray-50",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("h3",{className:"font-bold text-gray-900",children:"Q&A"}),(0,on.jsxs)("p",{className:"text-xs text-gray-500",children:["Ask about ",t.title]})]}),(0,on.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 font-bold text-xl",children:"\xd7"})]}),(0,on.jsx)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:i?(0,on.jsx)("div",{className:"text-center py-4 text-gray-400",children:"Loading..."}):0===a.length?(0,on.jsxs)("div",{className:"text-center py-8 text-gray-400",children:[(0,on.jsx)("p",{children:"No questions yet."}),(0,on.jsx)("p",{className:"text-sm",children:"Be the first to ask about this product!"})]}):a.map((e,t)=>{var r,a;return(0,on.jsxs)("div",{className:"flex gap-3",children:[(0,on.jsx)("div",{className:"w-8 h-8 rounded-full bg-emerald-100 flex items-center justify-center text-emerald-700 font-bold text-xs shrink-0",children:(null===(r=e.username)||void 0===r||null===(a=r[0])||void 0===a?void 0:a.toUpperCase())||"U"}),(0,on.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg flex-1",children:[(0,on.jsxs)("div",{className:"flex justify-between items-baseline mb-1",children:[(0,on.jsx)("span",{className:"font-semibold text-sm text-gray-900",children:e.username}),(0,on.jsx)("span",{className:"text-xs text-gray-400",children:new Date(e.created_at).toLocaleDateString()})]}),(0,on.jsx)("p",{className:"text-sm text-gray-700",children:e.comment})]})]},t)})}),(0,on.jsx)("form",{onSubmit:async e=>{if(e.preventDefault(),d.trim()){p(!0);try{const e=await fetch("".concat(x,"/api/products/").concat(t.id,"/comments"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)},body:JSON.stringify({content:d})});if(e.ok){const t=await e.json();s([t,...a]),u(""),o(e=>({count:e.count+1}))}else alert("Failed to post comment")}catch(r){console.error("Post error",r)}finally{p(!1)}}},className:"p-4 border-t bg-white",children:(0,on.jsxs)("div",{className:"flex gap-2",children:[(0,on.jsx)("input",{type:"text",className:"flex-1 border rounded-full px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500",placeholder:"Ask a question...",value:d,onChange:e=>u(e.target.value)}),(0,on.jsx)("button",{type:"submit",disabled:!d.trim()||m,className:"bg-emerald-600 text-white rounded-full px-4 py-2 text-sm font-bold hover:bg-emerald-700 disabled:bg-gray-300",children:"Send"})]})})]})})},Cn=e=>{let{community:t,items:r,onRefresh:a,user:s,API_BASE_URL:l}=e;const[o,i]=(0,n.useState)(""),[c,d]=(0,n.useState)([]),[u,m]=(0,n.useState)(!1),p=t.creator_id===(null===s||void 0===s?void 0:s.id)||"admin"===t.user_role;return(0,on.jsxs)("div",{className:"space-y-6",children:[p&&(0,on.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[(0,on.jsx)("h4",{className:"text-sm font-bold text-gray-700 mb-2",children:"Add New Member"}),(0,on.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),o.trim())try{const e=localStorage.getItem("token"),t=await fetch("".concat(l,"/api/users/search?q=").concat(o),{headers:{Authorization:"Bearer ".concat(e)}});t.ok&&d(await t.json())}catch(t){console.error(t)}},className:"flex gap-2 mb-2",children:[(0,on.jsx)("input",{type:"text",value:o,onChange:e=>i(e.target.value),placeholder:"Search by name or username...",className:"flex-1 p-2 border border-gray-300 rounded text-sm"}),(0,on.jsx)("button",{type:"submit",className:"px-3 py-2 bg-emerald-600 text-white rounded text-sm",children:"Search"})]}),c.length>0&&(0,on.jsx)("div",{className:"bg-white border border-gray-200 rounded mt-2 max-h-40 overflow-y-auto",children:c.map(e=>(0,on.jsxs)("div",{className:"p-2 flex justify-between items-center hover:bg-gray-50 border-b border-gray-100 last:border-0",children:[(0,on.jsxs)("div",{className:"flex items-center gap-2",children:[(0,on.jsx)("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center text-xs overflow-hidden",children:e.profile_picture?(0,on.jsx)("img",{src:e.profile_picture,alt:"",className:"w-full h-full object-cover"}):e.username[0].toUpperCase()}),(0,on.jsxs)("span",{className:"text-sm font-medium",children:[e.first_name," ",e.last_name," (@",e.username,")"]})]}),(0,on.jsx)("button",{onClick:()=>(async e=>{m(!0);try{const r=localStorage.getItem("token"),n=await fetch("".concat(l,"/api/communities/").concat(t.id,"/members"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({user_id:e})});if(n.ok)alert("Member added!"),d([]),i(""),a();else{const e=await n.json();alert(e.detail||"Failed to add member")}}catch(r){alert("Error adding member")}finally{m(!1)}})(e.id),disabled:u,className:"text-xs bg-emerald-100 text-emerald-700 px-2 py-1 rounded hover:bg-emerald-200",children:"Add"})]},e.id))})]}),(0,on.jsxs)("div",{className:"space-y-2",children:[(0,on.jsxs)("h4",{className:"text-sm font-bold text-gray-700",children:["Community Members (",r.length,")"]}),r.map(e=>(0,on.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[(0,on.jsxs)("div",{className:"flex items-center gap-3",children:[(0,on.jsx)("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center text-gray-500 font-bold text-lg overflow-hidden",children:e.profile_picture?(0,on.jsx)("img",{src:e.profile_picture,alt:e.username,className:"w-full h-full object-cover"}):(e.username||"?")[0].toUpperCase()}),(0,on.jsxs)("div",{children:[(0,on.jsxs)("p",{className:"font-medium text-gray-900",children:[e.first_name," ",e.last_name]}),(0,on.jsxs)("p",{className:"text-xs text-gray-500",children:["@",e.username]})]})]}),(0,on.jsx)("div",{className:"flex items-center gap-2",children:p&&e.user_id!==s.id?(0,on.jsx)("button",{onClick:()=>(async(e,r)=>{const n="admin"===r?"member":"admin";if(window.confirm("Change role to ".concat(n,"?")))try{const r=localStorage.getItem("token");(await fetch("".concat(l,"/api/communities/").concat(t.id,"/members/").concat(e,"/role"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({role:n})})).ok?a():alert("Failed to update role")}catch(s){console.error(s)}})(e.user_id,e.role),className:"px-3 py-1 rounded-full text-xs font-medium border ".concat("admin"===e.role?"bg-purple-100 text-purple-700 border-purple-200 hover:bg-purple-200":"bg-gray-100 text-gray-600 border-gray-200 hover:bg-gray-200"),title:"Click to toggle role",children:"admin"===e.role?"Admin \ud83d\udee1\ufe0f":"Member"}):(0,on.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat("admin"===e.role?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-600"),children:"admin"===e.role?"Admin \ud83d\udee1\ufe0f":"Member"})})]},e.user_id))]})]})},En=e=>{let{community:t,onBack:r,onOpenProduct:a}=e;const{user:s}=jn(),[l,o]=(0,n.useState)("feed"),[i,c]=(0,n.useState)([]),[d,u]=(0,n.useState)(!1),[p,h]=(0,n.useState)(!1),[x,f]=(0,n.useState)(!1),[g,y]=(0,n.useState)(""),[b,v]=(0,n.useState)(null),[j,w]=(0,n.useState)(!1),[N,_]=(0,n.useState)(null),[k,S]=(0,n.useState)([]),C="https://mvp-2-u8e9.onrender.com",E=async()=>{u(!0);try{const e="feed"===l?"".concat(C,"/api/communities/").concat(t.id,"/posts"):"products"===l?"".concat(C,"/api/communities/").concat(t.id,"/products"):"".concat(C,"/api/communities/").concat(t.id,"/members"),r=localStorage.getItem("token"),a=await fetch(e,{headers:{Authorization:"Bearer ".concat(r)}});if(a.ok){const e=await a.json();c(e)}u(!1)}catch(e){console.error(e),u(!1)}};(0,n.useEffect)(()=>{E()},[l,t]);return(0,on.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 h-full flex flex-col relative",children:[(0,on.jsxs)("div",{className:"p-4 border-b border-gray-100 flex items-center justify-between bg-emerald-50",children:[(0,on.jsxs)("div",{className:"flex items-center gap-3",children:[(0,on.jsx)("button",{onClick:r,className:"text-gray-500 hover:text-gray-700",children:"\u2190 Back"}),(0,on.jsxs)("div",{children:[(0,on.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:t.name}),(0,on.jsxs)("p",{className:"text-sm text-gray-600",children:[t.category," \u2022 ",t.members_count||0," Members"]})]})]}),(0,on.jsxs)("div",{className:"flex gap-2 items-center",children:["products"===l&&(t.creator_id===(null===s||void 0===s?void 0:s.id)||"admin"===t.user_role)&&(0,on.jsx)("button",{onClick:()=>f(!0),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 text-sm font-medium",children:"+ Sell Item"}),"feed"===l&&(t.creator_id===(null===s||void 0===s?void 0:s.id)||"admin"===t.user_role)&&(0,on.jsx)("button",{onClick:()=>h(!0),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 text-sm font-medium",children:"+ New Post"}),(0,on.jsx)("button",{onClick:async()=>{if(window.confirm("Are you sure you want to leave this community?"))try{const e=localStorage.getItem("token");(await fetch("".concat(C,"/api/communities/").concat(t.id,"/leave"),{method:"POST",headers:{Authorization:"Bearer ".concat(e)}})).ok?(alert("You have left the community."),r()):alert("Failed to leave community.")}catch(e){console.error(e)}},className:"text-red-600 hover:text-red-800 text-sm font-medium px-2",children:"Leave"}),t.creator_id===(null===s||void 0===s?void 0:s.id)&&(0,on.jsx)("button",{onClick:async()=>{if(window.confirm("ARE YOU SURE? This will permanently delete the community and all its content."))try{const e=localStorage.getItem("token");(await fetch("".concat(C,"/api/communities/").concat(t.id),{method:"DELETE",headers:{Authorization:"Bearer ".concat(e)}})).ok?(alert("Community deleted."),r()):alert("Failed to delete community.")}catch(e){console.error(e),alert("Error deleting community")}},className:"text-red-600 hover:text-red-800 text-sm font-medium px-2 border-l border-gray-300",children:"Delete"})]})]}),(0,on.jsxs)("div",{className:"flex border-b border-gray-200",children:[(0,on.jsx)("button",{className:"flex-1 py-3 text-sm font-medium ".concat("feed"===l?"border-b-2 border-emerald-500 text-emerald-600":"text-gray-500"),onClick:()=>o("feed"),children:"Community Feed"}),(0,on.jsx)("button",{className:"flex-1 py-3 text-sm font-medium ".concat("products"===l?"border-b-2 border-emerald-500 text-emerald-600":"text-gray-500"),onClick:()=>o("products"),children:"Marketplace"}),(0,on.jsx)("button",{className:"flex-1 py-3 text-sm font-medium ".concat("members"===l?"border-b-2 border-emerald-500 text-emerald-600":"text-gray-500"),onClick:()=>o("members"),children:"Members"})]}),(0,on.jsx)("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-50",children:d?(0,on.jsx)("div",{className:"text-center py-8 text-gray-400",children:"Loading..."}):(0,on.jsxs)("div",{className:"space-y-4",children:[0===i.length&&(0,on.jsx)("p",{className:"text-center text-gray-400",children:"No content found."}),"feed"===l&&i.map(e=>(0,on.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-100",children:[(0,on.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,on.jsx)("span",{className:"font-semibold text-gray-900",children:e.author}),(0,on.jsx)("span",{className:"text-xs text-gray-400",children:e.date})]}),(0,on.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap mb-3",children:e.content}),(0,on.jsxs)("div",{className:"flex items-center gap-4 pt-3 border-t border-gray-100",children:[(0,on.jsxs)("button",{onClick:()=>(async e=>{try{const t=localStorage.getItem("token"),r=await fetch("".concat(C,"/api/communities/posts/").concat(e,"/like"),{method:"POST",headers:{Authorization:"Bearer ".concat(t)}});if(r.ok){const t=await r.json();c(i.map(r=>r.id===e?m(m({},r),{},{user_liked:t.liked,likes_count:t.liked?(r.likes_count||0)+1:Math.max((r.likes_count||0)-1,0)}):r))}}catch(t){console.error("Like failed:",t)}})(e.id),className:"flex items-center gap-1.5 text-sm text-gray-600 hover:text-red-600 transition-colors",children:[(0,on.jsx)("span",{className:e.user_liked?"text-red-600":"",children:e.user_liked?"\u2764\ufe0f":"\ud83e\udd0d"}),(0,on.jsx)("span",{children:e.likes_count||0})]}),(0,on.jsxs)("button",{onClick:()=>(async e=>{try{const t=localStorage.getItem("token"),r=await fetch("".concat(C,"/api/communities/posts/").concat(e,"/comments"),{headers:{Authorization:"Bearer ".concat(t)}});if(r.ok){const e=await r.json();if(0===e.length)alert("No comments yet. Be the first to comment!");else{const t=e.map(e=>"".concat(e.username,": ").concat(e.content)).join("\n\n");alert("Comments:\n\n".concat(t))}}}catch(t){console.error("Failed to fetch comments:",t)}})(e.id),className:"flex items-center gap-1.5 text-sm text-gray-600 hover:text-blue-600 transition-colors",children:[(0,on.jsx)("span",{children:"\ud83d\udcac"}),(0,on.jsx)("span",{children:e.comments_count||0})]}),(0,on.jsxs)("button",{onClick:()=>(async()=>{const e="Check out this post in ".concat(t.name,"!");if(navigator.share)try{await navigator.share({title:t.name,text:e,url:window.location.href})}catch(r){console.log("Share cancelled")}else alert("Share feature: Post link copied!")})(e.id),className:"flex items-center gap-1.5 text-sm text-gray-600 hover:text-green-600 transition-colors",children:[(0,on.jsx)("span",{children:"\ud83d\udd17"}),(0,on.jsx)("span",{children:"Share"})]})]})]},e.id)),"products"===l&&i.map(e=>(0,on.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-100 flex justify-between items-center cursor-pointer hover:bg-gray-50",onClick:()=>a&&a(e),children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("h4",{className:"font-medium",children:e.name||e.title}),(0,on.jsxs)("p",{className:"text-sm text-emerald-600 font-bold",children:["\u20a6",e.price||e.price_per_unit," / ",e.unit||e.unit_of_measure]})]}),(0,on.jsxs)("div",{className:"flex items-center gap-2",children:[(0,on.jsx)("button",{onClick:t=>{t.stopPropagation(),a&&a(e)},className:"px-3 py-1 bg-emerald-100 text-emerald-700 rounded text-sm hover:bg-emerald-200",children:"View"}),(0,on.jsxs)("button",{onClick:t=>{t.stopPropagation(),v(e)},className:"ml-2 px-3 py-1 bg-gray-100 text-gray-700 rounded text-sm hover:bg-gray-200",children:["\ud83d\udcac ",e.comments_count||0]}),(0,on.jsx)("button",{onClick:r=>{r.stopPropagation();const a={title:e.name,text:"Check out ".concat(e.name," in ").concat(t.name),url:window.location.href};navigator.share?navigator.share(a):(navigator.clipboard.writeText(window.location.href),alert("Link copied!"))},className:"ml-2 px-3 py-1 bg-gray-100 text-gray-700 rounded text-sm hover:bg-gray-200",children:(0,on.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,on.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})})})]})]},e.id)),"members"===l&&(0,on.jsx)(Cn,{community:t,items:i,onRefresh:E,user:s,API_BASE_URL:C})]})}),p&&(0,on.jsx)("div",{className:"absolute inset-0 bg-black/50 z-50 flex items-center justify-center p-4 rounded-lg",children:(0,on.jsxs)("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-lg overflow-hidden",children:[(0,on.jsxs)("div",{className:"p-4 border-b border-gray-100 flex justify-between items-center",children:[(0,on.jsx)("h3",{className:"font-bold text-gray-900",children:"Create Post"}),(0,on.jsx)("button",{onClick:()=>h(!1),className:"text-gray-400 hover:text-gray-600 text-xl",children:"\xd7"})]}),(0,on.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),g.trim()){w(!0);try{const e=localStorage.getItem("token"),r=await fetch("".concat(C,"/api/communities/").concat(t.id,"/posts"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({content:g})});if(r.ok)y(""),h(!1),E();else{const e=await r.json();alert(e.detail||"Failed to post")}}catch(r){alert("Error creating post")}finally{w(!1)}}},className:"p-4 relative",children:[(0,on.jsx)("textarea",{value:g,onChange:e=>{y(e.target.value),(async e=>{const t=e.split(" ").pop();if(t.startsWith("@")&&t.length>1){const e=t.substring(1);_(e);try{const t=localStorage.getItem("token"),r=await fetch("".concat(C,"/api/users/search?q=").concat(e),{headers:{Authorization:"Bearer ".concat(t)}});r.ok&&S(await r.json())}catch(r){console.error(r)}}else _(null),S([])})(e.target.value)},placeholder:"Share something with the community... Use @ to mention members.",className:"w-full h-32 p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent resize-none text-sm",autoFocus:!0}),N&&k.length>0&&(0,on.jsx)("div",{className:"absolute left-4 top-20 bg-white border border-gray-200 shadow-lg rounded-lg max-h-40 overflow-y-auto w-64 z-50",children:k.map(e=>(0,on.jsxs)("button",{type:"button",onClick:()=>(e=>{const t=g.split(" ");t.pop(),t.push("@".concat(e," ")),y(t.join(" ")),_(null),S([])})(e.username),className:"w-full text-left px-3 py-2 hover:bg-gray-50 flex items-center gap-2 text-sm",children:[(0,on.jsx)("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center text-xs overflow-hidden",children:e.profile_picture?(0,on.jsx)("img",{src:e.profile_picture,alt:"",className:"w-full h-full object-cover"}):e.username[0].toUpperCase()}),(0,on.jsxs)("span",{children:["@",e.username]})]},e.id))}),(0,on.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[(0,on.jsx)("button",{type:"button",onClick:()=>h(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 text-sm font-medium",children:"Cancel"}),(0,on.jsx)("button",{type:"submit",disabled:!g.trim()||j,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg text-sm font-medium transition-colors ".concat(!g.trim()||j?"opacity-50 cursor-not-allowed":"hover:bg-emerald-700"),children:j?"Posting...":"Post"})]})]})]})}),x&&(0,on.jsx)(kn,{community:t,onClose:()=>f(!1),onSuccess:()=>{f(!1),E()}}),b&&(0,on.jsx)(Sn,{product:b,onClose:()=>v(null)})]})},Pn=e=>{let{onJoin:t,API_BASE_URL:r}=e;const{user:a}=jn(),[s,l]=(0,n.useState)([]),[o,i]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{a&&(async()=>{try{const e=localStorage.getItem("token"),t=await fetch("".concat(r,"/api/communities/recommended"),{headers:{Authorization:"Bearer ".concat(e)}});t.ok&&l(await t.json())}catch(e){console.error("Failed to fetch recommendations",e)}finally{i(!1)}})()},[a,r]),o?(0,on.jsx)("div",{className:"p-4 text-center text-gray-400 text-xs",children:"Loading ideas..."}):0===s.length?null:(0,on.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[(0,on.jsx)("h3",{className:"font-bold text-gray-900 mb-4 text-sm",children:"Recommended for You"}),(0,on.jsx)("div",{className:"space-y-4",children:s.map(e=>(0,on.jsxs)("div",{className:"flex flex-col gap-2 border-b border-gray-100 pb-3 last:border-0 last:pb-0",children:[(0,on.jsx)("div",{className:"flex justify-between items-start",children:(0,on.jsxs)("div",{children:[(0,on.jsx)("h4",{className:"font-semibold text-sm text-gray-800",children:e.name}),(0,on.jsx)("p",{className:"text-xs text-gray-500 line-clamp-2",children:e.description})]})}),(0,on.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[(0,on.jsxs)("span",{className:"text-xs text-gray-400",children:[e.members_count||0," members"]}),(0,on.jsx)("button",{onClick:()=>t(e.id),className:"text-xs bg-emerald-50 text-emerald-600 px-3 py-1 rounded-full font-medium hover:bg-emerald-100",children:"+ Join"})]})]},e.id))})]})},Rn=()=>{var e,t;const{user:r,token:a}=jn(),[s,l]=(0,n.useState)("overview"),[o,i]=(0,n.useState)(!1),[c,d]=(0,n.useState)(null),[u,m]=(0,n.useState)([]),[p,h]=(0,n.useState)([]),[x,f]=(0,n.useState)([]);(0,n.useEffect)(()=>{g()},[]),(0,n.useEffect)(()=>{"users"===s&&y(),"kyc"===s&&b(),"orders"===s&&v()},[s]);const g=async()=>{try{const e=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/admin/analytics"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});e.ok&&d(await e.json())}catch(e){console.error(e)}},y=async()=>{i(!0);try{const e=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/admin/users"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok){const t=await e.json();m(t.users)}}catch(e){console.error(e)}i(!1)},b=async()=>{i(!0);try{const e=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/kyc/admin/pending"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});e.ok&&h(await e.json())}catch(e){console.error(e)}i(!1)},v=async()=>{i(!0);try{const e=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/admin/orders"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok){const t=await e.json();f(t.orders)}}catch(e){console.error(e)}i(!1)},j=async(e,t)=>{const r="reject"===t?prompt("Enter rejection reason:"):null;if("reject"!==t||r)try{const a="".concat("https://mvp-2-u8e9.onrender.com","/api/kyc/admin/").concat(t,"/").concat(e),n="reject"===t?JSON.stringify({reason:r}):null;(await fetch(a,{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:n})).ok&&(alert("KYC ".concat(t,"ed!")),b())}catch(a){alert("Action failed")}};return r&&"admin"===r.role?(0,on.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,on.jsxs)("div",{className:"bg-white shadow-sm border-b px-6 py-4 flex justify-between items-center",children:[(0,on.jsxs)("div",{className:"flex items-center gap-2",children:[(0,on.jsx)("span",{className:"text-2xl",children:"\u26a1"}),(0,on.jsx)("h1",{className:"text-xl font-bold text-gray-800",children:"Pyramyd Admin"})]}),(0,on.jsxs)("div",{className:"flex items-center gap-4",children:[(0,on.jsxs)("span",{className:"text-sm font-medium",children:["Logged in as ",r.username]}),(0,on.jsx)("img",{src:r.profile_picture||"https://via.placeholder.com/40",className:"w-8 h-8 rounded-full border border-gray-300",alt:"Admin"})]})]}),(0,on.jsxs)("div",{className:"flex",children:[(0,on.jsx)("div",{className:"w-64 bg-white min-h-screen shadow-r border-r border-gray-200",children:(0,on.jsxs)("div",{className:"p-4 space-y-2",children:[(0,on.jsxs)("button",{onClick:()=>l("overview"),className:"w-full text-left px-4 py-3 rounded-lg flex items-center gap-3 font-medium transition-colors ".concat("overview"===s?"bg-purple-50 text-purple-700":"text-gray-600 hover:bg-gray-50"),children:[(0,on.jsx)("span",{children:"\ud83d\udcca"})," Overview"]}),(0,on.jsxs)("button",{onClick:()=>l("users"),className:"w-full text-left px-4 py-3 rounded-lg flex items-center gap-3 font-medium transition-colors ".concat("users"===s?"bg-purple-50 text-purple-700":"text-gray-600 hover:bg-gray-50"),children:[(0,on.jsx)("span",{children:"\ud83d\udc65"})," User Management"]}),(0,on.jsxs)("button",{onClick:()=>l("kyc"),className:"w-full text-left px-4 py-3 rounded-lg flex items-center gap-3 font-medium transition-colors ".concat("kyc"===s?"bg-purple-50 text-purple-700":"text-gray-600 hover:bg-gray-50"),children:[(0,on.jsx)("span",{children:"\ud83d\udd10"})," KYC Verification",p.length>0&&(0,on.jsx)("span",{className:"ml-auto bg-red-500 text-white text-xs px-2 py-0.5 rounded-full",children:p.length})]}),(0,on.jsxs)("button",{onClick:()=>l("orders"),className:"w-full text-left px-4 py-3 rounded-lg flex items-center gap-3 font-medium transition-colors ".concat("orders"===s?"bg-purple-50 text-purple-700":"text-gray-600 hover:bg-gray-50"),children:[(0,on.jsx)("span",{children:"\ud83d\udce6"})," Global Orders"]})]})}),(0,on.jsxs)("div",{className:"flex-1 p-8",children:["overview"===s&&c&&(0,on.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,on.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Platform Overview"}),(0,on.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,on.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[(0,on.jsx)("h3",{className:"text-gray-500 text-sm font-medium",children:"Total Orders"}),(0,on.jsx)("p",{className:"text-3xl font-bold text-gray-800 mt-2",children:c.financials.total_orders})]}),(0,on.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[(0,on.jsx)("h3",{className:"text-gray-500 text-sm font-medium",children:"GMV"}),(0,on.jsxs)("p",{className:"text-3xl font-bold text-emerald-600 mt-2",children:["\u20a6",null===(e=c.financials.gmv)||void 0===e?void 0:e.toLocaleString()]})]}),(0,on.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[(0,on.jsx)("h3",{className:"text-gray-500 text-sm font-medium",children:"Revenue (Est.)"}),(0,on.jsxs)("p",{className:"text-3xl font-bold text-blue-600 mt-2",children:["\u20a6",null===(t=c.financials.total_revenue)||void 0===t?void 0:t.toLocaleString()]})]})]})]}),"users"===s&&(0,on.jsxs)("div",{className:"space-y-6",children:[(0,on.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"User Management"}),(0,on.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:(0,on.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,on.jsx)("thead",{className:"bg-gray-50",children:(0,on.jsxs)("tr",{children:[(0,on.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,on.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),(0,on.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,on.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,on.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(e=>(0,on.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,on.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,on.jsxs)("div",{className:"flex items-center",children:[(0,on.jsx)("div",{className:"h-10 w-10 flex-shrink-0",children:(0,on.jsx)("img",{className:"h-10 w-10 rounded-full",src:e.profile_picture||"https://ui-avatars.com/api/?name=".concat(e.username,"&background=random"),alt:""})}),(0,on.jsxs)("div",{className:"ml-4",children:[(0,on.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.first_name," ",e.last_name]}),(0,on.jsxs)("div",{className:"text-sm text-gray-500",children:["@",e.username]}),(0,on.jsx)("div",{className:"text-xs text-gray-400",children:e.email})]})]})}),(0,on.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,on.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800 capitalize",children:e.role?e.role.replace("_"," "):"User"})}),(0,on.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.is_blocked?(0,on.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:"Blocked"}):(0,on.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Active"})}),(0,on.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,on.jsx)("button",{onClick:()=>(async(e,t)=>{const r=t?"unblock":"block";if(window.confirm("Are you sure you want to ".concat(r," this user?")))try{(await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/admin/users/").concat(e,"/").concat(r),{method:"PUT",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}})).ok&&(alert("User ".concat(r,"ed successfully")),y())}catch(a){alert("Action failed")}})(e.id,e.is_blocked),className:"text-".concat(e.is_blocked?"green":"red","-600 hover:text-").concat(e.is_blocked?"green":"red","-900"),children:e.is_blocked?"Unblock":"Block"})})]},e.id))})]})})]}),"kyc"===s&&(0,on.jsxs)("div",{className:"space-y-6",children:[(0,on.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Pending Verifications"}),0===p.length?(0,on.jsxs)("div",{className:"bg-white p-12 rounded-lg border border-gray-200 text-center text-gray-500",children:[(0,on.jsx)("span",{className:"text-4xl block mb-2",children:"\ud83c\udf89"}),"All caught up! No pending KYC requests."]}):(0,on.jsx)("div",{className:"grid gap-6",children:p.map(e=>{var t;return(0,on.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,on.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,on.jsxs)("div",{className:"flex items-center gap-4",children:[(0,on.jsx)("img",{src:e.user.profile_picture||"https://via.placeholder.com/50",className:"w-12 h-12 rounded-full",alt:""}),(0,on.jsxs)("div",{children:[(0,on.jsxs)("h3",{className:"font-bold text-lg",children:[e.user.first_name," ",e.user.last_name]}),(0,on.jsxs)("p",{className:"text-gray-500",children:["@",e.user.username," \u2022 ",(0,on.jsx)("span",{className:"capitalize",children:null===(t=e.user.role)||void 0===t?void 0:t.replace("_"," ")})]})]})]}),(0,on.jsxs)("div",{className:"flex gap-2",children:[(0,on.jsx)("button",{onClick:()=>j(e.user.id,"approve"),className:"px-4 py-2 bg-emerald-600 text-white rounded hover:bg-emerald-700 font-medium",children:"Approve"}),(0,on.jsx)("button",{onClick:()=>j(e.user.id,"reject"),className:"px-4 py-2 bg-red-100 text-red-700 rounded hover:bg-red-200 font-medium",children:"Reject"})]})]}),(0,on.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 mt-4 bg-gray-50 p-4 rounded-lg",children:e.documents.map(e=>(0,on.jsxs)("div",{className:"border border-gray-200 bg-white p-3 rounded text-center",children:[(0,on.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\udcc4"}),(0,on.jsx)("div",{className:"text-sm font-medium truncate mb-2",children:e.file_name}),(0,on.jsx)("div",{className:"text-xs text-gray-500 mb-3",children:e.document_type.replace("_"," ")}),(0,on.jsx)("button",{onClick:()=>(async e=>{try{const t=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/kyc/admin/document/").concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(t.ok){const e=await t.json(),r=atob(e.file_data),a=new Array(r.length);for(let t=0;t<r.length;t++)a[t]=r.charCodeAt(t);const n=new Uint8Array(a),s=new Blob([n],{type:e.mime_type}),l=URL.createObjectURL(s);window.open(l,"_blank")}}catch(t){alert("Failed to load document")}})(e.id),className:"text-blue-600 hover:underline text-xs",children:"View Document"})]},e.id))}),(0,on.jsxs)("div",{className:"mt-4 text-sm text-gray-600",children:[(0,on.jsx)("strong",{children:"Submission details:"}),(0,on.jsx)("pre",{className:"mt-2 bg-gray-100 p-2 rounded text-xs overflow-x-auto",children:JSON.stringify(e.kyc_data,null,2)})]})]},e.user.id)})})]}),"orders"===s&&(0,on.jsxs)("div",{className:"space-y-6",children:[(0,on.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Global Order Tracking"}),(0,on.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:(0,on.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,on.jsx)("thead",{className:"bg-gray-50",children:(0,on.jsxs)("tr",{children:[(0,on.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order ID"}),(0,on.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Buyer"}),(0,on.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Seller"}),(0,on.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,on.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,on.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Status"}),(0,on.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,on.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,on.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map(e=>{var t;return(0,on.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,on.jsx)("td",{className:"px-6 py-4 whitespace-nowrap font-mono text-sm text-blue-600",children:e.order_id}),(0,on.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["@",e.buyer_username]}),(0,on.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["@",e.seller_username]}),(0,on.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900",children:["\u20a6",null===(t=e.total_amount)||void 0===t?void 0:t.toLocaleString()]}),(0,on.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,on.jsxs)("select",{value:e.status,onChange:t=>(async(e,t)=>{if("delivered"!==t||window.confirm("\u26a0\ufe0f WARNING: Marking as DELIVERED will release funds to the seller. Use this only when delivery is confirmed. Proceed?"))try{const r=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/admin/orders/").concat(e,"/status"),{method:"PUT",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify({status:t})});if(r.ok){const e=await r.json();alert(e.message),v()}else{const e=await r.json();alert("Failed: ".concat(e.detail))}}catch(r){alert("Update failed")}})(e.order_id,t.target.value),className:"text-xs font-semibold rounded-full px-2 py-1 border-0 cursor-pointer\n                                                            ".concat("completed"===e.status||"delivered"===e.status?"bg-green-100 text-green-800":"pending"===e.status?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:[(0,on.jsx)("option",{value:"pending",children:"Pending"}),(0,on.jsx)("option",{value:"processing",children:"Processing"}),(0,on.jsx)("option",{value:"shipped",children:"Shipped"}),(0,on.jsx)("option",{value:"delivered",children:"Delivered"}),(0,on.jsx)("option",{value:"completed",children:"Completed"}),(0,on.jsx)("option",{value:"cancelled",children:"Cancelled"})]})}),(0,on.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.payout_halted?(0,on.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:"HELD"}):"completed"===e.status?(0,on.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Released"}):(0,on.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800",children:"Pending"})}),(0,on.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString()}),(0,on.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[!e.payout_halted&&"completed"!==e.status&&"cancelled"!==e.status&&(0,on.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("\u26a0\ufe0f Are you sure you want to HOLD payment for this order? This will prevent auto-release."))try{(await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/admin/orders/").concat(e,"/halt-payout"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}})).ok?(alert("Payment placed on HOLD."),v()):alert("Failed to hold payment.")}catch(t){console.error(t),alert("Error holding payment.")}})(e.order_id),className:"text-red-600 hover:text-red-900 mr-4",children:"Hold Payment"}),(e.payout_halted||"completed"!==e.status&&"cancelled"!==e.status)&&(0,on.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("\u2705 Are you sure you want to RELEASE payment manually? This will transfer funds immediately."))try{(await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/admin/orders/").concat(e,"/manual-release"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}})).ok?(alert("Payment released successfully."),v()):alert("Failed to release payment.")}catch(t){console.error(t),alert("Error releasing payment.")}})(e.order_id),className:"text-green-600 hover:text-green-900",children:"Release Payment"})]})]},e.order_id)})})]})})]})]})]})]}):(0,on.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-100",children:(0,on.jsxs)("div",{className:"text-center",children:[(0,on.jsx)("h1",{className:"text-4xl",children:"\ud83d\udeab"}),(0,on.jsx)("h2",{className:"text-xl font-bold mt-4",children:"Access Denied"}),(0,on.jsx)("p",{children:"You must be an administrator to view this page."}),(0,on.jsx)("a",{href:"/",className:"text-emerald-600 mt-4 block hover:underline",children:"Go Home"})]})})};var Tn={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Ln=["color","size","strokeWidth","absoluteStrokeWidth","children"];var Dn=(e,t)=>{const r=(0,n.forwardRef)((r,a)=>{let{color:s="currentColor",size:l=24,strokeWidth:i=2,absoluteStrokeWidth:c,children:d}=r,u=o(r,Ln);return(0,n.createElement)("svg",m(m({ref:a},Tn),{},{width:l,height:l,stroke:s,strokeWidth:c?24*Number(i)/Number(l):i,className:"lucide lucide-".concat((p=e,p.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()))},u),[...t.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...(Array.isArray(d)?d:[d])||[]]);var p});return r.displayName="".concat(e),r};const An=Dn("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),On=Dn("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),zn=e=>{let{formData:t,updateFormData:r,onLogin:a,switchToRegister:s,onCancel:l}=e;const[o,i]=(0,n.useState)(!1),[c,d]=(0,n.useState)("login"),[u,m]=(0,n.useState)(""),[p,h]=(0,n.useState)(""),[x,f]=(0,n.useState)(""),[g,y]=(0,n.useState)(""),b=async e=>{e.preventDefault(),i(!0),y("");try{const e=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/auth/forgot-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:u})}),t=await e.json();e.ok?(y(t.message),d("reset")):y(t.detail||"Failed to send reset code")}catch(t){y("Network error occurred")}finally{i(!1)}},v=async e=>{e.preventDefault(),i(!0),y("");try{const e=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:u,otp:p,new_password:x})}),t=await e.json();e.ok?(y("Password reset successfully! Please login."),d("login"),h(""),f("")):y(t.detail||"Failed to reset password")}catch(t){y("Network error occurred")}finally{i(!1)}};return"forgot"===c?(0,on.jsxs)("div",{className:"space-y-4",children:[(0,on.jsxs)("div",{className:"text-center mb-4",children:[(0,on.jsx)("h3",{className:"text-lg font-bold",children:"Reset Password"}),(0,on.jsx)("p",{className:"text-sm text-gray-500",children:"Enter your email to receive a reset code."})]}),g&&(0,on.jsx)("div",{className:"text-center text-sm p-2 rounded ".concat(g.includes("code")?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:g}),(0,on.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),(0,on.jsx)("input",{type:"email",required:!0,placeholder:"Enter your email",value:u,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500"})]}),(0,on.jsxs)("div",{className:"flex space-x-3",children:[(0,on.jsx)("button",{type:"button",onClick:()=>d("login"),className:"flex-1 px-4 py-3 border rounded-lg hover:bg-gray-50",children:"Back"}),(0,on.jsx)("button",{type:"submit",disabled:o,className:"flex-1 bg-emerald-600 text-white py-3 rounded-lg hover:bg-emerald-700 disabled:opacity-50",children:o?"Sending...":"Send Code"})]})]})]}):"reset"===c?(0,on.jsxs)("div",{className:"space-y-4",children:[(0,on.jsxs)("div",{className:"text-center mb-4",children:[(0,on.jsx)("h3",{className:"text-lg font-bold",children:"Create New Password"}),(0,on.jsxs)("p",{className:"text-sm text-gray-500",children:["Enter the code sent to ",u]})]}),g&&(0,on.jsx)("div",{className:"text-center text-sm p-2 rounded bg-blue-100 text-blue-700",children:g}),(0,on.jsxs)("form",{onSubmit:v,className:"space-y-4",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reset Code (OTP)"}),(0,on.jsx)("input",{type:"text",required:!0,placeholder:"Enter 6-digit code",value:p,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500"})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),(0,on.jsx)("input",{type:"password",required:!0,placeholder:"Min 8 characters",value:x,onChange:e=>f(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500"})]}),(0,on.jsxs)("div",{className:"flex space-x-3",children:[(0,on.jsx)("button",{type:"button",onClick:()=>d("forgot"),className:"flex-1 px-4 py-3 border rounded-lg hover:bg-gray-50",children:"Back"}),(0,on.jsx)("button",{type:"submit",disabled:o,className:"flex-1 bg-emerald-600 text-white py-3 rounded-lg hover:bg-emerald-700 disabled:opacity-50",children:o?"Reset Password":"Confirm Reset"})]})]})]}):(0,on.jsxs)("div",{className:"space-y-4",children:[g&&(0,on.jsx)("div",{className:"text-center text-sm p-2 rounded bg-green-100 text-green-700 mb-2",children:g}),(0,on.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),i(!0);try{await a(t.email_or_phone,t.password)}catch(r){}finally{i(!1)}},className:"space-y-4",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email or Phone"}),(0,on.jsx)("input",{type:"text",placeholder:"Enter email or phone",value:t.email_or_phone,onChange:e=>r({email_or_phone:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",required:!0})]}),(0,on.jsxs)("div",{children:[(0,on.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,on.jsx)("button",{type:"button",onClick:()=>d("forgot"),className:"text-xs text-emerald-600 hover:underline",children:"Forgot Password?"})]}),(0,on.jsx)("input",{type:"password",placeholder:"Enter password",value:t.password,onChange:e=>r({password:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",required:!0})]}),(0,on.jsxs)("div",{className:"flex space-x-3",children:[(0,on.jsx)("button",{type:"button",onClick:l,className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 font-medium",children:"Cancel"}),(0,on.jsx)("button",{type:"submit",disabled:o,className:"flex-1 bg-emerald-600 text-white py-3 px-4 rounded-lg hover:bg-emerald-700 transition-colors font-medium disabled:bg-emerald-400",children:o?"Signing In...":"Sign In"})]})]}),(0,on.jsxs)("p",{className:"text-center text-sm text-gray-600 mt-4",children:["Don't have an account?",(0,on.jsx)("button",{onClick:s,className:"text-emerald-600 hover:text-emerald-700 font-medium ml-1",children:"Sign Up"})]})]})},Fn=e=>{let{formData:t,updateFormData:r,onNext:a,onCancel:s}=e;const[l,o]=(0,n.useState)("");return(0,on.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),o(""),t.password!==t.confirm_password)return void o("Passwords do not match");/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,}$/.test(t.password)?a():o("Password must be at least 8 characters and include a letter, a number, and a symbol (@$!%*#?&)")},className:"space-y-4",children:[(0,on.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:(0,on.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,on.jsx)("span",{className:"font-semibold",children:"Important:"})," Please use your full name exactly as it appears on your NIN or BVN for verification purposes."]})}),(0,on.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),(0,on.jsx)("input",{type:"text",value:t.first_name,onChange:e=>r({first_name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",required:!0})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),(0,on.jsx)("input",{type:"text",value:t.last_name,onChange:e=>r({last_name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",required:!0})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Middle Name (Optional)"}),(0,on.jsx)("input",{type:"text",value:t.middle_name||"",onChange:e=>r({middle_name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"})]})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),(0,on.jsx)("input",{type:"text",value:t.username,onChange:e=>r({username:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",required:!0})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email or Phone"}),(0,on.jsx)("input",{type:"text",value:t.email_or_phone,onChange:e=>r({email_or_phone:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",required:!0})]}),(0,on.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,on.jsx)("input",{type:"password",value:t.password,onChange:e=>r({password:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",required:!0})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),(0,on.jsx)("input",{type:"password",value:t.confirm_password,onChange:e=>r({confirm_password:e.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 ".concat(t.confirm_password&&t.password!==t.confirm_password?"border-red-500":"border-gray-300"),required:!0})]})]}),(0,on.jsxs)("div",{className:"pt-4 border-t border-gray-200",children:[(0,on.jsx)("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Address Details"}),(0,on.jsxs)("div",{className:"space-y-4",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address Number & Street Name"}),(0,on.jsx)("input",{type:"text",value:t.address_street||"",onChange:e=>r({address_street:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"e.g. 12, Awolowo Way",required:!0})]}),(0,on.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City / Town"}),(0,on.jsx)("input",{type:"text",value:t.city||"",onChange:e=>r({city:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"e.g. Ikeja",required:!0})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),(0,on.jsxs)("select",{value:t.state||"",onChange:e=>r({state:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",required:!0,children:[(0,on.jsx)("option",{value:"",children:"Select State"}),["Abia","Adamawa","Akwa Ibom","Anambra","Bauchi","Bayelsa","Benue","Borno","Cross River","Delta","Ebonyi","Edo","Ekiti","Enugu","FCT - Abuja","Gombe","Imo","Jigawa","Kaduna","Kano","Katsina","Kebbi","Kogi","Kwara","Lagos","Nasarawa","Niger","Ogun","Ondo","Osun","Oyo","Plateau","Rivers","Sokoto","Taraba","Yobe","Zamfara"].map(e=>(0,on.jsx)("option",{value:e,children:e},e))]})]})]}),(0,on.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nearest Landmark (Optional)"}),(0,on.jsx)("input",{type:"text",value:t.landmark||"",onChange:e=>r({landmark:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"e.g. Opposite Shoprite"})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),(0,on.jsx)("input",{type:"text",value:"Nigeria",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-100 text-gray-500 cursor-not-allowed"})]})]})]})]}),l&&(0,on.jsx)("p",{className:"text-red-500 text-sm",children:l}),(0,on.jsxs)("div",{className:"flex space-x-3 mt-6",children:[(0,on.jsx)("button",{type:"button",onClick:s,className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 font-medium",children:"Cancel"}),(0,on.jsx)("button",{type:"submit",className:"flex-1 bg-emerald-600 text-white py-3 px-4 rounded-lg hover:bg-emerald-700 transition-colors font-medium",children:"Continue"})]})]})},Mn=e=>{let{formData:t,updateFormData:r,onNext:a}=e;const n=e=>{const t={user_path:e};"buyer"===e&&(t.buyer_type="personal"),r(t),a(e)};return(0,on.jsxs)("div",{className:"space-y-6",children:[(0,on.jsx)("h3",{className:"text-lg font-medium text-center mb-6",children:"How would you like to use Pyramyd?"}),(0,on.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,on.jsxs)("div",{onClick:()=>n("buyer"),className:"p-6 border-2 rounded-xl cursor-pointer transition-all hover:shadow-lg ".concat("buyer"===t.user_path?"border-emerald-600 bg-emerald-50":"border-gray-200 hover:border-emerald-300"),children:[(0,on.jsx)("div",{className:"text-4xl mb-4 text-center",children:"\ud83d\udecd\ufe0f"}),(0,on.jsx)("h4",{className:"text-xl font-bold text-center mb-2",children:"Join as Buyer"}),(0,on.jsx)("p",{className:"text-gray-600 text-center text-sm",children:"Access fresh farm produce at the best prices. Join community buy groups and save more."})]}),(0,on.jsxs)("div",{onClick:()=>n("partner"),className:"p-6 border-2 rounded-xl cursor-pointer transition-all hover:shadow-lg ".concat("partner"===t.user_path?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-blue-300"),children:[(0,on.jsx)("div",{className:"text-4xl mb-4 text-center",children:"\ud83e\udd1d"}),(0,on.jsx)("h4",{className:"text-xl font-bold text-center mb-2",children:"Join as Partner"}),(0,on.jsx)("p",{className:"text-gray-600 text-center text-sm",children:"Sell your produce, become an agent, or list your business on Pyramyd."})]})]})]})},Bn=e=>{let{formData:t,updateFormData:r,onNext:a}=e;return(0,on.jsxs)("div",{className:"space-y-6",children:[(0,on.jsx)("h3",{className:"text-lg font-medium text-center mb-6",children:"Select your Partner Role"}),(0,on.jsx)("div",{className:"grid grid-cols-1 gap-4",children:[{id:"agent",icon:"\ud83d\udd75\ufe0f",title:"Agent",description:"Connect buyers and sellers, earn commissions, and manage logistics."},{id:"farmer",icon:"\ud83d\udc68\u200d\ud83c\udf3e",title:"Farmer",description:"List your farm produce, reach more buyers, and grow your business."},{id:"business",icon:"\ud83c\udfe2",title:"Business",description:"Processors, Suppliers, Restaurants, and other agritech businesses."}].map(e=>(0,on.jsxs)("div",{onClick:()=>(e=>{r({partner_type:e}),setTimeout(()=>a(),300)})(e.id),className:"flex items-center p-4 border-2 rounded-xl cursor-pointer transition-all hover:shadow-md ".concat(t.partner_type===e.id?"border-purple-600 bg-purple-50":"border-gray-200 hover:border-purple-300"),children:[(0,on.jsx)("div",{className:"text-3xl mr-4",children:e.icon}),(0,on.jsxs)("div",{className:"flex-1",children:[(0,on.jsx)("h4",{className:"text-lg font-bold text-gray-800",children:e.title}),(0,on.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]}),(0,on.jsx)("div",{className:"w-6 h-6 rounded-full border-2 flex items-center justify-center ".concat(t.partner_type===e.id?"border-purple-600 bg-purple-600":"border-gray-300"),children:t.partner_type===e.id&&(0,on.jsx)("div",{className:"w-2.5 h-2.5 bg-white rounded-full"})})]},e.id))})]})},In=Dn("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),qn=Dn("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Un=Dn("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),Hn=Dn("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Wn=e=>{let{onClose:t,zIndex:r=50}=e;return(0,on.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[".concat(r,"]"),children:(0,on.jsxs)("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[80vh] flex flex-col shadow-2xl",children:[(0,on.jsxs)("div",{className:"p-6 border-b border-gray-100 flex justify-between items-center",children:[(0,on.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"\ud83d\udcdc Pyramyd Terms of Use"}),(0,on.jsx)("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:"\u2715"})]}),(0,on.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-6 text-gray-600 leading-relaxed text-sm md:text-base",children:[(0,on.jsxs)("section",{children:[(0,on.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"1. Acceptance of Terms and Platform Role"}),(0,on.jsx)("p",{children:'This document constitutes a legally binding agreement between you ("the Partner," "User," or "Agent") and Pyramyd ("the Platform"). By accessing or using our social agri-commerce services, you acknowledge that Pyramyd operates strictly as a digital intermediary and marketplace facilitator. We provide the technology to connect Farmers, Agents, and Businesses, but we are not a party to the actual contract of sale. The legal responsibility for the fulfillment of orders, product quality, and accuracy of descriptions rests solely with the Seller, while the obligation for payment and verification rests with the Buyer.'})]}),(0,on.jsxs)("section",{children:[(0,on.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"2. Account Registration and Partner Verification"}),(0,on.jsx)("p",{children:'To maintain a high-trust environment, all accounts (excluding basic personal buyer accounts) are classified as "Partners." By registering, you agree to undergo our mandatory Know Your Customer (KYC) process. This includes the submission of valid identification such as a National Identity Number (NIN), Corporate Affairs Commission (CAC) documents for businesses, and proof of address. You warrant that all uploaded documents are authentic and current. Pyramyd reserves the right to verify these details via third-party databases, including NIMC and the CAC portal. Providing fraudulent information is a material breach of these terms and may result in immediate account termination and reporting to relevant legal authorities.'})]}),(0,on.jsxs)("section",{children:[(0,on.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"3. PyExpress and Delivery Timelines"}),(0,on.jsx)("p",{children:"Pyramyd offers distinct service levels categorized by delivery speed and product source. Purchases made through PyExpress are guaranteed for rapid fulfillment, with delivery expected between 4 to 24 hours from the time of order confirmation. Conversely, products sourced via Farm Deals or the Community Page, which often involve rural aggregation and specialized logistics, carry a delivery window of 3 to 14 days. Partners acknowledge that these timelines are estimates based on standard operating conditions and may be affected by extreme weather, transit security, or agricultural variables beyond the Platform's control."})]}),(0,on.jsxs)("section",{children:[(0,on.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"4. Quality Assurance and Seller Obligations"}),(0,on.jsx)("p",{children:"All Sellers and Agents acting on behalf of farmers are bound by the Pyramyd Quality Standard. Sellers must provide truthful, non-stock photography and accurate descriptions of produce, including harvest dates and variety grades. Because we deal in perishable agricultural goods, the Validation Handshake is mandatory. Upon delivery, the Seller must provide a unique system-generated code to the Buyer. The input of this code by the Buyer constitutes legal confirmation that the goods have been received in acceptable condition. Any claims regarding spoilage or sub-standard quality must be submitted with photographic evidence through the in-app dispute tool within two (2) hours of delivery."})]}),(0,on.jsxs)("section",{children:[(0,on.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"5. Manual Payment and Financial Conduct"}),(0,on.jsx)("p",{children:"At this stage of operation, Pyramyd facilitates market matching while payments are settled manually between Partners (e.g., via direct bank transfer). Users agree that Pyramyd is not a payment processor and is not liable for failed transfers, bank errors, or fraudulent payment alerts. Partners are strongly advised to verify payments only upon physical inspection of goods. Attempting to bypass the platform to establish long-term off-platform trading for the purpose of avoiding future commissions or platform fees is strictly prohibited and constitutes a breach of the partnership agreement."})]}),(0,on.jsxs)("section",{children:[(0,on.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"6. Social Conduct and Data Privacy"}),(0,on.jsx)("p",{children:"As a social commerce platform, Pyramyd thrives on community interaction. Users agree to communicate respectfully within the in-app chat and refrain from posting misleading agricultural advice or prohibited substances. In compliance with the Nigeria Data Protection Act (NDPA) 2023, your data is handled with the highest level of security. We collect and process your information strictly for the purposes of identity verification, logistics coordination, and platform security. By using the service, you consent to the sharing of necessary contact and location data with designated logistics partners to facilitate the delivery of your orders."})]}),(0,on.jsx)("div",{className:"bg-emerald-50 p-4 rounded-lg border border-emerald-100 mt-8",children:(0,on.jsx)("p",{className:"text-sm text-emerald-800 text-center font-medium",children:"By continuing to use Pyramyd, you acknowledge that you have read, understood, and agreed to these terms."})})]}),(0,on.jsx)("div",{className:"p-4 border-t border-gray-100 bg-gray-50 rounded-b-xl flex justify-end",children:(0,on.jsx)("button",{onClick:t,className:"px-6 py-2 bg-emerald-900 text-white rounded-lg hover:bg-emerald-800 transition-colors font-medium shadow-sm",children:"I Accept"})})]})})},Vn=e=>{let{onClose:t,zIndex:r=50}=e;return(0,on.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[".concat(r,"]"),children:(0,on.jsxs)("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[80vh] flex flex-col shadow-2xl",children:[(0,on.jsxs)("div",{className:"p-6 border-b border-gray-100 flex justify-between items-center",children:[(0,on.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"\ud83d\udee1\ufe0f Pyramyd Privacy Policy"}),(0,on.jsx)("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:"\u2715"})]}),(0,on.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-6 text-gray-600 leading-relaxed text-sm md:text-base",children:[(0,on.jsxs)("section",{children:[(0,on.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"1. Data Collection and the Purpose of Processing"}),(0,on.jsx)("p",{children:'Pyramyd is committed to protecting the privacy and security of all our Partners. We collect personal and corporate information strictly to facilitate secure social agri-commerce and to comply with the Nigeria Data Protection Act (NDPA) 2023. This data includes your name, contact details, and what we refer to as "Trust Documents," such as National Identity Numbers (NIN), Corporate Affairs Commission (CAC) registration papers, and proof of address. The primary purpose of collecting this information is to verify the identity of our Partners, prevent fraudulent listings, and maintain a safe marketplace for the movement of agricultural goods. By providing this information, you consent to its use for identity verification and administrative purposes necessary to fulfill our service obligations to you.'})]}),(0,on.jsxs)("section",{children:[(0,on.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"2. Use of Sensitive Trust Documents"}),(0,on.jsx)("p",{children:"We recognize the sensitive nature of documents like the NIN and CAC status reports. These are stored using industry-standard encryption and are accessed only by authorized personnel for the purpose of account validation. We may utilize third-party verification services to confirm the authenticity of these documents via the NIMC or CAC portals. We do not sell, rent, or trade your sensitive identification documents to third parties for marketing purposes. These documents are retained only for as long as your account remains active or as required by statutory Nigerian laws regarding financial records and anti-money laundering regulations."})]}),(0,on.jsxs)("section",{children:[(0,on.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"3. Third-Party Sharing and Logistics Coordination"}),(0,on.jsx)("p",{children:"To facilitate the delivery of agricultural produce, Pyramyd must share specific data with our designated Logistics Partners. This includes the pickup and delivery addresses, contact phone numbers, and the names of the parties involved in the transaction. This sharing is limited to the minimum information necessary to ensure the successful transit of goods. Whether your order is processed through PyExpress for rapid delivery or via a Farm Deal, our logistics partners are contractually bound to use your data solely for fulfillment purposes and to maintain the confidentiality of your information in accordance with our security standards."})]}),(0,on.jsxs)("section",{children:[(0,on.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"4. Data Security and Partner Rights"}),(0,on.jsx)("p",{children:"We implement robust technical and organizational measures to safeguard your data against unauthorized access, loss, or alteration. As a Partner on Pyramyd, you retain several rights over your personal information under the NDPA 2023, including the right to access the data we hold about you, the right to request the rectification of inaccurate information, and the right to request the deletion of your data when it is no longer required for its original purpose. You may exercise these rights at any time by contacting our support team or updating your profile settings. We also utilize cookies and similar tracking technologies to improve platform performance and personalize your experience, which you can manage through your browser settings."})]}),(0,on.jsxs)("section",{children:[(0,on.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"5. Social Interaction and Public Data"}),(0,on.jsx)("p",{children:"Please be aware that Pyramyd is a social commerce platform. Information you choose to post in public areas, such as the Community Page or your public Partner Profile (e.g., your business name, public reviews, and general farm location), may be visible to other users. We encourage you to be mindful of the information you share socially. While we provide tools to facilitate communication between Buyers and Sellers, we are not responsible for the privacy practices of other users. We maintain uneditable chat logs for dispute resolution purposes, ensuring that all interactions related to a transaction are recorded for your protection."})]})]}),(0,on.jsx)("div",{className:"p-4 border-t border-gray-100 bg-gray-50 rounded-b-xl flex justify-end",children:(0,on.jsx)("button",{onClick:t,className:"px-6 py-2 bg-emerald-900 text-white rounded-lg hover:bg-emerald-800 transition-colors font-medium shadow-sm",children:"I Understand"})})]})})},Yn=e=>{let{formData:t,updateFormData:r,onRegister:a,onBack:s,role:l,requiredDocs:o,docLabels:i}=e;const[c,d]=(0,n.useState)({}),[u,p]=(0,n.useState)({}),[h,x]=(0,n.useState)({}),[f,g]=(0,n.useState)(null),[y,b]=(0,n.useState)({}),[v,j]=(0,n.useState)(!1),[w,N]=(0,n.useState)(!1),_=(0,n.useRef)({}),k=(0,n.useRef)(null),S=(0,n.useRef)(null),C=()=>{S.current&&(S.current.getTracks().forEach(e=>e.stop()),S.current=null),g(null)},E=async e=>{try{const t=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:640},height:{ideal:640}}});S.current=t,g(e),b(t=>m(m({},t),{},{[e]:!1}))}catch(t){console.error("Camera access denied:",t),b(t=>m(m({},t),{},{[e]:!0})),alert("Could not access camera. Please allow camera permissions or use upload fallback.")}};n.useEffect(()=>(f&&k.current&&S.current&&(k.current.srcObject=S.current),()=>{}),[f]);const P=async(e,a)=>{d(e=>m(m({},e),{},{[a]:!0}));try{const n=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/upload/sign-public"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({folder:"user-registration",filename:e.name,contentType:e.type})});if(!n.ok)throw new Error("Upload init failed");const s=await n.json();if(!(await fetch(s.uploadUrl,{method:"PUT",body:e,headers:{"Content-Type":e.type}})).ok)throw new Error("Upload to storage failed");const l=s.publicUrl||s.key,o=t.documents||{};r({documents:m(m({},o),{},{[a]:l}),profile_picture:"headshot"===a?l:t.profile_picture})}catch(n){console.error("Upload error:",n),alert("Upload failed. Please try again.")}finally{d(e=>m(m({},e),{},{[a]:!1}))}},R=o.every(e=>t.documents&&t.documents[e]);n.useEffect(()=>()=>C(),[]);return(0,on.jsxs)("div",{className:"space-y-6",children:[(0,on.jsx)("h3",{className:"text-lg font-bold text-center",children:"Identity Verification"}),(0,on.jsx)("p",{className:"text-sm text-gray-500 text-center",children:"Please provide the required documents (JPG, PNG, PDF accepted)."}),(0,on.jsx)("div",{className:"space-y-4",children:o.map(e=>{var r,a,n;const s="headshot"===e,l=u[e]||(null===(r=t.documents)||void 0===r?void 0:r[e]),o=f===e,d=(e=>{var r;return h[e]?h[e]:((null===(r=t.documents)||void 0===r?void 0:r[e])||"").toLowerCase().endsWith(".pdf")?"pdf":"image"})(e);return(0,on.jsxs)("div",{className:"border rounded-lg p-4 bg-gray-50",children:[(0,on.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,on.jsxs)("label",{className:"font-medium text-gray-700",children:[i[e]||e," ",s&&(0,on.jsx)("span",{className:"text-red-500 text-xs",children:"(Camera Only)"})]}),(null===(a=t.documents)||void 0===a?void 0:a[e])&&(0,on.jsx)(In,{className:"text-emerald-500",size:20})]}),o?(0,on.jsxs)("div",{className:"relative h-64 w-full bg-black rounded-lg overflow-hidden mb-2",children:[(0,on.jsx)("video",{ref:k,autoPlay:!0,playsInline:!0,className:"w-full h-full object-cover transform scale-x-[-1]"}),(0,on.jsxs)("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center space-x-4",children:[(0,on.jsx)("button",{onClick:()=>(e=>{if(!k.current)return;const t=document.createElement("canvas");t.width=k.current.videoWidth,t.height=k.current.videoHeight,t.getContext("2d").drawImage(k.current,0,0,t.width,t.height),t.toBlob(t=>{if(!t)return;const r=new File([t],"selfie.jpg",{type:"image/jpeg"}),a=URL.createObjectURL(t);p(t=>m(m({},t),{},{[e]:a})),x(t=>m(m({},t),{},{[e]:"image"})),C(),P(r,e)},"image/jpeg",.8)})(e),className:"bg-white rounded-full p-3 shadow-lg hover:bg-gray-100",children:(0,on.jsx)("div",{className:"w-8 h-8 rounded-full border-2 border-black"})}),(0,on.jsx)("button",{onClick:C,className:"bg-gray-800 text-white px-4 py-2 rounded-full text-sm opacity-80",children:"Cancel"})]})]}):l?(0,on.jsxs)("div",{className:"relative h-48 w-full bg-gray-200 rounded-lg overflow-hidden mb-2 group flex items-center justify-center",children:["pdf"===d?(0,on.jsxs)("div",{className:"flex flex-col items-center text-gray-600",children:[(0,on.jsx)(qn,{size:48,className:"mb-2 text-red-500"}),(0,on.jsx)("span",{className:"text-sm font-medium",children:"PDF Document Uploaded"}),(0,on.jsx)("span",{className:"text-xs text-gray-400 mt-1",children:"Preview not available"})]}):(0,on.jsx)("img",{src:u[e]||(null===(n=t.documents)||void 0===n?void 0:n[e]),alt:"Preview",className:"w-full h-full object-cover"}),(0,on.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-40 transition-all flex items-center justify-center",children:(0,on.jsxs)("button",{onClick:()=>s?E(e):_.current[e].click(),className:"opacity-0 group-hover:opacity-100 bg-white text-gray-900 px-4 py-2 rounded-lg font-medium transform translate-y-2 group-hover:translate-y-0 transition-all",children:["Retake ",s?"Photo":"Upload"]})})]}):(0,on.jsxs)("div",{onClick:()=>{s&&!y[e]?E(e):_.current[e].click()},className:"h-32 w-full border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center text-gray-400 cursor-pointer hover:bg-gray-100",children:[s?(0,on.jsx)(Un,{size:32}):(0,on.jsx)(Hn,{size:32}),(0,on.jsx)("span",{className:"text-sm mt-2 font-medium",children:s?"Open Camera":"Click to Upload"}),!s&&(0,on.jsx)("span",{className:"text-xs text-gray-400 mt-1",children:"JPG, PNG, PDF"}),s&&(0,on.jsx)("span",{className:"text-xs text-gray-400 mt-1",children:"Selfie Required"})]}),(0,on.jsx)("input",{ref:t=>_.current[e]=t,type:"file",accept:"image/png, image/jpeg, application/pdf",className:"hidden",onChange:t=>((e,t)=>{const r=e.target.files[0];if(!r)return;const a="application/pdf"===r.type;x(e=>m(m({},e),{},{[t]:a?"pdf":"image"}));const n=URL.createObjectURL(r);p(e=>m(m({},e),{},{[t]:n})),P(r,t)})(t,e)}),c[e]&&(0,on.jsx)("div",{className:"mt-2 text-center text-sm text-blue-600 animate-pulse",children:"Uploading secure document..."}),s&&!o&&!l&&(0,on.jsx)("div",{className:"text-center mt-2",children:(0,on.jsx)("button",{type:"button",onClick:()=>_.current[e].click(),className:"text-xs text-gray-400 underline hover:text-gray-600",children:"Camera not working? Upload instead"})})]},e)})}),(0,on.jsx)("div",{className:"mt-6 bg-gray-50 border border-gray-200 rounded-lg p-4",children:(0,on.jsxs)("label",{className:"flex items-start space-x-3 cursor-pointer",children:[(0,on.jsx)("input",{type:"checkbox",checked:t.agreedToTerms||!1,onChange:e=>r({agreedToTerms:e.target.checked}),className:"mt-1 h-4 w-4 text-emerald-600 border-gray-300 rounded focus:ring-emerald-500"}),(0,on.jsx)("div",{className:"text-xs text-gray-600 leading-relaxed",children:(0,on.jsxs)("span",{className:"font-medium text-gray-800",children:["I have read and agree to the ",(0,on.jsx)("button",{type:"button",onClick:()=>j(!0),className:"text-emerald-600 hover:text-emerald-700 underline",children:"Pyramyd Terms of Use"})," and ",(0,on.jsx)("button",{type:"button",onClick:()=>N(!0),className:"text-emerald-600 hover:text-emerald-700 underline",children:"Privacy Policy"}),". By clicking submit, I authorize the verification of my identity and agree to the ",(0,on.jsx)("button",{type:"button",onClick:()=>j(!0),className:"text-emerald-600 hover:text-emerald-700 underline",children:"delivery validation guidelines"}),"."]})})]})}),(0,on.jsxs)("div",{className:"flex justify-between mt-6",children:[s&&(0,on.jsx)("button",{onClick:s,className:"text-gray-500 hover:text-gray-700 px-4 py-3",children:"Back"}),(0,on.jsx)("button",{onClick:()=>a(t),disabled:!R||!t.agreedToTerms,className:"bg-emerald-600 text-white py-3 px-4 rounded-lg hover:bg-emerald-700 transition-colors font-medium flex-1 ml-4 disabled:bg-gray-300 disabled:cursor-not-allowed ".concat(s?"":"w-full"),children:"Complete Registration"}),v&&(0,on.jsx)(Wn,{onClose:()=>j(!1),zIndex:60}),w&&(0,on.jsx)(Vn,{onClose:()=>N(!1),zIndex:60})]})]})},Kn=e=>{let{step:t,formData:r,updateFormData:a,setStep:n,onRegister:s}=e;return"verification"===t?(0,on.jsx)(Yn,{updateFormData:a,onRegister:s,onBack:()=>n("details"),role:"buyer",requiredDocs:["headshot"],docLabels:{headshot:"Take a Profile Picture (Selfie)"}}):(0,on.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n("verification")},className:"space-y-4",children:[(0,on.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Complete Your Profile"}),(0,on.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender *"}),(0,on.jsxs)("select",{value:r.gender,onChange:e=>a({gender:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",required:!0,children:[(0,on.jsx)("option",{value:"",children:"Select Gender"}),(0,on.jsx)("option",{value:"male",children:"Male"}),(0,on.jsx)("option",{value:"female",children:"Female"})]})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth *"}),(0,on.jsx)("input",{type:"date",value:r.date_of_birth,onChange:e=>a({date_of_birth:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",required:!0})]})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Residential Address *"}),(0,on.jsx)("textarea",{value:r.address,onChange:e=>a({address:e.target.value}),placeholder:"Enter your home address or delivery location",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",rows:"3",required:!0})]}),(0,on.jsx)("button",{type:"submit",className:"w-full bg-emerald-600 text-white py-3 px-4 rounded-lg hover:bg-emerald-700 transition-colors font-medium mt-6",children:"Next: Add Profile Picture"})]})},Jn=e=>{let{step:t,formData:r,updateFormData:a,setStep:n,onRegister:s}=e;return"verification"===t?(0,on.jsx)(Yn,{formData:r,updateFormData:a,onRegister:s,onBack:()=>n("details"),role:"agent",requiredDocs:["headshot","id_document","proof_of_address"],docLabels:{headshot:"Take a Profile Picture (Selfie)",id_document:"Upload NIN Slip or ID Card",proof_of_address:"proof of Address (Utility Bill/Bank Statement)"}}):(0,on.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n("verification")},className:"space-y-4",children:[(0,on.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Agent Personal Details"}),(0,on.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender *"}),(0,on.jsxs)("select",{value:r.gender,onChange:e=>a({gender:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",required:!0,children:[(0,on.jsx)("option",{value:"",children:"Select Gender"}),(0,on.jsx)("option",{value:"male",children:"Male"}),(0,on.jsx)("option",{value:"female",children:"Female"})]})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth *"}),(0,on.jsx)("input",{type:"date",value:r.date_of_birth,onChange:e=>a({date_of_birth:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",required:!0})]})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Residential Address *"}),(0,on.jsx)("textarea",{value:r.address,onChange:e=>a({address:e.target.value}),placeholder:"Enter your full residential address",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",rows:"3",required:!0})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bio / About You *"}),(0,on.jsx)("textarea",{value:r.bio,onChange:e=>a({bio:e.target.value}),placeholder:"Tell us briefly about your experience...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",rows:"3",required:!0})]}),(0,on.jsx)("button",{type:"submit",className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors font-medium mt-6",children:"Continue to Verification"})]})},$n=Dn("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Gn=Dn("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Qn=e=>{let{step:t,formData:r,updateFormData:a,setStep:s,onRegister:l}=e;const[o,i]=(0,n.useState)(!1),[c,d]=(0,n.useState)({size:"",size_unit:"acres",products:[],output_qty:"",output_unit:"kg",address:""}),[u,p]=(0,n.useState)(""),h=["Maize","Rice","Cassava","Yam","Beans","Soybeans","Tomatoes","Pepper","Broccoli","Onions","Potatoes","Poultry","Fish","Cattle","Goat","Pig"],[x,f]=(0,n.useState)("verification"===t?3:1);n.useEffect(()=>{"verification"===t?f(3):"details"===t&&3===x?f(2):"details"===t&&1===x&&f(1)},[t]);const g=()=>{0!==(r.farm_details||[]).length?s("verification"):alert("Please add at least one farm.")},y=()=>{c.size&&c.address&&0!==c.products.length?(a({farm_details:[...r.farm_details||[],c]}),d({size:"",size_unit:"acres",products:[],output_qty:"",output_unit:"kg",address:""}),i(!1)):alert("Please fill all farm details and add at least one product.")},b=()=>{u&&!c.products.includes(u)&&(d(e=>m(m({},e),{},{products:[...e.products,u]})),p(""))};return"verification"===t?(0,on.jsx)(Yn,{formData:r,updateFormData:a,onRegister:l,onBack:()=>f(2),role:"farmer",requiredDocs:["headshot","id_document","proof_of_address"],docLabels:{headshot:"Take a Profile Picture (Selfie)",id_document:"Upload NIN Slip or ID Card",proof_of_address:"Proof of Residential Address"}}):2===x&&"verification"!==t?(0,on.jsxs)("div",{className:"space-y-6",children:[(0,on.jsx)("h3",{className:"text-lg font-bold",children:"Farm Details"}),(0,on.jsx)("p",{className:"text-sm text-gray-600",children:"Tell us about your farm capacity. You can add multiple farms."}),(0,on.jsx)("div",{className:"space-y-3",children:(r.farm_details||[]).map((e,t)=>(0,on.jsxs)("div",{className:"p-4 border rounded-lg bg-gray-50 flex justify-between items-start",children:[(0,on.jsxs)("div",{children:[(0,on.jsxs)("p",{className:"font-bold text-gray-900",children:[e.size," ",e.size_unit," Farm"]}),(0,on.jsx)("p",{className:"text-sm text-gray-600",children:e.address}),(0,on.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Products: ",(0,on.jsx)("span",{className:"font-medium",children:e.products.join(", ")})]}),(0,on.jsxs)("p",{className:"text-sm text-gray-600",children:["Output: ",e.output_qty," ",e.output_unit]})]}),(0,on.jsx)("button",{onClick:()=>{const e=[...r.farm_details];e.splice(t,1),a({farm_details:e})},className:"text-red-500 hover:text-red-700 p-1",children:(0,on.jsx)($n,{size:20})})]},t))}),!o&&(0,on.jsxs)("button",{onClick:()=>i(!0),className:"w-full py-3 border-2 border-dashed border-emerald-500 text-emerald-600 rounded-lg font-medium hover:bg-emerald-50 flex items-center justify-center gap-2",children:[(0,on.jsx)(Gn,{size:20})," Add Farm"]}),o&&(0,on.jsxs)("div",{className:"p-4 border rounded-lg bg-white shadow-sm space-y-4",children:[(0,on.jsx)("h4",{className:"font-bold text-gray-800",children:"New Farm Information"}),(0,on.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"text-xs font-medium text-gray-700",children:"Size"}),(0,on.jsxs)("div",{className:"flex",children:[(0,on.jsx)("input",{type:"number",value:c.size,onChange:e=>d(m(m({},c),{},{size:e.target.value})),className:"w-full border p-2 rounded-l",placeholder:"0"}),(0,on.jsxs)("select",{value:c.size_unit,onChange:e=>d(m(m({},c),{},{size_unit:e.target.value})),className:"border border-l-0 p-2 rounded-r bg-gray-100",children:[(0,on.jsx)("option",{value:"acres",children:"Acres"}),(0,on.jsx)("option",{value:"hectares",children:"Hectares"}),(0,on.jsx)("option",{value:"plots",children:"Plots"})]})]})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"text-xs font-medium text-gray-700",children:"Est. Output"}),(0,on.jsxs)("div",{className:"flex",children:[(0,on.jsx)("input",{type:"number",value:c.output_qty,onChange:e=>d(m(m({},c),{},{output_qty:e.target.value})),className:"w-full border p-2 rounded-l",placeholder:"Qty"}),(0,on.jsxs)("select",{value:c.output_unit,onChange:e=>d(m(m({},c),{},{output_unit:e.target.value})),className:"border border-l-0 p-2 rounded-r bg-gray-100",children:[(0,on.jsx)("option",{value:"kg",children:"Kg"}),(0,on.jsx)("option",{value:"bags_50kg",children:"50kg Bag"}),(0,on.jsx)("option",{value:"bags_100kg",children:"100kg Bag"}),(0,on.jsx)("option",{value:"crates",children:"Crates"}),(0,on.jsx)("option",{value:"baskets",children:"Baskets"}),(0,on.jsx)("option",{value:"tonnes",children:"Tonnes"})]})]})]})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"text-xs font-medium text-gray-700",children:"Farm Address"}),(0,on.jsx)("input",{type:"text",value:c.address,onChange:e=>d(m(m({},c),{},{address:e.target.value})),className:"w-full border p-2 rounded",placeholder:"Location of farm..."})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"text-xs font-medium text-gray-700",children:"Products Produced"}),(0,on.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,on.jsx)("input",{list:"crops",value:u,onChange:e=>p(e.target.value),className:"flex-1 border p-2 rounded",placeholder:"Type or select crop..."}),(0,on.jsx)("datalist",{id:"crops",children:h.map(e=>(0,on.jsx)("option",{value:e},e))}),(0,on.jsx)("button",{onClick:b,className:"bg-emerald-600 text-white px-4 rounded hover:bg-emerald-700",children:"Add"})]}),(0,on.jsx)("div",{className:"flex flex-wrap gap-2",children:c.products.map(e=>(0,on.jsxs)("span",{className:"bg-emerald-100 text-emerald-800 text-xs px-2 py-1 rounded-full flex items-center",children:[e,(0,on.jsx)("button",{onClick:()=>d(t=>m(m({},t),{},{products:t.products.filter(t=>t!==e)})),className:"ml-1 hover:text-emerald-900",children:"\xd7"})]},e))})]}),(0,on.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,on.jsx)("button",{onClick:()=>i(!1),className:"flex-1 py-2 border rounded hover:bg-gray-50 text-gray-600",children:"Cancel"}),(0,on.jsx)("button",{onClick:y,className:"flex-1 py-2 bg-emerald-600 text-white rounded hover:bg-emerald-700",children:"Save Farm"})]})]}),(0,on.jsxs)("div",{className:"flex justify-between pt-4",children:[(0,on.jsx)("button",{onClick:()=>f(1),className:"text-gray-500 hover:text-gray-700",children:"Back"}),(0,on.jsx)("button",{onClick:g,disabled:o,className:"bg-emerald-600 text-white py-2 px-6 rounded-lg hover:bg-emerald-700 disabled:bg-gray-400",children:"Next"})]})]}):(0,on.jsxs)("form",{onSubmit:e=>{e.preventDefault(),f(2)},className:"space-y-4",children:[(0,on.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Farmer Personal Details"}),(0,on.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender *"}),(0,on.jsxs)("select",{value:r.gender,onChange:e=>a({gender:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",required:!0,children:[(0,on.jsx)("option",{value:"",children:"Select Gender"}),(0,on.jsx)("option",{value:"male",children:"Male"}),(0,on.jsx)("option",{value:"female",children:"Female"})]})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth *"}),(0,on.jsx)("input",{type:"date",value:r.date_of_birth,onChange:e=>a({date_of_birth:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",required:!0})]})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Residential Address *"}),(0,on.jsx)("textarea",{value:r.address,onChange:e=>a({address:e.target.value}),placeholder:"Enter your home address",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",rows:"3",required:!0})]}),(0,on.jsx)("button",{type:"submit",className:"w-full bg-emerald-600 text-white py-3 px-4 rounded-lg hover:bg-emerald-700 transition-colors font-medium mt-6",children:"Continue to Farm Details"})]})},Zn=e=>{var t,r,a;let{step:s,formData:l,updateFormData:o,setStep:i,onRegister:c}=e;const[d,u]=(0,n.useState)("verification"===s?3:1);n.useEffect(()=>{"verification"===s?u(3):"details"===s&&3===d?u(2):"details"===s&&1===d&&u(1)},[s]);const p=e=>{e.preventDefault(),i("verification")};if("verification"===s){const e="registered"===l.registration_status,t=e?["cac_document","proof_of_address"]:["headshot","id_document","proof_of_address"],r=e?{cac_document:"CAC Certificate",proof_of_address:"Proof of Business Address (Utility Bill)"}:{headshot:"Take a Profile Picture (Selfie) of Owner",id_document:"Upload NIN Slip or ID Card",proof_of_address:"Proof of Business Address"};return(0,on.jsx)(Yn,{formData:l,updateFormData:o,onRegister:c,onBack:()=>u(2),role:"business",requiredDocs:t,docLabels:r})}var h;return 2===d&&"verification"!==s?(0,on.jsxs)("form",{onSubmit:p,className:"space-y-6",children:[(0,on.jsx)("h3",{className:"text-lg font-bold",children:"Registration Status"}),(0,on.jsxs)("div",{className:"space-y-4",children:[(0,on.jsxs)("div",{onClick:()=>o({registration_status:"registered"}),className:"p-4 border rounded-lg cursor-pointer ".concat("registered"===l.registration_status?"border-purple-600 bg-purple-50":"border-gray-200"),children:[(0,on.jsxs)("div",{className:"font-bold flex items-center",children:[(0,on.jsx)("div",{className:"w-4 h-4 rounded-full border mr-3 flex items-center justify-center ".concat("registered"===l.registration_status?"border-purple-600 bg-purple-600":"border-gray-400"),children:"registered"===l.registration_status&&(0,on.jsx)("div",{className:"w-2 h-2 bg-white rounded-full"})}),"Registered Business"]}),(0,on.jsx)("p",{className:"text-sm text-gray-600 mt-1 ml-7",children:"I have a CAC Certificate and TIN."})]}),(0,on.jsxs)("div",{onClick:()=>o({registration_status:"unregistered"}),className:"p-4 border rounded-lg cursor-pointer ".concat("unregistered"===l.registration_status?"border-purple-600 bg-purple-50":"border-gray-200"),children:[(0,on.jsxs)("div",{className:"font-bold flex items-center",children:[(0,on.jsx)("div",{className:"w-4 h-4 rounded-full border mr-3 flex items-center justify-center ".concat("unregistered"===l.registration_status?"border-purple-600 bg-purple-600":"border-gray-400"),children:"unregistered"===l.registration_status&&(0,on.jsx)("div",{className:"w-2 h-2 bg-white rounded-full"})}),"Unregistered Business"]}),(0,on.jsx)("p",{className:"text-sm text-gray-600 mt-1 ml-7",children:"I don't have corporate documents yet (Requires Owner Verification)."})]})]}),"registered"===l.registration_status&&(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tax Identification Number (TIN)"}),(0,on.jsx)("input",{type:"text",value:(null===(h=l.business_info)||void 0===h?void 0:h.tin)||"",onChange:e=>o({business_info:m(m({},l.business_info),{},{tin:e.target.value})}),className:"w-full px-3 py-2 border rounded-lg",placeholder:"Enter TIN",required:!0})]}),"unregistered"===l.registration_status&&(0,on.jsx)("div",{className:"bg-yellow-50 p-3 rounded text-sm text-yellow-800",children:"Note: You will need to verify your identity using your NIN and a selfie."}),(0,on.jsxs)("div",{className:"flex justify-between pt-4",children:[(0,on.jsx)("button",{type:"button",onClick:()=>u(1),className:"text-gray-500 hover:text-gray-700",children:"Back"}),(0,on.jsx)("button",{type:"submit",disabled:!l.registration_status,className:"bg-purple-600 text-white py-2 px-6 rounded-lg hover:bg-purple-700 disabled:bg-gray-400",children:"Next"})]})]}):(0,on.jsxs)("form",{onSubmit:e=>{e.preventDefault(),u(2)},className:"space-y-4",children:[(0,on.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Business Information"}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Name *"}),(0,on.jsx)("input",{type:"text",value:(null===(t=l.business_info)||void 0===t?void 0:t.name)||"",onChange:e=>o({business_info:m(m({},l.business_info),{},{name:e.target.value})}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500",required:!0})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Category *"}),(0,on.jsxs)("select",{value:l.business_category,onChange:e=>o({business_category:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500",required:!0,children:[(0,on.jsx)("option",{value:"",children:"Select Category"}),(0,on.jsx)("option",{value:"processor",children:"Processor / Manufacturer"}),(0,on.jsx)("option",{value:"wholesaler",children:"Wholesaler / Supplier"}),(0,on.jsx)("option",{value:"retailer",children:"Retailer"}),(0,on.jsx)("option",{value:"hospitality",children:"Hotel / Cafe / Restaurant"}),(0,on.jsx)("option",{value:"logistics",children:"Logistics / Transport"}),(0,on.jsx)("option",{value:"other",children:"Other"})]})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date Operation Started *"}),(0,on.jsx)("input",{type:"date",value:(null===(r=l.business_info)||void 0===r?void 0:r.date_established)||"",onChange:e=>o({business_info:m(m({},l.business_info),{},{date_established:e.target.value})}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500",required:!0})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Address *"}),(0,on.jsx)("textarea",{value:(null===(a=l.business_info)||void 0===a?void 0:a.address)||"",onChange:e=>o({business_info:m(m({},l.business_info),{},{address:e.target.value})}),placeholder:"Full business address",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500",rows:"3",required:!0})]}),(0,on.jsx)("button",{type:"submit",className:"w-full bg-purple-600 text-white py-3 px-4 rounded-lg hover:bg-purple-700 transition-colors font-medium mt-6",children:"Continue"})]})},Xn=e=>{let{onClose:t,onLogin:r,onRegister:a}=e;const[s,l]=(0,n.useState)("login"),[o,i]=(0,n.useState)("basic"),[c,d]=(0,n.useState)({first_name:"",middle_name:"",last_name:"",username:"",email_or_phone:"",phone:"",password:"",confirm_password:"",gender:"",date_of_birth:"",user_path:"",buyer_type:"",partner_type:"",business_category:"",business_info:{},registration_status:"",farm_details:[],bio:"",id_type:"",id_number:"",documents:{},verification_info:{}}),u=e=>{d(t=>m(m({},t),e))};return(0,on.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,on.jsxs)("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[" ",(0,on.jsxs)("div",{className:"p-6",children:[(0,on.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,on.jsxs)("div",{className:"flex items-center",children:["register"===s&&(0,on.jsx)("button",{onClick:()=>{if("login"!==s)switch(o){case"basic":l("login");break;case"path_selection":default:i("basic");break;case"partner_type":i("path_selection");break;case"details":"partner"===c.user_path?i("partner_type"):i("path_selection");break;case"verification":i("details")}},className:"mr-3 text-gray-500 hover:text-gray-700",children:(0,on.jsx)(An,{size:24})}),(0,on.jsx)("h2",{className:"text-xl font-bold",children:"login"===s?"Sign In":"Create Account"})]}),(0,on.jsx)("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:(0,on.jsx)(On,{size:24})})]}),(()=>{if("login"===s)return(0,on.jsx)(zn,{formData:c,updateFormData:u,onLogin:r,switchToRegister:()=>l("register"),onCancel:t});switch(o){case"basic":return(0,on.jsx)(Fn,{formData:c,updateFormData:u,onNext:()=>i("path_selection"),onCancel:t});case"path_selection":return(0,on.jsx)(Mn,{formData:c,updateFormData:u,onNext:e=>{i("partner"===e?"partner_type":"details")}});case"partner_type":return(0,on.jsx)(Bn,{formData:c,updateFormData:u,onNext:()=>i("details")});case"details":case"verification":return"buyer"===c.user_path?(0,on.jsx)(Kn,{step:o,formData:c,updateFormData:u,setStep:i,onRegister:a}):"agent"===c.partner_type?(0,on.jsx)(Jn,{step:o,formData:c,updateFormData:u,setStep:i,onRegister:a}):"farmer"===c.partner_type?(0,on.jsx)(Qn,{step:o,formData:c,updateFormData:u,setStep:i,onRegister:a}):"business"===c.partner_type?(0,on.jsx)(Zn,{step:o,formData:c,updateFormData:u,setStep:i,onRegister:a}):(0,on.jsx)("div",{children:"Unknown Role Flow"});default:return(0,on.jsx)("div",{children:"Unknown Step"})}})()]})]})})},es=e=>{let{isOpen:t,onClose:r,user:a,onUpdateUser:s}=e;const[l,o]=(0,n.useState)(""),[i,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)({type:"",text:""});if(!t)return null;return(0,on.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-[60] flex items-center justify-center p-4",children:(0,on.jsxs)("div",{className:"bg-white rounded-xl max-w-md w-full p-6 shadow-2xl relative",children:[(0,on.jsx)("button",{onClick:r,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:"Skip"}),"// ... (imports)",(0,on.jsxs)("div",{className:"text-center mb-6",children:[(0,on.jsx)("div",{className:"bg-amber-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,on.jsx)("svg",{className:"w-8 h-8 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,on.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,on.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Action Required"}),(0,on.jsx)("p",{className:"text-gray-600 mt-2",children:"Your Virtual Account could not be created automatically. This is required to receive payments."})]}),d.text&&(0,on.jsx)("div",{className:"p-3 rounded mb-4 text-sm ".concat("success"===d.type?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:d.text}),(0,on.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),c(!0),u({type:"",text:""});try{const e=l?{bvn:l}:{},t=await ln.post("/auth/create-dva",e),{account_number:n,bank_name:o}=t.data,i=m(m({},a),{},{dva_account_number:n,dva_bank_name:o});s(i),u({type:"success",text:"Success! Account: ".concat(n," (").concat(o,")")}),setTimeout(()=>{r()},2e3)}catch(o){var t,n;console.error(o),u({type:"error",text:(null===(t=o.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.detail)||"Creation failed. Please verify your BVN matches your URL profile name."})}finally{c(!1)}},className:"space-y-4",children:[(0,on.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 text-sm",children:[(0,on.jsxs)("p",{className:"mb-2",children:[(0,on.jsx)("span",{className:"font-semibold",children:"Current Name:"})," ",null===a||void 0===a?void 0:a.first_name," ",null===a||void 0===a?void 0:a.last_name]}),(0,on.jsx)("p",{className:"text-xs text-gray-500",children:"Your BVN name must match this exactly."})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm / Update BVN"}),(0,on.jsx)("input",{type:"text",value:l,onChange:e=>o(e.target.value),placeholder:"Enter corrected BVN (optional)",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-amber-500 focus:border-amber-500",maxLength:11}),(0,on.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty to retry with stored BVN."})]}),(0,on.jsx)("button",{type:"submit",disabled:i,className:"w-full py-3 bg-amber-600 text-white rounded-lg hover:bg-amber-700 font-bold shadow-lg disabled:opacity-50",children:i?"Processing...":"Create Virtual Account"})]})]})})},ts=e=>{let{orderId:t,onClose:r,onUpdate:a}=e;const[s,l]=(0,n.useState)(null),[o,i]=(0,n.useState)(!0),[c,d]=(0,n.useState)([]),[u,m]=(0,n.useState)(!1);(0,n.useEffect)(()=>{p()},[t]);const p=async()=>{try{i(!0);const e=await ln.get("/orders/".concat(t));l(e.data)}catch(e){console.error("Failed to fetch order:",e),alert("Failed to load order details")}finally{i(!1)}};if(o)return(0,on.jsx)("div",{className:"modal-overlay",children:(0,on.jsx)("div",{className:"modal-content order-details-modal",children:(0,on.jsx)("div",{className:"loading-spinner",children:"Loading order details..."})})});if(!s)return null;const h=s.items||(s.product_details?[{product_id:s.product_id||s.product_details.id,title:s.product_details.title||s.product_details.name,price_per_unit:s.product_details.price||s.product_details.price_per_unit,quantity:s.quantity,total:s.total_amount}]:[]),x=()=>["pending","held_in_escrow","pending_payment"].includes(s.status),f=()=>h.filter(e=>c.includes(e.product_id)).reduce((e,t)=>e+(t.total||t.quantity*t.price_per_unit),0),g=async()=>{if(confirm("Cancel this order?\n\nYou will receive a full refund of \u20a6".concat(s.total_amount.toLocaleString(),"\n\nThis action cannot be undone."))){m(!0);try{const e=await ln.post("/orders/".concat(t,"/cancel")),{refund_processed:n,refund_amount:s,message:l}=e.data;alert("\u2705 ".concat(l,"\n\n\ud83d\udcb0 Refund: \u20a6").concat(s.toLocaleString(),"\n\nFunds have been returned to your wallet.")),a&&a(),r&&r()}catch(l){var e,n;alert((null===(e=l.response)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.detail)||"Failed to cancel order")}finally{m(!1)}}};return(0,on.jsx)("div",{className:"modal-overlay",children:(0,on.jsxs)("div",{className:"modal-content order-details-modal",children:[(0,on.jsxs)("div",{className:"modal-header",children:[(0,on.jsx)("h3",{children:"Order Details"}),(0,on.jsx)("button",{className:"close-button",onClick:r,children:"\xd7"})]}),(0,on.jsxs)("div",{className:"modal-body",children:[(0,on.jsxs)("div",{className:"order-info-section",children:[(0,on.jsxs)("div",{className:"info-row",children:[(0,on.jsx)("span",{className:"label",children:"Order ID:"}),(0,on.jsx)("span",{className:"value",children:s.order_id})]}),(0,on.jsxs)("div",{className:"info-row",children:[(0,on.jsx)("span",{className:"label",children:"Status:"}),(0,on.jsx)("span",{className:"status-badge status-".concat(s.status),children:s.status.replace(/_/g," ").toUpperCase()})]}),(0,on.jsxs)("div",{className:"info-row",children:[(0,on.jsx)("span",{className:"label",children:"Payment Method:"}),(0,on.jsx)("span",{className:"value",children:s.payment_method})]}),(0,on.jsxs)("div",{className:"info-row",children:[(0,on.jsx)("span",{className:"label",children:"Total Amount:"}),(0,on.jsxs)("span",{className:"value total-amount",children:["\u20a6",s.total_amount.toLocaleString()]})]})]}),x()&&(0,on.jsxs)("div",{className:"order-actions",children:[s.items&&(0,on.jsx)("button",{className:"btn-select-all",onClick:()=>{c.length===h.length?d([]):d(h.map(e=>e.product_id))},disabled:u,children:c.length===h.length?"\u2611\ufe0f Deselect All":"\u2610 Select All"}),s.items&&c.length>0&&(0,on.jsx)("button",{className:"btn-remove-items",onClick:async()=>{if(0===c.length)return void alert("Please select items to remove");const e=f(),n=c.length===h.length?"Cancel entire order?\n\nRefund: \u20a6".concat(e.toLocaleString(),"\n\nThis action cannot be undone."):"Remove ".concat(c.length," item(s)?\n\nRefund: \u20a6").concat(e.toLocaleString(),"\nNew Total: \u20a6").concat((s.total_amount-e).toLocaleString(),"\n\nThis action cannot be undone.");if(confirm(n)){m(!0);try{if(!s.items&&s.product_details)return void await g();const e=await ln.post("/orders/".concat(t,"/remove-items"),{product_ids:c}),{refund_processed:n,refund_amount:l,items_remaining:o,message:i}=e.data;0===o?(alert("\u2705 ".concat(i,"\n\n\ud83d\udcb0 Refund: \u20a6").concat(l.toLocaleString(),"\n\nYour order has been cancelled.")),a&&a(),r&&r()):(alert("\u2705 ".concat(i,"\n\n\ud83d\udcb0 Refund: \u20a6").concat(l.toLocaleString(),"\n\ud83d\udce6 ").concat(o," item(s) remaining")),d([]),p())}catch(i){var l,o;alert((null===(l=i.response)||void 0===l||null===(o=l.data)||void 0===o?void 0:o.detail)||"Failed to remove items")}finally{m(!1)}}},disabled:u,children:u?"\u23f3 Processing...":"\ud83d\uddd1\ufe0f Remove ".concat(c.length," Item(s) (\u20a6").concat(f().toLocaleString(),")")}),(0===c.length||!s.items)&&(0,on.jsx)("button",{className:"btn-cancel-order",onClick:g,disabled:u,children:u?"\u23f3 Cancelling...":"\u274c Cancel Entire Order"})]}),(0,on.jsxs)("div",{className:"order-items-section",children:[(0,on.jsx)("h4",{children:"Order Items"}),h.map((e,t)=>(0,on.jsxs)("div",{className:"order-item",children:[x()&&s.items&&(0,on.jsx)("input",{type:"checkbox",className:"item-checkbox",checked:c.includes(e.product_id),onChange:()=>{return t=e.product_id,void d(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},disabled:u}),(0,on.jsxs)("div",{className:"item-details",children:[(0,on.jsx)("h5",{children:e.title}),(0,on.jsxs)("p",{className:"item-meta",children:["Quantity: ",e.quantity," \xd7 \u20a6",(e.price_per_unit||0).toLocaleString()]})]}),(0,on.jsxs)("div",{className:"item-total",children:["\u20a6",(e.total||e.quantity*e.price_per_unit||0).toLocaleString()]})]},t))]}),c.length>0&&x()&&(0,on.jsxs)("div",{className:"refund-preview",children:[(0,on.jsxs)("div",{className:"preview-row",children:[(0,on.jsx)("span",{children:"Items to Remove:"}),(0,on.jsx)("span",{children:c.length})]}),(0,on.jsxs)("div",{className:"preview-row",children:[(0,on.jsx)("span",{children:"Refund Amount:"}),(0,on.jsxs)("span",{className:"refund-amount",children:["\u20a6",f().toLocaleString()]})]}),c.length<h.length&&(0,on.jsxs)("div",{className:"preview-row",children:[(0,on.jsx)("span",{children:"New Order Total:"}),(0,on.jsxs)("span",{className:"new-total",children:["\u20a6",(s.total_amount-f()).toLocaleString()]})]})]}),(0,on.jsxs)("div",{className:"delivery-section",children:[(0,on.jsx)("h4",{children:"Delivery Address"}),(0,on.jsx)("p",{children:s.delivery_address||"Not specified"})]}),!x()&&(0,on.jsxs)("div",{className:"status-message",children:[(0,on.jsx)("p",{children:"\u2139\ufe0f This order cannot be modified in its current status."}),"delivered"===s.status&&(0,on.jsxs)("div",{className:"delivery-confirm-action",style:{marginTop:"10px",textAlign:"center"},children:[(0,on.jsx)("p",{children:"Please confirm delivery to complete the order."}),(0,on.jsx)("button",{className:"btn-confirm-delivery",onClick:async()=>{if(confirm("Have you received this order?\n\nConfirming usage of funds will release payment to the seller.\nThis action helps sellers get paid faster!")){m(!0);try{await ln.post("/orders/".concat(t,"/confirm-delivery")),alert("\u2705 Delivery Confirmed!\nThank you for shopping with Pyramyd. The order is now complete."),a&&a(),r&&r()}catch(s){var e,n;console.error("Delivery confirmation failed:",s),alert((null===(e=s.response)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.detail)||"Failed to confirm delivery. Please try again.")}finally{m(!1)}}},disabled:u,style:{backgroundColor:"#00b894",color:"white",padding:"10px 20px",borderRadius:"5px",border:"none",cursor:"pointer",marginTop:"10px",fontWeight:"bold"},children:u?"Processing...":"\u2705 Confirm Delivery"})]}),"completed"===s.status&&(0,on.jsx)("p",{children:"This order has been completed."}),"cancelled"===s.status&&(0,on.jsx)("p",{children:"This order was cancelled."})]})]})]})})},rs=e=>{let{onClose:t}=e;const[r,a]=(0,n.useState)([]),[s,l]=(0,n.useState)(!0),[o,i]=(0,n.useState)(null),[c,d]=(0,n.useState)("all");(0,n.useEffect)(()=>{u()},[]);const u=async()=>{try{l(!0);const e=await ln.get("/orders/");a(e.data)}catch(e){console.error("Failed to fetch orders:",e)}finally{l(!1)}},m=(()=>{switch(c){case"pending":return r.filter(e=>["pending","held_in_escrow","pending_payment"].includes(e.status));case"delivered":return r.filter(e=>"delivered"===e.status);case"completed":return r.filter(e=>"completed"===e.status);case"cancelled":return r.filter(e=>"cancelled"===e.status);default:return r}})(),p=e=>{switch(e){case"pending":return r.filter(e=>["pending","held_in_escrow","pending_payment"].includes(e.status)).length;case"delivered":return r.filter(e=>"delivered"===e.status).length;case"completed":return r.filter(e=>"completed"===e.status).length;case"cancelled":return r.filter(e=>"cancelled"===e.status).length;default:return r.length}};return s?(0,on.jsx)("div",{className:"modal-overlay",children:(0,on.jsxs)("div",{className:"modal-content orders-modal",children:[(0,on.jsxs)("div",{className:"modal-header",children:[(0,on.jsx)("h3",{children:"My Orders"}),(0,on.jsx)("button",{className:"close-button",onClick:t,children:"\xd7"})]}),(0,on.jsxs)("div",{className:"loading-state",children:[(0,on.jsx)("div",{className:"spinner"}),(0,on.jsx)("p",{children:"Loading your orders..."})]})]})}):(0,on.jsxs)("div",{className:"modal-overlay",children:[(0,on.jsxs)("div",{className:"modal-content orders-modal",children:[(0,on.jsxs)("div",{className:"modal-header",children:[(0,on.jsx)("h3",{children:"\ud83d\udce6 My Orders"}),(0,on.jsx)("button",{className:"close-button",onClick:t,children:"\xd7"})]}),(0,on.jsxs)("div",{className:"modal-body",children:[(0,on.jsxs)("div",{className:"order-tabs",children:[(0,on.jsxs)("button",{className:"tab-button ".concat("all"===c?"active":""),onClick:()=>d("all"),children:["All ",(0,on.jsx)("span",{className:"tab-count",children:p("all")})]}),(0,on.jsxs)("button",{className:"tab-button ".concat("pending"===c?"active":""),onClick:()=>d("pending"),children:["Pending ",(0,on.jsx)("span",{className:"tab-count",children:p("pending")})]}),(0,on.jsxs)("button",{className:"tab-button ".concat("delivered"===c?"active":""),onClick:()=>d("delivered"),children:["Delivered ",(0,on.jsx)("span",{className:"tab-count",children:p("delivered")})]}),(0,on.jsxs)("button",{className:"tab-button ".concat("completed"===c?"active":""),onClick:()=>d("completed"),children:["Completed ",(0,on.jsx)("span",{className:"tab-count",children:p("completed")})]}),(0,on.jsxs)("button",{className:"tab-button ".concat("cancelled"===c?"active":""),onClick:()=>d("cancelled"),children:["Cancelled ",(0,on.jsx)("span",{className:"tab-count",children:p("cancelled")})]})]}),0===m.length?(0,on.jsxs)("div",{className:"empty-state",children:[(0,on.jsx)("div",{className:"empty-icon",children:"\ud83d\udced"}),(0,on.jsx)("h4",{children:"No orders found"}),(0,on.jsx)("p",{children:"all"===c?"You haven't placed any orders yet":"No ".concat(c," orders")})]}):(0,on.jsx)("div",{className:"orders-list",children:m.map(e=>{return(0,on.jsxs)("div",{className:"order-card-compact",children:[(0,on.jsxs)("div",{className:"order-card-header-compact",children:[(0,on.jsx)("div",{className:"order-id-compact",children:e.order_id}),(0,on.jsx)("span",{className:"status-badge-compact",style:{backgroundColor:(t=e.status,{pending:"#ffeaa7",pending_payment:"#ffeaa7",held_in_escrow:"#74b9ff",delivered:"#55efc4",completed:"#81ecec",cancelled:"#fab1a0"}[t]||"#dfe6e9")},children:e.status.replace(/_/g," ").toUpperCase()})]}),(0,on.jsxs)("div",{className:"order-card-body-compact",children:[(0,on.jsxs)("div",{className:"order-info-compact",children:[(0,on.jsxs)("span",{className:"order-items-compact",children:[e.items?e.items.length:e.product_details?1:0," item(s)"]}),(0,on.jsx)("span",{className:"order-date-compact",children:new Date(e.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]}),(0,on.jsxs)("div",{className:"order-amount-compact",children:["\u20a6",e.total_amount.toLocaleString()]})]}),(0,on.jsxs)("div",{className:"order-card-footer-compact",children:[(0,on.jsx)("button",{className:"btn-view-compact",onClick:()=>i(e.order_id),children:"View Details"}),["pending","held_in_escrow"].includes(e.status)&&(0,on.jsx)("span",{className:"modifiable-badge",children:"\u2713 Can modify"})]})]},e.order_id);var t})})]})]}),o&&(0,on.jsx)(ts,{orderId:o,onClose:()=>i(null),onUpdate:u})]})},as={business:{label:"\ud83c\udfe2 Business",color:"#6f42c1"},agent:{label:"\ud83e\udd1d Agent",color:"#0d6efd"},farmer:{label:"\ud83c\udf3e Farmer",color:"#198754"},supplier_food_produce:{label:"\ud83c\udfed Supplier",color:"#fd7e14"}},ns={pending:"#6c757d",accepted_by_buyer:"#ffc107",accepted:"#198754",delivered:"#0dcaf0",completed:"#198754",rejected:"#dc3545",terms_rejected:"#dc3545",on_hold:"#ffc107",closed:"#6c757d"},ss=e=>{let{publishDate:t,expiryDate:r}=e;const[a,s]=(0,n.useState)("");return(0,n.useEffect)(()=>{if(!r)return;const e=()=>{const e=(new Date).getTime();if(t){const r=new Date(t).getTime();if(r>e){const t=r-e,a=Math.floor(t/864e5),n=Math.floor(t%864e5/36e5);return void s("Starts in ".concat(a,"d ").concat(n,"h"))}}const a=new Date(r).getTime()-e;if(a<0)return void s("Expired");const n=Math.floor(a/864e5),l=Math.floor(a%864e5/36e5),o=Math.floor(a%36e5/6e4);s(n>0?"".concat(n,"d ").concat(l,"h left"):"".concat(l,"h ").concat(o,"m left"))};e();const a=setInterval(e,6e4);return()=>clearInterval(a)},[t,r]),(0,on.jsx)("span",{children:a})},ls=e=>{var t;let{requests:r,onRefresh:a}=e;const[s,l]=(0,n.useState)(null),[o,i]=(0,n.useState)(null),[c,d]=(0,n.useState)(null),[u,p]=(0,n.useState)(null),[h,x]=(0,n.useState)(""),[f,g]=(0,n.useState)(""),[y,b]=(0,n.useState)({upfront_percent:50,on_delivery_percent:50}),[v,j]=(0,n.useState)([]),[w,N]=(0,n.useState)(!1),_=e=>{p(e),x(""),g(""),b({upfront_percent:50,on_delivery_percent:50}),j([])};return(0,on.jsxs)("div",{className:"my-requests-container",style:{padding:"20px"},children:[(0,on.jsx)("h2",{children:"My Requests"}),0===r.length?(0,on.jsx)("p",{style:{color:"#888"},children:"You haven't posted any requests yet."}):(0,on.jsx)("div",{className:"requests-list",children:r.map(e=>{var t,r,n,o,c;return(0,on.jsxs)("div",{className:"request-item",style:{marginBottom:"15px",border:"1px solid #eee",borderRadius:"8px",overflow:"hidden"},children:[(0,on.jsxs)("div",{onClick:()=>{return t=e.id,l(s===t?null:t);var t},style:{padding:"15px",background:"#f9f9f9",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("strong",{style:{fontSize:"1.05em"},children:(null===(t=e.items)||void 0===t||null===(r=t[0])||void 0===r?void 0:r.name)||e.title||e.id}),(0,on.jsx)("br",{}),(0,on.jsxs)("span",{style:{fontSize:"0.85em",color:"#666"},children:[new Date(e.created_at).toLocaleDateString()," \u2022 ",null===(n=e.items)||void 0===n?void 0:n.length," item(s) \u2022"," ",(0,on.jsx)("span",{style:{color:"active"===e.status||"open"===e.status?"#198754":"#6c757d",fontWeight:"600"},children:e.status}),e.region_state&&(0,on.jsxs)("span",{children:[" \u2022 \ud83d\udccd ",e.region_state]}),"on_hold"===e.status&&(0,on.jsx)("span",{style:{color:"#dc3545",fontWeight:"bold"},children:" \u2022 \u23f8 On Hold"}),"closed"===e.status&&(0,on.jsx)("span",{style:{color:"#6c757d",fontWeight:"bold"},children:" \u2022 \ud83d\udd12 Closed"}),"active"===e.status&&e.expiry_date&&(0,on.jsxs)("span",{style:{color:"#e67e22"},children:[" \u2022 \u23f3 ",(0,on.jsx)(ss,{publishDate:e.publish_date,expiryDate:e.expiry_date})]})]})]}),(0,on.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,on.jsxs)("span",{style:{background:"#e9ecef",padding:"2px 10px",borderRadius:"12px",fontSize:"0.85em"},children:[e.offers_count||0," bids"]}),(0,on.jsx)("span",{children:s===e.id?"\u25b2":"\u25bc"})]})]}),s===e.id&&(0,on.jsxs)("div",{style:{padding:"15px"},children:[(0,on.jsxs)("table",{style:{width:"100%",marginBottom:"15px",fontSize:"0.88em",borderCollapse:"collapse"},children:[(0,on.jsx)("thead",{children:(0,on.jsxs)("tr",{style:{textAlign:"left",color:"#888",borderBottom:"1px solid #eee"},children:[(0,on.jsx)("th",{style:{padding:"4px 8px"},children:"Item"}),(0,on.jsx)("th",{style:{padding:"4px 8px"},children:"Qty"}),(0,on.jsx)("th",{style:{padding:"4px 8px"},children:"Unit"}),(0,on.jsx)("th",{style:{padding:"4px 8px"},children:"Specs"})]})}),(0,on.jsx)("tbody",{children:null===(o=e.items)||void 0===o?void 0:o.map((e,t)=>(0,on.jsxs)("tr",{style:{borderBottom:"1px solid #f5f5f5"},children:[(0,on.jsx)("td",{style:{padding:"4px 8px"},children:e.name}),(0,on.jsx)("td",{style:{padding:"4px 8px"},children:e.quantity||"Open"}),(0,on.jsx)("td",{style:{padding:"4px 8px"},children:e.unit||"\u2014"}),(0,on.jsx)("td",{style:{padding:"4px 8px",color:"#666"},children:e.specifications||"\u2014"})]},t))})]}),("active"===e.status||"on_hold"===e.status)&&(0,on.jsxs)("div",{style:{display:"flex",gap:"10px",marginBottom:"15px",alignItems:"center"},children:[(0,on.jsx)("button",{onClick:()=>d(e),style:{padding:"6px 12px",background:"#0d6efd",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:"\u270e Edit"}),(0,on.jsxs)("select",{value:e.status,onChange:t=>(async(e,t,r)=>{if("closed"===r){if(!window.confirm("Close this request? Bidders will no longer be able to submit quotes."))return}else if("on_hold"===r){if(!window.confirm("Put this request on hold? It will be hidden from bidders and the timer will pause."))return}else if("active"===r&&!window.confirm("Open this request? It will be visible to bidders again."))return;try{await ln.put("/requests/".concat(e,"/status"),{status:r}),alert("Request status updated to ".concat(r)),a&&a()}catch(l){var n,s;alert((null===(n=l.response)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.detail)||"Failed to update status")}})(e.id,e.status,t.target.value),style:{padding:"6px",borderRadius:"4px",border:"1px solid #ccc"},children:[(0,on.jsx)("option",{value:"active",children:"Open (Active)"}),(0,on.jsx)("option",{value:"on_hold",children:"Hold (Paused)"}),(0,on.jsx)("option",{value:"closed",children:"Close (End Request)"})]})]}),(0,on.jsxs)("h4",{style:{marginBottom:"12px"},children:["Bids (",(null===(c=e.offers)||void 0===c?void 0:c.length)||0,")"]}),e.offers&&0!==e.offers.length?(0,on.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(270px, 1fr))",gap:"15px"},children:e.offers.map(e=>{var t,r,n,s;const l=as[e.seller_role],o=ns[e.status]||"#6c757d";return(0,on.jsxs)("div",{style:{border:"1px solid #e0e0e0",borderRadius:"8px",padding:"12px",position:"relative"},children:[(0,on.jsx)("div",{style:{position:"absolute",top:"10px",right:"10px",background:o,color:"#fff",padding:"2px 8px",borderRadius:"4px",fontSize:"0.72em",fontWeight:"bold"},children:null===(t=e.status)||void 0===t?void 0:t.toUpperCase()}),(0,on.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",marginRight:"80px"},children:[(0,on.jsx)("strong",{style:{fontSize:"0.95em"},children:e.seller_username}),l&&(0,on.jsx)("span",{style:{background:l.color,color:"#fff",padding:"1px 7px",borderRadius:"10px",fontSize:"0.72em",fontWeight:"600"},children:l.label})]}),(0,on.jsxs)("div",{style:{fontSize:"1.1em",fontWeight:"bold",color:"#198754",marginBottom:"6px"},children:["\u20a6",null===(r=e.price)||void 0===r?void 0:r.toLocaleString()]}),(null===(n=e.items)||void 0===n?void 0:n.length)>0&&(0,on.jsxs)("div",{style:{background:"#f8f9fa",padding:"8px",borderRadius:"4px",marginBottom:"8px",fontSize:"0.82em"},children:[e.items.map((e,t)=>{var r;return(0,on.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,on.jsxs)("span",{children:[e.name," (",e.quantity," ",e.unit,")"]}),(0,on.jsxs)("span",{children:["\u20a6",null===(r=e.target_price)||void 0===r?void 0:r.toLocaleString(),"/unit"]})]},t)}),e.moisture_content_percent&&(0,on.jsxs)("div",{style:{color:"#666",marginTop:"4px"},children:["Moisture: ",e.moisture_content_percent,"%"]})]}),(0,on.jsxs)("p",{style:{fontSize:"0.85em",color:"#555",marginBottom:"4px"},children:["\ud83d\udcc5 Delivery: ",e.delivery_date?new Date(e.delivery_date).toLocaleDateString():"\u2014"]}),e.notes&&(0,on.jsx)("p",{style:{fontSize:"0.82em",color:"#777",marginBottom:"8px"},children:e.notes}),(null===(s=e.images)||void 0===s?void 0:s.length)>0&&(0,on.jsx)("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap",marginBottom:"10px"},children:e.images.map((e,t)=>(0,on.jsx)("img",{src:e,alt:"proof",onClick:()=>i(e),style:{width:"52px",height:"52px",objectFit:"cover",borderRadius:"4px",border:"1px solid #ddd",cursor:"zoom-in"}},t))}),"pending"===e.status&&(0,on.jsxs)("div",{style:{display:"flex",gap:"8px",marginTop:"8px"},children:[(0,on.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Reject this bid? The seller will be notified."))try{await ln.post("/requests/offers/".concat(e,"/reject")),alert("Bid rejected."),a&&a()}catch(n){var t,r;alert((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||"Failed to reject offer")}})(e.id),style:{flex:1,padding:"7px",background:"#fff",color:"#dc3545",border:"1px solid #dc3545",borderRadius:"5px",cursor:"pointer",fontWeight:"600",fontSize:"0.85em"},children:"Reject"}),(0,on.jsx)("button",{onClick:()=>_(e),style:{flex:2,padding:"7px",background:"#198754",color:"#fff",border:"none",borderRadius:"5px",cursor:"pointer",fontWeight:"600",fontSize:"0.85em"},children:"Accept & Set Terms"})]}),"accepted_by_buyer"===e.status&&(0,on.jsx)("div",{style:{marginTop:"8px",padding:"8px",background:"#fff3cd",borderRadius:"4px",fontSize:"0.82em",color:"#856404"},children:"\u23f3 Waiting for seller to confirm your terms\u2026"}),"terms_rejected"===e.status&&(0,on.jsxs)("div",{style:{marginTop:"8px",padding:"8px",background:"#f8d7da",borderRadius:"4px",fontSize:"0.82em",color:"#721c24"},children:["\u274c Seller rejected your terms. You may re-negotiate or choose another bid.",(0,on.jsx)("button",{onClick:()=>_(e),style:{display:"block",marginTop:"6px",width:"100%",padding:"6px",background:"#dc3545",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.85em"},children:"Re-send Terms"})]}),"accepted"===e.status&&(0,on.jsxs)("div",{style:{marginTop:"8px",background:"#d1e7dd",padding:"10px",borderRadius:"4px",textAlign:"center"},children:[(0,on.jsx)("small",{children:"Tracking ID:"}),(0,on.jsx)("div",{style:{fontWeight:"bold",letterSpacing:"1px",margin:"4px 0"},children:e.tracking_id||e.order_id}),(0,on.jsx)("small",{style:{color:"#f39c12"},children:"Waiting for agent to mark delivered\u2026"})]}),"delivered"===e.status&&(0,on.jsxs)("div",{style:{marginTop:"8px",background:"#e8f5e9",padding:"10px",borderRadius:"4px",textAlign:"center"},children:[(0,on.jsx)("p",{style:{color:"#198754",fontWeight:"600",marginBottom:"8px"},children:"\u2705 Agent marked as Delivered!"}),(0,on.jsx)("button",{onClick:()=>(async e=>{const t=prompt("Enter the LAST 8 CHARACTERS of the Tracking ID to confirm receipt:");if(t)try{await ln.post("/requests/offers/".concat(e,"/confirm-delivery"),{code:t}),alert("Delivery Confirmed! Funds released."),a&&a()}catch(s){var r,n;alert((null===(r=s.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.detail)||"Confirmation failed")}})(e.id),style:{width:"100%",padding:"8px",background:"#2ecc71",color:"#fff",border:"none",borderRadius:"5px",cursor:"pointer",fontWeight:"bold"},children:"Confirm Receipt"})]}),"completed"===e.status&&(0,on.jsx)("div",{style:{marginTop:"8px",textAlign:"center",color:"#198754",fontWeight:"bold"},children:"\u2713 Fulfilled & Paid"})]},e.id)})}):(0,on.jsx)("p",{style:{color:"#888",fontStyle:"italic"},children:"No bids yet."})]})]},e.id)})}),u&&(0,on.jsx)("div",{className:"modal-overlay",children:(0,on.jsxs)("div",{className:"modal-content",style:{maxWidth:"480px",width:"95%"},children:[(0,on.jsxs)("div",{className:"modal-header",children:[(0,on.jsx)("h3",{children:"Accept Bid & Set Terms"}),(0,on.jsx)("button",{className:"close-button",onClick:()=>p(null),children:"\xd7"})]}),(0,on.jsxs)("div",{className:"modal-body",children:[(0,on.jsxs)("p",{style:{color:"#555",marginBottom:"16px"},children:["Bid from ",(0,on.jsx)("strong",{children:u.seller_username})," \u2014 \u20a6",null===(t=u.price)||void 0===t?void 0:t.toLocaleString()]}),(0,on.jsxs)("div",{className:"form-group",style:{marginBottom:"12px"},children:[(0,on.jsx)("label",{style:{fontWeight:"500",fontSize:"0.9em"},children:"Confirmed Delivery Date *"}),(0,on.jsx)("input",{type:"date",className:"form-input",value:f,onChange:e=>g(e.target.value)})]}),(0,on.jsxs)("div",{className:"form-group",style:{marginBottom:"12px"},children:[(0,on.jsx)("label",{style:{fontWeight:"500",fontSize:"0.9em"},children:"Payment Terms"}),(0,on.jsxs)("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("small",{children:"Upfront %"}),(0,on.jsx)("input",{type:"number",min:"0",max:"100",className:"form-input",value:y.upfront_percent,onChange:e=>b(t=>m(m({},t),{},{upfront_percent:parseInt(e.target.value)||0,on_delivery_percent:100-(parseInt(e.target.value)||0)})),style:{width:"80px"}})]}),(0,on.jsx)("span",{style:{marginTop:"16px",color:"#888"},children:"/"}),(0,on.jsxs)("div",{children:[(0,on.jsx)("small",{children:"On Delivery %"}),(0,on.jsx)("input",{type:"number",className:"form-input",value:y.on_delivery_percent,readOnly:!0,style:{width:"80px",background:"#f5f5f5"}})]})]})]}),(0,on.jsxs)("div",{className:"form-group",style:{marginBottom:"12px"},children:[(0,on.jsxs)("label",{style:{fontWeight:"500",fontSize:"0.9em"},children:["Acknowledgment Note ",(0,on.jsx)("span",{style:{color:"#888"},children:"(optional)"})]}),(0,on.jsx)("textarea",{className:"form-input",rows:3,value:h,onChange:e=>x(e.target.value),placeholder:"Any special instructions, quality requirements, or notes for the seller\u2026"})]}),(0,on.jsxs)("div",{className:"form-group",style:{marginBottom:"16px"},children:[(0,on.jsxs)("label",{style:{fontWeight:"500",fontSize:"0.9em"},children:["Attach Document ",(0,on.jsx)("span",{style:{color:"#888"},children:"(Contract/Agreement, optional)"})]}),(0,on.jsx)("input",{type:"file",accept:".pdf,.doc,.docx,image/*",onChange:async e=>{const t=e.target.files[0];if(!t)return;const r={url:"",uploading:!0,name:t.name};j(e=>[...e,r]);try{const e=await ln.post("/upload/sign-public",{folder:"rfq_docs",filename:t.name,contentType:t.type});await fetch(e.data.uploadUrl,{method:"PUT",body:t,headers:{"Content-Type":t.type}}),j(r=>r.map(r=>r.name===t.name&&r.uploading?{url:e.data.publicUrl,uploading:!1,name:t.name}:r))}catch(a){alert("Document upload failed."),j(e=>e.filter(e=>!(e.name===t.name&&e.uploading)))}},style:{display:"block",marginBottom:"6px"}}),v.map((e,t)=>(0,on.jsx)("div",{style:{fontSize:"0.82em",color:e.uploading?"#888":"#198754"},children:e.uploading?"\u23f3 Uploading ".concat(e.name,"\u2026"):"\u2705 ".concat(e.name)},t))]}),(0,on.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,on.jsx)("button",{className:"btn-secondary",onClick:()=>p(null),style:{flex:1},children:"Cancel"}),(0,on.jsx)("button",{onClick:async()=>{if(f){N(!0);try{await ln.post("/requests/offers/".concat(u.id,"/accept"),{acknowledgment_note:h||null,acknowledgment_files:v.filter(e=>!e.uploading).map(e=>e.url),confirmed_delivery_date:new Date(f).toISOString(),payment_terms:y}),alert("Terms sent to seller! Waiting for their confirmation."),p(null),a&&a()}catch(r){var e,t;alert((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"Failed to accept offer")}finally{N(!1)}}else alert("Please select a confirmed delivery date.")},disabled:w||v.some(e=>e.uploading),style:{flex:2,padding:"10px",background:"#198754",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"bold"},children:w?"Sending\u2026":"Send Terms to Seller"})]})]})]})}),o&&(0,on.jsx)("div",{className:"modal-overlay",onClick:()=>i(null),style:{cursor:"zoom-out"},children:(0,on.jsx)("img",{src:o,alt:"zoomed",style:{maxWidth:"90vw",maxHeight:"90vh",borderRadius:"8px",boxShadow:"0 8px 32px rgba(0,0,0,0.4)"}})}),c&&(0,on.jsx)(mn,{isOpen:!!c,onClose:()=>d(null),onSubmit:()=>{d(null),a&&a()},editData:c})]})},os=Dn("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]),is=Dn("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),cs=Dn("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),ds=Dn("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),us=Dn("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),ms=e=>{let{onClose:t,user:r,API_BASE_URL:a}=e;const[s,l]=(0,n.useState)("overview"),[o,i]=(0,n.useState)({totalSpent:0,totalSaved:0,orderCount:0}),[c,d]=(0,n.useState)([]),[u,m]=(0,n.useState)(!0),[p,h]=(0,n.useState)([]),[x,f]=(0,n.useState)(!1);(0,n.useEffect)(()=>{r&&(async()=>{m(!0),setTimeout(()=>{i({totalSpent:125e3,totalSaved:15e3,orderCount:8}),d([{id:1,type:"order",description:"Bought 2kg Tomatoes",date:"2024-12-25",amount:4500},{id:2,type:"coupon",description:'Used "FARMFRESH" Coupon',date:"2024-12-25",amount:-500},{id:3,type:"order",description:"Bought 5kg Rice",date:"2024-12-20",amount:35e3}]),m(!1)},800)})()},[r]),(0,n.useEffect)(()=>{"requests"===s&&g()},[s]);const g=async()=>{f(!0);try{const e=localStorage.getItem("token"),t=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/requests/my-requests"),{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){const e=await t.json();h(Array.isArray(e)?e:e.requests||[])}}catch(e){console.error("Failed to fetch requests",e)}finally{f(!1)}};return(0,on.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,on.jsxs)("div",{className:"bg-white rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,on.jsxs)("div",{className:"flex flex-col border-b sticky top-0 bg-white z-10 px-6 pt-6 pb-0",children:[(0,on.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"My Dashboard"}),(0,on.jsxs)("p",{className:"text-sm text-gray-500",children:["Welcome back, ",(null===r||void 0===r?void 0:r.first_name)||"User","!"]})]}),(0,on.jsxs)("div",{className:"flex items-center gap-3",children:[(0,on.jsx)("button",{onClick:()=>{window.openRequestWizard&&window.openRequestWizard()},className:"bg-purple-600 text-white px-4 py-2 rounded-lg font-bold hover:bg-purple-700 transition",children:"+ Create Request (Bulk Buy)"}),(0,on.jsx)("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full",children:(0,on.jsx)(On,{size:24,className:"text-gray-500"})})]})]}),(0,on.jsxs)("div",{className:"flex space-x-6 text-sm",children:[(0,on.jsx)("button",{className:"pb-3 font-medium border-b-2 transition-colors ".concat("overview"===s?"text-emerald-600 border-emerald-600":"text-gray-500 border-transparent hover:text-gray-800"),onClick:()=>l("overview"),children:"Overview"}),(0,on.jsx)("button",{className:"pb-3 font-medium border-b-2 transition-colors ".concat("requests"===s?"text-emerald-600 border-emerald-600":"text-gray-500 border-transparent hover:text-gray-800"),onClick:()=>l("requests"),children:(0,on.jsxs)("div",{className:"flex items-center gap-2",children:[(0,on.jsx)(os,{size:16}),"My Requests"]})})]})]}),(0,on.jsxs)("div",{className:"p-6",children:["overview"===s&&(0,on.jsxs)(on.Fragment,{children:[(0,on.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[(0,on.jsx)("div",{className:"bg-emerald-50 rounded-xl p-6 border border-emerald-100",children:(0,on.jsxs)("div",{className:"flex items-center gap-4 mb-2",children:[(0,on.jsx)("div",{className:"p-3 bg-emerald-100 rounded-lg text-emerald-600",children:(0,on.jsx)(is,{size:24})}),(0,on.jsxs)("div",{children:[(0,on.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Total Spent"}),(0,on.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:u?"...":"\u20a6".concat(o.totalSpent.toLocaleString())})]})]})}),(0,on.jsx)("div",{className:"bg-blue-50 rounded-xl p-6 border border-blue-100",children:(0,on.jsxs)("div",{className:"flex items-center gap-4 mb-2",children:[(0,on.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg text-blue-600",children:(0,on.jsx)(cs,{size:24})}),(0,on.jsxs)("div",{children:[(0,on.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Total Saved"}),(0,on.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:u?"...":"\u20a6".concat(o.totalSaved.toLocaleString())}),(0,on.jsx)("span",{className:"text-xs text-blue-600 bg-blue-100 px-2 py-1 rounded inline-block mt-1",children:"Using Coupons"})]})]})}),(0,on.jsx)("div",{className:"bg-purple-50 rounded-xl p-6 border border-purple-100",children:(0,on.jsxs)("div",{className:"flex items-center gap-4 mb-2",children:[(0,on.jsx)("div",{className:"p-3 bg-purple-100 rounded-lg text-purple-600",children:(0,on.jsx)(ds,{size:24})}),(0,on.jsxs)("div",{children:[(0,on.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Total Orders"}),(0,on.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:u?"...":o.orderCount})]})]})})]}),(0,on.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,on.jsxs)("div",{className:"lg:col-span-2",children:[(0,on.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:"Recent Activity"}),(0,on.jsx)("div",{className:"bg-white border rounded-xl overflow-hidden",children:u?(0,on.jsx)("div",{className:"p-8 text-center text-gray-500",children:"Loading activity..."}):c.length>0?(0,on.jsx)("div",{className:"divide-y",children:c.map(e=>(0,on.jsxs)("div",{className:"p-4 flex items-center justify-between hover:bg-gray-50",children:[(0,on.jsxs)("div",{className:"flex items-center gap-3",children:[(0,on.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center ".concat("coupon"===e.type?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-600"),children:"coupon"===e.type?(0,on.jsx)(cs,{size:18}):(0,on.jsx)(is,{size:18})}),(0,on.jsxs)("div",{children:[(0,on.jsx)("p",{className:"font-medium text-gray-900",children:e.description}),(0,on.jsx)("p",{className:"text-xs text-gray-500",children:new Date(e.date).toLocaleDateString()})]})]}),(0,on.jsxs)("div",{className:"font-bold ".concat("coupon"===e.type?"text-green-600":"text-gray-900"),children:["coupon"===e.type?"+":"-","\u20a6",Math.abs(e.amount).toLocaleString()]})]},e.id))}):(0,on.jsx)("div",{className:"p-8 text-center text-gray-500",children:"No recent activity found."})})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Upgrade Account"}),(0,on.jsxs)("div",{className:"space-y-4",children:[(0,on.jsxs)("div",{className:"bg-gradient-to-br from-emerald-600 to-teal-700 rounded-xl p-5 text-white",children:[(0,on.jsx)("h4",{className:"font-bold mb-1",children:"Become a Seller"}),(0,on.jsx)("p",{className:"text-emerald-100 text-xs mb-3",children:"Sell your farm produce or products to thousands of customers."}),(0,on.jsx)("button",{className:"w-full py-2 bg-white text-emerald-700 rounded-lg text-sm font-bold hover:bg-emerald-50 transition",children:"Start Selling"})]}),(0,on.jsxs)("div",{className:"bg-gradient-to-br from-purple-600 to-indigo-700 rounded-xl p-5 text-white",children:[(0,on.jsx)("h4",{className:"font-bold mb-1",children:"Become an Agent"}),(0,on.jsx)("p",{className:"text-purple-100 text-xs mb-3",children:"Earn money by fulfilling orders and managing logistics."}),(0,on.jsx)("button",{className:"w-full py-2 bg-white text-purple-700 rounded-lg text-sm font-bold hover:bg-purple-50 transition",children:"Join as Agent"})]})]}),(0,on.jsx)("div",{className:"mt-6 bg-gray-50 p-4 rounded-xl border border-gray-200",children:(0,on.jsxs)("div",{className:"flex items-start gap-2",children:[(0,on.jsx)(us,{className:"text-gray-400 shrink-0 mt-0.5",size:16}),(0,on.jsxs)("p",{className:"text-xs text-gray-500",children:["Need help with your account? Visit our ",(0,on.jsx)("a",{href:"#",className:"text-emerald-600 hover:underline",children:"Help Center"})," or contact support."]})]})})]})]})]}),"requests"===s&&(0,on.jsx)("div",{children:x?(0,on.jsx)("div",{className:"text-center py-12 text-gray-500",children:"Loading your requests..."}):(0,on.jsx)(ls,{requests:p,onRefresh:g})})]})]})})},ps=e=>{let{onClose:t,onSuccess:r,token:a}=e;const[s,l]=(0,n.useState)(1),[o,i]=(0,n.useState)(!1),[c,d]=(0,n.useState)({first_name:"",last_name:"",phone:"",gender:"",date_of_birth:"",address:"",farm_size:"",farm_location:"",crops:"",headshot:""});return(0,on.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,on.jsxs)("div",{className:"bg-white rounded-xl max-w-lg w-full p-6",children:[(0,on.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,on.jsx)("h2",{className:"text-xl font-bold",children:"Register New Farmer"}),(0,on.jsx)("button",{onClick:t,children:"\u2715"})]}),(0,on.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),i(!0);try{const e=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/agent/farmers/register"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(c)});if(e.ok)alert("Farmer Registered Successfully!"),r();else{const t=await e.json();alert(t.detail||"Failed to register farmer")}}catch(e){console.error(e),alert("Error registering farmer")}finally{i(!1)}},className:"space-y-4",children:[(0,on.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,on.jsx)("input",{className:"border p-2 rounded",placeholder:"First Name",required:!0,value:c.first_name,onChange:e=>d(m(m({},c),{},{first_name:e.target.value}))}),(0,on.jsx)("input",{className:"border p-2 rounded",placeholder:"Last Name",required:!0,value:c.last_name,onChange:e=>d(m(m({},c),{},{last_name:e.target.value}))})]}),(0,on.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,on.jsx)("input",{className:"border p-2 rounded",placeholder:"Phone Number",required:!0,value:c.phone,onChange:e=>d(m(m({},c),{},{phone:e.target.value}))}),(0,on.jsxs)("select",{className:"border p-2 rounded",value:c.gender,onChange:e=>d(m(m({},c),{},{gender:e.target.value})),required:!0,children:[(0,on.jsx)("option",{value:"",children:"Gender"}),(0,on.jsx)("option",{value:"male",children:"Male"}),(0,on.jsx)("option",{value:"female",children:"Female"})]})]}),(0,on.jsx)("input",{type:"date",className:"border p-2 rounded w-full",required:!0,value:c.date_of_birth,onChange:e=>d(m(m({},c),{},{date_of_birth:e.target.value}))}),(0,on.jsxs)("div",{className:"space-y-3 pt-2",children:[(0,on.jsx)("h4",{className:"text-sm font-semibold text-gray-700",children:"Address Details"}),(0,on.jsx)("input",{className:"border p-2 rounded w-full",placeholder:"Address Number & Street Name",required:!0,value:c.address_street||"",onChange:e=>d(m(m({},c),{},{address_street:e.target.value}))}),(0,on.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,on.jsx)("input",{className:"border p-2 rounded",placeholder:"City / Town",required:!0,value:c.city||"",onChange:e=>d(m(m({},c),{},{city:e.target.value}))}),(0,on.jsxs)("select",{value:c.state||"",onChange:e=>d(m(m({},c),{},{state:e.target.value})),className:"border p-2 rounded",required:!0,children:[(0,on.jsx)("option",{value:"",children:"Select State"}),["Abia","Adamawa","Akwa Ibom","Anambra","Bauchi","Bayelsa","Benue","Borno","Cross River","Delta","Ebonyi","Edo","Ekiti","Enugu","FCT - Abuja","Gombe","Imo","Jigawa","Kaduna","Kano","Katsina","Kebbi","Kogi","Kwara","Lagos","Nasarawa","Niger","Ogun","Ondo","Osun","Oyo","Plateau","Rivers","Sokoto","Taraba","Yobe","Zamfara"].map(e=>(0,on.jsx)("option",{value:e,children:e},e))]})]}),(0,on.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,on.jsx)("input",{className:"border p-2 rounded",placeholder:"Landmark (Optional)",value:c.landmark||"",onChange:e=>d(m(m({},c),{},{landmark:e.target.value}))}),(0,on.jsx)("input",{className:"border p-2 rounded bg-gray-100 text-gray-500",value:"Nigeria",disabled:!0})]})]}),(0,on.jsx)("h3",{className:"font-bold text-gray-700 pt-2",children:"Farm Details"}),(0,on.jsx)("input",{className:"border p-2 rounded w-full",placeholder:"Farm Location (City/State)",required:!0,value:c.farm_location,onChange:e=>d(m(m({},c),{},{farm_location:e.target.value}))}),(0,on.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,on.jsx)("input",{className:"border p-2 rounded",placeholder:"Size (e.g. 5 acres)",required:!0,value:c.farm_size,onChange:e=>d(m(m({},c),{},{farm_size:e.target.value}))}),(0,on.jsx)("input",{className:"border p-2 rounded",placeholder:"Main Crops (e.g. Maize)",required:!0,value:c.crops,onChange:e=>d(m(m({},c),{},{crops:e.target.value}))})]}),(0,on.jsx)("button",{type:"submit",disabled:o,className:"w-full bg-purple-600 text-white py-3 rounded-lg font-bold hover:bg-purple-700 disabled:bg-gray-400",children:o?"Registering...":"Register Farmer"})]})]})})},hs={grains_cereals:{label:"Grains & Cereals",subcategories:["maize","rice","wheat","oat","barley","sorghum","millet","rye","triticale"]},beans_legumes:{label:"Beans & Legumes",subcategories:["lentils","peas","beans","broad_beans","groundnut","soybeans"]},fish_meat:{label:"Fish & Meat",subcategories:["fresh_fish","dried_fish","poultry","beef","goat_mutton","pork","snails"]},spices_vegetables:{label:"Spices & Vegetables",subcategories:["leafy_vegetables","peppers","tomatoes","onions","ginger_garlic","herbs_spices","okra","cucumber"]},tubers_roots:{label:"Tubers & Roots",subcategories:["yam","cassava","sweet_potato","chinese_yam","taro","potato","carrots","turnips","parsnips","radish","celeriac","ginger","turmeric","beets","burdock_root"]},drinks_beverage:{label:"Drinks & Beverage",subcategories:["milk","chocolate_drinks","water","soft_drinks_carbonated","juices_smoothies","hot_beverage","energy_drinks","health_drinks","dairy_plant_based","cordials_squash"]},snacks_confectionaries:{label:"Snacks & Confectionaries",subcategories:["chocolates","candy_gummy","chips_crisps","pretzels_crackers","popcorn","nuts_seeds","dried_fruits_trail_mix","granola_energy_bars","cookies_biscuits","snack_cakes_pastries"]},sweets_sugar:{label:"Sweets & Sugar",subcategories:["sugar","honey","dates","agave","artificial_sweetener","syrups"]},farm_inputs:{label:"Farm Inputs",subcategories:[]},flour_flakes:{label:"Flour & Flakes",subcategories:["all_purpose_flour","yam_flour","cassava_flakes_garri","cassava_flour","bread_flour","cake_flour","pastry_flour","whole_wheat","self_rising_flour","semolina_flour","nut_flour","coconut_flour","rice_flour","others"]},other:{label:"Other",subcategories:[]}},xs=["white","brown","green","red","yellow","silver","black","grey","ash"],fs=e=>{var t,r;let{onClose:a,onSuccess:s,token:l}=e;const[o,i]=(0,n.useState)({title:"",description:"",category:"grains_cereals",subcategory:"",processing_level:"unprocessed",price_per_unit:"",unit:"kg",quantity:"",location:"",city:"",pickup_address:"",country:"Nigeria",colors:[],seller_delivery_fee:0,seller_delivery_fee:0,images:[],farmer_id:"",min_order_quantity:1,is_preorder:!1,preorder_deadline:"",target_quantity:""}),[c,d]=(0,n.useState)(!1),[u,p]=(0,n.useState)(!1),[h,x]=(0,n.useState)([]);n.useEffect(()=>{(async()=>{try{const e=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/agent/farmers"),{headers:{Authorization:"Bearer ".concat(l)}});if(e.ok){const t=await e.json();x(t.farmers||[])}}catch(Js){console.error("Failed to fetch farmers for dropdown",Js)}})()},[l]);return(0,on.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 overflow-y-auto",children:(0,on.jsxs)("div",{className:"bg-white rounded-xl max-w-2xl w-full p-6 my-8",children:[(0,on.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,on.jsx)("h2",{className:"text-xl font-bold",children:"Add New Product"}),(0,on.jsx)("button",{onClick:a,className:"text-gray-500 hover:text-gray-700",children:"\u2715"})]}),(0,on.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),d(!0);try{const e=m(m({},o),{},{type:o.is_preorder?"preorder":"standard",unit_of_measure:o.unit,quantity_available:parseInt(o.quantity)||0,minimum_order_quantity:parseInt(o.min_order_quantity)||1,colors:o.colors}),t=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/products"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(e)});if(t.ok)alert("Product added successfully!"),s();else{const e=await t.json();alert(e.detail||"Failed to add product")}}catch(t){console.error(t),alert("Error creating product")}finally{d(!1)}},className:"space-y-4",children:[h.length>0&&(0,on.jsxs)("div",{className:"bg-emerald-50 p-3 rounded-lg border border-emerald-200",children:[(0,on.jsx)("label",{className:"block text-sm font-bold text-emerald-800 mb-1",children:"Post on behalf of Farmer"}),(0,on.jsxs)("select",{className:"w-full border rounded p-2",value:o.farmer_id,onChange:e=>{const t=e.target.value,r=h.find(e=>e.id===t);i(e=>m(m({},e),{},{farmer_id:t,location:(null===r||void 0===r?void 0:r.state)||e.location,city:(null===r||void 0===r?void 0:r.city)||e.city,pickup_address:(null===r||void 0===r?void 0:r.address)||e.pickup_address}))},children:[(0,on.jsx)("option",{value:"",children:"Select Farmer (Optional - you are seller)"}),h.map(e=>(0,on.jsxs)("option",{value:e.id,children:[e.first_name," ",e.last_name," (",e.location||"No Loc",")"]},e.id))]}),(0,on.jsx)("p",{className:"text-xs text-emerald-600 mt-1",children:"If selected, sales will be recorded against this farmer."})]}),(0,on.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Product Title"}),(0,on.jsx)("input",{type:"text",required:!0,className:"w-full border rounded p-2",value:o.title,onChange:e=>i(m(m({},o),{},{title:e.target.value})),placeholder:"e.g. Fresh Red Tomatoes"})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),(0,on.jsx)("select",{className:"w-full border rounded p-2",value:o.category,onChange:e=>i(m(m({},o),{},{category:e.target.value,subcategory:""})),children:Object.entries(hs).map(e=>{let[t,r]=e;return(0,on.jsx)("option",{value:t,children:r.label},t)})})]}),(null===(t=hs[o.category])||void 0===t||null===(r=t.subcategories)||void 0===r?void 0:r.length)>0&&(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Subcategory"}),(0,on.jsxs)("select",{required:!0,className:"w-full border rounded p-2",value:o.subcategory,onChange:e=>i(m(m({},o),{},{subcategory:e.target.value})),children:[(0,on.jsx)("option",{value:"",children:"Select Subcategory"}),hs[o.category].subcategories.map(e=>{return(0,on.jsx)("option",{value:e,children:(t=e,t.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()))},e);var t})]})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Nutritional Mode"}),(0,on.jsxs)("select",{className:"w-full border rounded p-2",value:o.processing_level,onChange:e=>i(m(m({},o),{},{processing_level:e.target.value})),children:[(0,on.jsx)("option",{value:"unprocessed",children:"Unprocessed"}),(0,on.jsx)("option",{value:"processed",children:"Processed"}),(0,on.jsx)("option",{value:"ultraprocessed",children:"Ultra-processed"})]})]})]}),(0,on.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,on.jsxs)("div",{className:"col-span-2",children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Price (\u20a6)"}),(0,on.jsx)("input",{type:"number",required:!0,className:"w-full border rounded p-2",value:o.price_per_unit,onChange:e=>i(m(m({},o),{},{price_per_unit:e.target.value}))})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Quantity"}),(0,on.jsx)("input",{type:"number",required:!0,className:"w-full border rounded p-2",value:o.quantity,onChange:e=>i(m(m({},o),{},{quantity:e.target.value}))})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Unit"}),(0,on.jsxs)("select",{className:"w-full border rounded p-2",value:o.unit,onChange:e=>i(m(m({},o),{},{unit:e.target.value})),children:[(0,on.jsx)("option",{value:"kg",children:"kg"}),(0,on.jsx)("option",{value:"bag",children:"bag"}),(0,on.jsx)("option",{value:"litre",children:"litre"}),(0,on.jsx)("option",{value:"basket",children:"basket"}),(0,on.jsx)("option",{value:"crate",children:"crate"})]})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Min. Order Qty"}),(0,on.jsx)("input",{type:"number",min:"1",className:"w-full border rounded p-2",value:o.min_order_quantity,onChange:e=>i(m(m({},o),{},{min_order_quantity:e.target.value})),placeholder:"Default: 1"})]})]}),(0,on.jsxs)("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200",children:[(0,on.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,on.jsx)("input",{type:"checkbox",id:"is_preorder",checked:o.is_preorder,onChange:e=>i(m(m({},o),{},{is_preorder:e.target.checked})),className:"w-4 h-4 text-orange-600 rounded"}),(0,on.jsx)("label",{htmlFor:"is_preorder",className:"font-bold text-orange-800",children:"Enable Pre-order / Group Buy"})]}),o.is_preorder&&(0,on.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Target Quantity"}),(0,on.jsx)("input",{type:"number",className:"w-full border rounded p-2",value:o.target_quantity,onChange:e=>i(m(m({},o),{},{target_quantity:e.target.value})),placeholder:"Goal to reach"})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Deadline"}),(0,on.jsx)("input",{type:"date",className:"w-full border rounded p-2",value:o.preorder_deadline,onChange:e=>i(m(m({},o),{},{preorder_deadline:e.target.value}))})]})]})]}),(0,on.jsxs)("div",{className:"border border-gray-200 p-4 rounded-lg",children:[(0,on.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Available Colors (Optional)"}),(0,on.jsx)("p",{className:"text-xs text-gray-500 mb-3",children:"Select one or multiple colors if applicable to your product."}),(0,on.jsx)("div",{className:"flex flex-wrap gap-3",children:xs.map(e=>(0,on.jsxs)("label",{className:"flex items-center gap-2 text-sm bg-gray-50 px-3 py-2 rounded-lg border cursor-pointer hover:bg-gray-100 transition-colors",children:[(0,on.jsx)("input",{type:"checkbox",checked:o.colors.includes(e),onChange:t=>{t.target.checked?i(m(m({},o),{},{colors:[...o.colors,e]})):i(m(m({},o),{},{colors:o.colors.filter(t=>t!==e)}))},className:"rounded text-emerald-600 focus:ring-emerald-500 w-4 h-4"}),e.charAt(0).toUpperCase()+e.slice(1)]},e))})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Images"}),(0,on.jsxs)("div",{className:"flex flex-wrap gap-2 mb-2",children:[o.images.map((e,t)=>(0,on.jsxs)("div",{className:"relative w-20 h-20 border rounded overflow-hidden",children:[(0,on.jsx)("img",{src:e,alt:"Product",className:"w-full h-full object-cover"}),(0,on.jsx)("button",{type:"button",onClick:()=>{return e=t,void i(t=>m(m({},t),{},{images:t.images.filter((t,r)=>r!==e)}));var e},className:"absolute top-0 right-0 bg-red-500 text-white rounded-bl p-1 text-xs",children:"\u2715"})]},t)),(0,on.jsx)("div",{className:"w-20 h-20 border-2 border-dashed border-gray-300 rounded flex items-center justify-center relative hover:bg-gray-50",children:u?(0,on.jsx)("span",{className:"text-xs text-gray-500",children:"Uploading..."}):(0,on.jsxs)(on.Fragment,{children:[(0,on.jsx)("span",{className:"text-2xl text-gray-400",children:"+"}),(0,on.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:async e=>{const t=Array.from(e.target.files);p(!0);try{const e=[];for(const r of t){const t=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/upload/sign"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify({folder:"products",filename:r.name,contentType:r.type})});if(!t.ok)throw new Error("Failed to get upload signature");const{uploadUrl:a,publicUrl:n}=await t.json();if(!(await fetch(a,{method:"PUT",headers:{"Content-Type":r.type},body:r})).ok)throw new Error("Failed to upload image");e.push(n)}i(t=>m(m({},t),{},{images:[...t.images,...e]}))}catch(r){console.error("Upload error:",r),alert("Failed to upload image(s)")}finally{p(!1)}},className:"absolute inset-0 opacity-0 cursor-pointer"})]})})]}),(0,on.jsx)("p",{className:"text-xs text-gray-500 mb-4",children:"First image will be the cover photo."})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,on.jsx)("textarea",{required:!0,className:"w-full border rounded p-2 h-24",value:o.description,onChange:e=>i(m(m({},o),{},{description:e.target.value})),placeholder:"Describe your product freshness, quality, etc."})]}),(0,on.jsxs)("div",{className:"border-t pt-4",children:[(0,on.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Product Location"}),(0,on.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Country"}),(0,on.jsx)("input",{type:"text",value:"Nigeria",disabled:!0,className:"w-full border rounded p-2 bg-gray-100 text-gray-500"})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"State"}),(0,on.jsxs)("select",{required:!0,className:"w-full border rounded p-2",value:o.location,onChange:e=>i(m(m({},o),{},{location:e.target.value})),children:[(0,on.jsx)("option",{value:"",children:"Select State"}),wn.map(e=>(0,on.jsx)("option",{value:e,children:e},e))]})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"City/LGA"}),(0,on.jsx)("input",{type:"text",required:!0,className:"w-full border rounded p-2",value:o.city,onChange:e=>i(m(m({},o),{},{city:e.target.value})),placeholder:"e.g. Ikeja"})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Pickup Address (Optional)"}),(0,on.jsx)("input",{type:"text",className:"w-full border rounded p-2",value:o.pickup_address,onChange:e=>i(m(m({},o),{},{pickup_address:e.target.value})),placeholder:"e.g. 15 Farm Road"})]})]})]}),(0,on.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[(0,on.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded",children:"Cancel"}),(0,on.jsx)("button",{type:"submit",disabled:c,className:"px-6 py-2 bg-emerald-600 text-white rounded hover:bg-emerald-700 disabled:opacity-50",children:c?"Posting...":"Post Product"})]})]})]})})},gs=e=>{let{active:t,onClick:r,label:a}=e;return(0,on.jsx)("button",{onClick:r,className:"px-6 py-4 font-medium text-sm transition-colors border-b-2 ".concat(t?"border-emerald-600 text-emerald-700 bg-emerald-50":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50"),children:a})},ys=[{code:"044",name:"Access Bank"},{code:"023",name:"Citibank"},{code:"050",name:"Ecobank Nigeria"},{code:"070",name:"Fidelity Bank"},{code:"011",name:"First Bank of Nigeria"},{code:"214",name:"First City Monument Bank"},{code:"058",name:"Guaranty Trust Bank"},{code:"030",name:"Heritage Bank"},{code:"301",name:"Jaiz Bank"},{code:"082",name:"Keystone Bank"},{code:"014",name:"Mainstreet Bank"},{code:"076",name:"Skye Bank"},{code:"221",name:"Stanbic IBTC Bank"},{code:"068",name:"Standard Chartered Bank"},{code:"232",name:"Sterling Bank"},{code:"032",name:"Union Bank of Nigeria"},{code:"033",name:"United Bank for Africa"},{code:"215",name:"Unity Bank"},{code:"035",name:"Wema Bank"},{code:"057",name:"Zenith Bank"}],bs=e=>{var t;let{user:r,token:a}=e;const[s,l]=(0,n.useState)({business_name:(null===r||void 0===r?void 0:r.business_name)||"",bank_code:"",account_number:""}),[o,i]=(0,n.useState)(!1),[c,d]=(0,n.useState)(null);(0,n.useEffect)(()=>{u()},[]);const u=async()=>{try{const e=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/payment/subaccount/").concat(r.id),{headers:{Authorization:"Bearer ".concat(a)}});if(e.ok){const t=await e.json();d(t),t.bank_details&&l(e=>m(m({},e),{},{business_name:t.bank_details.business_name||e.business_name,bank_code:t.bank_details.bank_code||""}))}}catch(Js){console.error(Js)}};return(0,on.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,on.jsxs)("div",{className:"bg-white rounded-xl border p-6 mb-6",children:[(0,on.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Payout Account Settings"}),(0,on.jsxs)("p",{className:"text-gray-500 mb-6 font-medium",children:["Please provide your bank details to receive payments.",(0,on.jsx)("span",{className:"block text-xs mt-1 text-emerald-600",children:"\ud83d\udd12 Your details are sent securely to our payment partner (Paystack) and are not stored in plain text."})]}),c&&c.bank_details&&(0,on.jsxs)("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-4 mb-6 flex items-start gap-3",children:[(0,on.jsx)("div",{className:"text-2xl",children:"\u2705"}),(0,on.jsxs)("div",{children:[(0,on.jsx)("h3",{className:"font-bold text-emerald-900",children:"Active Payout Account"}),(0,on.jsxs)("p",{className:"text-emerald-800 text-sm",children:[c.bank_details.business_name,(0,on.jsx)("br",{}),(null===(t=ys.find(e=>e.code===c.bank_details.bank_code))||void 0===t?void 0:t.name)||c.bank_details.bank_code," \u2022 ",c.bank_details.account_number]})]})]}),(0,on.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),i(!0);try{const e=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/payment/subaccount"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(s)});if(e.ok)alert("Account details updated successfully!"),u();else{const t=await e.json();alert(t.detail||"Failed to update account")}}catch(e){console.error(e),alert("Error updating account")}finally{i(!1)}},className:"space-y-4",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Business / Account Name"}),(0,on.jsx)("input",{type:"text",required:!0,className:"w-full border rounded-lg p-3",value:s.business_name,onChange:e=>l(m(m({},s),{},{business_name:e.target.value})),placeholder:"e.g. My Farm Ventures"})]}),(0,on.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Bank Name"}),(0,on.jsxs)("select",{required:!0,className:"w-full border rounded-lg p-3",value:s.bank_code,onChange:e=>l(m(m({},s),{},{bank_code:e.target.value})),children:[(0,on.jsx)("option",{value:"",children:"Select Bank"}),ys.map(e=>(0,on.jsx)("option",{value:e.code,children:e.name},e.code))]})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Account Number"}),(0,on.jsx)("input",{type:"text",required:!0,maxLength:"10",pattern:"\\d{10}",className:"w-full border rounded-lg p-3",value:s.account_number,onChange:e=>l(m(m({},s),{},{account_number:e.target.value.replace(/\D/g,"")})),placeholder:"10-digit Account Number"})]})]}),(0,on.jsx)("button",{type:"submit",disabled:o,className:"w-full bg-emerald-600 text-white font-bold py-3 rounded-lg hover:bg-emerald-700 transition disabled:opacity-50",children:o?"Verifying & Saving...":"Save Bank Details"})]})]})})},vs=e=>{let{title:t,value:r,subtitle:a,icon:n,color:s}=e;return(0,on.jsxs)("div",{className:"bg-white border rounded-xl p-5 shadow-sm flex items-center gap-4",children:[(0,on.jsx)("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center text-2xl ".concat(s),children:n}),(0,on.jsxs)("div",{children:[(0,on.jsx)("p",{className:"text-sm text-gray-500 font-medium",children:t}),(0,on.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:r}),(0,on.jsx)("p",{className:"text-xs text-gray-400",children:a})]})]})},js=e=>{let{order:t,onUpdate:r}=e;const[a,s]=(0,n.useState)(t.delivery_status||"pending");return(0,on.jsxs)("div",{className:"border rounded-lg p-4 flex flex-col md:flex-row justify-between gap-4",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("div",{className:"flex items-center gap-2 mb-1",children:(0,on.jsxs)("span",{className:"font-mono text-xs text-gray-500",children:["#",t.order_id]})}),(0,on.jsxs)("h4",{className:"font-bold",children:[t.product_details.name," (x",t.quantity,")"]}),(0,on.jsxs)("p",{className:"text-sm text-gray-600",children:["To: ",t.buyer_username," \u2022 ",t.shipping_address||"Drop-off"]})]}),(0,on.jsx)("div",{className:"flex items-center gap-2",children:(0,on.jsxs)("select",{value:a,onChange:e=>{s(e.target.value),r(t.order_id,e.target.value,t.delivery_notes,t.buyer_username)},className:"border rounded p-2 text-sm bg-gray-50",children:[(0,on.jsx)("option",{value:"pending",children:"\u23f3 Pending"}),(0,on.jsx)("option",{value:"ready_for_pickup",children:"\ud83d\udce6 Ready for Pickup"}),(0,on.jsx)("option",{value:"out_for_delivery",children:"\ud83d\ude9a Out for Delivery"}),(0,on.jsx)("option",{value:"delivered",children:"\u2705 Delivered"})]})})]})},ws=e=>{var t,r,a,s,l,o,i,c;let{user:d,token:u,onOpenChat:m}=e;const[p,h]=(0,n.useState)("overview"),[x,f]=(0,n.useState)(null),[g,y]=(0,n.useState)([]),[b,v]=(0,n.useState)([]),[j,w]=(0,n.useState)([]),[N,_]=(0,n.useState)([]),[k,S]=(0,n.useState)(!0),[C,E]=(0,n.useState)(!1),[P,R]=(0,n.useState)(null),[T,L]=(0,n.useState)(null),[D,A]=(0,n.useState)(!1);(0,n.useEffect)(()=>{O()},[p]);const O=async()=>{S(!0);try{if("overview"===p&&!x){const e=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/seller/dashboard/analytics"),{headers:{Authorization:"Bearer ".concat(u)}});e.ok&&f(await e.json())}if("farmers"===p&&"agent"===d.role){const e=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/agent/farmers"),{headers:{Authorization:"Bearer ".concat(u)}});if(e.ok){const t=await e.json();y(t.farmers||[])}}if("deliveries"===p){const e=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/agent/deliveries"),{headers:{Authorization:"Bearer ".concat(u)}});if(e.ok){const t=await e.json();v(t.orders||[])}}if("requests"===p){const e=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/requests/my-requests"),{headers:{Authorization:"Bearer ".concat(u)}});if(e.ok){const t=await e.json();w(Array.isArray(t)?t:t.requests||[])}}if("quotations"===p){const e=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/requests/my-offers"),{headers:{Authorization:"Bearer ".concat(u)}});if(e.ok){const t=await e.json();_(Array.isArray(t)?t:t.offers||[])}}}catch(Js){console.error("Dashboard fetch error:",Js)}finally{S(!1)}},z=async(e,t,r,a)=>{try{const n=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/delivery/status"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)},body:JSON.stringify({order_id:e,status:t,notes:r})});if(n.ok){const e=await n.json();"verification_pending"===e.status?(R(e.delivery_code),L(a),A(!0)):alert("Status updated!");const t=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/agent/deliveries"),{headers:{Authorization:"Bearer ".concat(u)}}),r=await t.json();v(r.orders||[])}else alert("Failed to update status")}catch(n){console.error(n),alert("Error updating status")}},[F,M]=(0,n.useState)(!1);return(0,on.jsx)("div",{className:"min-h-screen bg-gray-50 p-4 md:p-8",children:(0,on.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,on.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),(0,on.jsxs)("p",{className:"text-gray-500 capitalize",children:[d.role," Control Center \u2022 @",d.username]})]}),(0,on.jsxs)("div",{className:"flex gap-2",children:["agent"===d.role&&"farmers"===p&&(0,on.jsx)("button",{onClick:()=>M(!0),className:"bg-purple-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-purple-700",children:"+ Register Farmer"}),(0,on.jsx)("button",{onClick:()=>E(!0),className:"bg-emerald-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-emerald-700",children:"+ Add Product"})]})]}),(0,on.jsxs)("div",{className:"flex border-b bg-white rounded-t-lg px-4 overflow-x-auto",children:[(0,on.jsx)(gs,{active:"overview"===p,onClick:()=>h("overview"),label:"\ud83d\udcca Overview"}),"agent"===d.role&&(0,on.jsx)(gs,{active:"farmers"===p,onClick:()=>h("farmers"),label:"\ud83d\udc68\u200d\ud83c\udf3e My Farmers"}),(0,on.jsx)(gs,{active:"deliveries"===p,onClick:()=>h("deliveries"),label:"\ud83d\udce6 Deliveries"}),(0,on.jsx)(gs,{active:"inventory"===p,onClick:()=>h("inventory"),label:"\ud83d\udccb Inventory"}),(0,on.jsx)(gs,{active:"requests"===p,onClick:()=>h("requests"),label:"\ud83d\udccb My Requests"}),(0,on.jsx)(gs,{active:"quotations"===p,onClick:()=>h("quotations"),label:"\ud83e\udd1d Sent Quotations"}),(0,on.jsx)(gs,{active:"wallet"===p,onClick:()=>h("wallet"),label:"\ud83d\udcb0 My Earnings"}),(0,on.jsx)(gs,{active:"account"===p,onClick:()=>h("account"),label:"\ud83c\udfe6 Account Settings"})]}),(0,on.jsxs)("div",{className:"bg-white rounded-b-lg shadow-sm p-6 min-h-[500px]",children:[k&&(0,on.jsx)("div",{className:"text-center py-12 text-gray-500",children:"Loading data..."}),!k&&"overview"===p&&x&&(0,on.jsxs)("div",{className:"space-y-8",children:[(0,on.jsxs)("div",{className:"p-4 rounded-lg flex justify-between items-center ".concat("verified"===d.verification_status?"bg-emerald-50 border border-emerald-200":"pending"===d.verification_status?"bg-yellow-50 border border-yellow-200":"rejected"===d.verification_status?"bg-red-50 border border-red-200":"bg-gray-50 border border-gray-200"),children:[(0,on.jsxs)("div",{className:"flex items-center gap-3",children:[(0,on.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-xl ".concat("verified"===d.verification_status?"bg-emerald-100 text-emerald-600":"pending"===d.verification_status?"bg-yellow-100 text-yellow-600":"rejected"===d.verification_status?"bg-red-100 text-red-600":"bg-gray-200 text-gray-500"),children:"verified"===d.verification_status?"\u2713":"pending"===d.verification_status?"\u23f3":"rejected"===d.verification_status?"\u2715":"?"}),(0,on.jsxs)("div",{children:[(0,on.jsxs)("h3",{className:"font-bold ".concat("verified"===d.verification_status?"text-emerald-900":"pending"===d.verification_status?"text-yellow-900":"rejected"===d.verification_status?"text-red-900":"text-gray-900"),children:["Account Status: ",d.verification_status?d.verification_status.charAt(0).toUpperCase()+d.verification_status.slice(1):"Unverified"]}),"rejected"===d.verification_status&&d.verification_note&&(0,on.jsxs)("p",{className:"text-sm text-red-700 mt-1",children:["Reason: ",d.verification_note]}),"pending"===d.verification_status&&(0,on.jsx)("p",{className:"text-sm text-yellow-700",children:"Your documents are currently under review. This usually takes 24-48 hours."})]})]}),"rejected"===d.verification_status&&(0,on.jsx)("button",{onClick:()=>window.location.href="/register?mode=resubmit",className:"bg-red-600 text-white px-4 py-2 rounded-lg font-bold hover:bg-red-700",children:"Resubmit KYC"})]}),(0,on.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,on.jsx)(vs,{title:"Total Revenue",value:"\u20a6".concat((null===(t=x.revenue)||void 0===t||null===(r=t.total_revenue)||void 0===r?void 0:r.toLocaleString())||0),subtitle:"Lifetime Earnings",icon:"\ud83d\udcb0",color:"bg-emerald-100 text-emerald-800"}),(0,on.jsx)(vs,{title:"Total Orders",value:(null===(a=x.orders)||void 0===a?void 0:a.total_orders)||0,subtitle:"".concat((null===(s=x.orders)||void 0===s?void 0:s.completed_orders)||0," completed"),icon:"\ud83d\udecd\ufe0f",color:"bg-blue-100 text-blue-800"}),(0,on.jsx)(vs,{title:"Pending Revenue",value:"\u20a6".concat((null===(l=x.revenue)||void 0===l||null===(o=l.pending_revenue)||void 0===o?void 0:o.toLocaleString())||0),subtitle:"In processing",icon:"\u23f3",color:"bg-orange-100 text-orange-800"})]}),(0,on.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:(0,on.jsxs)("div",{className:"border rounded-xl p-4",children:[(0,on.jsx)("h3",{className:"font-bold text-gray-800 mb-4",children:"Recent Sales"}),(null===(i=x.revenue)||void 0===i||null===(c=i.daily_sales)||void 0===c?void 0:c.length)>0?(0,on.jsx)("div",{className:"h-40 flex items-end gap-2",children:x.revenue.daily_sales.slice(-7).map((e,t)=>(0,on.jsxs)("div",{className:"flex-1 bg-emerald-100 rounded-t relative group",children:[(0,on.jsx)("div",{className:"absolute bottom-0 w-full bg-emerald-500 rounded-t transition-all",style:{height:"".concat(e.daily_total/(Math.max(...x.revenue.daily_sales.map(e=>e.daily_total))||1)*100,"%")}}),(0,on.jsx)("div",{className:"absolute -bottom-6 w-full text-center text-xs text-gray-500",children:new Date(e._id).getDate()})]},t))}):(0,on.jsx)("div",{className:"text-center py-10 text-gray-400",children:"No sales data yet"})]})})]}),!k&&"farmers"===p&&(0,on.jsxs)("div",{children:[(0,on.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,on.jsx)("h2",{className:"text-xl font-bold",children:"Managed Farmers"})}),(0,on.jsxs)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[g.map(e=>{var t;return(0,on.jsxs)("div",{className:"border rounded-lg p-4 flex gap-4 items-center hover:bg-gray-50 transition",children:[(0,on.jsx)("div",{className:"w-12 h-12 rounded-full bg-gray-200 flex items-center justify-center font-bold text-gray-600 text-lg",children:(null===(t=e.first_name)||void 0===t?void 0:t[0])||"F"}),(0,on.jsxs)("div",{children:[(0,on.jsxs)("h3",{className:"font-bold text-gray-900",children:[e.first_name," ",e.last_name]}),(0,on.jsxs)("p",{className:"text-sm text-gray-500",children:["@",e.username]}),(0,on.jsxs)("div",{className:"flex gap-3 mt-1 text-xs text-gray-600",children:[(0,on.jsxs)("span",{children:["\ud83d\udce6 ",e.product_count," Products"]}),(0,on.jsxs)("span",{children:["\ud83d\udcb0 \u20a6",e.total_sales.toLocaleString()," Sales"]})]})]})]},e.id)}),0===g.length&&(0,on.jsx)("div",{className:"col-span-full text-center py-12 text-gray-400",children:'No farmers registered yet. Click "Register Farmer" to add one.'})]})]}),!k&&"deliveries"===p&&(0,on.jsxs)("div",{className:"space-y-4",children:[b.map(e=>(0,on.jsx)(js,{order:e,onUpdate:z},e.order_id)),0===b.length&&(0,on.jsx)("div",{className:"text-center py-12 text-gray-400",children:"No active delivery tasks."})]}),!k&&"inventory"===p&&(0,on.jsx)("div",{className:"text-center py-12 text-gray-400",children:(0,on.jsx)("p",{children:"Manage your inventory and products here."})}),!k&&"requests"===p&&(0,on.jsxs)("div",{className:"bg-white p-4 rounded-lg",children:[(0,on.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,on.jsx)("h3",{className:"text-xl font-bold",children:"My Buyer Requests"}),(0,on.jsx)("button",{onClick:()=>{window.openRequestWizard&&window.openRequestWizard()},className:"bg-purple-600 text-white px-4 py-2 rounded-lg font-bold hover:bg-purple-700 transition",children:"+ Create Request (Bulk Buy)"})]}),(0,on.jsx)(ls,{requests:j,onRefresh:O})]}),!k&&"quotations"===p&&(0,on.jsxs)("div",{className:"bg-white p-4 rounded-lg",children:[(0,on.jsx)("h3",{className:"text-xl font-bold mb-6",children:"Sent Quotations"}),0===N.length?(0,on.jsx)("p",{className:"text-gray-500 text-center py-8",children:"You haven't submitted any quotations yet."}):(0,on.jsx)("div",{className:"space-y-4",children:N.map(e=>{var t;return(0,on.jsxs)("div",{className:"border p-4 rounded-lg",children:[(0,on.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,on.jsxs)("div",{children:[(0,on.jsxs)("h4",{className:"font-bold",children:["Request ID: ",e.request_id]}),(0,on.jsxs)("p",{className:"text-sm text-gray-500",children:["Date: ",new Date(e.created_at).toLocaleDateString()]})]}),(0,on.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-bold ".concat("accepted"===e.status?"bg-green-100 text-green-800":"rejected"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:e.status.toUpperCase()})]}),(0,on.jsxs)("div",{className:"mt-2",children:[(0,on.jsxs)("p",{className:"font-bold text-lg text-emerald-600",children:["\u20a6",null===(t=e.price)||void 0===t?void 0:t.toLocaleString()]}),e.notes&&(0,on.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:['"',e.notes,'"']})]})]},e.id)})})]}),!k&&"account"===p&&(0,on.jsx)(bs,{user:d,token:u})]}),C&&(0,on.jsx)(fs,{onClose:()=>E(!1),onSuccess:()=>{E(!1),O()},token:u}),F&&(0,on.jsx)(ps,{onClose:()=>M(!1),onSuccess:()=>{M(!1),O()},token:u}),D&&(0,on.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-60",children:(0,on.jsxs)("div",{className:"bg-white rounded-xl max-w-sm w-full p-6 text-center",children:[(0,on.jsx)("h3",{className:"text-xl font-bold mb-2",children:"Secure Delivery Code"}),(0,on.jsx)("p",{className:"text-gray-600 mb-4",children:"Share this code with the buyer to confirm delivery."}),(0,on.jsx)("div",{className:"text-4xl font-mono font-bold text-emerald-600 tracking-wider mb-6 bg-emerald-50 py-4 rounded-lg border border-emerald-100",children:P}),(0,on.jsxs)("div",{className:"flex gap-2",children:[(0,on.jsx)("button",{onClick:()=>{A(!1)},className:"flex-1 bg-gray-100 text-gray-700 py-2 rounded-lg hover:bg-gray-200",children:"Close"}),m&&(0,on.jsx)("button",{onClick:()=>{m(T,"Hello, I have delivered your order. Please confirm receipt using this code: ".concat(P)),A(!1)},className:"flex-1 bg-emerald-600 text-white py-2 rounded-lg hover:bg-emerald-700 font-bold flex items-center justify-center gap-2",children:(0,on.jsx)("span",{children:"\ud83d\udcac Share Code"})})]})]})})]})})},Ns=()=>(0,on.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,on.jsx)("path",{d:"M9.25 8V5.25H6.5V3.75H9.25V1H10.75V3.75H13.5V5.25H10.75V8H9.25ZM5.49563 18C5.08188 18 4.72917 17.8527 4.4375 17.5581C4.14583 17.2635 4 16.9094 4 16.4956C4 16.0819 4.14729 15.7292 4.44188 15.4375C4.73646 15.1458 5.09062 15 5.50437 15C5.91813 15 6.27083 15.1473 6.5625 15.4419C6.85417 15.7365 7 16.0906 7 16.5044C7 16.9181 6.85271 17.2708 6.55813 17.5625C6.26354 17.8542 5.90938 18 5.49563 18ZM14.4956 18C14.0819 18 13.7292 17.8527 13.4375 17.5581C13.1458 17.2635 13 16.9094 13 16.4956C13 16.0819 13.1473 15.7292 13.4419 15.4375C13.7365 15.1458 14.0906 15 14.5044 15C14.9181 15 15.2708 15.1473 15.5625 15.4419C15.8542 15.7365 16 16.0906 16 16.5044C16 16.9181 15.8527 17.2708 15.5581 17.5625C15.2635 17.8542 14.9094 18 14.4956 18ZM1 3.5V2H3.77083L7 9.5H13.2708L15.625 4H17.25L14.6458 10.0833C14.5208 10.3611 14.3368 10.5833 14.0938 10.75C13.8507 10.9167 13.5764 11 13.2708 11H6.60417L5.72917 12.5H16V14H5.75C5.16667 14 4.72917 13.7465 4.4375 13.2396C4.14583 12.7326 4.14583 12.2361 4.4375 11.75L5.52083 9.875L2.79167 3.5H1Z",fill:"currentColor"})}),_s=()=>(0,on.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,on.jsx)("path",{d:"M5.75 16.5C5.0556 16.5 4.4653 16.2569 3.9792 15.7708C3.4931 15.2847 3.25 14.6944 3.25 14H1.5L2 12.5H3.75C3.9861 12.1944 4.2794 11.9514 4.63 11.7708C4.9804 11.5903 5.3538 11.5 5.75 11.5C6.1462 11.5 6.5196 11.5903 6.87 11.7708C7.2206 11.9514 7.5139 12.1944 7.75 12.5H11.8333L13.5833 5.5H4.5L4.6667 5C4.7778 4.69444 4.9618 4.45139 5.2188 4.27083C5.4757 4.09028 5.7639 4 6.0833 4H15.5L14.75 7H16.5L19 10.5L18 14H17C17 14.6944 16.7569 15.2847 16.2708 15.7708C15.7847 16.2569 15.1944 16.5 14.5 16.5C13.8056 16.5 13.2153 16.2569 12.7292 15.7708C12.2431 15.2847 12 14.6944 12 14H8.25C8.25 14.6944 8.0069 15.2847 7.5208 15.7708C7.0347 16.2569 6.4444 16.5 5.75 16.5ZM13.75 11H17.2917L17.3542 10.7708L15.7292 8.5H14.375L13.75 11ZM0.5 11.1667L0.875 9.66667H5L4.625 11.1667H0.5ZM2 8.33333L2.375 6.83333H7.25L6.875 8.33333H2ZM5.75 15C6.0333 15 6.2708 14.9042 6.4625 14.7125C6.6542 14.5208 6.75 14.2833 6.75 14C6.75 13.7167 6.6542 13.4792 6.4625 13.2875C6.2708 13.0958 6.0333 13 5.75 13C5.4667 13 5.2292 13.0958 5.0375 13.2875C4.8458 13.4792 4.75 13.7167 4.75 14C4.75 14.2833 4.8458 14.5208 4.0375 14.7125C5.2292 14.9042 5.4667 15 5.75 15ZM14.5 15C14.7833 15 15.0208 14.9042 15.2125 14.7125C15.4042 14.5208 15.5 14.2833 15.5 14C15.5 13.7167 15.4042 13.4792 15.2125 13.2875C15.0208 13.0958 14.7833 13 14.5 13C14.2167 13 13.9792 13.0958 13.7875 13.2875C13.5958 13.4792 13.5 13.7167 13.5 14C13.5 14.2833 13.5958 14.5208 13.7875 14.7125C13.9792 14.9042 14.2167 15 14.5 15Z",fill:"currentColor"})}),ks=()=>(0,on.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,on.jsx)("path",{d:"M18 18L15 15H7.5C7.0875 15 6.7344 14.8531 6.4406 14.5594C6.1469 14.2656 6 13.9125 6 13.5V12.5H14C14.4125 12.5 14.7656 12.3531 15.0594 12.0594C15.3531 11.7656 15.5 11.4125 15.5 11V6H16.5C16.9125 6 17.2656 6.14688 17.5594 6.44063C17.8531 6.73438 18 7.0875 18 7.5V18ZM3.5 10.375L4.375 9.5H12.5V3.5H3.5V10.375ZM2 14V3.5C2 3.0875 2.1469 2.73438 2.4406 2.44063C2.7344 2.14688 3.0875 2 3.5 2H12.5C12.9125 2 13.2656 2.14688 13.5594 2.44063C13.8531 2.73438 14 3.0875 14 3.5V9.5C14 9.9125 13.8531 10.2656 13.5594 10.5594C13.2656 10.8531 12.9125 11 12.5 11H5L2 14Z",fill:"currentColor"})}),Ss=()=>(0,on.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,on.jsx)("path",{d:"M4.938 14.0625C5.688 13.5347 6.49 13.1424 7.344 12.8854C8.198 12.6285 9.083 12.5 10 12.5C10.917 12.5 11.802 12.6285 12.656 12.8854C13.51 13.1424 14.312 13.5347 15.062 14.0625C15.549 13.4931 15.91 12.8611 16.146 12.1667C16.382 11.4722 16.5 10.75 16.5 10C16.5 8.19903 15.866 6.66542 14.599 5.39917C13.332 4.13305 11.798 3.5 9.995 3.5C8.193 3.5 6.66 4.13305 5.396 5.39917C4.132 6.66542 3.5 8.19903 3.5 10C3.5 10.75 3.618 11.4722 3.854 12.1667C4.09 12.8611 4.451 13.4931 4.938 14.0625ZM10 11.5C9.167 11.5 8.458 11.2083 7.875 10.625C7.292 10.0417 7 9.33333 7 8.5C7 7.66667 7.292 6.95833 7.875 6.375C8.458 5.79167 9.167 5.5 10 5.5C10.833 5.5 11.542 5.79167 12.125 6.375C12.708 6.95833 13 7.66667 13 8.5C13 9.33333 12.708 10.0417 12.125 10.625C11.542 11.2083 10.833 11.5 10 11.5ZM10.006 18C8.905 18 7.868 17.7917 6.896 17.375C5.924 16.9583 5.073 16.3854 4.344 15.6562C3.615 14.9271 3.042 14.0767 2.625 13.105C2.208 12.1333 2 11.0951 2 9.99042C2 8.88569 2.208 7.85069 2.625 6.88542C3.042 5.92014 3.615 5.07292 4.344 4.34375C5.073 3.61458 5.923 3.04167 6.895 2.625C7.867 2.20833 8.905 2 10.01 2C11.114 2 12.149 2.20833 13.115 2.625C14.08 3.04167 14.927 3.61458 15.656 4.34375C16.385 5.07292 16.958 5.92167 17.375 6.89C17.792 7.85847 18 8.89319 18 9.99417C18 11.0953 17.792 12.1319 17.375 13.1042C16.958 14.0764 16.385 14.9271 15.656 15.6562C14.927 16.3854 14.078 16.9583 13.11 17.375C12.142 17.7917 11.107 18 10.006 18ZM10 16.5C10.722 16.5 11.417 16.3854 12.083 16.1562C12.75 15.9271 13.375 15.5903 13.958 15.1458C13.361 14.7708 12.729 14.4861 12.062 14.2917C11.396 14.0972 10.708 14 10 14C9.292 14 8.601 14.0938 7.927 14.2812C7.253 14.4688 6.625 14.7569 6.042 15.1458C6.625 15.5903 7.25 15.9271 7.917 16.1562C8.583 16.3854 9.278 16.5 10 16.5ZM10 10C10.417 10 10.771 9.85417 11.062 9.5625C11.354 9.27083 11.5 8.91667 11.5 8.5C11.5 8.08333 11.354 7.72917 11.062 7.4375C10.771 7.14583 10.417 7 10 7C9.583 7 9.229 7.14583 8.938 7.4375C8.646 7.72917 8.5 8.08333 8.5 8.5C8.5 8.91667 8.646 9.27083 8.938 9.5625C9.229 9.85417 9.583 10 10 10Z",fill:"currentColor"})}),Cs=()=>(0,on.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,on.jsx)("path",{d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),Es=()=>(0,on.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,on.jsx)("path",{d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),Ps=()=>(0,on.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,on.jsx)("path",{d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),Rs=()=>(0,on.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,on.jsx)("path",{d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),Ts=()=>(0,on.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,on.jsx)("path",{d:"M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,on.jsx)("path",{d:"M13.73 21a2 2 0 01-3.46 0",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]});const Ls=function(){var e,t,r,a,s,l,o,i,c,d,u;const p="https://mvp-2-u8e9.onrender.com",[h,x]=(0,n.useState)(null),[f,g]=(0,n.useState)("home"),[y,b]=(0,n.useState)(!1),[v,j]=(0,n.useState)(!1),[w,N]=(0,n.useState)("login"),[_,k]=(0,n.useState)(!1),[S,C]=(0,n.useState)(!1),[E,P]=(0,n.useState)(!1),[R,T]=(0,n.useState)(null),[L,D]=(0,n.useState)([]),[A,O]=(0,n.useState)([]),[z,F]=(0,n.useState)([]),[M,B]=(0,n.useState)(!1),[I,q]=(0,n.useState)("pyexpress"),[U,H]=(0,n.useState)(""),[W,V]=(0,n.useState)(""),[Y,K]=(0,n.useState)(!1),[J,$]=(0,n.useState)("standard"),[G,Q]=(0,n.useState)("marketplace"),[Z,X]=(0,n.useState)([]),[ee,te]=(0,n.useState)(0),[re,ae]=(0,n.useState)(!1);(0,n.useEffect)(()=>{"/pyadmin"===window.location.pathname&&(h&&"admin"===h.role?qr(!0):h&&h.role)},[h]);const[ne,se]=(0,n.useState)(!1),[le,oe]=(0,n.useState)([]),[ie,ce]=(0,n.useState)(""),[de,ue]=(0,n.useState)(null),[me,pe]=(0,n.useState)([]),[he,xe]=(0,n.useState)(""),[fe,ge]=(0,n.useState)(!1),[ye,be]=(0,n.useState)(null),[ve,je]=(0,n.useState)(!1),[we,Ne]=(0,n.useState)(null),[_e,ke]=(0,n.useState)(null),[Se,Ce]=(0,n.useState)(!1),[Ee,Pe]=(0,n.useState)(!1),[Re,Te]=(0,n.useState)([]),[Le,De]=(0,n.useState)(0),[Ae,Oe]=(0,n.useState)(0),[ze,Fe]=(0,n.useState)(null),[Me,Be]=(0,n.useState)(""),[Ie,qe]=(0,n.useState)(!1),[Ue,He]=(0,n.useState)(!1),[We,Ve]=(0,n.useState)([]),[Ye,Ke]=(0,n.useState)(!1),[Je,$e]=(0,n.useState)(!1),[Ge,Qe]=(0,n.useState)(!1),[Ze,Xe]=(0,n.useState)(null),[et,tt]=(0,n.useState)(!1),[rt,at]=(0,n.useState)({}),[nt,st]=(0,n.useState)("dropoff"),[lt,ot]=(0,n.useState)(null),[it,ct]=(0,n.useState)({}),[dt,ut]=(0,n.useState)({}),[mt,pt]=(0,n.useState)(!1),[ht,xt]=(0,n.useState)([]),[ft,gt]=(0,n.useState)([]),[yt,bt]=(0,n.useState)(!1),[vt,jt]=(0,n.useState)({location:"",vehicle_type:"",min_rating:null}),[wt,Nt]=(0,n.useState)(!1),[_t,kt]=(0,n.useState)(null),[St,Ct]=(0,n.useState)([]),[Et,Pt]=(0,n.useState)([]),[Rt,Tt]=(0,n.useState)(!1),[Lt,Dt]=(0,n.useState)(!1),[At,Ot]=(0,n.useState)(!1),[zt,Ft]=(0,n.useState)(!1),[Mt,Bt]=(0,n.useState)([]),[It,qt]=(0,n.useState)(!1),[Ut,Ht]=(0,n.useState)(!1),[Wt,Vt]=(0,n.useState)(null),[Yt,Kt]=(0,n.useState)({}),[Jt,$t]=(0,n.useState)({}),[Gt,Qt]=(0,n.useState)([]),[Zt,Xt]=(0,n.useState)([]),[er,tr]=(0,n.useState)([]),[rr,ar]=(0,n.useState)(!1),[nr,sr]=(0,n.useState)(!1),[lr,or]=(0,n.useState)(null),[ir,cr]=(0,n.useState)(!1),[dr,ur]=(0,n.useState)([]),[mr,pr]=(0,n.useState)(!1),[hr,xr]=(0,n.useState)(!1),[fr,gr]=(0,n.useState)(null),[yr,br]=(0,n.useState)([]),[vr,jr]=(0,n.useState)([]),[wr,Nr]=(0,n.useState)(!1),[_r,kr]=(0,n.useState)([]),[Sr,Cr]=(0,n.useState)(!1),[Er,Pr]=(0,n.useState)(null),[Rr,Tr]=(0,n.useState)(""),[Lr,Dr]=(0,n.useState)("communities"),[Ar,Or]=(0,n.useState)(0),[zr,Fr]=(0,n.useState)(!1),[Mr,Br]=(0,n.useState)(!1),[Ir,qr]=(0,n.useState)(!1),[Ur,Hr]=(0,n.useState)(null),[Wr,Vr]=(0,n.useState)(null),[Yr,Kr]=(0,n.useState)(!1),[Jr,$r]=(0,n.useState)([]),[Gr,Qr]=(0,n.useState)("");(0,n.useEffect)(()=>(window.openRequestWizard=()=>{$("standard"),K(!0)},()=>{delete window.openRequestWizard}),[]);const[Zr,Xr]=(0,n.useState)([]),[ea,ta]=(0,n.useState)(!1),[ra,aa]=(0,n.useState)(0),[na,sa]=(0,n.useState)(!1),[la,oa]=(0,n.useState)(null),[ia,ca]=(0,n.useState)(!1),[da,ua]=(0,n.useState)(!1),[ma,pa]=(0,n.useState)(!1),[ha,xa]=(0,n.useState)(null),[fa,ga]=(0,n.useState)(!1),[ya,ba]=(0,n.useState)(!1),[va,ja]=(0,n.useState)([]),[wa,Na]=(0,n.useState)(!1),[_a,ka]=(0,n.useState)(navigator.onLine),[Sa,Ca]=(0,n.useState)(!1),[Ea,Pa]=(0,n.useState)([]),[Ra,Ta]=(0,n.useState)(!1),[La,Da]=(0,n.useState)(!1),[Aa,Oa]=(0,n.useState)(null),[za,Fa]=(0,n.useState)({category:"",location:"",min_price:"",max_price:"",only_preorders:!1,seller_type:""}),[Ma,Ba]=(0,n.useState)(!1),[Ia,qa]=(0,n.useState)(!1),[Ua,Ha]=(0,n.useState)(!1),[Wa,Va]=(0,n.useState)(!1),[Ya,Ka]=(0,n.useState)("offline"),[Ja,$a]=(0,n.useState)([]),[Ga,Qa]=(0,n.useState)([]),[Za,Xa]=(0,n.useState)([]),[en,tn]=(0,n.useState)({driver_name:"",phone_number:"",email:"",profile_picture:"",driver_license:"",vehicle_type:"motorcycle",plate_number:"",make_model:"",color:"",year:""}),[rn,an]=(0,n.useState)(""),[nn,sn]=(0,n.useState)([]),[ln,cn]=(0,n.useState)(null),[dn,hn]=(0,n.useState)(!1),[bn,vn]=(0,n.useState)([]),[jn,wn]=(0,n.useState)(""),[Nn,_n]=(0,n.useState)(""),[kn,Sn]=(0,n.useState)(null),[Cn,Tn]=(0,n.useState)([]),[Ln,Dn]=(0,n.useState)(!1),[An,On]=(0,n.useState)(null),[zn,Fn]=(0,n.useState)([""]),[Mn,Bn]=(0,n.useState)(!1),[In,qn]=(0,n.useState)("review"),[Un,Hn]=(0,n.useState)("pyexpress"),[Wn,Vn]=(0,n.useState)({full_name:"",phone:"",email:"",address_line_1:"",address_line_2:"",city:"",state:"",postal_code:"",country:"Nigeria",delivery_instructions:""}),[Yn,Kn]=(0,n.useState)({}),[Jn,$n]=(0,n.useState)({subtotal:0,delivery_total:0,total:0,item_count:0}),[Gn,Qn]=(0,n.useState)(!1),[Zn,ts]=(0,n.useState)(null),[as,ns]=(0,n.useState)(null),[ss,os]=(0,n.useState)(!1),[is,cs]=(0,n.useState)(null),[ds,us]=(0,n.useState)({order_id:"",order_type:"regular",pickup_address:"",delivery_addresses:[""],total_quantity:"",quantity_unit:"kg",product_details:"",weight_kg:"",special_instructions:"",estimated_price:"",preferred_driver_username:""}),[ps,hs]=(0,n.useState)({product_name:"",product_category:"vegetables",description:"",total_stock:"",unit:"kg",price_per_unit:"",partial_payment_percentage:.3,location:"",delivery_date:"",business_name:"",farm_name:"",images:[]}),[xs,fs]=(0,n.useState)(0),gs=[{title:"buy_from_farm"===f?"PyHub - Farm Deals":"PyExpress",description:"buy_from_farm"===f?"Direct trade platform for bulk agricultural produce. Connect with farmers and agents for wholesale farm deals.":"Revolutionizing African agriculture through technology. Connecting farmers, suppliers, agents, and buyers.",bgGradient:"from-emerald-100 to-emerald-50",cta:null},{title:"Join Our Agent Network",description:"Earn commissions while helping farmers reach more customers. Connect producers with buyers and grow your income.",bgGradient:"from-blue-100 to-blue-50",cta:{text:"Become an Agent",action:"agent_register"}},{title:"Suppliers & Processors Welcome",description:"List your products and reach thousands of buyers. Expand your market reach with our platform.",bgGradient:"from-purple-100 to-purple-50",cta:{text:"Become a Supplier",action:"supplier_register"}},{title:"Hotels, Cafes & Restaurants",description:"Source fresh ingredients directly from farms and suppliers. Get the best prices for your business needs.",bgGradient:"from-orange-100 to-orange-50",cta:{text:"Register Your Business",action:"business_register"}},{title:"Fast & Reliable Delivery",description:"Quick delivery with our network of verified drivers and logistics partners nationwide.",bgGradient:"from-green-100 to-green-50",cta:null}],[ys,bs]=(0,n.useState)({first_name:"",last_name:"",username:"",email_or_phone:"",password:"",phone:"",gender:"",date_of_birth:""});(0,n.useEffect)(()=>{fetch("/api/health").catch(()=>{});const e=localStorage.getItem("token");e&&Ls(e),Ds(),As(),Os(),tl(),al(),Qs(),z.length>0&&sl()},[f,U,W]),(0,n.useEffect)(()=>{L.length>0&&rl()},[L]),(0,n.useEffect)(()=>{const e=setInterval(()=>{fs(e=>(e+1)%gs.length)},5e3);return()=>clearInterval(e)},[gs.length]),(0,n.useEffect)(()=>{if(h&&"logistics"===h.role&&Bs(),h){qs(),Js(),Gs(),jl(),wl();const e=setInterval(()=>{jl(),wl()},3e4);return["farmer","agent","business","aggregator","processor"].includes(h.role)&&!h.dva_account_number&&cr(!0),()=>clearInterval(e)}},[h]),(0,n.useEffect)(()=>{Ys(),Ks(),Qs(),Zs()},[]);const vs=async()=>{try{const e=await fetch("".concat(p,"/api/requests/mine"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok){const t=await e.json();X(t);let r=0;t.forEach(e=>{e.offers&&(r+=e.offers.filter(e=>"pending"===e.status).length)}),te(r)}}catch(e){console.error("Failed to fetch my requests",e)}};(0,n.useEffect)(()=>{if(h&&["business","personal","farmer","agent"].includes(h.role)){vs();const e=setInterval(vs,3e4);return()=>clearInterval(e)}},[h]),(0,n.useEffect)(()=>{const e=()=>{console.log("App is online"),ka(!0),Ta(!1),"serviceWorker"in navigator&&"sync"in navigator.serviceWorker&&navigator.serviceWorker.ready.then(e=>{e.sync.register("sync-offline-requests")})},t=()=>{console.log("App is offline"),ka(!1),Ta(!0)};return window.addEventListener("online",e),window.addEventListener("offline",t),"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",e=>{"SYNC_SUCCESS"===e.data.type&&(console.log("Synced offline request:",e.data.url),Ca(!1),Ds())}),window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),Oa(e),Da(!0)}),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}},[]);const js=async e=>{try{const t=localStorage.getItem("token");return!!(await fetch("".concat(p,"/api/communities/").concat(e,"/join"),{method:"POST",headers:{Authorization:"Bearer ".concat(t)}})).ok&&(alert("Joined community successfully!"),Qs(),!0)}catch(t){return console.error("Error joining community:",t),!1}},Ls=async e=>{try{const t=await fetch("".concat(p,"/api/user/profile"),{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){const e=await t.json();if(x(e),e.role){g({farmer:"pyhub",agent:"pyhub",storage_owner:"pyhub",logistics_business:"pyhub",super_agent:"pyhub"}[e.role]||"pyexpress")}}}catch(t){console.error("Error fetching profile:",t)}},Ds=async()=>{try{const e="buy_from_farm"===f?"farm_deals":"home";let t="".concat("https://mvp-2-u8e9.onrender.com","/api/products?platform=").concat(e);const r=U||za.category;r&&(t+="&category=".concat(r)),W&&(t+="&search_term=".concat(encodeURIComponent(W),"&global_search=true")),za.location&&(t+="&location=".concat(za.location)),za.min_price&&(t+="&min_price=".concat(za.min_price)),za.max_price&&(t+="&max_price=".concat(za.max_price)),za.only_preorders&&(t+="&only_preorders=true"),za.seller_type&&(t+="&seller_type=".concat(za.seller_type));const a=await fetch(t);if(a.ok){const e=await a.json();let t=[];if(e.products&&Array.isArray(e.products)&&(t=[...t,...e.products]),e.preorders&&Array.isArray(e.preorders)){const r=e.preorders.map(e=>m(m({},e),{},{type:"preorder"}));t=[...t,...r]}Array.isArray(e)&&(t=e),D(t)}else console.error("Failed to fetch products"),D([])}catch(e){console.error("Error fetching products:",e),D([])}},As=async()=>{try{const e=await fetch("".concat(p,"/api/categories")),t=await e.json();O(t)}catch(e){console.error("Error fetching categories:",e)}},Os=async()=>{try{const e=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/dropoff-locations?active_only=true&limit=100"));if(e.ok){const t=await e.json();Ve(t.locations||[])}}catch(e){console.error("Error fetching drop-off locations:",e)}},zs=async e=>{try{const t=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/ratings/").concat(e,"?rating_type=user_rating"));if(t.ok){const r=await t.json();return ct(t=>m(m({},t),{},{[e]:r})),r}}catch(t){console.error("Error fetching user ratings:",t)}return null},Fs=async e=>{try{const t=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/ratings/").concat(e,"?rating_type=product_rating"));if(t.ok){const r=await t.json();return ut(t=>m(m({},t),{},{[e]:r})),r}}catch(t){console.error("Error fetching product ratings:",t)}return null},Ms=()=>{P(!1),ot(null)},Bs=async()=>{if(h&&"logistics"===h.role){try{const e=localStorage.getItem("token"),t=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/driver-slots/my-slots"),{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){const e=await t.json();return xt(e.slots||[]),e}}catch(e){console.error("Error fetching driver slots:",e)}return null}},Is=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=new URLSearchParams;e.location&&t.append("location",e.location),e.vehicle_type&&t.append("vehicle_type",e.vehicle_type),e.min_rating&&t.append("min_rating",e.min_rating);const r=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/drivers/find-drivers?").concat(t));if(r.ok){const e=await r.json();return gt(e.drivers||[]),e}}catch(t){console.error("Error fetching available drivers:",t)}return null},qs=async()=>{try{const e=localStorage.getItem("token"),t=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/wallet/summary"),{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){const e=await t.json();return kt(e),e}}catch(e){console.error("Error fetching wallet summary:",e)}return null},Us=async()=>{try{const e=localStorage.getItem("token"),t=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/wallet/transactions?limit=50"),{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){const e=await t.json();return Ct(e.transactions||[]),e}}catch(e){console.error("Error fetching wallet transactions:",e)}return null},Hs=async()=>{try{const e=localStorage.getItem("token"),t=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/wallet/bank-accounts"),{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){const e=await t.json();return Pt(e.accounts||[]),e}}catch(e){console.error("Error fetching bank accounts:",e)}return null},Ws=async()=>{try{const e=localStorage.getItem("token"),t=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/wallet/gift-cards/my-cards"),{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){const e=await t.json();return Bt(e.gift_cards||[]),e}}catch(e){console.error("Error fetching user gift cards:",e)}return null},Vs=async e=>{try{const t=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/wallet/gift-cards/").concat(e.toUpperCase()));if(t.ok){const e=await t.json();return Vt(e),e}return Vt(null),null}catch(t){return console.error("Error fetching gift card details:",t),Vt(null),null}},Ys=async()=>{try{const e=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/categories/business"));if(e.ok){const t=await e.json();return Kt(t.categories||{}),t}}catch(e){console.error("Error fetching business categories:",e)}return null},Ks=async()=>{try{const e=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/categories/dynamic"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("pyramyd_token"))}});if(e.ok){const t=await e.json();$t(t.categories),Qt(t.processing_levels),tr(t.locations||[]),Xt(t.seller_types||[])}}catch(e){console.error("Error fetching product categories:",e)}},Js=async()=>{if(h){try{const e=localStorage.getItem("token"),t=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/users/kyc/status"),{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){const e=await t.json();return or(e),e.requires_kyc&&"not_started"===e.status&&!nr&&setTimeout(()=>sr(!0),3e3),e}}catch(e){console.error("Error fetching KYC status:",e)}return null}},$s=async()=>{if(h&&window.confirm("Are you sure you want to remove your profile picture?"))try{const e=localStorage.getItem("token");if((await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/users/profile-picture"),{method:"DELETE",headers:{Authorization:"Bearer ".concat(e)}})).ok)return x(m(m({},h),{},{profile_picture:null})),alert("Profile picture removed successfully! ?"),!0}catch(e){return console.error("Error deleting profile picture:",e),alert("Failed to delete profile picture. Please try again."),null}};(0,n.useEffect)(()=>{"communities"===f&&h&&(async()=>{if(h&&0!==yr.length){Nr(!0);try{const e=yr.map(e=>fetch("".concat(p,"/api/communities/").concat(e.id,"/posts?limit=3")).then(e=>e.json()).then(t=>t.map(t=>m(m({},t),{},{community_name:e.name,community_id:e.id}))).catch(e=>[])),t=(await Promise.all(e)).flat();t.sort((e,t)=>new Date(t.created_at)-new Date(e.created_at)),jr(t)}catch(e){console.error("Error fetching feed:",e)}finally{Nr(!1)}}})()},[f,yr]);const Gs=async()=>{if(h){try{const e=localStorage.getItem("token"),t=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/communities/my-communities"),{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){const e=await t.json();return br(e.communities||[]),e}}catch(e){console.error("Error fetching user communities:",e)}return null}},Qs=async()=>{try{const e=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/communities"));if(e.ok){const t=await e.json();return ur(t.communities||[]),t}}catch(e){console.error("Error fetching communities:",e)}return null},Zs=async()=>{try{const e=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/communities/featured/products?limit=6"));if(e.ok){const t=await e.json();return kr(t.products||[]),t}}catch(e){console.error("Error fetching featured community products:",e)}return null},Xs=async e=>{ga(!0);try{const t=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/users/public/").concat(e));if(t.ok){const e=await t.json();return xa(e),pa(!0),e}alert("Unable to fetch seller details")}catch(t){console.error("Error fetching seller details:",t),alert("Failed to load seller information")}finally{ga(!1)}return null},el=async e=>{try{const t=localStorage.getItem("token"),r=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/communities/").concat(e,"/join"),{method:"POST",headers:{Authorization:"Bearer ".concat(t)}});if(r.ok){const e=await r.json();return await Gs(),e}{const e=await r.json();throw new Error(e.detail||"Failed to join community")}}catch(t){throw console.error("Error joining community:",t),t}},tl=async()=>{try{const e=[{product:"Rice (50kg bag)",price:35e3,trend:"+5%",category:"raw_food"},{product:"Beans (100kg bag)",price:85e3,trend:"+2%",category:"raw_food"},{product:"Yam (100kg)",price:45e3,trend:"-3%",category:"raw_food"},{product:"Tomatoes (big basket)",price:8e3,trend:"+8%",category:"pepper_vegetables"},{product:"Onions (50kg bag)",price:25e3,trend:"+1%",category:"pepper_vegetables"},{product:"Garri (50kg bag)",price:32e3,trend:"+4%",category:"packaged_food"},{product:"Palm Oil (25L tin)",price:22e3,trend:"+6%",category:"raw_food"},{product:"Fresh Fish (kg)",price:2500,trend:"+3%",category:"fish_meat"}];return $r(e),e}catch(e){console.error("Error fetching market prices:",e)}return[]},rl=async()=>{try{const e=[...new Set(L.map(e=>{if(!e.location)return null;const t=e.location.trim();return NIGERIAN_STATES.find(e=>e.toLowerCase()===t.toLowerCase())||t}))].filter(Boolean).sort();return tr(e),e}catch(e){console.error("Error fetching locations:",e)}},al=async()=>{try{const e=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/products"));if(e.ok){const t=(await e.json()).products.filter(e=>{var t;return(e.listed_by_agent||(null===(t=e.seller_name)||void 0===t?void 0:t.toLowerCase().includes("farmer"))||e.farm_name)&&e.minimum_order_quantity>=10});return Xr(t),t}}catch(e){console.error("Error fetching bulk listings:",e)}return[]},nl=e=>{const t=document.getElementById("categories-container");if(t){const r=200,a="left"===e?Math.max(0,ra-r):Math.min(t.scrollWidth-t.clientWidth,ra+r);t.scrollTo({left:a,behavior:"smooth"}),aa(a)}},sl=()=>{F(e=>e.map(e=>{var t,r;return e.id?e:m(m({},e),{},{id:"cart-".concat(Date.now(),"-").concat(e.product_id),unit:e.unit||(null===(t=e.product)||void 0===t?void 0:t.unit)||"kg",unit_specification:e.unit_specification||(null===(r=e.product)||void 0===r?void 0:r.unit_specification)||"",delivery_method:e.delivery_method||"platform"})}))},ll=()=>z.filter(e=>{const t=e.product;return"pyexpress"===t.platform||"business"===t.seller_type||"supplier"===t.seller_type}),ol=()=>z.filter(e=>{const t=e.product;return"pyhub"===t.platform||"farmer"===t.seller_type||"agent"===t.seller_type||t.community_id}),il=()=>{switch(I){case"pyexpress":return ll();case"farmdeals":return ol();case"community":return z.filter(e=>{var t;return null===(t=e.product)||void 0===t?void 0:t.community_id});default:return z}},cl=async e=>{oa(e),sa(!0);const t=e.id||e._id;if(t){const e=await(async e=>{try{const t=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/products/").concat(e,"/delivery-options"));if(t.ok){const r=await t.json();return at(t=>m(m({},t),{},{[e]:r})),r}}catch(t){console.error("Error fetching product delivery options:",t)}return null})(t);e&&(e.supports_dropoff_delivery?st("dropoff"):e.supports_shipping_delivery&&st("shipping"))}},dl=()=>{sa(!1),oa(null),st("dropoff")},ul=async()=>{try{const e=localStorage.getItem("token"),t=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/delivery/available"),{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){const e=await t.json();$a(e.delivery_requests||[])}}catch(e){console.error("Error fetching deliveries:",e)}},ml=async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text";try{const a=localStorage.getItem("token");(await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/delivery/").concat(e,"/message"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({content:t,type:r,location_data:"location"===r?kn:null})})).ok&&(pl(e),_n(""))}catch(a){console.error("Error sending message:",a)}},pl=async e=>{try{const t=localStorage.getItem("token"),r=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/delivery/").concat(e,"/messages"),{headers:{Authorization:"Bearer ".concat(t)}});if(r.ok){const e=await r.json();vn(e.messages||[]),On(e.delivery_request)}}catch(t){console.error("Error fetching messages:",t)}},hl=function(e,t,r,a,n){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if(z.find(t=>t.product_id===(e.id||e._id)))F(o=>o.map(o=>o.product_id===(e.id||e._id)?m(m({},o),{},{quantity:o.quantity+t,unit:r,unit_specification:a,delivery_method:n,dropoff_location:s,shipping_address:l}):o));else{const o={id:"cart-".concat(Date.now(),"-").concat(e.id||e._id),product_id:e.id||e._id,product:e,quantity:t,unit:r,unit_specification:a,delivery_method:n,dropoff_location:s,shipping_address:l};F(e=>[...e,o])}const o="".concat(t," ").concat(r).concat(a?" (".concat(a,")"):"");let i="Platform Driver";"offline"===n?i="Offline Delivery":"dropoff"===n&&s?i="Drop-off at ".concat(s.name):l&&(i="Home Delivery"),setTimeout(()=>fl(),100),alert("Added to cart: ".concat(o," of ").concat(e.product_name||e.crop_type,"\nDelivery: ").concat(i))},xl=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"buyer";try{const t=localStorage.getItem("token"),r=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/orders/my-orders?order_type=").concat(e),{headers:{Authorization:"Bearer ".concat(t)}});if(r.ok){const e=await r.json();Te(e.orders||[])}}catch(t){console.error("Error fetching orders:",t)}},fl=()=>{let e=0,t=0,r=0,a=0,n=0;const s=h&&("agent"===h.role||"purchasing_agent"===h.role);z.forEach(n=>{const s=n.product.price_per_unit*n.quantity;e+=s,r+=n.quantity;const l="pyhub"===n.product.platform||"farmer"===n.product.seller_type||"agent"===n.product.seller_type,o=n.product.community_id||"community"===n.product.source;if(a+=o?.05*s:l?.1*s:.03*s,"platform"===n.delivery_method){const e=500,r=50*(n.product.weight_kg||1);t+=e+r}else"offline"===n.delivery_method?t+=200:"seller"===n.product.logistics_managed_by&&(t+=n.product.seller_delivery_fee||0)}),s&&(n=.04*e);const l=a+0+t,o=e+l;return $n({product_total:e,platform_service_charge:a,platform_commission:0,delivery_total:t,platform_cut:l,agent_commission:n,subtotal:e,total:o,item_count:r,is_agent:s}),{product_total:e,platform_service_charge:a,platform_commission:0,delivery_total:t,platform_cut:l,agent_commission:n,subtotal:e,total:o,item_count:r,is_agent:s}},gl=(e,t)=>{t<=0?yl(e):(F(r=>r.map(r=>r.id===e?m(m({},r),{},{quantity:t}):r)),fl())},yl=e=>{F(t=>t.filter(t=>t.id!==e)),fl()},bl=()=>{const e=["full_name","phone","address_line_1","city","state"].filter(e=>!Wn[e].trim());return e.length>0?(alert("Please fill in the following required fields: ".concat(e.join(", "))),!1):!!/^\+?[\d\s-()]+$/.test(Wn.phone)||(alert("Please enter a valid phone number"),!1)},vl=()=>{if(ie.trim()&&de){const e={id:Date.now(),type:"text",content:ie,sender:h.username,timestamp:(new Date).toISOString(),conversation_id:de.id};oe(t=>[...t,e]),ce("")}},jl=async()=>{if(h)try{const e=localStorage.getItem("token"),t=await fetch("".concat(p,"/api/orders"),{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){const e=await t.json();Te(e);const r=e.filter(e=>e.status&&"delivered"!==e.status&&"cancelled"!==e.status).length;De(r)}}catch(e){console.error("Error fetching orders:",e)}},wl=async()=>{if(h)try{const e=await fetch("".concat(p,"/api/messages/unread-count"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok){const t=await e.json();Oe(t.unread_count)}}catch(e){console.error("Error fetching unread messages:",e)}},Nl=async()=>{try{const e=await fetch("".concat(p,"/api/requests/"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok){const t=await e.json();ja(t)}}catch(e){console.error("Error fetching buyer requests:",e)}},_l=(z.reduce((e,t)=>e+t.product.price_per_unit*t.quantity,0),z.reduce((e,t)=>e+t.quantity,0)),kl=e=>{["agent_register","supplier_register","business_register"].includes(e)&&(N("register"),j(!0))},Sl=()=>{const e=dr.filter(e=>{var t,r,a,n;const s=Rr.toLowerCase();return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(s))||(null===(r=e.description)||void 0===r?void 0:r.toLowerCase().includes(s))||(null===(a=e.category)||void 0===a?void 0:a.toLowerCase().includes(s))||(null===(n=e.location)||void 0===n?void 0:n.toLowerCase().includes(s))});return(0,on.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 sm:p-4",children:(0,on.jsx)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:(0,on.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,on.jsxs)("div",{className:"flex justify-between items-center mb-4 sm:mb-6",children:[(0,on.jsx)("h2",{className:"text-lg sm:text-xl font-bold text-gray-900",children:"Find Communities"}),(0,on.jsx)("button",{onClick:()=>{xr(!1),Tr("")},className:"text-gray-400 hover:text-gray-600 text-xl sm:text-2xl p-1",children:"?"})]}),(0,on.jsxs)("div",{className:"mb-4 sm:mb-6",children:[(0,on.jsxs)("div",{className:"relative",children:[(0,on.jsx)("input",{type:"text",value:Rr,onChange:e=>Tr(e.target.value),placeholder:"Search communities by name, description, category, or location...",className:"w-full px-4 py-2.5 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 text-sm"}),(0,on.jsx)("svg",{className:"absolute left-3 top-3 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,on.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),Rr&&(0,on.jsx)("button",{onClick:()=>Tr(""),className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600",children:"?"})]}),(0,on.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:[e.length," ",1===e.length?"community":"communities"," found"]})]}),(0,on.jsx)("div",{className:"grid gap-3 sm:gap-4 sm:grid-cols-2 lg:grid-cols-3",children:e.map(e=>(0,on.jsxs)("div",{className:"border border-gray-200 rounded-lg p-3 sm:p-4 hover:border-emerald-300 transition-colors",children:[(0,on.jsxs)("div",{className:"flex items-start justify-between mb-2 sm:mb-3",children:[(0,on.jsxs)("div",{className:"flex-1 min-w-0 pr-2",children:[(0,on.jsx)("h3",{className:"text-sm sm:text-base font-semibold text-gray-900 truncate",children:e.name}),(0,on.jsx)("p",{className:"text-xs sm:text-sm text-gray-600",children:e.category})]}),(0,on.jsx)("span",{className:"px-2 py-0.5 sm:py-1 text-xs rounded-full flex-shrink-0 ".concat("public"===e.privacy_type?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"),children:e.privacy_type})]}),(0,on.jsx)("p",{className:"text-xs sm:text-sm text-gray-700 mb-2 sm:mb-3 line-clamp-2",children:e.description}),(0,on.jsxs)("div",{className:"flex items-center justify-between text-xs sm:text-sm text-gray-600 mb-2 sm:mb-3",children:[(0,on.jsxs)("span",{children:[e.member_count||0," members"]}),e.location&&(0,on.jsx)("span",{className:"truncate ml-2",children:e.location})]}),(0,on.jsx)("button",{onClick:async()=>{try{await el(e.id),alert("Successfully joined community!")}catch(t){alert("Failed to join community: "+t.message)}},className:"w-full px-2 sm:px-3 py-1.5 sm:py-2 text-xs sm:text-sm text-white bg-emerald-600 hover:bg-emerald-700 rounded-lg transition-colors",children:"Join Community"})]},e.id))}),0===e.length&&(0,on.jsxs)("div",{className:"text-center py-6 sm:py-8",children:[(0,on.jsx)("svg",{className:"w-16 h-16 mx-auto text-gray-300 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,on.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,on.jsx)("p",{className:"text-sm sm:text-base text-gray-500",children:Rr?'No communities found matching "'.concat(Rr,'"'):"No communities found. Be the first to create one!"}),Rr&&(0,on.jsx)("button",{onClick:()=>Tr(""),className:"mt-3 text-sm text-emerald-600 hover:text-emerald-700",children:"Clear search"})]})]})})})},Cl=()=>{var e,t;const[r,a]=(0,n.useState)((null===h||void 0===h?void 0:h.profile_picture)||null);return(0,on.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,on.jsx)("div",{className:"bg-white rounded-lg max-w-md w-full",children:(0,on.jsxs)("div",{className:"p-6",children:[(0,on.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,on.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Profile Picture"}),(0,on.jsx)("button",{onClick:()=>ca(!1),className:"text-gray-400 hover:text-gray-600 text-2xl",children:"?"})]}),(0,on.jsxs)("div",{className:"flex flex-col items-center mb-6",children:[(0,on.jsx)("div",{className:"relative",children:r?(0,on.jsx)("img",{src:r,alt:"Profile",className:"w-32 h-32 rounded-full object-cover border-4 border-emerald-500"}):(0,on.jsx)("div",{className:"w-32 h-32 rounded-full bg-emerald-500 flex items-center justify-center text-white text-4xl font-bold border-4 border-emerald-600",children:(null===h||void 0===h||null===(e=h.first_name)||void 0===e?void 0:e.charAt(0).toUpperCase())||"U"})}),(0,on.jsxs)("p",{className:"text-sm text-gray-600 mt-3",children:[null===h||void 0===h?void 0:h.first_name," ",null===h||void 0===h?void 0:h.last_name]}),(0,on.jsx)("p",{className:"text-xs text-gray-500 capitalize",children:null===h||void 0===h||null===(t=h.role)||void 0===t?void 0:t.replace("_"," ")})]}),(0,on.jsxs)("div",{className:"space-y-4",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Choose New Picture"}),(0,on.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];if(!t)return;if(!t.type.startsWith("image/"))return void alert("Please select an image file");if(t.size>5242880)return void alert("Image size must be less than 5MB");const r=new FileReader;r.onloadend=()=>{a(r.result)},r.readAsDataURL(t)},className:"block w-full text-sm text-gray-500\r file:mr-4 file:py-2 file:px-4\r file:rounded-lg file:border-0\r file:text-sm file:font-semibold\r file:bg-emerald-50 file:text-emerald-700\r hover:file:bg-emerald-100\r cursor-pointer"}),(0,on.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Max size: 5MB. Formats: JPG, PNG, GIF"})]}),(0,on.jsxs)("div",{className:"flex gap-3",children:[(0,on.jsx)("button",{onClick:async()=>{r?await(async e=>{if(h){ua(!0);try{const t=localStorage.getItem("token"),r=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/users/profile-picture"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({profile_picture:e})});if(r.ok){const e=await r.json();return x(m(m({},h),{},{profile_picture:e.profile_picture})),alert("Profile picture updated successfully! ?"),ca(!1),!0}{const e=await r.json();alert("Failed to upload: ".concat(e.detail||"Unknown error"))}}catch(t){console.error("Error uploading profile picture:",t),alert("Failed to upload profile picture. Please try again.")}finally{ua(!1)}return!1}})(r):alert("Please select an image first")},disabled:da||!r,className:"flex-1 px-4 py-2 text-white bg-emerald-600 hover:bg-emerald-700 rounded-lg transition-colors font-medium disabled:bg-gray-300 disabled:cursor-not-allowed",children:da?"Uploading...":"Upload Picture"}),(null===h||void 0===h?void 0:h.profile_picture)&&(0,on.jsx)("button",{onClick:$s,className:"px-4 py-2 text-red-600 bg-red-50 hover:bg-red-100 rounded-lg transition-colors font-medium",children:"Remove"})]}),(0,on.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:(0,on.jsxs)("p",{className:"text-xs text-blue-800",children:[(0,on.jsx)("strong",{children:"?? Transparency:"})," Your profile picture will appear on all products you post, helping buyers know who they're purchasing from."]})})]})]})})})},El=()=>Er?(0,on.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,on.jsx)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:(0,on.jsxs)("div",{className:"p-6",children:[(0,on.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,on.jsxs)("div",{className:"flex items-center gap-4",children:[Er.profile_picture?(0,on.jsx)("img",{src:Er.profile_picture,alt:Er.name,className:"w-16 h-16 rounded-full object-cover border-4 border-emerald-500"}):(0,on.jsx)("div",{className:"w-16 h-16 rounded-full bg-emerald-500 flex items-center justify-center text-white font-bold text-2xl border-4 border-emerald-600",children:Er.name.charAt(0).toUpperCase()}),(0,on.jsxs)("div",{children:[(0,on.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:Er.name}),(0,on.jsx)("p",{className:"text-sm text-gray-600",children:Er.category}),(0,on.jsxs)("div",{className:"flex items-center gap-3 mt-1 text-sm text-gray-600",children:[(0,on.jsxs)("span",{children:[Er.member_count||0," members"]}),Er.location&&(0,on.jsxs)("span",{children:["?? ",Er.location]})]})]})]}),(0,on.jsx)("button",{onClick:()=>Cr(!1),className:"text-gray-400 hover:text-gray-600 text-2xl",children:"?"})]}),(0,on.jsx)("div",{className:"mb-6",children:(0,on.jsx)("p",{className:"text-gray-700",children:Er.description})}),(0,on.jsx)("div",{className:"flex gap-3 mb-6",children:(0,on.jsx)("button",{onClick:async()=>{try{await el(Er.id),alert("Successfully joined community!"),(async e=>{try{const t=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/communities/").concat(e));if(t.ok){const e=await t.json();return Pr(e),e}}catch(t){console.error("Error fetching community details:",t)}})(Er.id)}catch(e){alert("Failed to join: "+e.message)}},className:"px-6 py-2 text-white bg-emerald-600 hover:bg-emerald-700 rounded-lg transition-colors font-medium",children:"Join Community"})}),Er.recent_products&&Er.recent_products.length>0&&(0,on.jsxs)("div",{className:"mb-6",children:[(0,on.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Products"}),(0,on.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:Er.recent_products.map(e=>(0,on.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-emerald-300 transition-colors",children:[(0,on.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:e.title}),(0,on.jsx)("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:e.description}),(0,on.jsxs)("div",{className:"flex items-center justify-between",children:[(0,on.jsxs)("span",{className:"text-lg font-bold text-emerald-600",children:["?",e.price]}),(0,on.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,on.jsxs)("span",{children:["?? ",e.likes_count||0]}),(0,on.jsxs)("span",{children:["?? ",e.comments_count||0]})]})]})]},e.id))})]}),Er.recent_members&&Er.recent_members.length>0&&(0,on.jsxs)("div",{children:[(0,on.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Members"}),(0,on.jsx)("div",{className:"flex flex-wrap gap-3",children:Er.recent_members.map(e=>{var t;return(0,on.jsxs)("div",{className:"flex items-center gap-2 bg-gray-50 rounded-lg px-3 py-2",children:[(0,on.jsx)("div",{className:"w-8 h-8 rounded-full bg-emerald-500 flex items-center justify-center text-white font-semibold text-xs",children:(null===(t=e.username)||void 0===t?void 0:t.charAt(0).toUpperCase())||"U"}),(0,on.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e.username}),"admin"===e.role&&(0,on.jsx)("span",{className:"text-xs bg-emerald-100 text-emerald-700 px-2 py-0.5 rounded-full",children:"Admin"})]},e.id)})})]})]})})}):null,Pl=()=>{var e,t;return ha?(0,on.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,on.jsx)("div",{className:"bg-white rounded-lg max-w-md w-full",children:(0,on.jsxs)("div",{className:"p-6",children:[(0,on.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,on.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Seller Information"}),(0,on.jsx)("button",{onClick:()=>pa(!1),className:"text-gray-400 hover:text-gray-600 text-2xl",children:"?"})]}),(0,on.jsxs)("div",{className:"flex flex-col items-center mb-6",children:[ha.profile_picture?(0,on.jsx)("img",{src:ha.profile_picture,alt:ha.username,className:"w-24 h-24 rounded-full object-cover border-4 border-emerald-500 mb-4"}):(0,on.jsx)("div",{className:"w-24 h-24 rounded-full bg-emerald-500 flex items-center justify-center text-white font-bold text-3xl border-4 border-emerald-600 mb-4",children:(null===(e=ha.first_name)||void 0===e?void 0:e.charAt(0).toUpperCase())||"U"}),(0,on.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:[ha.first_name," ",ha.last_name]}),(0,on.jsxs)("p",{className:"text-sm text-gray-600",children:["@",ha.username]})]}),(0,on.jsxs)("div",{className:"space-y-3",children:[(0,on.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,on.jsx)("span",{className:"text-sm text-gray-600",children:"Type"}),(0,on.jsxs)("span",{className:"text-sm font-medium text-gray-900 capitalize",children:["farmer"===ha.role&&"????? Farmer","agent"===ha.role&&"?? Agent","business"===ha.role&&"?? Business","supplier"===ha.role&&"?? Supplier",!["farmer","agent","business","supplier"].includes(ha.role)&&ha.role]})]}),ha.business_name&&(0,on.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,on.jsx)("span",{className:"text-sm text-gray-600",children:"Business"}),(0,on.jsx)("span",{className:"text-sm font-medium text-gray-900",children:ha.business_name})]}),ha.business_category&&(0,on.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,on.jsx)("span",{className:"text-sm text-gray-600",children:"Category"}),(0,on.jsx)("span",{className:"text-sm font-medium text-gray-900 capitalize",children:ha.business_category.replace("_"," ")})]}),ha.business_description&&(0,on.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,on.jsx)("span",{className:"text-sm text-gray-600 block mb-1",children:"About"}),(0,on.jsx)("p",{className:"text-sm text-gray-900",children:ha.business_description})]}),(0,on.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,on.jsx)("span",{className:"text-sm text-gray-600",children:"Rating"}),(0,on.jsxs)("div",{className:"flex items-center gap-2",children:[(0,on.jsx)("div",{className:"flex",children:[...Array(5)].map((e,t)=>(0,on.jsx)("span",{className:"text-sm ".concat(t<Math.floor(ha.average_rating||5)?"text-yellow-400":"text-gray-300"),children:"?"},t))}),(0,on.jsx)("span",{className:"text-sm font-medium text-gray-900",children:(null===(t=ha.average_rating)||void 0===t?void 0:t.toFixed(1))||"5.0"}),ha.total_ratings>0&&(0,on.jsxs)("span",{className:"text-xs text-gray-500",children:["(",ha.total_ratings," reviews)"]})]})]}),(0,on.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,on.jsx)("span",{className:"text-sm text-gray-600",children:"Status"}),(0,on.jsxs)("div",{className:"flex items-center gap-2",children:[ha.is_verified&&(0,on.jsx)("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full font-medium",children:"? Verified"}),"approved"===ha.kyc_status&&(0,on.jsx)("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full font-medium",children:"? KYC Approved"})]})]})]}),(0,on.jsx)("div",{className:"mt-6 p-3 bg-emerald-50 border border-emerald-200 rounded-lg",children:(0,on.jsxs)("p",{className:"text-xs text-emerald-800",children:[(0,on.jsx)("strong",{children:"?? Transparency:"})," All seller information is verified through Pyramyd's KYC process to ensure safe transactions."]})})]})})}):null};return(0,on.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[h&&"personal"!==h.role&&lr&&"approved"!==lr.status&&(0,on.jsx)("div",{className:"".concat("not_started"===lr.status?"bg-red-500":"pending"===lr.status?"bg-yellow-500":"bg-red-500"," text-white px-4 py-2 text-center text-sm"),children:(0,on.jsxs)("div",{className:"max-w-7xl mx-auto flex items-center justify-center space-x-4",children:[(0,on.jsxs)("span",{children:["not_started"===lr.status&&"?? Complete your KYC verification to start receiving payments","pending"===lr.status&&"? Your KYC is under review. You'll be able to receive payments once approved","rejected"===lr.status&&"? Your KYC was rejected. Please resubmit with correct documents"]}),"pending"!==lr.status&&(0,on.jsx)("button",{onClick:()=>{alert("KYC completion form will open here. This includes:\n\nFor Registered Businesses:\n- Business Registration Number\n- TIN Certificate\n- Certificate of Incorporation\n\nFor Others (Farmers/Agents/Unregistered):\n- NIN or BVN\n- Headshot photo (camera)\n- National ID upload\n- Utility bill")},className:"bg-white text-red-600 px-3 py-1 rounded text-xs font-medium hover:bg-gray-100 transition-colors",children:"Complete Now"})]})}),Ra&&(0,on.jsx)("div",{className:"bg-gray-800 text-white px-4 py-2 text-center text-sm",children:(0,on.jsxs)("div",{className:"max-w-7xl mx-auto flex items-center justify-center space-x-2",children:[(0,on.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,on.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 5.636a9 9 0 010 12.728m0 0l-2.829-2.829m2.829 2.829L21 21M15.536 8.464a5 5 0 010 7.072m0 0l-2.829-2.829m-4.243 2.829a4.978 4.978 0 01-1.414-2.83m-1.414 5.658a9 9 0 01-2.167-9.238m7.824 2.167a1 1 0 111.414 1.414m-1.414-1.414L3 3m8.293 8.293l1.414 1.414"})}),(0,on.jsx)("span",{children:"?? You're offline. Browsing cached content. Posts will sync when online."})]})}),La&&(0,on.jsx)("div",{className:"bg-emerald-600 text-white px-4 py-3 text-center text-sm",children:(0,on.jsxs)("div",{className:"max-w-7xl mx-auto flex items-center justify-center space-x-4",children:[(0,on.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,on.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),(0,on.jsx)("span",{children:"Install Pyramyd app for offline access and faster performance!"}),(0,on.jsx)("button",{onClick:async()=>{if(!Aa)return;Aa.prompt();const{outcome:e}=await Aa.userChoice;"accepted"===e&&console.log("User accepted PWA install"),Oa(null),Da(!1)},className:"bg-white text-emerald-600 px-4 py-1.5 rounded text-xs font-medium hover:bg-gray-100 transition-colors",children:"Install Now"}),(0,on.jsx)("button",{onClick:()=>Da(!1),className:"text-white hover:text-gray-200 text-lg",children:"?"})]})}),(0,on.jsxs)("header",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-40",children:[(0,on.jsx)("div",{className:"border-b border-gray-100",children:(0,on.jsx)("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8",children:(0,on.jsxs)("div",{className:"flex justify-between items-center h-14 sm:h-16",children:[(0,on.jsx)("div",{className:"flex items-center flex-shrink-0",children:(0,on.jsx)("img",{src:"https://customer-assets.emergentagent.com/job_pyramyd-agritech/artifacts/ml8alcyl_image.png",alt:"Pyramyd",className:"h-5 sm:h-6 md:h-8 lg:h-10 w-auto"})}),(0,on.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2 flex-shrink-0",children:[(0,on.jsxs)("button",{onClick:()=>B(!0),className:"nav-button icon-button relative p-1 sm:p-1.5 md:p-2 text-gray-600 hover:text-emerald-600 transition-colors rounded-lg border border-gray-200 hover:border-emerald-500 flex-shrink-0",title:"Shopping Cart",children:[(0,on.jsx)("div",{className:"w-5 h-5",children:(0,on.jsx)(Ns,{})}),_l>0&&(0,on.jsx)("span",{className:"absolute -top-1 -right-1 bg-emerald-600 text-white text-xs rounded-full h-4 w-4 sm:h-5 sm:w-5 flex items-center justify-center font-semibold text-[10px] sm:text-xs",children:_l})]}),(0,on.jsxs)("button",{onClick:()=>{h?(se(!0),Oe(0)):j(!0)},className:"nav-button icon-button relative p-1.5 md:p-2 text-gray-600 hover:text-emerald-600 transition-colors rounded-lg border border-gray-200 hover:border-emerald-500 hidden md:flex flex-shrink-0",title:"Messages",children:[(0,on.jsx)("div",{className:"w-5 h-5",children:(0,on.jsx)(ks,{})}),h&&Ae>0&&(0,on.jsx)("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-4 w-4 sm:h-5 sm:w-5 flex items-center justify-center font-semibold text-[10px] sm:text-xs",children:Ae})]}),(0,on.jsxs)("button",{onClick:()=>{h?(Pe(!0),jl()):j(!0)},className:"nav-button icon-button relative p-1.5 md:p-2 text-gray-600 hover:text-emerald-600 transition-colors rounded-lg border border-gray-200 hover:border-emerald-500 hidden md:flex flex-shrink-0",title:"Track Orders / Find Drivers",children:[(0,on.jsx)("div",{className:"w-5 h-5",children:(0,on.jsx)(_s,{})}),h&&Le>0&&(0,on.jsx)("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-4 w-4 sm:h-5 sm:w-5 flex items-center justify-center font-semibold text-[10px] sm:text-xs",children:Le})]}),(0,on.jsx)("div",{className:"relative flex-shrink-0",children:h?(0,on.jsxs)("button",{onClick:()=>He(!Ue),className:"nav-button icon-button relative flex items-center gap-1 sm:gap-2 p-1 sm:p-1.5 md:p-2 text-gray-600 hover:text-emerald-600 transition-colors rounded-lg border border-gray-200 hover:border-emerald-500",title:"Profile Menu",children:[(0,on.jsxs)("div",{className:"w-5 h-5 flex-shrink-0 relative",children:[(0,on.jsx)(Ss,{}),ee>0&&(0,on.jsx)("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[8px] sm:text-[10px] rounded-full h-3 w-3 sm:h-4 sm:w-4 flex items-center justify-center font-bold border-2 border-white",children:ee})]}),(0,on.jsx)("span",{className:"hidden md:inline text-xs md:text-sm font-medium whitespace-nowrap",children:h.first_name})]}):(0,on.jsxs)("button",{onClick:()=>j(!0),className:"nav-button icon-button flex items-center gap-1 sm:gap-2 p-1 sm:p-1.5 md:p-2 text-gray-600 hover:text-emerald-600 transition-colors rounded-lg border border-gray-200 hover:border-emerald-500",title:"Sign In",children:[(0,on.jsx)("div",{className:"w-5 h-5 flex-shrink-0",children:(0,on.jsx)(Ss,{})}),(0,on.jsx)("span",{className:"hidden md:inline text-xs md:text-sm font-medium whitespace-nowrap",children:"Sign In"})]})})]})]})})}),(0,on.jsx)("div",{className:"bg-gray-50",children:(0,on.jsx)("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8",children:(0,on.jsxs)("div",{className:"flex items-center justify-between sm:justify-start gap-1 sm:gap-4 h-14 sm:h-12 overflow-x-auto px-1 sm:px-0 scrollbar-hide",children:[(0,on.jsxs)("button",{onClick:()=>g("home"),className:"flex flex-col sm:flex-row items-center justify-center px-2 sm:px-4 py-1 sm:py-2 rounded-lg transition-colors min-w-[60px] sm:min-w-0 ".concat("home"===f?"bg-white text-emerald-600 shadow-sm border border-emerald-100 sm:border-0 sm:shadow-none sm:bg-transparent":"text-gray-500 hover:text-gray-900 border border-transparent"," sm:border-b-2 ").concat("home"===f?"sm:border-emerald-600":"sm:border-transparent"),children:[(0,on.jsx)("div",{className:"".concat("home"===f?"text-emerald-600":"text-gray-400 group-hover:text-gray-600"),children:(0,on.jsx)(Cs,{})}),(0,on.jsx)("span",{className:"text-[10px] sm:text-sm font-medium mt-1 sm:mt-0 sm:ml-2 whitespace-nowrap",children:"PyExpress"})]}),(0,on.jsxs)("button",{onClick:()=>g("buy_from_farm"),className:"flex flex-col sm:flex-row items-center justify-center px-2 sm:px-4 py-1 sm:py-2 rounded-lg transition-colors min-w-[60px] sm:min-w-0 ".concat("buy_from_farm"===f?"bg-white text-emerald-600 shadow-sm border border-emerald-100 sm:border-0 sm:shadow-none sm:bg-transparent":"text-gray-500 hover:text-gray-900 border border-transparent"," sm:border-b-2 ").concat("buy_from_farm"===f?"sm:border-emerald-600":"sm:border-transparent"),children:[(0,on.jsx)("div",{className:"".concat("buy_from_farm"===f?"text-emerald-600":"text-gray-400 group-hover:text-gray-600"),children:(0,on.jsx)(Es,{})}),(0,on.jsx)("span",{className:"text-[10px] sm:text-sm font-medium mt-1 sm:mt-0 sm:ml-2 whitespace-nowrap",children:"Farm Deals"})]}),(0,on.jsxs)("button",{onClick:()=>Na(!0),className:"flex flex-col sm:flex-row items-center justify-center px-2 sm:px-4 py-1 sm:py-2 rounded-lg transition-colors min-w-[60px] sm:min-w-0 text-gray-500 hover:text-gray-900 border border-transparent sm:border-b-2 sm:border-transparent hover:border-gray-300",children:[(0,on.jsx)("div",{className:"text-gray-400 group-hover:text-gray-600",children:(0,on.jsx)(Rs,{})}),(0,on.jsx)("span",{className:"text-[10px] sm:text-sm font-medium mt-1 sm:mt-0 sm:ml-2 whitespace-nowrap",children:"Requests"})]}),(0,on.jsxs)("button",{onClick:()=>ae(!0),className:"relative flex flex-col sm:flex-row items-center justify-center px-2 sm:px-4 py-1 sm:py-2 rounded-lg transition-colors min-w-[60px] sm:min-w-0 text-gray-500 hover:text-gray-900 border border-transparent sm:border-b-2 sm:border-transparent hover:border-gray-300",children:[(0,on.jsx)("div",{className:"text-gray-400 group-hover:text-gray-600",children:(0,on.jsx)(Ts,{})}),(0,on.jsx)("span",{className:"text-[10px] sm:text-sm font-medium mt-1 sm:mt-0 sm:ml-2 whitespace-nowrap",children:"Offers"}),ee>0&&(0,on.jsx)("span",{className:"absolute top-0 right-0 sm:static sm:ml-2 bg-red-500 text-white text-[10px] font-bold px-1.5 py-0.5 rounded-full flex items-center justify-center min-w-[18px]",children:ee})]}),(0,on.jsxs)("button",{onClick:()=>g("communities"),className:"flex flex-col sm:flex-row items-center justify-center px-2 sm:px-4 py-1 sm:py-2 rounded-lg transition-colors min-w-[60px] sm:min-w-0 ".concat("communities"===f?"bg-white text-emerald-600 shadow-sm border border-emerald-100 sm:border-0 sm:shadow-none sm:bg-transparent":"text-gray-500 hover:text-gray-900 border border-transparent"," sm:border-b-2 ").concat("communities"===f?"sm:border-emerald-600":"sm:border-transparent"),children:[(0,on.jsx)("div",{className:"".concat("communities"===f?"text-emerald-600":"text-gray-400 group-hover:text-gray-600"),children:(0,on.jsx)(Ps,{})}),(0,on.jsx)("span",{className:"text-[10px] sm:text-sm font-medium mt-1 sm:mt-0 sm:ml-2 whitespace-nowrap",children:"Communities"})]})]})})})]}),(0,on.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[h&&(0,on.jsx)("div",{children:Ue&&(0,on.jsx)("div",{className:"fixed top-16 right-4 z-50",children:(0,on.jsx)("div",{className:"profile-dropdown w-48 bg-white rounded-lg shadow-lg border border-gray-200",children:(0,on.jsxs)("div",{className:"py-1",children:[(0,on.jsxs)("div",{className:"px-4 py-3 border-b border-gray-100",children:[(0,on.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:[h.first_name," ",h.last_name]}),(0,on.jsx)("p",{className:"text-xs text-gray-500",children:null===(e=h.role)||void 0===e?void 0:e.replace("_"," ").toUpperCase()}),"personal"!==h.role&&lr&&(0,on.jsxs)("div",{className:"mt-2",children:[(0,on.jsxs)("div",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat("approved"===lr.status?"bg-green-100 text-green-800":"pending"===lr.status?"bg-yellow-100 text-yellow-800":"rejected"===lr.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:["approved"===lr.status&&"? KYC Verified","pending"===lr.status&&"? KYC Pending","rejected"===lr.status&&"? KYC Rejected","not_started"===lr.status&&"?? KYC Required"]}),(0,on.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"approved"===lr.status?"? Can receive payments":"?? Cannot receive payments"})]}),"personal"===h.role&&(0,on.jsxs)("div",{className:"mt-2",children:[(0,on.jsx)("div",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"?? Personal Account"}),(0,on.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"? Can purchase products"})]})]}),(0,on.jsx)("button",{onClick:()=>{He(!1),ca(!0)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:"?? My Profile"}),(0,on.jsx)("button",{onClick:()=>{He(!1)},className:"block w-full text-left px-4 py-2 text-sm text-blue-600 hover:bg-gray-50 font-medium",children:"?? My Dashboard"}),(0,on.jsxs)("div",{className:"md:hidden border-t border-gray-200 pt-2 mt-2",children:[(0,on.jsx)("button",{onClick:()=>{He(!1),se(!0)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:"?? Messages"}),(0,on.jsx)("button",{onClick:()=>{He(!1),Pe(!0),jl()},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:"?? Order Tracking"})]}),"agent"!==h.role&&(0,on.jsx)("button",{onClick:()=>{He(!1),kl("agent_register")},className:"block w-full text-left px-4 py-2 text-sm text-emerald-600 hover:bg-gray-50 font-medium",children:"?? Become a Partner"}),"agent"===h.role&&(0,on.jsx)("button",{onClick:()=>{He(!1),Ke(!0)},className:"block w-full text-left px-4 py-2 text-sm text-purple-600 hover:bg-gray-50 font-medium",children:"?? Add Drop-off Location"}),"personal"!==h.role&&lr&&"approved"!==lr.status&&(0,on.jsxs)("button",{onClick:()=>{He(!1),alert("KYC completion form will open here. This includes:\n\nFor Registered Businesses:\n- Business Registration Number\n- TIN Certificate\n- Certificate of Incorporation\n\nFor Others (Farmers/Agents/Unregistered):\n- NIN or BVN\n- Headshot photo (camera)\n- National ID upload\n- Utility bill")},className:"block w-full text-left px-4 py-2 text-sm font-medium border-l-4 ".concat("not_started"===lr.status?"text-red-600 hover:bg-red-50 border-red-400 bg-red-25":"pending"===lr.status?"text-yellow-600 hover:bg-yellow-50 border-yellow-400 bg-yellow-25":"text-blue-600 hover:bg-blue-50 border-blue-400 bg-blue-25"),children:["not_started"===lr.status&&"?? Complete KYC (Required)","pending"===lr.status&&"? KYC Under Review","rejected"===lr.status&&"? Resubmit KYC"]}),(0,on.jsx)("button",{onClick:()=>{He(!1),Nt(!0),qs(),Us(),Hs()},className:"block w-full text-left px-4 py-2 text-sm text-purple-600 hover:bg-gray-50 font-medium",children:"?? My Wallet"}),(0,on.jsx)("button",{onClick:()=>{He(!1),Ft(!0),Ws()},className:"block w-full text-left px-4 py-2 text-sm text-pink-600 hover:bg-gray-50 font-medium",children:"?? Gift Cards"}),(0,on.jsx)("button",{onClick:()=>{He(!1),alert("Feature coming soon! View and manage your ratings and reviews.")},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:"? My Ratings & Reviews"}),"logistics"===h.role&&(0,on.jsx)("button",{onClick:()=>{He(!1),pt(!0),Bs()},className:"block w-full text-left px-4 py-2 text-sm text-blue-600 hover:bg-gray-50 font-medium",children:"?? Manage Drivers"}),(0,on.jsx)("button",{onClick:()=>{He(!1),bt(!0),Is()},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:"?? Find Drivers"}),(0,on.jsx)("button",{onClick:()=>{He(!1),"admin"===h.role?window.location.href="/pyadmin":["farmer","business","supplier_food_produce"].includes(h.role)?Fr(!0):["agent","purchasing_agent"].includes(h.role)?Br(!0):C(!0)},className:"block w-full text-left px-4 py-2 text-sm text-green-600 hover:bg-gray-50 font-medium",children:"?? My Dashboard"}),(0,on.jsx)("button",{onClick:()=>{He(!1),$("standard"),K(!0)},className:"block w-full text-left px-4 py-2 text-sm text-purple-600 hover:bg-gray-50 font-medium",children:"?? Create Request (Bulk Buy)"}),("agent"===h.role||"farmer"===h.role||"business"===h.role)&&(0,on.jsx)("button",{onClick:()=>{He(!1),Na(!0)},className:"block w-full text-left px-4 py-2 text-sm text-emerald-600 hover:bg-gray-50 font-medium",children:"?? View Buyer Requests"}),(0,on.jsxs)("button",{onClick:()=>{He(!1),ae(!0)},className:"flex items-center justify-between w-full px-4 py-2 text-sm text-emerald-600 hover:bg-gray-50 font-medium",children:[(0,on.jsx)("span",{children:"\ud83d\udce6 My Offers / Requests"}),ee>0&&(0,on.jsx)("span",{className:"bg-red-500 text-white text-[10px] font-bold px-2 py-0.5 rounded-full",children:ee})]}),("farmer"===h.role||"agent"===h.role||"business"===h.role)&&(0,on.jsx)("button",{onClick:()=>{He(!1),Nt(!0)},className:"block w-full text-left px-4 py-2 text-sm text-blue-600 hover:bg-gray-50 font-medium",children:"?? My Wallet"}),(0,on.jsx)("button",{onClick:()=>{He(!1),Kr(!0),tl()},className:"block w-full text-left px-4 py-2 text-sm text-blue-600 hover:bg-gray-50 font-medium",children:"?? Market Prices"}),"driver"===h.role&&(0,on.jsx)("button",{onClick:()=>{He(!1),alert("Driver Portal Access - Feature coming soon!\nTrack your deliveries, earnings, and ratings.")},className:"block w-full text-left px-4 py-2 text-sm text-green-600 hover:bg-gray-50 font-medium",children:"?? Driver Portal"}),(0,on.jsx)("button",{onClick:()=>{He(!1),jl(),Pe(!0)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:"My Orders"}),(0,on.jsx)("button",{onClick:()=>{He(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:"My Wallet"}),"driver"===h.role&&(0,on.jsx)("button",{onClick:()=>{He(!1),Ba(!0),ul()},className:"block w-full text-left px-4 py-2 text-sm text-blue-600 hover:bg-gray-50 font-medium",children:"?? Driver Portal"}),"business"===h.partner_type&&"logistics_business"===h.business_category&&(0,on.jsx)("button",{onClick:()=>{He(!1),qa(!0),(async()=>{try{const e=localStorage.getItem("token"),t=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/logistics/my-drivers"),{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){const e=await t.json();Qa(e.drivers||[]),Xa(e.vehicles||[])}}catch(e){console.error("Error fetching drivers:",e)}})()},className:"block w-full text-left px-4 py-2 text-sm text-purple-600 hover:bg-gray-50 font-medium",children:"?? Logistics Dashboard"}),h.role&&["agent","farmer","supplier","processor"].includes(h.role)&&(0,on.jsx)("button",{onClick:()=>{He(!1),xl("seller"),Pe(!0)},className:"block w-full text-left px-4 py-2 text-sm text-green-600 hover:bg-gray-50 font-medium",children:"?? Seller Dashboard"}),h.role&&["agent","farmer","supplier","processor"].includes(h.role)&&(0,on.jsx)("button",{onClick:()=>{He(!1),Va(!0)},className:"block w-full text-left px-4 py-2 text-sm text-orange-600 hover:bg-gray-50 font-medium",children:"?? Request Delivery"}),"agent"!==h.role&&(0,on.jsx)("button",{onClick:()=>{He(!1),kl("agent_register")},className:"block w-full text-left px-4 py-2 text-sm text-emerald-600 hover:bg-gray-50 font-medium",children:"Become an Agent"}),(0,on.jsx)("button",{onClick:()=>{He(!1),window.open("https://hilorgx.com","_blank")},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:"Report an Issue"}),(0,on.jsx)("div",{className:"border-t border-gray-100",children:(0,on.jsx)("button",{onClick:()=>{localStorage.removeItem("token"),x(null),F([]),He(!1)},className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-50",children:"Logout"})})]})})})}),(0,on.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:["communities"===f&&(0,on.jsxs)(on.Fragment,{children:[(0,on.jsx)("div",{className:"flex justify-end mb-4",children:(0,on.jsx)("button",{onClick:()=>pr(!0),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 font-medium shadow-sm flex items-center gap-2 transform transition-all hover:scale-105",children:(0,on.jsx)("span",{children:"+ Create Community"})})}),(0,on.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 h-[calc(100vh-180px)]",children:[(0,on.jsxs)("div",{className:"lg:col-span-1 flex flex-col gap-6 overflow-y-auto pr-2",children:[(0,on.jsx)(gn,{onJoin:js}),(0,on.jsx)(yn,{onSelect:gr,refreshTrigger:Ar})]}),(0,on.jsx)("div",{className:"lg:col-span-2 h-full",children:fr?(0,on.jsx)(En,{community:fr,onBack:()=>gr(null),onOpenProduct:cl}):(0,on.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 h-full flex flex-col items-center justify-center text-center p-8",children:[(0,on.jsx)("div",{className:"text-6xl mb-4",children:"\ud83c\udfe0"}),(0,on.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Welcome to Communities"}),(0,on.jsx)("p",{className:"text-gray-500 max-w-md mb-6",children:"Select a community from the left or search to find new ones."})]})}),(0,on.jsx)("div",{className:"lg:col-span-1 hidden lg:block overflow-y-auto pl-2",children:(0,on.jsx)(Pn,{onJoin:js,API_BASE_URL:"https://mvp-2-u8e9.onrender.com"})})]})]}),"communities"!==f&&(0,on.jsxs)("div",{children:[(0,on.jsx)("div",{className:"mb-6",children:(0,on.jsxs)("div",{className:"relative",children:[(0,on.jsx)("input",{type:"text",placeholder:"Search products...",value:W,onChange:e=>V(e.target.value),className:"w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 text-base"}),(0,on.jsx)("button",{className:"absolute right-3 top-3 text-emerald-600 hover:text-emerald-700",children:(0,on.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,on.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})}),(0,on.jsxs)("div",{className:"mb-4",children:[(0,on.jsxs)("button",{onClick:()=>tt(!et),className:"flex items-center space-x-2 text-sm text-gray-600 hover:text-emerald-600 font-medium my-2",children:[(0,on.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,on.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"})}),(0,on.jsx)("span",{children:"Advanced Filters"}),(0,on.jsx)("svg",{className:"w-4 h-4 transition-transform ".concat(et?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,on.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),et&&(0,on.jsxs)("div",{className:"mt-2 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[(0,on.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),(0,on.jsxs)("select",{value:za.location,onChange:e=>Fa(t=>m(m({},t),{},{location:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",children:[(0,on.jsx)("option",{value:"",children:"All Locations"}),er.map(e=>(0,on.jsx)("option",{value:e,children:e},e))]})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Price (?)"}),(0,on.jsx)("input",{type:"number",placeholder:"Min price",value:za.min_price,onChange:e=>Fa(t=>m(m({},t),{},{min_price:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Price (?)"}),(0,on.jsx)("input",{type:"number",placeholder:"Max price",value:za.max_price,onChange:e=>Fa(t=>m(m({},t),{},{max_price:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Seller Type"}),(0,on.jsxs)("select",{value:za.seller_type,onChange:e=>Fa(t=>m(m({},t),{},{seller_type:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",children:[(0,on.jsx)("option",{value:"",children:"All Sellers"}),(0,on.jsx)("option",{value:"farmer",children:"Farmer"}),(0,on.jsx)("option",{value:"agent",children:"Agent"}),(0,on.jsx)("option",{value:"business",children:"Business"}),(0,on.jsx)("option",{value:"supplier",children:"Supplier"})]})]})]}),(0,on.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,on.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,on.jsx)("input",{type:"checkbox",checked:za.only_preorders,onChange:e=>Fa(t=>m(m({},t),{},{only_preorders:e.target.checked})),className:"w-4 h-4 text-emerald-600 border-gray-300 rounded focus:ring-emerald-500"}),(0,on.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Show only pre-orders"})]}),(0,on.jsxs)("div",{className:"flex space-x-2",children:[(0,on.jsx)("button",{onClick:()=>{Fa({category:"",location:"",min_price:"",max_price:"",only_preorders:!1,seller_type:""}),H("")},className:"px-3 py-1 text-sm text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Clear All"}),(0,on.jsx)("button",{onClick:()=>{Ds(),tt(!1)},className:"px-4 py-1 text-sm text-white bg-emerald-600 hover:bg-emerald-700 rounded-lg",children:"Apply Filters"})]})]})]})]}),"buy_from_farm"===f&&(0,on.jsxs)(on.Fragment,{children:[(0,on.jsxs)("div",{className:"mt-4 bg-gradient-to-r from-green-50 to-amber-50 border border-green-100 rounded-xl p-4 shadow-sm flex flex-col sm:flex-row items-center justify-between gap-4",children:[(0,on.jsxs)("div",{className:"flex items-start gap-3",children:[(0,on.jsx)("div",{className:"bg-green-100 p-2 rounded-lg text-2xl",children:"??"}),(0,on.jsxs)("div",{children:[(0,on.jsx)("h3",{className:"font-bold text-gray-900",children:"Bulk Farm Request"}),(0,on.jsxs)("p",{className:"text-sm text-gray-600",children:["Post a request for bulk commodities.",(0,on.jsx)("strong",{children:" Verified farmers & agents"})," will submit competitive bids."]})]})]}),(0,on.jsx)("button",{onClick:()=>{if(!h)return alert("Please sign in to create a request"),void j(!0);$("standard"),K(!0)},className:"w-full sm:w-auto px-5 py-2.5 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-lg shadow-md hover:shadow-lg transition-all whitespace-nowrap",children:"Create Standard Request"})]}),(0,on.jsx)("div",{className:"mt-8",children:(0,on.jsx)(pn,{type:"standard",userRole:null===h||void 0===h?void 0:h.role})})]}),(0,on.jsx)("div",{className:"mb-6",children:(0,on.jsxs)("div",{className:"relative bg-gradient-to-r ".concat(gs[xs].bgGradient," rounded-xl p-6 overflow-hidden transition-all duration-500"),children:[(0,on.jsxs)("div",{className:"text-center",children:[(0,on.jsx)("div",{className:"min-h-[100px] flex flex-col items-center justify-center",children:(0,on.jsxs)("div",{children:[(0,on.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:gs[xs].title}),(0,on.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:gs[xs].description}),gs[xs].cta&&(0,on.jsx)("button",{onClick:()=>kl(gs[xs].cta.action),className:"bg-emerald-600 hover:bg-emerald-700 text-white font-semibold py-2 px-6 rounded-lg transition-colors shadow-md hover:shadow-lg transform hover:scale-105 duration-200",children:gs[xs].cta.text})]})}),(0,on.jsx)("div",{className:"flex justify-center space-x-2 mt-4",children:gs.map((e,t)=>(0,on.jsx)("div",{onClick:()=>fs(t),className:"w-2 h-2 rounded-full cursor-pointer transition-colors ".concat(t===xs?"bg-emerald-500":"bg-gray-300 hover:bg-gray-400")},t))})]}),(0,on.jsx)("div",{className:"absolute top-0 right-0 transform translate-x-4 -translate-y-4 opacity-10",children:(0,on.jsx)("svg",{className:"w-32 h-32",fill:"currentColor",viewBox:"0 0 20 20",children:(0,on.jsx)("path",{fillRule:"evenodd",d:"M3 3a1 1 0 000 2v8a2 2 0 002 2h2.586l-1.293 1.293a1 1 0 101.414 1.414L10 15.414l2.293 2.293a1 1 0 001.414-1.414L12.414 15H15a2 2 0 002-2V5a1 1 0 100-2H3zm11.707 4.707a1 1 0 00-1.414-1.414L10 9.586 8.707 8.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})]})}),(0,on.jsx)("div",{className:"mb-4 flex justify-end",children:h&&["farmer","supplier","processor","agent"].includes(h.role)&&(0,on.jsx)("button",{onClick:()=>$e(!0),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors font-medium",children:"+ Create Pre-order"})}),(0,on.jsx)("div",{className:"mb-4",children:(0,on.jsx)("div",{className:"flex items-center justify-between",children:(0,on.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,on.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"?? Location:"}),(0,on.jsxs)("select",{value:Gr,onChange:e=>Qr(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",children:[(0,on.jsx)("option",{value:"",children:"All Locations"}),er.map(e=>(0,on.jsx)("option",{value:e,children:e},e))]})]})})}),(0,on.jsxs)("div",{className:"mb-6",children:[(0,on.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Shop by Category"}),(0,on.jsxs)("div",{className:"flex overflow-x-auto space-x-4 pb-4 scrollbar-hide",children:[(0,on.jsxs)("div",{onClick:()=>H(""),className:"flex-shrink-0 cursor-pointer transition-all duration-200 ".concat(""===U?"transform scale-105":"hover:transform hover:scale-105"),children:[(0,on.jsx)("div",{className:"w-24 h-24 rounded-xl overflow-hidden mb-2 bg-gradient-to-br from-emerald-500 to-emerald-600 flex items-center justify-center",children:(0,on.jsx)("span",{className:"text-white text-xs font-medium",children:"All"})}),(0,on.jsx)("p",{className:"text-xs text-center text-gray-700 font-medium",children:"All Categories"})]}),[{value:"grains_legumes",label:"Grains & Legumes",image:"https://images.unsplash.com/photo-1499529112087-3cb3b73cec95?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NDk1NzZ8MHwxfHNlYXJjaHwzfHxhZ3JpY3VsdHVyYWwlMjBwcm9kdWN0c3xlbnwwfHx8fDE3NTM5NTM1ODd8MA&ixlib=rb-4.1.0&q=85"},{value:"spices_vegetables",label:"Vegetables & Spices",image:"https://images.unsplash.com/photo-1506368249639-73a05d6f6488?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NDk1ODB8MHwxfHNlYXJjaHwxfHxzcGljZXN8ZW58MHx8fHwxNzUzOTUzNjAwfDA&ixlib=rb-4.1.0&q=85"},{value:"fish_meat",label:"Fish & Meat",image:"https://images.pexels.com/photos/725992/pexels-photo-725992.jpeg"},{value:"tubers_roots",label:"Roots & Tubers",image:"https://images.unsplash.com/photo-1587049016137-d2d2b14b0d61?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NDk1NzZ8MHwxfHNlYXJjaHwxfHx5YW18ZW58MHx8fHwxNzUzOTUzNzAwfDA&ixlib=rb-4.1.0&q=85"},{value:"fruits",label:"Fruits",image:"https://images.unsplash.com/photo-1610832958506-aa56368176cf?crop=entropy&cs=srgb&fm=jpg&ixid=M3w0MjI5Nzh8MHwxfHNlYXJjaHwxfHxmcnVpdHN8ZW58MHx8fHwxNzUzOTUzNjUwfDA&ixlib=rb-4.1.0&q=85"},{value:"cash_crop",label:"Cash Crop",image:"https://images.unsplash.com/photo-1502395809857-fd80069897d0?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NTY2NzZ8MHwxfHNlYXJjaHwxfHxjb3R0b258ZW58MHx8fHwxNzUzOTUzNjM4fDA&ixlib=rb-4.1.0&q=85"},{value:"fertilizer",label:"Fertilizer",image:"https://images.unsplash.com/photo-1655130944329-b3a63166f6b5?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NDQ2NDN8MHwxfHNlYXJjaHwxfHxmZXJ0aWxpemVyfGVufDB8fHx8MTc1Mzk1MzYwOHww&ixlib=rb-4.1.0&q=85"},{value:"herbicides",label:"Herbicides",image:"https://images.unsplash.com/photo-1581578017093-cd30fce4eeb7?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NDQ2NDN8MHwxfHNlYXJjaHwzfHxmZXJ0aWxpemVyfGVufDB8fHx8MTc1Mzk1MzYwOHww&ixlib=rb-4.1.0&q=85"},{value:"pesticides",label:"Pesticides",image:"https://images.unsplash.com/photo-1581578017093-cd30fce4eeb7?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NDQ2NDN8MHwxfHNlYXJjaHwzfHxmZXJ0aWxpemVyfGVufDB8fHx8MTc1Mzk1MzYwOHww&ixlib=rb-4.1.0&q=85"},{value:"seeds",label:"Seeds",image:"https://images.unsplash.com/photo-1466692476868-aef1dfb1e735?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NTY2NjZ8MHwxfHNlYXJjaHwxfHxzZWVkc3xlbnwwfHx8fDE3NTM5NTM2MTZ8MA&ixlib=rb-4.1.0&q=85"},{value:"packaged_goods",label:"Packaged Goods",image:"https://images.unsplash.com/photo-1741522226997-a34b5a45c648?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NDk1Nzd8MHwxfHNlYXJjaHwxfHxwYWNrYWdlZCUyMGZvb2R8ZW58MHx8fHwxNzUzOTUzNjQ0fDA&ixlib=rb-4.1.0&q=85"},{value:"feeds",label:"Feeds",image:"https://images.unsplash.com/photo-1581578731548-c64695cc6952?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NDk1NzZ8MHwxfHNlYXJjaHwxfHxhbmltYWwlMjBmZWVkfGVufDB8fHx8MTc1Mzk1MzY1MHww&ixlib=rb-4.1.0&q=85"}].map(e=>(0,on.jsxs)("div",{onClick:()=>H(e.value),className:"flex-shrink-0 cursor-pointer transition-all duration-200 ".concat(U===e.value?"transform scale-105":"hover:transform hover:scale-105"),children:[(0,on.jsx)("div",{className:"w-24 h-24 rounded-xl overflow-hidden mb-2 border-2 transition-colors ".concat(U===e.value?"border-emerald-500":"border-gray-200"),children:(0,on.jsx)("img",{src:e.image,alt:e.label,className:"w-full h-full object-cover",onError:t=>{t.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="96" height="96" viewBox="0 0 96 96" fill="%23f3f4f6"><rect width="96" height="96" fill="%23f3f4f6"/><text x="48" y="48" text-anchor="middle" dy="0.3em" font-family="Arial" font-size="12" fill="%236b7280">'+e.label+"</text></svg>"}})}),(0,on.jsx)("p",{className:"text-xs text-center text-gray-700 font-medium",children:e.label})]},e.value))]})]}),"home"===f&&(0,on.jsxs)("div",{className:"mb-8",children:[(0,on.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"?? Pre-Order Sales"}),(0,on.jsx)("p",{className:"text-sm text-gray-600",children:"Secure your products in advance with special pre-order pricing!"})]}),(0,on.jsx)("button",{onClick:()=>{g("buy_from_farm"),Fa(e=>m(m({},e),{},{only_preorders:!0})),setTimeout(()=>Ds(),100)},className:"px-3 sm:px-4 py-2 bg-orange-100 text-orange-700 rounded-lg hover:bg-orange-200 transition-colors font-medium text-xs sm:text-sm",children:"See More in Farm Deals ?"})]}),(0,on.jsx)("div",{className:"relative",children:(0,on.jsxs)("div",{className:"flex overflow-x-auto space-x-3 sm:space-x-4 pb-4 scrollbar-hide",children:[L.filter(e=>"preorder"===e.type).slice(0,6).map((e,t)=>(0,on.jsxs)("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg shadow-md hover:shadow-lg transition-all flex-shrink-0 w-72 sm:w-80 border-2 border-orange-200 hover:border-orange-300 cursor-pointer",children:[(0,on.jsxs)("div",{className:"relative",onClick:()=>cl(e),title:"Click to view product details",children:[e.images&&e.images.length>0?(0,on.jsx)("img",{src:e.images[0],alt:e.product_name||e.crop_type,className:"w-full h-32 sm:h-40 object-cover rounded-t-lg"}):(0,on.jsx)("div",{className:"w-full h-32 sm:h-40 bg-gradient-to-r from-orange-200 to-orange-300 flex items-center justify-center rounded-t-lg",children:(0,on.jsx)("span",{className:"text-orange-600 font-medium text-sm sm:text-base",children:"?? Pre-Order Product"})}),(0,on.jsx)("div",{className:"absolute top-2 left-2 bg-orange-500 text-white px-2 sm:px-3 py-1 rounded-full text-xs font-bold flex items-center",children:"? PRE-ORDER"}),(0,on.jsx)("div",{className:"absolute top-2 right-2 bg-red-500 text-white px-1.5 sm:px-2 py-1 rounded-full text-xs font-bold",children:e.partial_payment_percentage?"".concat(Math.round(100*e.partial_payment_percentage),"% Payment"):"100% Payment"})]}),(0,on.jsxs)("div",{className:"p-3 sm:p-4",children:[(0,on.jsx)("h4",{className:"font-bold text-gray-900 mb-2 text-sm sm:text-base line-clamp-1",children:e.product_name||e.crop_type}),(0,on.jsx)("div",{className:"flex items-center space-x-2 mb-2",children:(0,on.jsxs)("span",{className:"text-base sm:text-lg font-bold text-orange-600",children:["?",e.price_per_unit,"/",e.unit||e.unit_of_measure||"kg",(e.unit_specification||e.unit_of_measure!==(e.unit||"kg"))&&(0,on.jsxs)("span",{className:"text-xs sm:text-sm font-medium text-gray-600 ml-1",children:["(",e.unit_specification||e.unit_of_measure||"standard",")"]})]})}),(0,on.jsx)("div",{className:"mb-3 p-2 sm:p-3 bg-orange-50 rounded-lg border border-orange-200",children:(0,on.jsxs)("div",{className:"text-xs text-orange-800 space-y-1",children:[(0,on.jsxs)("div",{className:"flex justify-between",children:[(0,on.jsx)("span",{children:"?? Payment Required:"}),(0,on.jsx)("span",{className:"font-bold",children:e.partial_payment_percentage?"".concat(Math.round(100*e.partial_payment_percentage),"%"):"100%"})]}),(0,on.jsxs)("div",{className:"flex justify-between",children:[(0,on.jsx)("span",{children:"?? Available:"}),(0,on.jsxs)("span",{className:"font-bold",children:[e.available_stock||e.total_stock," ",e.unit]})]}),(0,on.jsxs)("div",{className:"flex justify-between",children:[(0,on.jsx)("span",{children:"?? Delivery:"}),(0,on.jsx)("span",{className:"font-bold text-xs",children:new Date(e.delivery_date).toLocaleDateString()})]}),e.orders_count>0&&(0,on.jsxs)("div",{className:"flex justify-between",children:[(0,on.jsx)("span",{children:"?? Pre-orders:"}),(0,on.jsx)("span",{className:"font-bold text-green-600",children:e.orders_count})]})]})}),(0,on.jsxs)("div",{className:"text-xs text-gray-600 mb-3 flex items-center line-clamp-1",children:["?? ",e.location]}),(0,on.jsx)("button",{onClick:()=>{const t=e.unit||"kg",r=e.unit_specification||"";hl(e,1,t,r,"platform")},className:"w-full py-2 px-3 sm:px-4 bg-orange-600 hover:bg-orange-700 text-white rounded-lg font-medium transition-colors text-xs sm:text-sm",children:"?? Add Pre-order to Cart"})]})]},"preorder-".concat(e.id||e._id||t))),0===L.filter(e=>"preorder"===e.type).length&&(0,on.jsx)("div",{className:"w-full text-center py-6 sm:py-8 bg-orange-50 rounded-lg border-2 border-dashed border-orange-200",children:(0,on.jsxs)("div",{className:"text-orange-600",children:[(0,on.jsx)("div",{className:"text-xl sm:text-2xl mb-2",children:"??"}),(0,on.jsx)("h4",{className:"font-medium text-gray-700 text-sm sm:text-base",children:"No Pre-Orders Available"}),(0,on.jsx)("p",{className:"text-xs sm:text-sm text-gray-500",children:"Check back soon for exciting pre-order deals!"})]})})]})})]}),(0,on.jsxs)("div",{className:"mb-6 space-y-4",children:["buy_from_farm"===f&&(0,on.jsxs)("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[(0,on.jsxs)("div",{className:"flex items-center justify-between",children:[(0,on.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,on.jsx)("span",{className:"text-orange-600",children:"??"}),(0,on.jsx)("span",{className:"text-sm font-medium text-orange-800",children:"Filter by Pre-Orders:"})]}),(0,on.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,on.jsx)("input",{type:"checkbox",checked:za.only_preorders,onChange:e=>{Fa(t=>m(m({},t),{},{only_preorders:e.target.checked})),setTimeout(()=>Ds(),100)},className:"w-4 h-4 text-orange-600 border-gray-300 rounded focus:ring-orange-500"}),(0,on.jsx)("span",{className:"text-sm text-orange-700",children:"Show only pre-order products"})]})]}),za.only_preorders&&(0,on.jsx)("div",{className:"mt-2 text-xs text-orange-600",children:"Showing products available for advance booking with future delivery dates"})]}),(0,on.jsx)("div",{className:"relative",children:(0,on.jsxs)("div",{className:"flex items-center",children:[(0,on.jsx)("button",{onClick:()=>nl("left"),className:"hidden md:flex items-center justify-center w-10 h-10 bg-white shadow-md rounded-full border hover:bg-gray-50 transition-colors mr-2 z-10",children:(0,on.jsx)("span",{className:"text-gray-600",children:"?"})}),(0,on.jsx)("div",{id:"categories-container",className:"flex overflow-x-auto space-x-3 scrollbar-hide flex-1 py-2",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:Object.entries(Jt).map(e=>{let[t,r]=e;let a=L;a="home"===("buy_from_farm"===f?"farm_deals":"home")?L.filter(e=>["business","supplier"].includes(e.seller_type)):L.filter(e=>["farmer","agent"].includes(e.seller_type));return 0===a.filter(e=>e.category===t).length?null:(0,on.jsx)("div",{className:"flex-shrink-0 bg-white border border-gray-200 rounded-lg p-3 hover:border-emerald-300 transition-colors cursor-pointer min-w-[120px]",onClick:()=>{H(t),Fa(e=>m(m({},e),{},{category:t})),setTimeout(()=>Ds(),100)},children:(0,on.jsxs)("div",{className:"text-center",children:[(0,on.jsx)("div",{className:"text-2xl mb-1",children:"grains_legumes"===t||"fish_meat"===t?"??":"spices_vegetables"===t?"???":"??"}),(0,on.jsx)("div",{className:"text-xs font-medium text-gray-700 mb-1",children:r.name}),(0,on.jsxs)("div",{className:"text-xs text-gray-500",children:[Object.values(r.subcategories||{}).slice(0,2).map((e,t)=>e.examples?e.examples[0]:e.name||e).join(", "),Object.keys(r.subcategories||{}).length>2&&"..."]})]})},t)})}),(0,on.jsx)("button",{onClick:()=>nl("right"),className:"hidden md:flex items-center justify-center w-10 h-10 bg-white shadow-md rounded-full border hover:bg-gray-50 transition-colors ml-2 z-10",children:(0,on.jsx)("span",{className:"text-gray-600",children:"?"})})]})})]})]}),(0,on.jsx)("div",{className:"md:hidden text-center text-xs text-gray-500 mt-2",children:"?? Swipe to see more categories"}),"buy_from_farm"===f&&(0,on.jsx)("div",{children:(0,on.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6 auto-rows-auto items-start",children:0===L.length?(0,on.jsx)("div",{className:"col-span-full text-center py-8 sm:py-12",children:(0,on.jsx)("p",{className:"text-gray-500 text-base sm:text-lg",children:"No products found"})}):L.filter(e=>""===Gr||e.location===Gr).map((e,t)=>{var r;return(0,on.jsxs)("div",{className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow flex flex-col min-h-0",children:[(0,on.jsxs)("div",{className:"relative cursor-pointer",onClick:()=>cl(e),title:"Click to view product details",children:[e.images&&e.images.length>0?(0,on.jsx)("img",{src:e.images[0],alt:e.product_name||e.crop_type,className:"w-full h-40 sm:h-48 object-cover hover:opacity-90 transition-opacity rounded-t-lg"}):(0,on.jsx)("div",{className:"w-full h-40 sm:h-48 bg-gray-200 flex items-center justify-center hover:bg-gray-300 transition-colors rounded-t-lg",children:(0,on.jsx)("span",{className:"text-gray-500 text-sm sm:text-base",children:"Click to View Details"})}),(0,on.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-0 hover:bg-opacity-20 transition-all flex items-center justify-center rounded-t-lg",children:(0,on.jsx)("div",{className:"bg-white bg-opacity-0 hover:bg-opacity-90 text-transparent hover:text-gray-800 px-2 sm:px-3 py-1 rounded-lg text-xs sm:text-sm font-medium transition-all",children:"??? View Details"})}),"preorder"===e.type&&(0,on.jsx)("div",{className:"absolute top-2 left-2 bg-orange-500 text-white px-2 py-1 rounded-lg text-xs font-semibold",children:"PRE-ORDER"}),e.seller_type&&(0,on.jsx)("div",{className:"absolute top-2 right-2 bg-emerald-500 text-white px-2 py-1 rounded-lg text-xs font-semibold capitalize",children:e.seller_type}),e.has_discount&&e.discount_value&&(0,on.jsxs)("div",{className:"absolute top-12 right-2 bg-red-500 text-white px-2 py-1 rounded-lg text-xs font-bold shadow-lg animate-pulse",children:["percentage"===e.discount_type&&"".concat(e.discount_value,"% OFF"),"fixed"===e.discount_type&&"?".concat(e.discount_value," OFF")]}),"seller"===e.logistics_managed_by&&0===e.seller_delivery_fee&&(0,on.jsx)("div",{className:"absolute bottom-2 left-2 bg-red-600 text-white px-2 py-1 rounded-lg text-xs font-bold",children:"?? FREE DELIVERY"})]}),(0,on.jsxs)("div",{className:"p-3 sm:p-4 flex-1 flex flex-col",children:[(0,on.jsx)("h3",{className:"font-semibold text-gray-900 mb-2 text-sm sm:text-base line-clamp-1",children:e.product_name||e.crop_type}),(0,on.jsx)("p",{className:"text-gray-600 text-xs sm:text-sm mb-3 line-clamp-2",children:e.description||"Fresh organic produce from certified farms"}),(0,on.jsx)("div",{className:"mb-2",children:e.has_discount&&e.original_price?(0,on.jsxs)("div",{children:[(0,on.jsxs)("div",{className:"text-xs sm:text-sm text-gray-500 line-through",children:["?",e.original_price,"/",e.unit||e.unit_of_measure||"kg"]}),(0,on.jsxs)("div",{className:"text-lg sm:text-xl font-bold text-red-600",children:["?",e.price_per_unit,"/",e.unit||e.unit_of_measure||"kg",(e.unit_specification||e.unit_of_measure!==(e.unit||"kg"))&&(0,on.jsxs)("span",{className:"text-xs sm:text-sm font-medium text-gray-600 ml-1",children:["(",e.unit_specification||e.unit_of_measure||"standard",")"]})]}),(0,on.jsxs)("div",{className:"text-xs text-green-600 font-medium",children:["You save ?",e.discount_amount,"!"]})]}):(0,on.jsxs)("div",{className:"text-lg sm:text-xl font-bold text-emerald-600",children:["?",e.price_per_unit,"/",e.unit||e.unit_of_measure||"kg",(e.unit_specification||e.unit_of_measure!==(e.unit||"kg"))&&(0,on.jsxs)("span",{className:"text-xs sm:text-sm font-medium text-gray-600 ml-1",children:["(",e.unit_specification||e.unit_of_measure||"standard",")"]})]})}),(0,on.jsx)("div",{className:"text-xs sm:text-sm text-gray-500 mb-2",children:"preorder"===e.type?(0,on.jsxs)(on.Fragment,{children:[(0,on.jsxs)("span",{className:"text-orange-600 font-medium",children:[e.available_stock||e.total_stock," ",e.unit," available"]}),e.orders_count>0&&(0,on.jsxs)("span",{className:"ml-2",children:["(",e.orders_count," pre-orders)"]})]}):(0,on.jsxs)("span",{children:[e.quantity||"100"," available"]})}),(0,on.jsxs)("div",{className:"text-xs sm:text-sm mb-2 space-y-1",children:[e.business_name&&(0,on.jsxs)("div",{className:"font-medium text-emerald-600 hover:text-emerald-700 cursor-pointer flex items-center gap-1",onClick:()=>Xs(e.seller_name),title:"Click to view business owner details",children:["?? ",e.business_name]}),e.farm_name&&(0,on.jsxs)("div",{className:"text-green-600 hover:text-green-700 cursor-pointer flex items-center gap-1",onClick:()=>Xs(e.seller_name),title:"Click to view farmer details",children:["?? ",e.farm_name]}),e.agent_username&&e.agent_name&&(0,on.jsxs)("div",{className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 cursor-pointer",onClick:()=>Xs(e.agent_name),title:"Click to view agent details",children:[e.agent_profile_picture?(0,on.jsx)("img",{src:e.agent_profile_picture,alt:e.agent_name,className:"w-5 h-5 rounded-full object-cover border border-blue-500"}):(0,on.jsx)("div",{className:"w-5 h-5 rounded-full bg-blue-500 flex items-center justify-center text-white text-xs font-semibold",children:(null===(r=e.agent_name)||void 0===r?void 0:r.charAt(0).toUpperCase())||"A"}),(0,on.jsxs)("span",{children:["Agent: @",e.agent_username]})]})]}),(0,on.jsxs)("div",{className:"text-xs sm:text-sm text-gray-500 mb-2 line-clamp-1",children:["?? ",e.location]}),"seller"===e.logistics_managed_by&&(0,on.jsx)("div",{className:"text-xs sm:text-sm mb-2 p-2 rounded-lg ".concat(0===e.seller_delivery_fee?"bg-red-100 text-red-700 font-bold":"bg-blue-50 text-blue-700"),children:0===e.seller_delivery_fee?"?? FREE DELIVERY by Seller":"?? Delivery: ?".concat(e.seller_delivery_fee," (Seller Managed)")}),(0,on.jsxs)("div",{className:"flex items-center mb-3",children:[(0,on.jsx)("div",{className:"flex items-center",children:[...Array(5)].map((t,r)=>(0,on.jsx)("span",{className:"text-sm ".concat(r<Math.floor(e.average_rating||5)?"text-yellow-400":"text-gray-300"),children:"?"},r))}),(0,on.jsx)("span",{className:"text-xs text-gray-600 ml-2",children:e.average_rating?e.average_rating.toFixed(1):"5.0"}),e.total_ratings>0&&(0,on.jsxs)("span",{className:"text-xs text-gray-500 ml-1",children:["(",e.total_ratings," reviews)"]})]}),"preorder"===e.type&&(0,on.jsx)("div",{className:"mb-3 p-2 bg-orange-50 rounded-lg border border-orange-200",children:(0,on.jsxs)("div",{className:"text-xs text-orange-700",children:[(0,on.jsxs)("div",{children:["Partial payment: ",Math.round(100*(e.partial_payment_percentage||.3)),"%"]}),(0,on.jsxs)("div",{children:["Delivery: ",new Date(e.delivery_date).toLocaleDateString()]})]})}),(0,on.jsxs)("div",{className:"flex items-center gap-2 mb-3 p-2 bg-gray-50 rounded-lg",children:[(0,on.jsx)("div",{className:"flex-shrink-0",children:e.seller_profile_picture?(0,on.jsx)("img",{src:e.seller_profile_picture,alt:e.seller_name||"Seller",className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full object-cover border-2 border-emerald-500",title:"Posted by ".concat(e.seller_name||"seller")}):(0,on.jsx)("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-emerald-500 flex items-center justify-center text-white font-semibold text-xs sm:text-sm border-2 border-emerald-600",children:(e.seller_name||e.seller_username||"S").charAt(0).toUpperCase()})}),(0,on.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,on.jsx)("div",{className:"text-xs sm:text-sm font-medium text-gray-900 truncate",children:e.seller_name||e.seller_username||"Seller"}),e.seller_type&&(0,on.jsxs)("div",{className:"text-xs text-gray-600 capitalize",children:["farmer"===e.seller_type&&"????? Farmer","agent"===e.seller_type&&"?? Agent","business"===e.seller_type&&"?? Business","supplier"===e.seller_type&&"?? Supplier",!["farmer","agent","business","supplier"].includes(e.seller_type)&&e.seller_type]})]})]}),(0,on.jsxs)("div",{className:"mt-auto pt-3 sm:pt-4 space-y-2 sm:space-y-3",children:[(0,on.jsxs)("div",{className:"mb-2 p-2 bg-emerald-50 rounded-lg border border-emerald-200",children:[(0,on.jsxs)("div",{className:"text-xs sm:text-sm font-medium text-emerald-700",children:["Unit: ",e.unit||e.unit_of_measure||"kg",e.unit_specification&&(0,on.jsxs)("span",{className:"ml-2 text-emerald-600",children:["(",e.unit_specification,")"]})]}),(0,on.jsxs)("div",{className:"text-xs text-emerald-600",children:["Select how many ",e.unit||e.unit_of_measure||"units"," you want to buy"]})]}),(0,on.jsxs)("div",{className:"grid grid-cols-1 gap-2 sm:gap-3",children:[(0,on.jsxs)("div",{children:[(0,on.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Quantity (Number of ",e.unit||e.unit_of_measure||"units",")"]}),(0,on.jsx)("input",{type:"number",min:"1",max:e.quantity||e.available_stock||e.total_stock||100,defaultValue:"1",className:"w-full px-1.5 sm:px-2 py-1 text-xs sm:text-sm border border-gray-300 rounded focus:ring-1 focus:ring-emerald-500",id:"quantity-".concat(t),placeholder:"1, 2, 3..."}),(0,on.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Max available: ",e.quantity||e.available_stock||e.total_stock||100]})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Drop-off Location"}),(0,on.jsxs)("select",{className:"w-full px-1.5 sm:px-2 py-1 text-xs sm:text-sm border border-gray-300 rounded focus:ring-1 focus:ring-emerald-500",id:"dropoff-".concat(t),children:[(0,on.jsx)("option",{value:"",children:"Select drop-off location"}),We.map(e=>(0,on.jsxs)("option",{value:e.id,children:[e.name," - ",e.city,", ",e.state]},e.id))]}),(0,on.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"?? Pick up your order at a convenient location"})]})]}),(0,on.jsx)("button",{onClick:()=>{const r=document.getElementById("quantity-".concat(t)),a=document.getElementById("dropoff-".concat(t)),n=parseFloat(null===r||void 0===r?void 0:r.value)||1,s=e.unit||e.unit_of_measure||"kg",l=e.unit_specification||"standard",o=null===a||void 0===a?void 0:a.value;if(!o)return void alert("Please select a drop-off location");const i=We.find(e=>e.id.toString()===o),c=m(m({},e),{},{cartQuantity:n,cartUnit:s,cartSpecification:l,dropoffLocation:i});hl(c,n,s,l,"dropoff")},className:"w-full py-2 px-3 sm:px-4 rounded-lg font-medium transition-colors text-xs sm:text-sm ".concat("preorder"===e.type?"bg-orange-600 hover:bg-orange-700 text-white":"bg-emerald-600 hover:bg-emerald-700 text-white"),children:"preorder"===e.type?"Add Pre-order to Cart":"Add to Cart"})]})]})]},e.id||e._id||t)})})})]})]}),v&&(0,on.jsx)(Xn,{onClose:()=>j(!1),onLogin:e=>{localStorage.setItem("token",e.token),x(e.user),j(!1)},onRegister:e=>{localStorage.setItem("token",e.token),x(e.user),j(!1)}}),Mn&&(0,on.jsx)("div",{className:"modal-backdrop-blur fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,on.jsxs)("div",{className:"bg-white rounded-lg max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[(0,on.jsxs)("div",{className:"p-6 border-b ".concat("pyexpress"===Un?"border-emerald-200 bg-emerald-50":"border-orange-200 bg-orange-50"),children:[(0,on.jsxs)("div",{className:"flex justify-between items-center",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("h2",{className:"text-2xl font-semibold text-gray-900",children:"pyexpress"===Un?"?? PyExpress Checkout":"?? Farm Deals Checkout"}),(0,on.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"pyexpress"===Un?"Business & Supplier Products":"Farm Fresh Products with Fixed Split"})]}),(0,on.jsx)("button",{onClick:()=>Bn(!1),className:"text-gray-500 hover:text-gray-700 text-2xl"})]}),(0,on.jsxs)("div",{className:"mt-4 flex items-center space-x-4",children:[(0,on.jsxs)("div",{className:"flex items-center ".concat("review"===In?"pyexpress"===Un?"text-emerald-600":"text-orange-600":"text-gray-400"),children:[(0,on.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold ".concat("review"===In?"pyexpress"===Un?"bg-emerald-100 text-emerald-600":"bg-orange-100 text-orange-600":"bg-gray-100 text-gray-400"),children:"1"}),(0,on.jsx)("span",{className:"ml-2 text-sm font-medium",children:"Review Order"})]}),(0,on.jsx)("div",{className:"h-px bg-gray-200 flex-1"}),(0,on.jsxs)("div",{className:"flex items-center ".concat("address"===In?"pyexpress"===Un?"text-emerald-600":"text-orange-600":"text-gray-400"),children:[(0,on.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold ".concat("address"===In?"pyexpress"===Un?"bg-emerald-100 text-emerald-600":"bg-orange-100 text-orange-600":"bg-gray-100 text-gray-400"),children:"2"}),(0,on.jsx)("span",{className:"ml-2 text-sm font-medium",children:"Shipping Address"})]}),(0,on.jsx)("div",{className:"h-px bg-gray-200 flex-1"}),(0,on.jsxs)("div",{className:"flex items-center ".concat("payment"===In?"pyexpress"===Un?"text-emerald-600":"text-orange-600":"text-gray-400"),children:[(0,on.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold ".concat("payment"===In?"pyexpress"===Un?"bg-emerald-100 text-emerald-600":"bg-orange-100 text-orange-600":"bg-gray-100 text-gray-400"),children:"3"}),(0,on.jsx)("span",{className:"ml-2 text-sm font-medium",children:"Payment"})]})]})]}),(0,on.jsx)("div",{className:"p-6",children:(0,on.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,on.jsxs)("div",{className:"lg:col-span-2",children:["review"===In&&(0,on.jsxs)("div",{className:"space-y-6",children:[(0,on.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"?? Review Your Order"}),0===il().length?(0,on.jsx)("div",{className:"text-center py-8",children:(0,on.jsx)("div",{className:"text-gray-500",children:"Your cart is empty"})}):(0,on.jsx)("div",{className:"space-y-4",children:il().map(e=>{var t;return(0,on.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,on.jsxs)("div",{className:"flex justify-between items-start",children:[(0,on.jsxs)("div",{className:"flex-1",children:[(0,on.jsx)("h4",{className:"font-semibold text-gray-900",children:e.product.product_name||e.product.crop_type}),(0,on.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.product.description||"Fresh organic produce"}),(0,on.jsxs)("div",{className:"flex items-center space-x-4 text-sm",children:[(0,on.jsxs)("span",{className:"text-gray-700",children:[(0,on.jsx)("strong",{children:"Quantity:"})," ",e.quantity," ",e.unit,e.unit_specification&&" (".concat(e.unit_specification,")")]}),(0,on.jsxs)("span",{className:"text-gray-700",children:[(0,on.jsx)("strong",{children:"Price:"})," ?",e.product.price_per_unit,"/",e.unit]}),(0,on.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("platform"===e.delivery_method?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"),children:"platform"===e.delivery_method?"?? Platform Driver":"?? Offline Delivery"})]}),(0,on.jsxs)("div",{className:"mt-2 text-sm text-gray-600",children:[(0,on.jsx)("strong",{children:"Seller:"})," ",e.product.seller_username,e.product.business_name&&" (".concat(e.product.business_name,")")]}),"seller"===e.product.logistics_managed_by&&(0,on.jsx)("div",{className:"mt-2",children:0===e.product.seller_delivery_fee?(0,on.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"?? FREE Delivery (Vendor Managed)"}):(0,on.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:["?? Vendor Delivery: ?",null===(t=e.product.seller_delivery_fee)||void 0===t?void 0:t.toLocaleString()]})})]}),(0,on.jsxs)("div",{className:"text-right",children:[(0,on.jsxs)("div",{className:"text-lg font-semibold text-gray-900",children:["?",(e.product.price_per_unit*e.quantity).toLocaleString()]}),(0,on.jsx)("button",{onClick:()=>yl(e.id),className:"text-red-600 hover:text-red-800 text-sm mt-1",children:"Remove"})]})]})},e.id)})}),(0,on.jsx)("div",{className:"flex justify-end",children:(0,on.jsx)("button",{onClick:()=>qn("address"),className:"px-6 py-2 text-white rounded-lg font-medium ".concat("pyexpress"===Un?"bg-emerald-600 hover:bg-emerald-700":"bg-orange-600 hover:bg-orange-700"),children:"Continue to Shipping"})})]}),"address"===In&&(0,on.jsxs)("div",{className:"space-y-6",children:[(0,on.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"?? Shipping Address"}),(0,on.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),(0,on.jsx)("input",{type:"text",value:Wn.full_name,onChange:e=>Vn(t=>m(m({},t),{},{full_name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",placeholder:"Enter your full name"})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number *"}),(0,on.jsx)("input",{type:"tel",value:Wn.phone,onChange:e=>Vn(t=>m(m({},t),{},{phone:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",placeholder:"+234 xxx xxx xxxx"})]}),(0,on.jsxs)("div",{className:"md:col-span-2",children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),(0,on.jsx)("input",{type:"email",value:Wn.email,onChange:e=>Vn(t=>m(m({},t),{},{email:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",placeholder:"your.email@example.com"})]}),(0,on.jsxs)("div",{className:"md:col-span-2",children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address Line 1 *"}),(0,on.jsx)("input",{type:"text",value:Wn.address_line_1,onChange:e=>Vn(t=>m(m({},t),{},{address_line_1:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",placeholder:"Street address, P.O. box, company name"})]}),(0,on.jsxs)("div",{className:"md:col-span-2",children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address Line 2"}),(0,on.jsx)("input",{type:"text",value:Wn.address_line_2,onChange:e=>Vn(t=>m(m({},t),{},{address_line_2:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",placeholder:"Apartment, suite, unit, building, floor, etc."})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"}),(0,on.jsx)("input",{type:"text",value:Wn.city,onChange:e=>Vn(t=>m(m({},t),{},{city:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",placeholder:"Lagos"})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State *"}),(0,on.jsx)("input",{type:"text",value:Wn.state,onChange:e=>Vn(t=>m(m({},t),{},{state:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",placeholder:"Lagos State"})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Postal Code"}),(0,on.jsx)("input",{type:"text",value:Wn.postal_code,onChange:e=>Vn(t=>m(m({},t),{},{postal_code:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",placeholder:"100001"})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),(0,on.jsxs)("select",{value:Wn.country,onChange:e=>Vn(t=>m(m({},t),{},{country:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",children:[(0,on.jsx)("option",{value:"Nigeria",children:"Nigeria"}),(0,on.jsx)("option",{value:"Ghana",children:"Ghana"}),(0,on.jsx)("option",{value:"Kenya",children:"Kenya"})]})]}),(0,on.jsxs)("div",{className:"md:col-span-2",children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Delivery Instructions"}),(0,on.jsx)("textarea",{value:Wn.delivery_instructions,onChange:e=>Vn(t=>m(m({},t),{},{delivery_instructions:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",rows:"3",placeholder:"Any special delivery instructions..."})]})]}),(0,on.jsxs)("div",{className:"flex justify-between",children:[(0,on.jsx)("button",{onClick:()=>qn("review"),className:"px-6 py-2 text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Back to Review"}),(0,on.jsx)("button",{onClick:()=>{bl()&&qn("payment")},className:"px-6 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 font-medium",children:"Continue to Payment"})]})]}),"payment"===In&&(0,on.jsxs)("div",{className:"space-y-6",children:[(0,on.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"?? Payment with Paystack"}),(0,on.jsx)("div",{className:"border rounded-lg p-4 ".concat("pyexpress"===Un?"bg-emerald-50 border-emerald-200":"bg-orange-50 border-orange-200"),children:(0,on.jsxs)("div",{className:"flex items-start",children:[(0,on.jsx)("svg",{className:"w-5 h-5 mr-2 flex-shrink-0 mt-0.5 ".concat("pyexpress"===Un?"text-emerald-600":"text-orange-600"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,on.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,on.jsxs)("div",{children:[(0,on.jsx)("div",{className:"font-medium ".concat("pyexpress"===Un?"text-emerald-900":"text-orange-900"),children:"pyexpress"===Un?"PyExpress Checkout":"Farm Deals Checkout"}),(0,on.jsx)("div",{className:"text-sm mt-1 ".concat("pyexpress"===Un?"text-emerald-700":"text-orange-700"),children:"pyexpress"===Un?"Payment will be split: Vendor receives product payment, platform handles service charges":"Payment via Fixed Split Group - Sophie Farms Investment Ltd manages farmer payouts"}),h&&("agent"===h.role||"purchasing_agent"===h.role)&&(0,on.jsx)("div",{className:"mt-2 text-sm font-medium text-blue-700",children:"? As an agent, you'll earn commission on this purchase!"})]})]})}),(0,on.jsxs)("div",{className:"space-y-4",children:[(0,on.jsx)("div",{className:"font-medium text-gray-900",children:"Secure Payment via Paystack"}),(0,on.jsxs)("div",{className:"space-y-2",children:[(0,on.jsxs)("div",{className:"flex items-center p-3 border border-gray-200 rounded-lg bg-white",children:[(0,on.jsx)("svg",{className:"w-8 h-8 text-emerald-600 mr-3",viewBox:"0 0 24 24",fill:"currentColor",children:(0,on.jsx)("path",{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z"})}),(0,on.jsxs)("div",{children:[(0,on.jsx)("div",{className:"font-medium",children:"Debit/Credit Card"}),(0,on.jsx)("div",{className:"text-sm text-gray-600",children:"Visa, Mastercard, Verve supported"})]})]}),(0,on.jsxs)("div",{className:"flex items-center p-3 border border-gray-200 rounded-lg bg-white",children:[(0,on.jsx)("svg",{className:"w-8 h-8 text-blue-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,on.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),(0,on.jsxs)("div",{children:[(0,on.jsx)("div",{className:"font-medium",children:"Bank Transfer & USSD"}),(0,on.jsx)("div",{className:"text-sm text-gray-600",children:"Transfer directly from your bank"})]})]}),(0,on.jsxs)("div",{className:"flex items-center p-3 border border-gray-200 rounded-lg bg-white",children:[(0,on.jsx)("svg",{className:"w-8 h-8 text-purple-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,on.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})}),(0,on.jsxs)("div",{children:[(0,on.jsx)("div",{className:"font-medium",children:"Mobile Money"}),(0,on.jsx)("div",{className:"text-sm text-gray-600",children:"MTN, Airtel, and other providers"})]})]})]})]}),(0,on.jsxs)("div",{className:"flex justify-between",children:[(0,on.jsx)("button",{onClick:()=>qn("address"),className:"px-6 py-2 text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Back to Address"}),(0,on.jsx)("button",{onClick:async()=>{if(bl()){Qn(!0);try{const t=localStorage.getItem("token"),r=il();if(0===r.length)return void alert("No items in cart for checkout");const a=r.reduce((e,t)=>e+t.product.price_per_unit*t.quantity,0),n="pyexpress"===Un?"home":"farmhub",s=r[0].product;let l=null;if("home"===n&&s.seller_id)try{const e=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/payment/subaccount/").concat(s.seller_id),{headers:{Authorization:"Bearer ".concat(t)}});if(e.ok){l=(await e.json()).subaccount_code}else l=s.seller_subaccount_code||null}catch(e){console.error("Failed to fetch subaccount:",e)}const o={product_total:a,customer_state:Wn.state,product_weight:r.reduce((e,t)=>e+1*t.quantity,0),quantity:r.reduce((e,t)=>e+t.quantity,0),subaccount_code:l,product_id:r.map(e=>e.product.id).join(","),platform_type:n,buyer_location:"".concat(Wn.address_line_1).concat(Wn.address_line_2?", "+Wn.address_line_2:""),buyer_city:Wn.city,seller_location:s.location||"",seller_city:s.city||"",callback_url:"".concat(window.location.origin,"/payment-callback")},i=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/paystack/transaction/initialize"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(o)});if(!i.ok){const e=await i.json();throw new Error(e.detail||"Failed to initialize payment")}{const e=await i.json();ts(e.reference);const t=e.breakdown;window.confirm("Payment Breakdown:\n\n"+"Product Total: ?".concat(t.product_total.toLocaleString(),"\n")+"Delivery Fee (".concat(t.delivery_state,"): ?").concat(t.delivery_fee.toLocaleString(),"\n")+"Platform Charges: ?".concat(t.platform_cut.toLocaleString(),"\n")+(t.agent_commission>0?"Your Commission (".concat(t.agent_tier||"","): ?").concat(t.agent_commission.toLocaleString(),"\n"):"")+"\nTotal Amount: ?".concat(e.amount.toLocaleString(),"\n\n")+"Proceed to payment gateway?")?window.location.href=e.authorization_url:Qn(!1)}}catch(t){console.error("Payment initialization error:",t),alert("Payment initialization failed: ".concat(t.message)),Qn(!1)}}},disabled:Gn,className:"px-8 py-2 text-white rounded-lg font-medium flex items-center ".concat("pyexpress"===Un?"bg-emerald-600 hover:bg-emerald-700":"bg-orange-600 hover:bg-orange-700"," ").concat(Gn?"opacity-50 cursor-not-allowed":""),children:Gn?(0,on.jsxs)(on.Fragment,{children:[(0,on.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,on.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,on.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):"Pay ?".concat((null===(t=Jn.total)||void 0===t?void 0:t.toLocaleString())||0," Securely")})]})]})]}),(0,on.jsx)("div",{className:"lg:col-span-1",children:(0,on.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 sticky top-0",children:[(0,on.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"?? Order Summary"}),(0,on.jsxs)("div",{className:"space-y-3",children:[(0,on.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,on.jsxs)("span",{className:"text-gray-600",children:["Product Total (",Jn.item_count," items)"]}),(0,on.jsxs)("span",{className:"font-medium",children:["?",(null===(r=Jn.product_total)||void 0===r?void 0:r.toLocaleString())||0]})]}),Jn.platform_service_charge>0&&(0,on.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,on.jsx)("span",{className:"text-gray-600",children:"Service Charge (10%)"}),(0,on.jsxs)("span",{className:"font-medium",children:["?",(null===(a=Jn.platform_service_charge)||void 0===a?void 0:a.toLocaleString())||0]})]}),Jn.platform_commission>0&&(0,on.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,on.jsx)("span",{className:"text-gray-600",children:"Platform Commission (2.5%)"}),(0,on.jsxs)("span",{className:"font-medium",children:["?",(null===(s=Jn.platform_commission)||void 0===s?void 0:s.toLocaleString())||0]})]}),(0,on.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,on.jsx)("span",{className:"text-gray-600",children:"Delivery Fees"}),(0,on.jsxs)("span",{className:"font-medium",children:["?",(null===(l=Jn.delivery_total)||void 0===l?void 0:l.toLocaleString())||0]})]}),Jn.is_agent&&Jn.agent_commission>0&&(0,on.jsxs)("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-3 -mx-1",children:[(0,on.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,on.jsx)("span",{className:"text-emerald-700 font-medium",children:"?? Your Agent Commission (4%)"}),(0,on.jsxs)("span",{className:"font-semibold text-emerald-700",children:["?",(null===(o=Jn.agent_commission)||void 0===o?void 0:o.toLocaleString())||0]})]}),(0,on.jsx)("p",{className:"text-xs text-emerald-600 mt-1",children:"Paid separately to your account after order completion"})]}),(0,on.jsx)("div",{className:"border-t border-gray-200 pt-3",children:(0,on.jsxs)("div",{className:"flex justify-between",children:[(0,on.jsx)("span",{className:"text-lg font-semibold text-gray-900",children:"Total to Pay"}),(0,on.jsxs)("span",{className:"text-lg font-semibold text-emerald-600",children:["?",(null===(i=Jn.total)||void 0===i?void 0:i.toLocaleString())||0]})]})}),(0,on.jsxs)("div",{className:"text-xs text-gray-500 mt-2 space-y-1",children:[(0,on.jsxs)("div",{children:[" Vendor receives: ?",(null===(c=Jn.product_total)||void 0===c?void 0:c.toLocaleString())||0]}),(0,on.jsxs)("div",{children:[" Platform fee: ?",(null===(d=Jn.platform_cut)||void 0===d?void 0:d.toLocaleString())||0]}),Jn.is_agent&&(0,on.jsxs)("div",{className:"text-emerald-600 font-medium",children:[" Your commission: ?",(null===(u=Jn.agent_commission)||void 0===u?void 0:u.toLocaleString())||0]})]})]}),"review"!==In&&Wn.full_name&&(0,on.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[(0,on.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"?? Shipping To:"}),(0,on.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,on.jsx)("div",{children:Wn.full_name}),(0,on.jsx)("div",{children:Wn.address_line_1}),Wn.address_line_2&&(0,on.jsx)("div",{children:Wn.address_line_2}),(0,on.jsxs)("div",{children:[Wn.city,", ",Wn.state]}),(0,on.jsx)("div",{children:Wn.country}),(0,on.jsx)("div",{className:"mt-1 font-medium",children:Wn.phone})]})]})]})})]})})]})}),Wa&&(0,on.jsx)("div",{className:"modal-backdrop-blur fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,on.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,on.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,on.jsxs)("div",{className:"flex justify-between items-center",children:[(0,on.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"?? Create Delivery Request"}),(0,on.jsx)("button",{onClick:()=>Va(!1),className:"text-gray-500 hover:text-gray-700"})]})}),(0,on.jsx)("div",{className:"p-6",children:(0,on.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,on.jsxs)("div",{className:"space-y-4",children:[(0,on.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"?? Order Details"}),(0,on.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Order ID"}),(0,on.jsx)("input",{type:"text",value:ds.order_id,onChange:e=>us(t=>m(m({},t),{},{order_id:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",placeholder:"e.g., ORD-12345"})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Order Type"}),(0,on.jsxs)("select",{value:ds.order_type,onChange:e=>us(t=>m(m({},t),{},{order_type:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",children:[(0,on.jsx)("option",{value:"regular",children:"Regular Order"}),(0,on.jsx)("option",{value:"preorder",children:"Pre-order"})]})]})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Details *"}),(0,on.jsx)("textarea",{value:ds.product_details,onChange:e=>us(t=>m(m({},t),{},{product_details:e.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",placeholder:"Describe the products to be delivered..."})]}),(0,on.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Quantity *"}),(0,on.jsx)("input",{type:"number",value:ds.total_quantity,onChange:e=>us(t=>m(m({},t),{},{total_quantity:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",placeholder:"100"})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),(0,on.jsxs)("select",{value:ds.quantity_unit,onChange:e=>us(t=>m(m({},t),{},{quantity_unit:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",children:[(0,on.jsx)("option",{value:"kg",children:"Kilograms"}),(0,on.jsx)("option",{value:"pieces",children:"Pieces"}),(0,on.jsx)("option",{value:"bags",children:"Bags"}),(0,on.jsx)("option",{value:"tins",children:"Tins"}),(0,on.jsx)("option",{value:"crates",children:"Crates"}),(0,on.jsx)("option",{value:"liters",children:"Liters"})]})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Weight (kg)"}),(0,on.jsx)("input",{type:"number",value:ds.weight_kg,onChange:e=>us(t=>m(m({},t),{},{weight_kg:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",placeholder:"50"})]})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"?? Pickup Address *"}),(0,on.jsx)("input",{type:"text",value:ds.pickup_address,onChange:e=>us(t=>m(m({},t),{},{pickup_address:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",placeholder:"Enter pickup address..."})]}),(0,on.jsxs)("div",{children:[(0,on.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"?? Delivery Destinations *"}),(0,on.jsx)("button",{type:"button",onClick:()=>{Fn([...zn,""]),us(e=>m(m({},e),{},{delivery_addresses:[...e.delivery_addresses,""]}))},className:"text-sm text-emerald-600 hover:text-emerald-700 font-medium",children:"+ Add Destination"})]}),(0,on.jsx)("div",{className:"space-y-2",children:zn.map((e,t)=>(0,on.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,on.jsx)("div",{className:"flex-1",children:(0,on.jsx)("input",{type:"text",value:e,onChange:e=>((e,t)=>{const r=[...zn];r[e]=t,Fn(r);const a=[...ds.delivery_addresses];a[e]=t,us(e=>m(m({},e),{},{delivery_addresses:a}))})(t,e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",placeholder:"Destination ".concat(t+1," address...")})}),zn.length>1&&(0,on.jsx)("button",{type:"button",onClick:()=>(e=>{const t=zn.filter((t,r)=>r!==e);Fn(t),us(t=>m(m({},t),{},{delivery_addresses:t.delivery_addresses.filter((t,r)=>r!==e)}))})(t),className:"text-red-600 hover:text-red-700 p-1",children:"?"})]},t))})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"?? Estimated Price (?) *"}),(0,on.jsx)("input",{type:"number",value:ds.estimated_price,onChange:e=>us(t=>m(m({},t),{},{estimated_price:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",placeholder:"5000"})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"?? Special Instructions"}),(0,on.jsx)("textarea",{value:ds.special_instructions,onChange:e=>us(t=>m(m({},t),{},{special_instructions:e.target.value})),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",placeholder:"Any special handling requirements..."})]})]}),(0,on.jsxs)("div",{className:"space-y-4",children:[(0,on.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"?? Find & Select Driver"}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Drivers"}),(0,on.jsxs)("div",{className:"flex space-x-2",children:[(0,on.jsx)("input",{type:"text",value:rn,onChange:e=>an(e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",placeholder:"Search by driver name or username..."}),(0,on.jsx)("button",{type:"button",onClick:()=>(async e=>{try{const t=localStorage.getItem("token");let r="".concat("https://mvp-2-u8e9.onrender.com","/api/drivers/search?min_rating=3.0&radius_km=50");e&&e.lat&&e.lng&&(r+="&pickup_lat=".concat(e.lat,"&pickup_lng=").concat(e.lng));const a=await fetch(r,{headers:{Authorization:"Bearer ".concat(t)}});if(a.ok){const e=await a.json();sn(e.drivers||[])}}catch(t){console.error("Error searching drivers:",t)}})(kn),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"??"})]})]}),nn.length>0&&(0,on.jsxs)("div",{className:"max-h-64 overflow-y-auto border border-gray-200 rounded-lg",children:[(0,on.jsxs)("div",{className:"p-2 bg-gray-50 border-b border-gray-200 text-sm font-medium text-gray-700",children:["Available Drivers (",nn.length,")"]}),nn.map(e=>(0,on.jsx)("div",{onClick:()=>{cn(e),us(t=>m(m({},t),{},{preferred_driver_username:e.driver_username}))},className:"p-3 border-b border-gray-100 cursor-pointer hover:bg-gray-50 ".concat((null===ln||void 0===ln?void 0:ln.driver_id)===e.driver_id?"bg-emerald-50 border-emerald-200":""),children:(0,on.jsxs)("div",{className:"flex justify-between items-start",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("div",{className:"font-medium text-gray-900",children:e.driver_name}),(0,on.jsxs)("div",{className:"text-sm text-gray-600",children:["@",e.driver_username]}),(0,on.jsxs)("div",{className:"text-sm text-gray-500",children:["? ",e.rating,"  ",e.total_deliveries," deliveries"]}),(0,on.jsxs)("div",{className:"text-sm text-blue-600",children:["?? ",e.vehicle_info.make_model," (",e.vehicle_info.plate_number,")"]})]}),(0,on.jsxs)("div",{className:"text-right",children:[(0,on.jsx)("div",{className:"text-sm px-2 py-1 rounded-full ".concat("online"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"),children:e.status}),e.distance_km&&(0,on.jsxs)("div",{className:"text-sm text-gray-500 mt-1",children:["?? ",e.distance_km," km away"]})]})]})},e.driver_id))]}),ln&&(0,on.jsxs)("div",{className:"p-4 bg-emerald-50 border border-emerald-200 rounded-lg",children:[(0,on.jsx)("div",{className:"text-sm font-medium text-emerald-800 mb-2",children:"? Selected Driver"}),(0,on.jsx)("div",{className:"font-medium text-gray-900",children:ln.driver_name}),(0,on.jsxs)("div",{className:"text-sm text-gray-600",children:["@",ln.driver_username]}),(0,on.jsxs)("div",{className:"text-sm text-gray-500",children:["? ",ln.rating,"  ",ln.total_deliveries," deliveries"]})]}),(0,on.jsx)("div",{className:"h-48 bg-gray-100 border border-gray-200 rounded-lg flex items-center justify-center",children:(0,on.jsxs)("div",{className:"text-center text-gray-500",children:[(0,on.jsx)("div",{className:"text-2xl mb-2",children:"???"}),(0,on.jsx)("div",{className:"text-sm",children:"Interactive Map"}),(0,on.jsx)("div",{className:"text-xs",children:"Pickup & delivery locations will be shown here"})]})}),(0,on.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,on.jsx)("button",{type:"button",onClick:()=>Va(!1),className:"flex-1 px-4 py-2 text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,on.jsx)("button",{type:"button",onClick:async()=>{try{const e=localStorage.getItem("token"),t=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/delivery/request-enhanced"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(m(m({},ds),{},{total_quantity:parseFloat(ds.total_quantity),weight_kg:ds.weight_kg?parseFloat(ds.weight_kg):null,estimated_price:parseFloat(ds.estimated_price),pickup_coordinates:kn,delivery_coordinates:Cn}))});if(t.ok){const e=await t.json();alert("Delivery request created successfully! \n        Request ID: ".concat(e.request_id,"\n        Total destinations: ").concat(e.total_destinations,"\n        Quantity: ").concat(e.total_quantity," ").concat(e.quantity_unit,"\n        Estimated price: ?").concat(e.estimated_price,"\n        OTP: ").concat(e.delivery_otp)),Va(!1),us({order_id:"",order_type:"regular",pickup_address:"",delivery_addresses:[""],total_quantity:"",quantity_unit:"kg",product_details:"",weight_kg:"",special_instructions:"",estimated_price:"",preferred_driver_username:""}),Fn([""])}else{const e=await t.json();alert("Error: ".concat(e.detail||"Failed to create delivery request"))}}catch(e){console.error("Error creating delivery request:",e),alert("Error creating delivery request. Please try again.")}},className:"flex-1 px-6 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 font-medium",children:"Create Request"})]})]})]})})]})}),dn&&(0,on.jsx)("div",{className:"modal-backdrop-blur fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,on.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden flex",children:[(0,on.jsxs)("div",{className:"w-1/3 bg-gray-50 border-r border-gray-200 p-4",children:[(0,on.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,on.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"?? Delivery Info"}),(0,on.jsx)("button",{onClick:()=>hn(!1),className:"text-gray-500 hover:text-gray-700"})]}),An&&(0,on.jsxs)("div",{className:"space-y-4",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"Status"}),(0,on.jsx)("div",{className:"text-lg font-semibold text-emerald-600",children:An.status})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"Product"}),(0,on.jsx)("div",{className:"text-sm text-gray-900",children:An.product_details})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"Quantity"}),(0,on.jsxs)("div",{className:"text-sm text-gray-900",children:[An.total_quantity," ",An.quantity_unit]})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"Pickup"}),(0,on.jsx)("div",{className:"text-sm text-gray-900",children:An.pickup_location.address})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"Destinations"}),An.delivery_locations.map((e,t)=>(0,on.jsxs)("div",{className:"text-sm text-gray-900",children:[t+1,". ",e.address]},t))]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"Price"}),(0,on.jsxs)("div",{className:"text-sm text-gray-900",children:["?",An.negotiated_price||An.estimated_price]})]})]})]}),(0,on.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,on.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,on.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"?? Delivery Chat"})}),(0,on.jsx)("div",{className:"flex-1 p-4 overflow-y-auto",children:0===bn.length?(0,on.jsxs)("div",{className:"text-center text-gray-500 mt-8",children:[(0,on.jsx)("div",{className:"text-2xl mb-2",children:"??"}),(0,on.jsx)("div",{children:"No messages yet"}),(0,on.jsx)("div",{className:"text-sm",children:"Start a conversation with your driver"})]}):(0,on.jsx)("div",{className:"space-y-3",children:bn.map(e=>(0,on.jsx)("div",{className:"flex ".concat(e.sender_username===h.username?"justify-end":"justify-start"),children:(0,on.jsxs)("div",{className:"max-w-xs px-3 py-2 rounded-lg ".concat(e.sender_username===h.username?"bg-emerald-500 text-white":"bg-gray-200 text-gray-900"),children:[(0,on.jsx)("div",{className:"text-sm",children:"location"===e.message_type?(0,on.jsxs)("div",{children:[(0,on.jsx)("div",{className:"font-medium",children:"?? Location shared"}),(0,on.jsx)("div",{className:"text-xs opacity-75",children:"Tap to view on map"})]}):e.content}),(0,on.jsx)("div",{className:"text-xs mt-1 opacity-75",children:new Date(e.timestamp).toLocaleTimeString()})]})},e.id))})}),(0,on.jsx)("div",{className:"p-4 border-t border-gray-200",children:(0,on.jsxs)("div",{className:"flex space-x-2",children:[(0,on.jsx)("input",{type:"text",value:Nn,onChange:e=>_n(e.target.value),onKeyPress:e=>"Enter"===e.key&&Nn.trim()&&ml(jn,Nn),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",placeholder:"Type a message..."}),(0,on.jsx)("button",{onClick:()=>ml(jn,"Current location","location"),className:"px-3 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",title:"Share location",children:"??"}),(0,on.jsx)("button",{onClick:()=>Nn.trim()&&ml(jn,Nn),className:"px-4 py-2 bg-emerald-500 text-white rounded-lg hover:bg-emerald-600",children:"Send"})]})})]})]})}),Ge&&Ze&&(0,on.jsx)("div",{className:"modal-backdrop-blur fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,on.jsxs)("div",{className:"bg-white rounded-lg max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[(0,on.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,on.jsxs)("div",{className:"flex justify-between items-center",children:[(0,on.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Pre-order Details"}),(0,on.jsx)("button",{onClick:()=>{Qe(!1),Xe(null)},className:"text-gray-500 hover:text-gray-700"})]})}),(0,on.jsxs)("div",{className:"p-6",children:[Ze.images&&Ze.images.length>0?(0,on.jsx)("img",{src:Ze.images[0],alt:Ze.product_name,className:"w-full h-48 object-cover rounded-lg mb-4"}):(0,on.jsx)("div",{className:"w-full h-48 bg-gray-200 flex items-center justify-center rounded-lg mb-4",children:(0,on.jsx)("span",{className:"text-gray-500",children:"No Image"})}),(0,on.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:Ze.product_name}),(0,on.jsx)("p",{className:"text-gray-600 mb-4",children:Ze.description}),(0,on.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,on.jsxs)("div",{className:"bg-emerald-50 p-3 rounded-lg",children:[(0,on.jsx)("div",{className:"text-sm text-gray-600",children:"Price per unit"}),(0,on.jsxs)("div",{className:"text-xl font-bold text-emerald-600",children:["?",Ze.price_per_unit,"/",Ze.unit]})]}),(0,on.jsxs)("div",{className:"bg-orange-50 p-3 rounded-lg",children:[(0,on.jsx)("div",{className:"text-sm text-gray-600",children:"Available stock"}),(0,on.jsxs)("div",{className:"text-xl font-bold text-orange-600",children:[Ze.available_stock," ",Ze.unit]})]})]}),(0,on.jsxs)("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg",children:[(0,on.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Seller Information"}),(0,on.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("span",{className:"font-medium",children:"Business:"})," ",Ze.business_name]}),Ze.farm_name&&(0,on.jsxs)("div",{children:[(0,on.jsx)("span",{className:"font-medium",children:"Farm:"})," ",Ze.farm_name]}),Ze.agent_username&&(0,on.jsxs)("div",{children:[(0,on.jsx)("span",{className:"font-medium",children:"Agent:"})," @",Ze.agent_username]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("span",{className:"font-medium",children:"Location:"})," ",Ze.location]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("span",{className:"font-medium",children:"Seller Type:"})," ",Ze.seller_type]})]})]}),(0,on.jsxs)("div",{className:"mb-4 p-4 bg-orange-50 rounded-lg border border-orange-200",children:[(0,on.jsx)("h4",{className:"font-semibold text-orange-900 mb-2",children:"Pre-order Information"}),(0,on.jsxs)("div",{className:"space-y-1 text-sm text-orange-800",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("span",{className:"font-medium",children:"Partial payment required:"}),Math.round(100*Ze.partial_payment_percentage),"% upfront"]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("span",{className:"font-medium",children:"Remaining payment:"}),100-Math.round(100*Ze.partial_payment_percentage),"% on delivery"]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("span",{className:"font-medium",children:"Expected delivery:"}),new Date(Ze.delivery_date).toLocaleDateString()]}),Ze.orders_count>0&&(0,on.jsxs)("div",{children:[(0,on.jsx)("span",{className:"font-medium",children:"Current orders:"}),Ze.orders_count," (",Ze.total_ordered_quantity," ",Ze.unit,")"]})]})]}),h?(0,on.jsxs)("div",{className:"space-y-4",children:[(0,on.jsxs)("div",{children:[(0,on.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Quantity (",Ze.unit,")"]}),(0,on.jsx)("input",{type:"number",min:"1",max:Ze.available_stock,defaultValue:"1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",id:"preorder-quantity",onChange:e=>{const t=parseInt(e.target.value)||1,r=t*Ze.price_per_unit,a=Math.round(r*Ze.partial_payment_percentage);document.getElementById("summary-quantity").textContent="".concat(t," ").concat(Ze.unit),document.getElementById("summary-total").textContent="?".concat(r),document.getElementById("summary-partial").textContent="?".concat(a),document.getElementById("summary-remaining").textContent="?".concat(r-a)}})]}),(0,on.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg",children:[(0,on.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"Order Summary"}),(0,on.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,on.jsxs)("div",{className:"flex justify-between",children:[(0,on.jsx)("span",{children:"Unit price:"}),(0,on.jsxs)("span",{children:["?",Ze.price_per_unit]})]}),(0,on.jsxs)("div",{className:"flex justify-between",children:[(0,on.jsx)("span",{children:"Quantity:"}),(0,on.jsxs)("span",{id:"summary-quantity",children:["1 ",Ze.unit]})]}),(0,on.jsxs)("div",{className:"flex justify-between font-medium",children:[(0,on.jsx)("span",{children:"Total amount:"}),(0,on.jsxs)("span",{id:"summary-total",children:["?",Ze.price_per_unit]})]}),(0,on.jsxs)("div",{className:"flex justify-between text-orange-600",children:[(0,on.jsx)("span",{children:"Partial payment now:"}),(0,on.jsxs)("span",{id:"summary-partial",children:["?",Math.round(Ze.price_per_unit*Ze.partial_payment_percentage)]})]}),(0,on.jsxs)("div",{className:"flex justify-between text-gray-600",children:[(0,on.jsx)("span",{children:"Remaining on delivery:"}),(0,on.jsxs)("span",{id:"summary-remaining",children:["?",Ze.price_per_unit-Math.round(Ze.price_per_unit*Ze.partial_payment_percentage)]})]})]})]}),(0,on.jsx)("button",{onClick:async()=>{const e=parseInt(document.getElementById("preorder-quantity").value);if(e<=0||e>Ze.available_stock)alert("Please enter a valid quantity");else try{const t=localStorage.getItem("token"),r=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/preorders/").concat(Ze.id,"/order"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({quantity:e})});if(r.ok){const e=await r.json();alert("Pre-order placed successfully! Order ID: ".concat(e.order_id,"\nPartial payment: ?").concat(e.partial_amount,"\nRemaining: ?").concat(e.remaining_amount)),Qe(!1),Xe(null),Ds()}else{const e=await r.json();alert("Error: ".concat(e.detail||"Failed to place pre-order"))}}catch(t){console.error("Error placing pre-order:",t),alert("Error placing pre-order. Please try again.")}},className:"w-full bg-orange-600 text-white py-3 px-4 rounded-lg hover:bg-orange-700 font-medium transition-colors",children:"Place Pre-order"})]}):(0,on.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,on.jsx)("p",{className:"text-gray-600 mb-3",children:"Please sign in to place pre-orders"}),(0,on.jsx)("button",{onClick:()=>{Qe(!1),N("login"),j(!0)},className:"px-6 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700",children:"Sign In"})]})]})]})}),Je&&(0,on.jsx)("div",{className:"modal-backdrop-blur fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,on.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,on.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,on.jsxs)("div",{className:"flex justify-between items-center",children:[(0,on.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Create Pre-order"}),(0,on.jsx)("button",{onClick:()=>$e(!1),className:"text-gray-500 hover:text-gray-700"})]})}),(0,on.jsx)("div",{className:"p-6",children:(0,on.jsx)("form",{onSubmit:async e=>{e.preventDefault();try{const e=localStorage.getItem("token"),t=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/preorders/create"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(m(m({},ps),{},{total_stock:parseInt(ps.total_stock),price_per_unit:parseFloat(ps.price_per_unit),delivery_date:new Date(ps.delivery_date).toISOString()}))});if(t.ok){await t.json();alert("Pre-order created successfully! You can publish it from your dashboard."),$e(!1),hs({product_name:"",product_category:"vegetables",description:"",total_stock:"",unit:"kg",price_per_unit:"",partial_payment_percentage:.3,location:"",delivery_date:"",business_name:"",farm_name:"",images:[]})}else{const e=await t.json();alert("Error: ".concat(e.detail||"Failed to create pre-order"))}}catch(t){console.error("Error creating pre-order:",t),alert("Error creating pre-order. Please try again.")}},children:(0,on.jsxs)("div",{className:"space-y-4",children:[(0,on.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name *"}),(0,on.jsx)("input",{type:"text",required:!0,value:ps.product_name,onChange:e=>hs(t=>m(m({},t),{},{product_name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",placeholder:"e.g., Organic Tomatoes"})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),(0,on.jsxs)("select",{required:!0,value:ps.product_category,onChange:e=>hs(t=>m(m({},t),{},{product_category:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",children:[(0,on.jsx)("option",{value:"vegetables",children:"Vegetables"}),(0,on.jsx)("option",{value:"fruits",children:"Fruits"}),(0,on.jsx)("option",{value:"grains",children:"Grains"}),(0,on.jsx)("option",{value:"legumes",children:"Legumes"}),(0,on.jsx)("option",{value:"spices",children:"Spices"}),(0,on.jsx)("option",{value:"feeds",children:"Feeds"}),(0,on.jsx)("option",{value:"fertilizer",children:"Fertilizer"}),(0,on.jsx)("option",{value:"seeds",children:"Seeds"})]})]})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description *"}),(0,on.jsx)("textarea",{required:!0,value:ps.description,onChange:e=>hs(t=>m(m({},t),{},{description:e.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",placeholder:"Describe your product, quality, farming methods, etc."})]}),(0,on.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Stock *"}),(0,on.jsx)("input",{type:"number",required:!0,min:"1",value:ps.total_stock,onChange:e=>hs(t=>m(m({},t),{},{total_stock:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",placeholder:"e.g., 1000"})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit *"}),(0,on.jsxs)("select",{required:!0,value:ps.unit,onChange:e=>hs(t=>m(m({},t),{},{unit:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",children:[(0,on.jsx)("option",{value:"kg",children:"Kilogram (kg)"}),(0,on.jsx)("option",{value:"g",children:"Gram (g)"}),(0,on.jsx)("option",{value:"ton",children:"Ton"}),(0,on.jsx)("option",{value:"pieces",children:"Pieces"}),(0,on.jsx)("option",{value:"liters",children:"Liters"}),(0,on.jsx)("option",{value:"bags",children:"Bags"}),(0,on.jsx)("option",{value:"tins",children:"Tins"}),(0,on.jsx)("option",{value:"crates",children:"Crates"})]})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price per Unit (?) *"}),(0,on.jsx)("input",{type:"number",required:!0,min:"0",step:"0.01",value:ps.price_per_unit,onChange:e=>hs(t=>m(m({},t),{},{price_per_unit:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",placeholder:"e.g., 500"})]})]}),(0,on.jsxs)("div",{children:[(0,on.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Partial Payment Required (",Math.round(100*ps.partial_payment_percentage),"%)"]}),(0,on.jsx)("input",{type:"range",min:"0.1",max:"0.9",step:"0.05",value:ps.partial_payment_percentage,onChange:e=>hs(t=>m(m({},t),{},{partial_payment_percentage:parseFloat(e.target.value)})),className:"w-full"}),(0,on.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[(0,on.jsx)("span",{children:"10%"}),(0,on.jsx)("span",{children:"90%"})]}),(0,on.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Buyers will pay ",Math.round(100*ps.partial_payment_percentage),"% upfront, remaining on delivery"]})]}),(0,on.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location *"}),(0,on.jsx)("input",{type:"text",required:!0,value:ps.location,onChange:e=>hs(t=>m(m({},t),{},{location:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",placeholder:"e.g., Lagos, Nigeria"})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Delivery Date *"}),(0,on.jsx)("input",{type:"datetime-local",required:!0,value:ps.delivery_date,onChange:e=>hs(t=>m(m({},t),{},{delivery_date:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500"})]})]}),(0,on.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Name *"}),(0,on.jsx)("input",{type:"text",required:!0,value:ps.business_name,onChange:e=>hs(t=>m(m({},t),{},{business_name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",placeholder:"e.g., Green Valley Farms"})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Farm Name (optional)"}),(0,on.jsx)("input",{type:"text",value:ps.farm_name,onChange:e=>hs(t=>m(m({},t),{},{farm_name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",placeholder:"e.g., Green Valley Farm"})]})]}),(0,on.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[(0,on.jsx)("button",{type:"button",onClick:()=>$e(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,on.jsx)("button",{type:"submit",className:"px-6 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 font-medium",children:"Create Pre-order"})]})]})})})]})}),M&&(0,on.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50",children:(0,on.jsxs)("div",{className:"fixed right-0 top-0 h-full w-96 bg-white shadow-lg flex flex-col",children:[(0,on.jsxs)("div",{className:"p-4 border-b border-gray-200",children:[(0,on.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,on.jsxs)("h2",{className:"text-lg font-semibold",children:["?? Shopping Cart (",z.length,")"]}),(0,on.jsx)("button",{onClick:()=>B(!1),className:"text-gray-500 hover:text-gray-700"})]}),(0,on.jsxs)("div",{className:"flex space-x-2 mt-3",children:[(0,on.jsxs)("button",{onClick:()=>q("pyexpress"),className:"flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-colors ".concat("pyexpress"===I?"bg-emerald-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:["PyExpress (",ll().length,")"]}),(0,on.jsxs)("button",{onClick:()=>q("farmdeals"),className:"flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-colors ".concat("farmdeals"===I?"bg-orange-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:["Farm Deals (",ol().length,")"]})]})]}),(0,on.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:0===il().length?(0,on.jsx)("div",{className:"text-center py-8",children:(0,on.jsxs)("div",{className:"text-gray-500 mb-4",children:[(0,on.jsx)("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,on.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.1 5H17M9 19a2 2 0 1 0 4 0 2 2 0 0 0-4 0zM20 19a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"})}),(0,on.jsx)("p",{className:"text-lg",children:"This cart is empty"}),(0,on.jsx)("p",{className:"text-sm",children:"pyexpress"===I?"Add business products from Home to get started!":"Add farm products from Farm Deals to get started!"})]})}):(0,on.jsx)("div",{className:"space-y-4",children:il().map(e=>(0,on.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,on.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,on.jsxs)("div",{className:"flex-1",children:[(0,on.jsx)("h3",{className:"font-medium text-gray-900 text-sm",children:e.product.product_name||e.product.crop_type}),(0,on.jsxs)("p",{className:"text-xs text-gray-600",children:["?",e.product.price_per_unit,"/",e.unit,e.unit_specification&&(0,on.jsxs)("span",{className:"text-gray-500",children:[" (",e.unit_specification,")"]}),"  ",e.product.seller_username]})]}),(0,on.jsx)("button",{onClick:()=>yl(e.id),className:"text-red-500 hover:text-red-700 text-sm",children:"?"})]}),(0,on.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,on.jsx)("button",{onClick:()=>gl(e.id,e.quantity-1),className:"w-6 h-6 rounded-full bg-gray-200 hover:bg-gray-300 flex items-center justify-center text-sm",children:"-"}),(0,on.jsx)("span",{className:"text-sm font-medium w-12 text-center",children:e.quantity}),(0,on.jsx)("button",{onClick:()=>gl(e.id,e.quantity+1),className:"w-6 h-6 rounded-full bg-gray-200 hover:bg-gray-300 flex items-center justify-center text-sm",children:"+"}),(0,on.jsxs)("span",{className:"text-xs text-gray-600",children:[e.unit,e.unit_specification&&" (".concat(e.unit_specification,")")]})]}),(0,on.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,on.jsx)("span",{className:"text-xs text-gray-600",children:"Delivery:"}),(0,on.jsx)("button",{onClick:()=>{return t=e.id,r="platform"===e.delivery_method?"offline":"platform",F(e=>e.map(e=>e.id===t?m(m({},e),{},{delivery_method:r}):e)),void fl();var t,r},className:"text-xs px-2 py-1 rounded-full ".concat("platform"===e.delivery_method?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"),children:"platform"===e.delivery_method?"?? Platform":"?? Offline"})]}),(0,on.jsx)("div",{className:"text-right",children:(0,on.jsxs)("span",{className:"font-semibold text-emerald-600",children:["?",(e.product.price_per_unit*e.quantity).toLocaleString()]})})]},e.id))})}),il().length>0&&(0,on.jsxs)("div",{className:"p-4 border-t border-gray-200 bg-white",children:[(0,on.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,on.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,on.jsxs)("span",{className:"text-gray-600",children:["Items (",il().reduce((e,t)=>e+t.quantity,0),")"]}),(0,on.jsxs)("span",{className:"font-medium",children:["?",il().reduce((e,t)=>e+t.product.price_per_unit*t.quantity,0).toLocaleString()]})]}),(0,on.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,on.jsx)("span",{className:"text-gray-600",children:"Est. Delivery"}),(0,on.jsxs)("span",{className:"font-medium",children:["?",Math.round(350*il().length).toLocaleString()]})]}),(0,on.jsxs)("div",{className:"flex justify-between font-semibold pt-2 border-t border-gray-200 ".concat("pyexpress"===I?"text-emerald-600":"text-orange-600"),children:[(0,on.jsx)("span",{children:"Total"}),(0,on.jsxs)("span",{children:["?",(il().reduce((e,t)=>e+t.product.price_per_unit*t.quantity,0)+Math.round(350*il().length)).toLocaleString()]})]})]}),(0,on.jsxs)("button",{onClick:()=>{fl(),0!==il().length?(Hn(I),fl(),qn("review"),Bn(!0),B(!1)):alert("Your cart is empty!")},className:"w-full text-white py-3 px-4 rounded-lg font-medium transition-colors ".concat("pyexpress"===I?"bg-emerald-600 hover:bg-emerald-700":"bg-orange-600 hover:bg-orange-700"),children:["Checkout ","pyexpress"===I?"PyExpress":"Farm Deals"," (",il().length," items)"]}),(0,on.jsx)("button",{onClick:()=>B(!1),className:"w-full mt-2 text-gray-600 hover:text-gray-800 py-2 text-sm",children:"Continue Shopping"})]})]})}),ne&&(0,on.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50",children:(0,on.jsxs)("div",{className:"fixed right-0 top-0 h-full w-96 bg-white shadow-lg flex flex-col",children:[(0,on.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,on.jsxs)("div",{className:"flex justify-between items-center",children:[(0,on.jsx)("h2",{className:"text-lg font-semibold",children:"Messages"}),(0,on.jsx)("button",{onClick:()=>se(!1),className:"text-gray-500 hover:text-gray-700"})]})}),de?(0,on.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,on.jsx)("div",{className:"p-3 border-b border-gray-200 bg-gray-50",children:(0,on.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,on.jsx)("button",{onClick:()=>ue(null),className:"text-gray-500 hover:text-gray-700",children:"?"}),(0,on.jsx)("div",{className:"w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center font-semibold",children:de.avatar}),(0,on.jsxs)("div",{children:[(0,on.jsx)("p",{className:"font-medium text-gray-900",children:de.name}),(0,on.jsx)("p",{className:"text-sm text-gray-500",children:"Online"})]})]})}),(0,on.jsx)("div",{className:"flex-1 p-4 overflow-y-auto",children:0===le.filter(e=>e.conversation_id===de.id).length?(0,on.jsx)("p",{className:"text-gray-500 text-center",children:"No messages yet. Start the conversation!"}):(0,on.jsx)("div",{className:"space-y-3",children:le.filter(e=>e.conversation_id===de.id).map(e=>(0,on.jsx)("div",{className:"flex ".concat(e.sender===h.username?"justify-end":"justify-start"),children:(0,on.jsxs)("div",{className:"max-w-xs px-3 py-2 rounded-lg ".concat(e.sender===h.username?"bg-emerald-500 text-white":"bg-gray-200 text-gray-900"),children:["audio"===e.type?(0,on.jsxs)("div",{children:[(0,on.jsxs)("audio",{controls:!0,className:"w-full",children:[(0,on.jsx)("source",{src:e.content,type:"audio/webm"}),"Your browser does not support the audio element."]}),(0,on.jsx)("p",{className:"text-xs mt-1 opacity-75",children:"Voice message"})]}):(0,on.jsx)("p",{children:e.content||e.text}),(0,on.jsx)("p",{className:"text-xs mt-1 opacity-75",children:new Date(e.timestamp).toLocaleTimeString()})]})},e.id))})}),(0,on.jsxs)("div",{className:"p-4 border-t border-gray-200",children:[we&&(0,on.jsxs)("div",{className:"mb-3 p-2 bg-green-50 rounded-lg border border-green-200",children:[(0,on.jsx)("p",{className:"text-sm text-green-700 mb-2",children:"Voice message recorded"}),(0,on.jsxs)("div",{className:"flex space-x-2",children:[(0,on.jsx)("button",{onClick:async()=>{if(we&&de){const e=new FileReader;e.onload=()=>{const t=e.result,r={id:Date.now(),type:"audio",content:t,sender:h.username,timestamp:(new Date).toISOString(),conversation_id:de.id};oe(e=>[...e,r]),Ne(null)},e.readAsDataURL(we)}},className:"px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700",children:"Send"}),(0,on.jsx)("button",{onClick:()=>Ne(null),className:"px-3 py-1 bg-gray-500 text-white text-sm rounded hover:bg-gray-600",children:"Cancel"})]})]}),(0,on.jsxs)("div",{className:"flex space-x-2",children:[(0,on.jsx)("input",{type:"text",value:ie,onChange:e=>ce(e.target.value),onKeyPress:e=>"Enter"===e.key&&vl(),placeholder:"Type a message...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"}),(0,on.jsx)("button",{onClick:ve?()=>{_e&&ve&&(_e.stop(),je(!1),ke(null))}:async()=>{try{const e=await navigator.mediaDevices.getUserMedia({audio:!0}),t=new MediaRecorder(e),r=[];t.ondataavailable=e=>r.push(e.data),t.onstop=()=>{const t=new Blob(r,{type:"audio/webm"});Ne(t),e.getTracks().forEach(e=>e.stop())},t.start(),ke(t),je(!0)}catch(e){console.error("Error starting recording:",e),alert("Unable to access microphone. Please check permissions.")}},className:"px-3 py-2 rounded-lg font-medium ".concat(ve?"bg-red-500 text-white hover:bg-red-600":"bg-blue-500 text-white hover:bg-blue-600"),children:"??"}),(0,on.jsx)("button",{onClick:vl,className:"px-3 py-2 bg-emerald-500 text-white rounded-lg hover:bg-emerald-600 font-medium",children:"Send"})]})]})]}):(0,on.jsxs)("div",{className:"flex-1 p-4",children:[(0,on.jsxs)("div",{className:"mb-4",children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search users by username"}),(0,on.jsx)("input",{type:"text",value:he,onChange:e=>{xe(e.target.value),(async e=>{if(e.length<2)setFoundUsers([]);else try{const t=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/users/search?username=").concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(t.ok){const e=await t.json();setFoundUsers(e)}}catch(t){console.error("Error searching users:",t)}})(e.target.value)},placeholder:"Enter username...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"})]}),foundUsers.length>0&&(0,on.jsxs)("div",{className:"mb-4",children:[(0,on.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Found Users"}),(0,on.jsx)("div",{className:"space-y-2",children:foundUsers.map(e=>(0,on.jsx)("div",{onClick:()=>(e=>{const t={id:"conv_".concat(h.username,"_").concat(e.username),participants:[h.username,e.username],name:e.first_name+" "+e.last_name,avatar:e.username.charAt(0).toUpperCase()};ue(t),setFoundUsers([]),xe("")})(e),className:"p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",children:(0,on.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,on.jsx)("div",{className:"w-8 h-8 bg-emerald-500 text-white rounded-full flex items-center justify-center font-semibold",children:e.username.charAt(0).toUpperCase()}),(0,on.jsxs)("div",{children:[(0,on.jsxs)("p",{className:"font-medium text-gray-900",children:[e.first_name," ",e.last_name]}),(0,on.jsxs)("p",{className:"text-sm text-gray-500",children:["@",e.username]})]})]})},e.username))})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Recent Conversations"}),0===me.length?(0,on.jsx)("p",{className:"text-gray-500 text-center",children:"No conversations yet. Search for users to start messaging!"}):(0,on.jsx)("div",{className:"space-y-2",children:me.map(e=>(0,on.jsx)("div",{onClick:()=>ue(e),className:"p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",children:(0,on.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,on.jsx)("div",{className:"w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center font-semibold",children:e.avatar}),(0,on.jsxs)("div",{children:[(0,on.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,on.jsx)("p",{className:"text-sm text-gray-500",children:"Click to view messages"})]})]})},e.id))})]})]})]})}),Ee&&(0,on.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,on.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-96 overflow-hidden",children:[(0,on.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,on.jsxs)("div",{className:"flex justify-between items-center",children:[(0,on.jsx)("h2",{className:"text-lg font-semibold",children:"Order Tracking"}),(0,on.jsx)("button",{onClick:()=>Pe(!1),className:"text-gray-500 hover:text-gray-700"})]})}),(0,on.jsx)("div",{className:"p-4 overflow-y-auto max-h-80",children:0===Re.length?(0,on.jsx)("p",{className:"text-gray-500 text-center py-8",children:"No orders found"}):(0,on.jsx)("div",{className:"space-y-4",children:Re.map(e=>{return(0,on.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,on.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,on.jsxs)("div",{children:[(0,on.jsxs)("h3",{className:"font-semibold text-gray-900",children:["Order #",e.id.slice(-8)]}),(0,on.jsx)("p",{className:"text-sm text-gray-600",children:new Date(e.created_at).toLocaleDateString()})]}),(0,on.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat("delivered"===e.status||"completed"===e.status?"bg-green-100 text-green-800":"in_transit"===e.status||"held_in_escrow"===e.status?"bg-blue-100 text-blue-800":"confirmed"===e.status||"pending"===e.status?"bg-yellow-100 text-yellow-800":"preorder_pending"===e.status?"bg-orange-100 text-orange-800":"bg-gray-100 text-gray-800"),children:(t=e.status,{pending:"Pending",held_in_escrow:"In Transit",in_transit:"In Transit",delivered:"Delivered",completed:"Completed",cancelled:"Cancelled",cancelled:"Cancelled",confirmed:"Confirmed",preorder_pending:"Preorder"}[t]||t.replace("_"," ").toUpperCase())})]}),(0,on.jsxs)("div",{className:"text-sm text-gray-600 mb-2",children:[(0,on.jsxs)("p",{children:[(0,on.jsx)("strong",{children:"Total:"})," ?",e.total_amount.toLocaleString()]}),(0,on.jsxs)("p",{children:[(0,on.jsx)("strong",{children:"Items:"})," ",e.items.length," item(s)"]}),(0,on.jsxs)("p",{children:[(0,on.jsx)("strong",{children:"Delivery:"})," ",e.delivery_address]})]}),(0,on.jsx)("div",{className:"space-y-1",children:e.items.map((e,t)=>(0,on.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,on.jsxs)("span",{children:[e.title,"  ",e.quantity]}),(0,on.jsxs)("span",{children:["?",e.total.toLocaleString()]})]},t))})]},e.id);var t})})})]})}),Ye&&h&&"agent"===h.role&&(0,on.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,on.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[(0,on.jsx)("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-pink-50",children:(0,on.jsxs)("div",{className:"flex justify-between items-center",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"?? Add Drop-off Location"}),(0,on.jsx)("p",{className:"text-gray-600 mt-1",children:"Create a convenient pickup location for buyers"})]}),(0,on.jsx)("button",{onClick:()=>Ke(!1),className:"text-gray-500 hover:text-gray-700 text-2xl font-bold"})]})}),(0,on.jsx)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:(0,on.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t=new FormData(e.target),r={name:t.get("name"),address:t.get("address"),city:t.get("city"),state:t.get("state"),country:t.get("country")||"Nigeria",contact_person:t.get("contact_person"),contact_phone:t.get("contact_phone"),operating_hours:t.get("operating_hours"),description:t.get("description")};try{const t=localStorage.getItem("token"),a=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/dropoff-locations"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(r)});if(a.ok){const t=await a.json();alert('Drop-off location "'.concat(t.location.name,'" created successfully!')),Ve(e=>[...e,{id:t.location.id,name:t.location.name,address:t.location.address,city:t.location.city,state:t.location.state}]),Ke(!1),e.target.reset()}else{const e=await a.json();alert("Error: ".concat(e.detail))}}catch(a){console.error("Error creating drop-off location:",a),alert("Error creating drop-off location. Please try again.")}},className:"space-y-6",children:[(0,on.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location Name *"}),(0,on.jsx)("input",{type:"text",name:"name",required:!0,placeholder:"e.g., Mile 12 Market, Kano Central Market",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State *"}),(0,on.jsxs)("select",{name:"state",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[(0,on.jsx)("option",{value:"",children:"Select State"}),(0,on.jsx)("option",{value:"Lagos",children:"Lagos"}),(0,on.jsx)("option",{value:"Kano",children:"Kano"}),(0,on.jsx)("option",{value:"Anambra",children:"Anambra"}),(0,on.jsx)("option",{value:"Rivers",children:"Rivers"}),(0,on.jsx)("option",{value:"Kaduna",children:"Kaduna"}),(0,on.jsx)("option",{value:"Oyo",children:"Oyo"}),(0,on.jsx)("option",{value:"Delta",children:"Delta"}),(0,on.jsx)("option",{value:"Imo",children:"Imo"}),(0,on.jsx)("option",{value:"Ogun",children:"Ogun"}),(0,on.jsx)("option",{value:"FCT",children:"FCT Abuja"}),(0,on.jsx)("option",{value:"Cross River",children:"Cross River"}),(0,on.jsx)("option",{value:"Plateau",children:"Plateau"}),(0,on.jsx)("option",{value:"Abia",children:"Abia"}),(0,on.jsx)("option",{value:"Enugu",children:"Enugu"}),(0,on.jsx)("option",{value:"Benue",children:"Benue"}),(0,on.jsx)("option",{value:"Edo",children:"Edo"}),(0,on.jsx)("option",{value:"Kwara",children:"Kwara"}),(0,on.jsx)("option",{value:"Akwa Ibom",children:"Akwa Ibom"}),(0,on.jsx)("option",{value:"Osun",children:"Osun"}),(0,on.jsx)("option",{value:"Kogi",children:"Kogi"}),(0,on.jsx)("option",{value:"Zamfara",children:"Zamfara"}),(0,on.jsx)("option",{value:"Sokoto",children:"Sokoto"}),(0,on.jsx)("option",{value:"Kebbi",children:"Kebbi"}),(0,on.jsx)("option",{value:"Niger",children:"Niger"}),(0,on.jsx)("option",{value:"Jigawa",children:"Jigawa"}),(0,on.jsx)("option",{value:"Yobe",children:"Yobe"}),(0,on.jsx)("option",{value:"Borno",children:"Borno"}),(0,on.jsx)("option",{value:"Gombe",children:"Gombe"}),(0,on.jsx)("option",{value:"Bauchi",children:"Bauchi"}),(0,on.jsx)("option",{value:"Adamawa",children:"Adamawa"}),(0,on.jsx)("option",{value:"Taraba",children:"Taraba"}),(0,on.jsx)("option",{value:"Nasarawa",children:"Nasarawa"}),(0,on.jsx)("option",{value:"Ebonyi",children:"Ebonyi"}),(0,on.jsx)("option",{value:"Ekiti",children:"Ekiti"}),(0,on.jsx)("option",{value:"Ondo",children:"Ondo"}),(0,on.jsx)("option",{value:"Bayelsa",children:"Bayelsa"})]})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"}),(0,on.jsx)("input",{type:"text",name:"city",required:!0,placeholder:"e.g., Lagos, Kano, Onitsha",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),(0,on.jsx)("input",{type:"text",name:"country",defaultValue:"Nigeria",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 bg-gray-50",readOnly:!0})]})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Address *"}),(0,on.jsx)("textarea",{name:"address",required:!0,rows:"3",placeholder:"e.g., Shop 45, Mile 12 International Market, Mile 12, Lagos State",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})]}),(0,on.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Person"}),(0,on.jsx)("input",{type:"text",name:"contact_person",placeholder:"e.g., Mr. John Doe",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Phone"}),(0,on.jsx)("input",{type:"tel",name:"contact_phone",placeholder:"e.g., +234 801 234 5678",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})]})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Operating Hours"}),(0,on.jsx)("input",{type:"text",name:"operating_hours",placeholder:"e.g., 6:00 AM - 6:00 PM (Mon-Sat)",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Notes"}),(0,on.jsx)("textarea",{name:"description",rows:"2",placeholder:"e.g., Near Gate 3, look for the blue sign",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})]}),(0,on.jsxs)("div",{className:"flex space-x-4 pt-4",children:[(0,on.jsx)("button",{type:"button",onClick:()=>Ke(!1),className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium",children:"Cancel"}),(0,on.jsx)("button",{type:"submit",className:"flex-1 px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 font-medium",children:"?? Add Location"})]})]})})]})}),na&&la&&(0,on.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,on.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[(0,on.jsx)("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-emerald-50 to-blue-50",children:(0,on.jsxs)("div",{className:"flex justify-between items-start",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:la.product_name||la.crop_type}),(0,on.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,on.jsxs)("div",{className:"text-3xl font-bold text-emerald-600",children:["?",la.price_per_unit,"/",la.unit||la.unit_of_measure||"kg",la.unit_specification&&(0,on.jsxs)("span",{className:"text-lg font-medium text-gray-600 ml-2",children:["(",la.unit_specification,")"]})]}),"preorder"===la.type&&(0,on.jsx)("div",{className:"bg-orange-500 text-white px-4 py-2 rounded-full text-sm font-bold",children:"? PRE-ORDER"})]})]}),(0,on.jsx)("button",{onClick:dl,className:"text-gray-500 hover:text-gray-700 text-2xl font-bold"})]})}),(0,on.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:[(0,on.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,on.jsxs)("div",{children:[la.images&&la.images.length>0?(0,on.jsx)("img",{src:la.images[0],alt:la.product_name||la.crop_type,className:"w-full h-64 object-cover rounded-lg shadow-lg mb-4"}):(0,on.jsx)("div",{className:"w-full h-64 bg-gradient-to-r from-gray-200 to-gray-300 flex items-center justify-center rounded-lg shadow-lg mb-4",children:(0,on.jsx)("span",{className:"text-gray-500 text-lg",children:"?? Product Image"})}),(0,on.jsxs)("div",{className:"mb-4",children:[(0,on.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Product Description"}),(0,on.jsx)("p",{className:"text-gray-600 leading-relaxed",children:la.description||"High quality organic produce from certified farms. Fresh, nutritious, and carefully handled to ensure maximum freshness and quality."})]}),(0,on.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg",children:[(0,on.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Seller Information"}),la.farm_name&&(0,on.jsxs)("div",{className:"mb-2",children:[(0,on.jsx)("span",{className:"text-sm text-gray-600",children:"Farm:"}),(0,on.jsx)("div",{className:"font-medium text-gray-800",children:la.farm_name})]}),la.agent_username&&(0,on.jsxs)("div",{className:"mb-2",children:[(0,on.jsx)("span",{className:"text-sm text-gray-600",children:"Agent:"}),(0,on.jsxs)("div",{className:"font-medium text-blue-600",children:["@",la.agent_username]}),(0,on.jsxs)("div",{className:"flex items-center mt-1",children:[(0,on.jsx)("span",{className:"text-yellow-400",children:"?????"}),(0,on.jsx)("span",{className:"text-sm text-gray-600 ml-2",children:"4.2/5 (Agent Rating)"})]})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("span",{className:"text-sm text-gray-600",children:"Location:"}),(0,on.jsxs)("div",{className:"font-medium text-gray-800",children:["?? ",la.location]})]}),(0,on.jsxs)("div",{className:"mt-8 border-t border-gray-100 pt-6",children:[(0,on.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"About this Product"}),(0,on.jsx)("p",{className:"text-gray-700 whitespace-pre-line mb-4",children:la.about_product||la.description||"No detailed description available."}),la.product_benefits&&la.product_benefits.length>0&&(0,on.jsxs)("div",{className:"mb-4",children:[(0,on.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Key Benefits"}),(0,on.jsx)("ul",{className:"list-disc pl-5 space-y-1 text-gray-600",children:la.product_benefits.map((e,t)=>(0,on.jsx)("li",{children:e},t))})]}),la.usage_instructions&&(0,on.jsxs)("div",{children:[(0,on.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Usage Instructions"}),(0,on.jsx)("p",{className:"text-gray-600 whitespace-pre-line",children:la.usage_instructions})]})]})]})]}),(0,on.jsxs)("div",{children:[(0,on.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,on.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Stock Information"}),(0,on.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("span",{className:"text-sm text-gray-600",children:"Available:"}),(0,on.jsx)("div",{className:"font-semibold text-emerald-600",children:"preorder"===la.type?"".concat(la.available_stock||la.total_stock||100," ").concat(la.unit||"kg"):"".concat(la.quantity||"100"," ").concat(la.unit||"kg")})]}),"preorder"===la.type&&(0,on.jsxs)(on.Fragment,{children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("span",{className:"text-sm text-gray-600",children:"Payment Required:"}),(0,on.jsx)("div",{className:"font-semibold text-blue-600",children:la.partial_payment_percentage?"".concat(Math.round(100*la.partial_payment_percentage),"%"):"100%"})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("span",{className:"text-sm text-gray-600",children:"Delivery:"}),(0,on.jsx)("div",{className:"font-semibold text-gray-700",children:new Date(la.delivery_date).toLocaleDateString()})]})]})]})]}),(0,on.jsxs)("div",{className:"p-4 bg-emerald-50 rounded-lg",children:[(0,on.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Purchase Options"}),(0,on.jsxs)("div",{className:"mb-4 p-3 bg-emerald-100 rounded-lg border border-emerald-300",children:[(0,on.jsxs)("div",{className:"text-sm font-medium text-emerald-700",children:["Unit: ",la.unit||la.unit_of_measure||"kg",la.unit_specification&&(0,on.jsxs)("span",{className:"ml-2 text-emerald-600",children:["(",la.unit_specification,")"]})]}),(0,on.jsxs)("div",{className:"text-xs text-emerald-600 mt-1",children:["Select how many ",la.unit||la.unit_of_measure||"units"," you want to buy"]})]}),(0,on.jsxs)("div",{className:"space-y-4",children:[(0,on.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,on.jsxs)("div",{children:[(0,on.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Quantity (Number of ",la.unit||la.unit_of_measure||"units",")"]}),(0,on.jsx)("input",{type:"number",min:"1",max:la.quantity||la.available_stock||la.total_stock||100,defaultValue:"1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",id:"detail-quantity",placeholder:"1, 2, 3..."}),(0,on.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Max available: ",la.quantity||la.available_stock||la.total_stock||100]})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Delivery Options"}),(()=>{const e=la.id||la._id,t=rt[e];if(!t)return(0,on.jsx)("div",{className:"p-3 bg-gray-100 rounded-lg",children:(0,on.jsx)("div",{className:"text-gray-600",children:"Loading delivery options..."})});const r=t.supports_dropoff_delivery&&t.supports_shipping_delivery,a=t.supports_dropoff_delivery,n=t.supports_shipping_delivery;return(0,on.jsxs)("div",{className:"space-y-3",children:[r&&(0,on.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,on.jsxs)("button",{type:"button",onClick:()=>st("dropoff"),className:"p-3 rounded-lg border-2 transition-colors ".concat("dropoff"===nt?"border-emerald-500 bg-emerald-50 text-emerald-700":"border-gray-200 bg-gray-50 text-gray-700 hover:bg-gray-100"),children:[(0,on.jsx)("div",{className:"text-sm font-medium",children:"?? Drop-off Location"}),(0,on.jsx)("div",{className:"text-xs mt-1",children:t.delivery_costs.dropoff.is_free?"Free":"?".concat(t.delivery_costs.dropoff.cost)})]}),(0,on.jsxs)("button",{type:"button",onClick:()=>st("shipping"),className:"p-3 rounded-lg border-2 transition-colors ".concat("shipping"===nt?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 bg-gray-50 text-gray-700 hover:bg-gray-100"),children:[(0,on.jsx)("div",{className:"text-sm font-medium",children:"?? Home Delivery"}),(0,on.jsx)("div",{className:"text-xs mt-1",children:t.delivery_costs.shipping.is_free?"Free":"?".concat(t.delivery_costs.shipping.cost)})]})]}),("dropoff"===nt||a&&!r)&&(0,on.jsxs)("div",{children:[(0,on.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",id:"detail-dropoff",children:[(0,on.jsx)("option",{value:"",children:"Select drop-off location"}),We.map(e=>(0,on.jsxs)("option",{value:e.id,children:[e.name," - ",e.city,", ",e.state]},e.id))]}),(0,on.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["?? Pick up your order at a convenient market or location",t.delivery_costs.dropoff.cost>0&&(0,on.jsxs)("span",{className:"text-emerald-600 font-medium ml-2",children:["(?",t.delivery_costs.dropoff.cost," fee)"]})]})]}),("shipping"===nt||n&&!r)&&(0,on.jsxs)("div",{children:[(0,on.jsx)("textarea",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",id:"detail-shipping-address",placeholder:"Enter your full delivery address...",rows:"3"}),(0,on.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["?? We'll deliver directly to your address",t.delivery_costs.shipping.cost>0&&(0,on.jsxs)("span",{className:"text-blue-600 font-medium ml-2",children:["(?",t.delivery_costs.shipping.cost," fee)"]})]})]}),t.delivery_notes&&(0,on.jsxs)("div",{className:"p-2 bg-yellow-50 border border-yellow-200 rounded-lg",children:[(0,on.jsx)("div",{className:"text-xs font-medium text-yellow-800",children:"Delivery Notes:"}),(0,on.jsx)("div",{className:"text-xs text-yellow-700 mt-1",children:t.delivery_notes})]})]})})()]})]}),(0,on.jsx)("button",{onClick:()=>{var e;const t=parseFloat(null===(e=document.getElementById("detail-quantity"))||void 0===e?void 0:e.value)||1,r=la.unit||la.unit_of_measure||"kg",a=la.unit_specification||"standard",n=la.id||la._id,s=rt[n];if(!s)return void alert("Unable to determine delivery options. Please try again.");let l=nt;if(!s.supports_dropoff_delivery&&!s.supports_shipping_delivery)return void alert("This product has no available delivery methods. Please contact the supplier.");"dropoff"!==l||s.supports_dropoff_delivery?"shipping"!==l||s.supports_shipping_delivery||(l="dropoff"):l="shipping";let o=null;if("dropoff"===l){var i;const e=null===(i=document.getElementById("detail-dropoff"))||void 0===i?void 0:i.value;if(!e)return void alert("Please select a drop-off location");const t=We.find(t=>t.id.toString()===e);if(!t)return void alert("Invalid drop-off location selected");o={type:"dropoff",dropoffLocation:t,cost:s.delivery_costs.dropoff.cost}}else if("shipping"===l){var c,d;const e=null===(c=document.getElementById("detail-shipping-address"))||void 0===c||null===(d=c.value)||void 0===d?void 0:d.trim();if(!e)return void alert("Please enter your delivery address");o={type:"shipping",shippingAddress:e,cost:s.delivery_costs.shipping.cost}}const u=m(m({},la),{},{cartQuantity:t,cartUnit:r,cartSpecification:a,deliveryMethod:l,deliveryDetails:o});"dropoff"===l?hl(u,t,r,a,"dropoff",o.dropoffLocation):hl(u,t,r,a,"platform",null,o.shippingAddress),dl()},className:"w-full py-3 px-6 rounded-lg font-bold text-lg transition-colors ".concat("preorder"===la.type?"bg-orange-600 hover:bg-orange-700 text-white":"bg-emerald-600 hover:bg-emerald-700 text-white"),children:"preorder"===la.type?"?? Add Pre-order to Cart":"?? Add to Cart"}),h&&(0,on.jsx)("button",{onClick:()=>{!function(e,t){ot({rating_type:e,rated_entity_id:t,rated_entity_username:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,order_id:arguments.length>3&&void 0!==arguments[3]?arguments[3]:null}),P(!0)}("product_rating",la.id||la._id,null,null)},className:"w-full mt-3 py-2 px-6 border-2 border-yellow-400 text-yellow-600 rounded-lg font-medium text-sm hover:bg-yellow-50 transition-colors",children:"? Rate this Product"})]})]})]})]}),(0,on.jsxs)("div",{className:"mt-8 pt-8 border-t border-gray-200",children:[(0,on.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"?? More Pre-Orders Available"}),(0,on.jsx)("div",{className:"flex space-x-4 overflow-x-auto pb-4",children:L.filter(e=>"preorder"===e.type&&(e.id||e._id)!==(la.id||la._id)).slice(0,3).map((e,t)=>(0,on.jsxs)("div",{className:"flex-shrink-0 w-48 bg-orange-50 rounded-lg p-3 border border-orange-200 cursor-pointer",onClick:()=>oa(e),children:[(0,on.jsx)("h4",{className:"font-bold text-sm text-gray-900 mb-1",children:e.product_name||e.crop_type}),(0,on.jsxs)("div",{className:"text-orange-600 font-bold",children:["?",e.price_per_unit,"/",e.unit||"kg"]})]},t))})]})]})]})}),E&&lt&&(0,on.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,on.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[(0,on.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,on.jsx)("h2",{className:"text-xl font-semibold",children:"Rate & Review"}),(0,on.jsx)("button",{onClick:Ms,className:"text-gray-500 hover:text-gray-700"})]}),(0,on.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t=new FormData(e.target),r=parseInt(t.get("rating")),a=t.get("comment");try{await(async e=>{try{const t=localStorage.getItem("token"),r=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/ratings"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(e)});if(r.ok){const t=await r.json();return"user_rating"===e.rating_type?await zs(e.rated_entity_id):"product_rating"===e.rating_type&&await Fs(e.rated_entity_id),t}{const e=await r.json();throw new Error(e.detail||"Failed to submit rating")}}catch(t){throw console.error("Error submitting rating:",t),t}})(m(m({},lt),{},{rating_value:r,comment:a||null})),alert("Rating submitted successfully!"),Ms(),Ds()}catch(n){alert("Failed to submit rating: "+n.message)}},children:[(0,on.jsxs)("div",{className:"mb-4",children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Rating"}),(0,on.jsx)("div",{className:"flex space-x-1",children:[1,2,3,4,5].map(e=>(0,on.jsxs)("label",{className:"cursor-pointer",children:[(0,on.jsx)("input",{type:"radio",name:"rating",value:e,required:!0,className:"hidden"}),(0,on.jsx)("span",{className:"text-2xl text-gray-300 hover:text-yellow-400 transition-colors",children:"?"})]},e))})]}),(0,on.jsxs)("div",{className:"mb-6",children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Review (Optional)"}),(0,on.jsx)("textarea",{name:"comment",rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",placeholder:"Share your experience..."})]}),(0,on.jsxs)("div",{className:"flex space-x-3",children:[(0,on.jsx)("button",{type:"button",onClick:Ms,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,on.jsx)("button",{type:"submit",className:"flex-1 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700",children:"Submit Rating"})]})]})]})}),mt&&h&&"logistics"===h.role&&(0,on.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,on.jsxs)("div",{className:"bg-white rounded-lg max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[(0,on.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,on.jsxs)("div",{className:"flex justify-between items-center",children:[(0,on.jsx)("h2",{className:"text-2xl font-semibold",children:"Driver Management"}),(0,on.jsx)("button",{onClick:()=>pt(!1),className:"text-gray-500 hover:text-gray-700"})]})}),(0,on.jsxs)("div",{className:"p-6",children:[(0,on.jsxs)("div",{className:"mb-8 p-6 bg-gradient-to-r from-blue-50 to-blue-100 rounded-lg",children:[(0,on.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Purchase Driver Slots"}),(0,on.jsx)("p",{className:"text-gray-600 mb-4",children:"Each driver slot costs ?500/month with a 14-day free trial. Purchase slots to add drivers to your fleet."}),(0,on.jsxs)("div",{className:"flex space-x-4",children:[(0,on.jsx)("input",{type:"number",min:"1",max:"10",placeholder:"Number of slots",className:"px-3 py-2 border border-gray-300 rounded-lg",id:"slots-count"}),(0,on.jsx)("button",{onClick:async()=>{const e=parseInt(document.getElementById("slots-count").value);if(e>=1&&e<=10)try{const t=await(async e=>{try{const t=localStorage.getItem("token"),r=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/driver-slots/purchase"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({slots_count:e})});if(r.ok){const e=await r.json();return await Bs(),e}{const e=await r.json();throw new Error(e.detail||"Failed to purchase driver slots")}}catch(t){throw console.error("Error purchasing driver slots:",t),t}})(e);alert("Successfully purchased ".concat(t.slots_created," driver slots!\nTotal cost: ").concat(t.total_monthly_cost,"/month\n14-day free trial included"))}catch(t){alert("Error: "+t.message)}else alert("Please enter a valid number of slots (1-10)")},className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Purchase Slots"})]})]}),(0,on.jsxs)("div",{children:[(0,on.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,on.jsx)("h3",{className:"text-lg font-semibold",children:"Your Driver Slots"}),(0,on.jsx)("button",{onClick:Bs,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"Refresh"})]}),0===ht.length?(0,on.jsx)("div",{className:"text-center py-8 text-gray-500",children:(0,on.jsx)("p",{children:"No driver slots found. Purchase slots to get started!"})}):(0,on.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ht.map(e=>(0,on.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,on.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,on.jsxs)("h4",{className:"font-medium",children:["Slot #",e.slot_number]}),(0,on.jsx)("span",{className:"text-xs px-2 py-1 rounded ".concat("trial"===e.subscription_status?"bg-green-100 text-green-800":"active"===e.subscription_status?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"),children:e.subscription_status})]}),e.driver_id?(0,on.jsxs)("div",{className:"space-y-2",children:[(0,on.jsxs)("div",{className:"text-sm",children:[(0,on.jsx)("strong",{children:"Driver:"})," ",e.driver_name]}),(0,on.jsxs)("div",{className:"text-sm",children:[(0,on.jsx)("strong",{children:"Vehicle:"})," ",e.vehicle_make_model," (",e.plate_number,")"]}),(0,on.jsxs)("div",{className:"text-sm",children:[(0,on.jsx)("strong",{children:"Rating:"})," ? ",e.average_rating,"/5.0"]}),(0,on.jsxs)("div",{className:"text-sm",children:[(0,on.jsx)("strong",{children:"Trips:"})," ",e.total_trips]})]}):(0,on.jsxs)("div",{className:"space-y-3",children:[(0,on.jsx)("p",{className:"text-gray-500 text-sm",children:"No driver assigned"}),(0,on.jsx)("button",{onClick:()=>{const t=prompt("Driver Name:"),r=prompt("Plate Number:"),a=prompt("Vehicle Make/Model:"),n=prompt("Vehicle Color:"),s=prompt("Date of Birth (YYYY-MM-DD):"),l=prompt("Address:");t&&r&&a&&n&&s&&l&&(async(e,t)=>{try{const r=localStorage.getItem("token"),a=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/driver-slots/").concat(e,"/assign-driver"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(t)});if(a.ok){const e=await a.json();return await Bs(),e}{const e=await a.json();throw new Error(e.detail||"Failed to assign driver to slot")}}catch(r){throw console.error("Error assigning driver:",r),r}})(e.id,{driver_name:t,vehicle_type:"motorcycle",plate_number:r,vehicle_make_model:a,vehicle_color:n,date_of_birth:s,address:l}).then(e=>{alert("Driver assigned successfully!\nRegistration link: ".concat(e.registration_link))}).catch(e=>{alert("Error: "+e.message)})},className:"w-full px-3 py-2 bg-emerald-600 text-white rounded text-sm hover:bg-emerald-700",children:"Assign Driver"})]})]},e.id))})]})]})]})}),yt&&(0,on.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,on.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,on.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,on.jsxs)("div",{className:"flex justify-between items-center",children:[(0,on.jsx)("h2",{className:"text-2xl font-semibold",children:"?? Find Drivers"}),(0,on.jsx)("button",{onClick:()=>bt(!1),className:"text-gray-500 hover:text-gray-700"})]})}),(0,on.jsxs)("div",{className:"p-6",children:[(0,on.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,on.jsx)("input",{type:"text",placeholder:"Location...",value:vt.location,onChange:e=>jt(t=>m(m({},t),{},{location:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg"}),(0,on.jsxs)("select",{value:vt.vehicle_type,onChange:e=>jt(t=>m(m({},t),{},{vehicle_type:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg",children:[(0,on.jsx)("option",{value:"",children:"All Vehicle Types"}),(0,on.jsx)("option",{value:"motorcycle",children:"Motorcycle"}),(0,on.jsx)("option",{value:"car",children:"Car"}),(0,on.jsx)("option",{value:"van",children:"Van"}),(0,on.jsx)("option",{value:"truck",children:"Truck"})]}),(0,on.jsxs)("select",{value:vt.min_rating||"",onChange:e=>jt(t=>m(m({},t),{},{min_rating:e.target.value?parseFloat(e.target.value):null})),className:"px-3 py-2 border border-gray-300 rounded-lg",children:[(0,on.jsx)("option",{value:"",children:"Any Rating"}),(0,on.jsx)("option",{value:"4.5",children:"4.5+ Stars"}),(0,on.jsx)("option",{value:"4.0",children:"4.0+ Stars"}),(0,on.jsx)("option",{value:"3.5",children:"3.5+ Stars"})]})]}),(0,on.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,on.jsx)("h3",{className:"text-lg font-semibold",children:"Available Drivers"}),(0,on.jsx)("button",{onClick:()=>Is(vt),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700",children:"Search Drivers"})]}),0===ft.length?(0,on.jsx)("div",{className:"text-center py-8 text-gray-500",children:(0,on.jsx)("p",{children:'Click "Search Drivers" to find available drivers'})}):(0,on.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:ft.map(e=>{var t,r,a,n;return(0,on.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[(0,on.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,on.jsx)("div",{className:"w-12 h-12 bg-emerald-100 rounded-full flex items-center justify-center",children:(0,on.jsx)("span",{className:"text-emerald-600 font-semibold",children:(null===(t=e.name)||void 0===t?void 0:t.charAt(0))||"D"})}),(0,on.jsxs)("div",{children:[(0,on.jsx)("h4",{className:"font-semibold",children:e.name}),(0,on.jsxs)("div",{className:"flex items-center",children:[(0,on.jsx)("span",{className:"text-yellow-400",children:"?"}),(0,on.jsxs)("span",{className:"ml-1 text-sm text-gray-600",children:[e.average_rating.toFixed(1)," (",e.total_trips," trips)"]})]})]})]}),(0,on.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,on.jsxs)("div",{className:"text-sm",children:[(0,on.jsx)("strong",{children:"Vehicle:"})," ",(null===(r=e.vehicle_info)||void 0===r?void 0:r.make_model)||"N/A"]}),(0,on.jsxs)("div",{className:"text-sm",children:[(0,on.jsx)("strong",{children:"Type:"})," ",(null===(a=e.vehicle_info)||void 0===a?void 0:a.type)||"N/A"]}),(0,on.jsxs)("div",{className:"text-sm",children:[(0,on.jsx)("strong",{children:"Plate:"})," ",(null===(n=e.vehicle_info)||void 0===n?void 0:n.plate_number)||"N/A"]}),e.logistics_business&&(0,on.jsxs)("div",{className:"text-sm",children:[(0,on.jsx)("strong",{children:"Company:"})," @",e.logistics_business]})]}),(0,on.jsxs)("div",{className:"flex space-x-2",children:[(0,on.jsx)("button",{onClick:()=>{alert("Driver: ".concat(e.name,"\nContact through platform messaging"))},className:"flex-1 px-3 py-2 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"View Profile"}),(0,on.jsx)("button",{onClick:()=>{alert("Request sent to ".concat(e.name,"!"))},className:"flex-1 px-3 py-2 bg-emerald-600 text-white rounded text-sm hover:bg-emerald-700",children:"Request Driver"})]})]},e.id)})})]})]})}),wt&&h&&(0,on.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,on.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,on.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,on.jsxs)("div",{className:"flex justify-between items-center",children:[(0,on.jsx)("h2",{className:"text-2xl font-semibold",children:"?? My Wallet"}),(0,on.jsx)("button",{onClick:()=>Nt(!1),className:"text-gray-500 hover:text-gray-700"})]})}),(0,on.jsxs)("div",{className:"p-6",children:[(0,on.jsxs)("div",{className:"mb-8 p-6 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg",children:[(0,on.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Wallet Balance"}),(0,on.jsxs)("div",{className:"text-3xl font-bold mb-4",children:["?",_t?_t.balance.toLocaleString():"0"]}),(0,on.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("div",{className:"text-purple-200",children:"Total Funded"}),(0,on.jsxs)("div",{className:"font-medium",children:["?",_t?_t.total_funded.toLocaleString():"0"]})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("div",{className:"text-purple-200",children:"Total Spent"}),(0,on.jsxs)("div",{className:"font-medium",children:["?",_t?_t.total_spent.toLocaleString():"0"]})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("div",{className:"text-purple-200",children:"Withdrawn"}),(0,on.jsxs)("div",{className:"font-medium",children:["?",_t?_t.total_withdrawn.toLocaleString():"0"]})]})]})]}),(0,on.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[(0,on.jsxs)("button",{onClick:()=>Tt(!0),className:"p-4 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-colors",children:[(0,on.jsx)("div",{className:"text-2xl mb-2",children:"??"}),(0,on.jsx)("div",{className:"font-medium",children:"Fund Wallet"})]}),(0,on.jsxs)("button",{onClick:()=>Dt(!0),className:"p-4 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors",children:[(0,on.jsx)("div",{className:"text-2xl mb-2",children:"??"}),(0,on.jsx)("div",{className:"font-medium",children:"Withdraw"})]}),(0,on.jsxs)("button",{onClick:()=>qt(!0),className:"p-4 bg-pink-100 text-pink-700 rounded-lg hover:bg-pink-200 transition-colors",children:[(0,on.jsx)("div",{className:"text-2xl mb-2",children:"??"}),(0,on.jsx)("div",{className:"font-medium",children:"Buy Gift Card"})]}),(0,on.jsxs)("button",{onClick:()=>Ot(!0),className:"p-4 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[(0,on.jsx)("div",{className:"text-2xl mb-2",children:"??"}),(0,on.jsx)("div",{className:"font-medium",children:"Add Bank"})]})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Recent Transactions"}),0===St.length?(0,on.jsx)("div",{className:"text-center py-8 text-gray-500",children:(0,on.jsx)("p",{children:"No transactions yet. Start by funding your wallet!"})}):(0,on.jsx)("div",{className:"space-y-3",children:St.slice(0,10).map(e=>(0,on.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[(0,on.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,on.jsx)("div",{className:"text-2xl ".concat(e.transaction_type.includes("funding")||e.transaction_type.includes("redemption")?"text-green-600":"text-red-600"),children:(e.transaction_type.includes("funding")||e.transaction_type.includes("withdrawal")||e.transaction_type.includes("gift_card"),"??")}),(0,on.jsxs)("div",{children:[(0,on.jsx)("div",{className:"font-medium",children:e.description}),(0,on.jsxs)("div",{className:"text-sm text-gray-500",children:[new Date(e.created_at).toLocaleDateString(),"  ",e.reference]})]})]}),(0,on.jsxs)("div",{className:"text-right ".concat(e.transaction_type.includes("funding")||e.transaction_type.includes("redemption")?"text-green-600":"text-red-600"),children:[(0,on.jsxs)("div",{className:"font-semibold",children:[e.transaction_type.includes("funding")||e.transaction_type.includes("redemption")?"+":"-","?",e.amount.toLocaleString()]}),(0,on.jsxs)("div",{className:"text-xs text-gray-500",children:["Status: ",e.status]})]})]},e.id))})]})]})]})}),Rt&&(0,on.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-60 flex items-center justify-center p-4",children:(0,on.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[(0,on.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,on.jsx)("h3",{className:"text-xl font-semibold",children:"?? Fund Wallet"}),(0,on.jsx)("button",{onClick:()=>Tt(!1),className:"text-gray-500 hover:text-gray-700"})]}),(0,on.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t=new FormData(e.target),r=t.get("amount"),a=t.get("funding_method"),n=t.get("description");try{await(async(e,t,r)=>{try{const a=localStorage.getItem("token"),n=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/wallet/fund"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({transaction_type:"wallet_funding",amount:parseFloat(e),description:r,funding_method:t})});if(n.ok){const e=await n.json();return await qs(),await Us(),e}{const e=await n.json();throw new Error(e.detail||"Failed to fund wallet")}}catch(a){throw console.error("Error funding wallet:",a),a}})(r,a,n),alert("Successfully funded wallet with ?".concat(parseFloat(r).toLocaleString())),Tt(!1)}catch(s){alert("Failed to fund wallet: "+s.message)}},children:[(0,on.jsxs)("div",{className:"space-y-4",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount (?)"}),(0,on.jsx)("input",{type:"number",name:"amount",min:"100",max:"500000",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500",placeholder:"Enter amount to fund"})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Funding Method"}),(0,on.jsxs)("select",{name:"funding_method",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500",children:[(0,on.jsx)("option",{value:"",children:"Select funding method"}),(0,on.jsx)("option",{value:"bank_transfer",children:"Bank Transfer"}),(0,on.jsx)("option",{value:"debit_card",children:"Debit Card"}),(0,on.jsx)("option",{value:"ussd",children:"USSD"}),(0,on.jsx)("option",{value:"bank_deposit",children:"Bank Deposit"})]})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (Optional)"}),(0,on.jsx)("input",{type:"text",name:"description",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500",placeholder:"Wallet funding"})]})]}),(0,on.jsxs)("div",{className:"flex space-x-3 mt-6",children:[(0,on.jsx)("button",{type:"button",onClick:()=>Tt(!1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,on.jsx)("button",{type:"submit",className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Fund Wallet"})]})]})]})}),zt&&h&&(0,on.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,on.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,on.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,on.jsxs)("div",{className:"flex justify-between items-center",children:[(0,on.jsx)("h2",{className:"text-2xl font-semibold",children:"?? Gift Cards"}),(0,on.jsx)("button",{onClick:()=>Ft(!1),className:"text-gray-500 hover:text-gray-700"})]})}),(0,on.jsxs)("div",{className:"p-6",children:[(0,on.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:[(0,on.jsxs)("button",{onClick:()=>qt(!0),className:"p-6 bg-gradient-to-r from-pink-500 to-purple-600 text-white rounded-lg hover:from-pink-600 hover:to-purple-700 transition-colors",children:[(0,on.jsx)("div",{className:"text-3xl mb-2",children:"??"}),(0,on.jsx)("div",{className:"text-lg font-semibold",children:"Create Gift Card"}),(0,on.jsx)("div",{className:"text-sm text-pink-100",children:"Purchase gift cards for others"})]}),(0,on.jsxs)("button",{onClick:()=>Ht(!0),className:"p-6 bg-gradient-to-r from-green-500 to-blue-600 text-white rounded-lg hover:from-green-600 hover:to-blue-700 transition-colors",children:[(0,on.jsx)("div",{className:"text-3xl mb-2",children:"??"}),(0,on.jsx)("div",{className:"text-lg font-semibold",children:"Redeem Gift Card"}),(0,on.jsx)("div",{className:"text-sm text-green-100",children:"Add gift card value to wallet"})]})]}),(0,on.jsxs)("div",{children:[(0,on.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,on.jsx)("h3",{className:"text-lg font-semibold",children:"My Gift Cards"}),(0,on.jsx)("button",{onClick:Ws,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"Refresh"})]}),0===Mt.length?(0,on.jsx)("div",{className:"text-center py-8 text-gray-500",children:(0,on.jsx)("p",{children:"No gift cards purchased yet. Create your first gift card!"})}):(0,on.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Mt.map(e=>(0,on.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 bg-gradient-to-br from-pink-50 to-purple-50",children:[(0,on.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,on.jsx)("div",{className:"text-2xl",children:"??"}),(0,on.jsx)("span",{className:"text-xs px-2 py-1 rounded ".concat("active"===e.status?"bg-green-100 text-green-800":"redeemed"===e.status?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"),children:e.status})]}),(0,on.jsxs)("div",{className:"space-y-2",children:[(0,on.jsx)("div",{className:"font-mono text-sm font-semibold text-purple-600",children:e.card_code}),(0,on.jsxs)("div",{className:"text-lg font-bold",children:["?",e.amount.toLocaleString()]}),(0,on.jsxs)("div",{className:"text-sm text-gray-600",children:["Balance: ?",e.balance.toLocaleString()]}),e.recipient_name&&(0,on.jsxs)("div",{className:"text-sm text-gray-600",children:["For: ",e.recipient_name]}),(0,on.jsxs)("div",{className:"text-xs text-gray-500",children:["Expires: ",new Date(e.expiry_date).toLocaleDateString()]})]})]},e.id))})]})]})]})}),It&&(0,on.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-60 flex items-center justify-center p-4",children:(0,on.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[(0,on.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,on.jsx)("h3",{className:"text-xl font-semibold",children:"?? Create Gift Card"}),(0,on.jsx)("button",{onClick:()=>qt(!1),className:"text-gray-500 hover:text-gray-700"})]}),(0,on.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t=new FormData(e.target),r=t.get("amount"),a=t.get("recipient_email"),n=t.get("recipient_name"),s=t.get("message");try{const e=await(async(e,t,r,a)=>{try{const n=localStorage.getItem("token"),s=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/wallet/gift-cards"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({amount:parseFloat(e),recipient_email:t||null,recipient_name:r||null,message:a||null})});if(s.ok){const e=await s.json();return await qs(),await Ws(),e}{const e=await s.json();throw new Error(e.detail||"Failed to create gift card")}}catch(n){throw console.error("Error creating gift card:",n),n}})(r,a,n,s);alert("Gift card created successfully!\nCard Code: ".concat(e.gift_card.card_code,"\nAmount: ?").concat(parseFloat(r).toLocaleString())),qt(!1)}catch(l){alert("Failed to create gift card: "+l.message)}},children:[(0,on.jsxs)("div",{className:"space-y-4",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gift Card Amount (?)"}),(0,on.jsx)("input",{type:"number",name:"amount",min:"100",max:"100000",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500",placeholder:"Enter gift card value"}),(0,on.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Min: ?100, Max: ?100,000"})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Recipient Name (Optional)"}),(0,on.jsx)("input",{type:"text",name:"recipient_name",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500",placeholder:"Who is this gift card for?"})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Recipient Email (Optional)"}),(0,on.jsx)("input",{type:"email",name:"recipient_email",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500",placeholder:"Recipient's email address"})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gift Message (Optional)"}),(0,on.jsx)("textarea",{name:"message",rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500",placeholder:"Add a personal message..."})]})]}),(0,on.jsxs)("div",{className:"flex space-x-3 mt-6",children:[(0,on.jsx)("button",{type:"button",onClick:()=>qt(!1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,on.jsx)("button",{type:"submit",className:"flex-1 px-4 py-2 bg-pink-600 text-white rounded-lg hover:bg-pink-700",children:"Create Gift Card"})]})]})]})}),Ut&&(0,on.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-60 flex items-center justify-center p-4",children:(0,on.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[(0,on.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,on.jsx)("h3",{className:"text-xl font-semibold",children:"?? Redeem Gift Card"}),(0,on.jsx)("button",{onClick:()=>{Ht(!1),Vt(null)},className:"text-gray-500 hover:text-gray-700"})]}),(0,on.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t=new FormData(e.target),r=t.get("card_code"),a=t.get("amount");try{const e=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{const r=localStorage.getItem("token"),a=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/wallet/gift-cards/redeem"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({card_code:e.toUpperCase(),amount:t?parseFloat(t):null})});if(a.ok){const e=await a.json();return await qs(),e}{const e=await a.json();throw new Error(e.detail||"Failed to redeem gift card")}}catch(r){throw console.error("Error redeeming gift card:",r),r}}(r,a);alert("Gift card redeemed successfully!\nRedeemed: ?".concat(e.redeemed_amount.toLocaleString(),"\nNew wallet balance: ?").concat(e.new_wallet_balance.toLocaleString())),Ht(!1),Vt(null)}catch(n){alert("Failed to redeem gift card: "+n.message)}},children:[(0,on.jsxs)("div",{className:"space-y-4",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gift Card Code"}),(0,on.jsxs)("div",{className:"flex space-x-2",children:[(0,on.jsx)("input",{type:"text",name:"card_code",required:!0,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 uppercase",placeholder:"GIFT-XXXXXXXX",onChange:async e=>{const t=e.target.value.trim();t.length>=8&&await Vs(t)}}),(0,on.jsx)("button",{type:"button",onClick:async()=>{const e=document.querySelector('input[name="card_code"]').value;e&&await Vs(e)},className:"px-3 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"Check"})]})]}),Wt&&(0,on.jsx)("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:(0,on.jsxs)("div",{className:"space-y-2",children:[(0,on.jsx)("div",{className:"font-semibold text-green-800",children:"Gift Card Found!"}),(0,on.jsxs)("div",{className:"text-sm text-green-700",children:["Available Balance: ?",Wt.balance.toLocaleString()]}),(0,on.jsxs)("div",{className:"text-sm text-green-600",children:["Status: ",Wt.status,"Expires: ",new Date(Wt.expiry_date).toLocaleDateString()]}),Wt.message&&(0,on.jsxs)("div",{className:"text-sm text-green-600 italic",children:['"',Wt.message,'"']})]})}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount to Redeem (Optional)"}),(0,on.jsx)("input",{type:"number",name:"amount",min:"1",max:Wt?Wt.balance:1e5,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500",placeholder:"Leave empty to redeem full amount"}),(0,on.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Leave empty to redeem the full gift card balance"})]})]}),(0,on.jsxs)("div",{className:"flex space-x-3 mt-6",children:[(0,on.jsx)("button",{type:"button",onClick:()=>{Ht(!1),Vt(null)},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,on.jsx)("button",{type:"submit",disabled:!Wt,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400",children:"Redeem Gift Card"})]})]})]})}),nr&&lr&&lr.requires_kyc&&"not_started"===lr.status&&(0,on.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-60 flex items-center justify-center p-4",children:(0,on.jsx)("div",{className:"bg-white rounded-lg max-w-md w-full p-6 border-2 border-yellow-200",children:(0,on.jsxs)("div",{className:"text-center",children:[(0,on.jsx)("div",{className:"text-4xl mb-4",children:"??"}),(0,on.jsx)("h3",{className:"text-xl font-semibold mb-2 text-gray-800",children:"Complete Your KYC"}),(0,on.jsx)("p",{className:"text-gray-600 mb-4",children:"Complete your KYC verification to start receiving payments on the platform."}),(0,on.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4",children:(0,on.jsxs)("p",{className:"text-sm text-yellow-800",children:[(0,on.jsx)("strong",{children:"Important:"})," KYC completion is required to receive payments from buyers. Without KYC, you can browse and purchase but cannot receive funds."]})}),(0,on.jsxs)("div",{className:"flex space-x-3",children:[(0,on.jsx)("button",{onClick:()=>sr(!1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Later"}),(0,on.jsx)("button",{onClick:()=>{sr(!1),alert("KYC completion form will open here. This includes:\n\nFor Registered Businesses:\n- Business Registration Number\n- TIN Certificate\n- Certificate of Incorporation\n\nFor Others (Farmers/Agents/Unregistered):\n- NIN or BVN\n- Headshot photo (camera)\n- National ID upload\n- Utility bill")},className:"flex-1 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700",children:"Complete KYC"})]})]})})}),zr&&h&&["farmer","business","supplier_food_produce"].includes(h.role)&&(0,on.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,on.jsxs)("div",{className:"bg-white rounded-lg max-w-7xl w-full max-h-[90vh] overflow-y-auto relative",children:[(0,on.jsx)("button",{onClick:()=>Fr(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700 z-10 bg-white rounded-full p-2 shadow",children:"\u2715 Close"}),(0,on.jsx)(ws,{user:h,token:localStorage.getItem("token")})]})}),Mr&&h&&["agent","purchasing_agent"].includes(h.role)&&(0,on.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,on.jsxs)("div",{className:"bg-white rounded-lg max-w-7xl w-full max-h-[90vh] overflow-y-auto relative",children:[(0,on.jsx)("button",{onClick:()=>Br(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700 z-10 bg-white rounded-full p-2 shadow",children:"\u2715 Close"}),(0,on.jsx)(ws,{user:h,token:localStorage.getItem("token")})]})}),S&&h&&(0,on.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,on.jsxs)("div",{className:"bg-white rounded-lg max-w-7xl w-full max-h-[90vh] overflow-y-auto relative",children:[(0,on.jsx)("button",{onClick:()=>C(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700 z-10 bg-white rounded-full p-2 shadow",children:"\u2715 Close"}),(0,on.jsx)(ms,{user:h})]})}),Ir&&h&&"admin"===h.role&&(0,on.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,on.jsxs)("div",{className:"bg-white rounded-lg max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[(0,on.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,on.jsxs)("div",{className:"flex justify-between items-center",children:[(0,on.jsx)("h2",{className:"text-2xl font-semibold",children:"??? Admin Dashboard"}),(0,on.jsx)("button",{onClick:()=>qr(!1),className:"text-gray-500 hover:text-gray-700"})]})}),(0,on.jsx)("div",{className:"p-6",children:(0,on.jsx)(Rn,{})})]})}),Yr&&(0,on.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,on.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,on.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,on.jsxs)("div",{className:"flex justify-between items-center",children:[(0,on.jsx)("h2",{className:"text-2xl font-semibold",children:"?? Market Prices"}),(0,on.jsx)("button",{onClick:()=>Kr(!1),className:"text-gray-500 hover:text-gray-700"})]})}),(0,on.jsxs)("div",{className:"p-6",children:[(0,on.jsx)("div",{className:"mb-6",children:(0,on.jsx)("p",{className:"text-gray-600",children:"Current market prices for agricultural products. Prices are updated regularly based on market conditions."})}),0===Jr.length?(0,on.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,on.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),(0,on.jsx)("p",{children:"Loading market prices..."})]}):(0,on.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Jr.map((e,t)=>(0,on.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:(0,on.jsxs)("div",{className:"flex justify-between items-start",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("h3",{className:"font-semibold text-gray-800",children:e.product}),(0,on.jsx)("div",{className:"text-xs text-gray-500 capitalize",children:e.category.replace("_"," ")})]}),(0,on.jsxs)("div",{className:"text-right",children:[(0,on.jsxs)("div",{className:"text-xl font-bold text-gray-900",children:["?",e.price.toLocaleString()]}),(0,on.jsx)("div",{className:"text-sm font-medium ".concat(e.trend.startsWith("+")?"text-green-600":"text-red-600"),children:e.trend})]})]})},t))}),(0,on.jsx)("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(0,on.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,on.jsx)("strong",{children:"Note:"})," Prices are indicative and may vary based on quality, location, and market conditions. Use these as reference for your pricing decisions."]})})]})]})}),mr&&(0,on.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,on.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[(0,on.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,on.jsx)("h3",{className:"text-xl font-semibold",children:"?? Create Community"}),(0,on.jsx)("button",{onClick:()=>pr(!1),className:"text-gray-500 hover:text-gray-700 text-2xl"})]}),(0,on.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t=new FormData(e.target),r={name:t.get("name"),description:t.get("description"),category:"General",is_private:!1};try{const e=localStorage.getItem("token"),t=await fetch("".concat("https://mvp-2-u8e9.onrender.com","/api/communities"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(r)});if(t.ok)alert("Community created successfully!"),pr(!1),Or(e=>e+1);else{const e=await t.json();alert(e.detail||"Failed to create community")}}catch(a){alert("Error creating community: "+a.message)}},children:[(0,on.jsxs)("div",{className:"space-y-4",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Community Name"}),(0,on.jsx)("input",{type:"text",name:"name",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",placeholder:"e.g. Lagos Rice Farmers"})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bio / Description"}),(0,on.jsx)("textarea",{name:"description",required:!0,rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",placeholder:"What is this community about?"})]})]}),(0,on.jsxs)("div",{className:"flex space-x-3 mt-6",children:[(0,on.jsx)("button",{type:"button",onClick:()=>pr(!1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,on.jsx)("button",{type:"submit",className:"flex-1 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700",children:"Create Group"})]})]})]})}),hr&&(0,on.jsx)(Sl,{}),Sr&&(0,on.jsx)(El,{}),ia&&(0,on.jsx)(Cl,{}),(0,on.jsx)(mn,{isOpen:Y,onClose:()=>K(!1),initialType:J,userProfile:h,onSubmit:()=>{K(!1)}}),ma&&(0,on.jsx)(Pl,{}),ya&&(0,on.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,on.jsxs)("div",{className:"bg-white rounded-lg w-full max-w-6xl h-[90vh] overflow-hidden flex flex-col",children:[(0,on.jsxs)("div",{className:"p-4 border-b flex justify-between items-center bg-gray-50",children:[(0,on.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Marketplace Transactions"}),(0,on.jsx)("button",{onClick:()=>ba(!1),className:"text-gray-500 hover:text-gray-700 text-2xl",children:"\xd7"})]}),(0,on.jsx)("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-50",children:(0,on.jsx)(un,{requests:va,onMakeOffer:async(e,t)=>{try{const r=await fetch("".concat(p,"/api/requests/").concat(e,"/offers"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify(t)});if(r.ok)alert("Offer submitted successfully!"),Nl();else{const e=await r.json();alert("Failed to submit offer: ".concat(e.detail||"Unknown error"))}}catch(r){console.error("Error making offer:",r),alert("Failed to submit offer")}},onRefresh:Nl})})]})}),wa&&(0,on.jsx)("div",{className:"fixed inset-0 bg-white z-50 overflow-y-auto",children:(0,on.jsx)(xn,{userRole:null===h||void 0===h?void 0:h.role,onClose:()=>Na(!1)})}),re&&(0,on.jsx)("div",{className:"fixed inset-0 bg-white z-50 overflow-y-auto pt-16",children:(0,on.jsxs)("div",{className:"max-w-7xl mx-auto px-4 relative",children:[(0,on.jsx)("button",{onClick:()=>ae(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700 text-3xl z-50 bg-white rounded-full w-10 h-10 flex items-center justify-center shadow-sm",children:"\xd7"}),(0,on.jsx)(ls,{requests:Z,onRefresh:vs})]})}),wt&&(0,on.jsx)(fn,{isOpen:wt,onClose:()=>Nt(!1),userProfile:h}),(0,on.jsx)(es,{isOpen:ir,onClose:()=>cr(!1),user:h,onUpdateUser:e=>{x(e),localStorage.setItem("user",JSON.stringify(e)),cr(!1)}}),Se&&(0,on.jsx)(rs,{onClose:()=>Ce(!1)}),h&&(0,on.jsx)("button",{onClick:()=>Ce(!0),className:"fixed bottom-24 right-4 bg-blue-600 text-white p-3 rounded-full shadow-lg z-50 hover:bg-blue-700 flex items-center justify-center transition-all transform hover:scale-105",title:"My Orders",children:(0,on.jsx)("span",{className:"text-xl",children:"\ud83d\udce6"})})]})},Ds=()=>(0,on.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,on.jsx)("path",{d:"M9.25 8V5.25H6.5V3.75H9.25V1H10.75V3.75H13.5V5.25H10.75V8H9.25ZM5.49563 18C5.08188 18 4.72917 17.8527 4.4375 17.5581C4.14583 17.2635 4 16.9094 4 16.4956C4 16.0819 4.14729 15.7292 4.44188 15.4375C4.73646 15.1458 5.09062 15 5.50437 15C5.91813 15 6.27083 15.1473 6.5625 15.4419C6.85417 15.7365 7 16.0906 7 16.5044C7 16.9181 6.85271 17.2708 6.55813 17.5625C6.26354 17.8542 5.90938 18 5.49563 18ZM14.4956 18C14.0819 18 13.7292 17.8527 13.4375 17.5581C13.1458 17.2635 13 16.9094 13 16.4956C13 16.0819 13.1473 15.7292 13.4419 15.4375C13.7365 15.1458 14.0906 15 14.5044 15C14.9181 15 15.2708 15.1473 15.5625 15.4419C15.8542 15.7365 16 16.0906 16 16.5044C16 16.9181 15.8527 17.2708 15.5581 17.5625C15.2635 17.8542 14.9094 18 14.4956 18ZM1 3.5V2H3.77083L7 9.5H13.2708L15.625 4H17.25L14.6458 10.0833C14.5208 10.3611 14.3368 10.5833 14.0938 10.75C13.8507 10.9167 13.5764 11 13.2708 11H6.60417L5.72917 12.5H16V14H5.75C5.16667 14 4.72917 13.7465 4.4375 13.2396C4.14583 12.7326 4.14583 12.2361 4.4375 11.75L5.52083 9.875L2.79167 3.5H1Z",fill:"currentColor"})}),As=()=>(0,on.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,on.jsx)("path",{d:"M5.75 16.5C5.0556 16.5 4.4653 16.2569 3.9792 15.7708C3.4931 15.2847 3.25 14.6944 3.25 14H1.5L2 12.5H3.75C3.9861 12.1944 4.2794 11.9514 4.63 11.7708C4.9804 11.5903 5.3538 11.5 5.75 11.5C6.1462 11.5 6.5196 11.5903 6.87 11.7708C7.2206 11.9514 7.5139 12.1944 7.75 12.5H11.8333L13.5833 5.5H4.5L4.6667 5C4.7778 4.69444 4.9618 4.45139 5.2188 4.27083C5.4757 4.09028 5.7639 4 6.0833 4H15.5L14.75 7H16.5L19 10.5L18 14H17C17 14.6944 16.7569 15.2847 16.2708 15.7708C15.7847 16.2569 15.1944 16.5 14.5 16.5C13.8056 16.5 13.2153 16.2569 12.7292 15.7708C12.2431 15.2847 12 14.6944 12 14H8.25C8.25 14.6944 8.0069 15.2847 7.5208 15.7708C7.0347 16.2569 6.4444 16.5 5.75 16.5ZM13.75 11H17.2917L17.3542 10.7708L15.7292 8.5H14.375L13.75 11ZM0.5 11.1667L0.875 9.66667H5L4.625 11.1667H0.5ZM2 8.33333L2.375 6.83333H7.25L6.875 8.33333H2ZM5.75 15C6.0333 15 6.2708 14.9042 6.4625 14.7125C6.6542 14.5208 6.75 14.2833 6.75 14C6.75 13.7167 6.6542 13.4792 6.4625 13.2875C6.2708 13.0958 6.0333 13 5.75 13C5.4667 13 5.2292 13.0958 5.0375 13.2875C4.8458 13.4792 4.75 13.7167 4.75 14C4.75 14.2833 4.8458 14.5208 4.0375 14.7125C5.2292 14.9042 5.4667 15 5.75 15ZM14.5 15C14.7833 15 15.0208 14.9042 15.2125 14.7125C15.4042 14.5208 15.5 14.2833 15.5 14C15.5 13.7167 15.4042 13.4792 15.2125 13.2875C15.0208 13.0958 14.7833 13 14.5 13C14.2167 13 13.9792 13.0958 13.7875 13.2875C13.5958 13.4792 13.5 13.7167 13.5 14C13.5 14.2833 13.5958 14.5208 13.7875 14.7125C13.9792 14.9042 14.2167 15 14.5 15Z",fill:"currentColor"})}),Os=()=>(0,on.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,on.jsx)("path",{d:"M18 18L15 15H7.5C7.0875 15 6.7344 14.8531 6.4406 14.5594C6.1469 14.2656 6 13.9125 6 13.5V12.5H14C14.4125 12.5 14.7656 12.3531 15.0594 12.0594C15.3531 11.7656 15.5 11.4125 15.5 11V6H16.5C16.9125 6 17.2656 6.14688 17.5594 6.44063C17.8531 6.73438 18 7.0875 18 7.5V18ZM3.5 10.375L4.375 9.5H12.5V3.5H3.5V10.375ZM2 14V3.5C2 3.0875 2.1469 2.73438 2.4406 2.44063C2.7344 2.14688 3.0875 2 3.5 2H12.5C12.9125 2 13.2656 2.14688 13.5594 2.44063C13.8531 2.73438 14 3.0875 14 3.5V9.5C14 9.9125 13.8531 10.2656 13.5594 10.5594C13.2656 10.8531 12.9125 11 12.5 11H5L2 14Z",fill:"currentColor"})}),zs=()=>(0,on.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,on.jsx)("path",{d:"M4.938 14.0625C5.688 13.5347 6.49 13.1424 7.344 12.8854C8.198 12.6285 9.083 12.5 10 12.5C10.917 12.5 11.802 12.6285 12.656 12.8854C13.51 13.1424 14.312 13.5347 15.062 14.0625C15.549 13.4931 15.91 12.8611 16.146 12.1667C16.382 11.4722 16.5 10.75 16.5 10C16.5 8.19903 15.866 6.66542 14.599 5.39917C13.332 4.13305 11.798 3.5 9.995 3.5C8.193 3.5 6.66 4.13305 5.396 5.39917C4.132 6.66542 3.5 8.19903 3.5 10C3.5 10.75 3.618 11.4722 3.854 12.1667C4.09 12.8611 4.451 13.4931 4.938 14.0625ZM10 11.5C9.167 11.5 8.458 11.2083 7.875 10.625C7.292 10.0417 7 9.33333 7 8.5C7 7.66667 7.292 6.95833 7.875 6.375C8.458 5.79167 9.167 5.5 10 5.5C10.833 5.5 11.542 5.79167 12.125 6.375C12.708 6.95833 13 7.66667 13 8.5C13 9.33333 12.708 10.0417 12.125 10.625C11.542 11.2083 10.833 11.5 10 11.5ZM10.006 18C8.905 18 7.868 17.7917 6.896 17.375C5.924 16.9583 5.073 16.3854 4.344 15.6562C3.615 14.9271 3.042 14.0767 2.625 13.105C2.208 12.1333 2 11.0951 2 9.99042C2 8.88569 2.208 7.85069 2.625 6.88542C3.042 5.92014 3.615 5.07292 4.344 4.34375C5.073 3.61458 5.923 3.04167 6.895 2.625C7.867 2.20833 8.905 2 10.01 2C11.114 2 12.149 2.20833 13.115 2.625C14.08 3.04167 14.927 3.61458 15.656 4.34375C16.385 5.07292 16.958 5.92167 17.375 6.89C17.792 7.85847 18 8.89319 18 9.99417C18 11.0953 17.792 12.1319 17.375 13.1042C16.958 14.0764 16.385 14.9271 15.656 15.6562C14.927 16.3854 14.078 16.9583 13.11 17.375C12.142 17.7917 11.107 18 10.006 18ZM10 16.5C10.722 16.5 11.417 16.3854 12.083 16.1562C12.75 15.9271 13.375 15.5903 13.958 15.1458C13.361 14.7708 12.729 14.4861 12.062 14.2917C11.396 14.0972 10.708 14 10 14C9.292 14 8.601 14.0938 7.927 14.2812C7.253 14.4688 6.625 14.7569 6.042 15.1458C6.625 15.5903 7.25 15.9271 7.917 16.1562C8.583 16.3854 9.278 16.5 10 16.5ZM10 10C10.417 10 10.771 9.85417 11.062 9.5625C11.354 9.27083 11.5 8.91667 11.5 8.5C11.5 8.08333 11.354 7.72917 11.062 7.4375C10.771 7.14583 10.417 7 10 7C9.583 7 9.229 7.14583 8.938 7.4375C8.646 7.72917 8.5 8.08333 8.5 8.5C8.5 8.91667 8.646 9.27083 8.938 9.5625C9.229 9.85417 9.583 10 10 10Z",fill:"currentColor"})}),Fs=()=>(0,on.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,on.jsx)("path",{d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),Ms=()=>(0,on.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,on.jsx)("path",{d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),Bs=()=>(0,on.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,on.jsx)("path",{d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),Is=e=>{var t,r;let{currentPlatform:a,setCurrentPlatform:n,cartItemCount:s,setShowCart:l,setShowMessaging:o,messages:i,showProfileMenu:c,setShowProfileMenu:d,kycStatus:u,setShowProfilePictureUpload:m,setShowDriverManagement:p,setShowFindDrivers:h,setShowFarmerDashboard:x,setShowAgentDashboard:f,setShowMarketChart:g,setShowDriverPortal:y,setShowLogisticsDashboard:b,setShowCreateDeliveryRequest:v,setShowAddDropOff:j,setShowWallet:w,setShowEditProfile:N,setShowAdminDashboard:_}=e;const{user:k,logout:S,setShowAuthModal:C}=jn();return(0,on.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-40",children:(0,on.jsx)("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8",children:(0,on.jsxs)("div",{className:"flex justify-between items-center h-14 sm:h-16",children:[(0,on.jsx)("div",{className:"flex items-center flex-shrink-0",children:(0,on.jsx)("img",{src:"https://customer-assets.emergentagent.com/job_pyramyd-agritech/artifacts/ml8alcyl_image.png",alt:"Pyramyd",className:"h-5 sm:h-6 md:h-8 lg:h-10 w-auto"})}),(0,on.jsxs)("div",{className:"flex items-center bg-gray-100 rounded-lg p-1 mx-2 sm:mx-4 overflow-x-auto",children:[(0,on.jsxs)("button",{onClick:()=>n("home"),className:"flex flex-col sm:flex-row items-center justify-center px-3 py-1.5 sm:py-2 rounded-md transition-colors ".concat("home"===a?"bg-white text-emerald-600 shadow-sm":"text-gray-500 hover:text-gray-900"),children:[(0,on.jsx)(Fs,{}),(0,on.jsx)("span",{className:"text-[10px] sm:text-sm font-medium mt-0.5 sm:mt-0 sm:ml-2",children:"PyExpress"})]}),(0,on.jsxs)("button",{onClick:()=>n("buy_from_farm"),className:"flex flex-col sm:flex-row items-center justify-center px-3 py-1.5 sm:py-2 rounded-md transition-colors ".concat("buy_from_farm"===a?"bg-white text-emerald-600 shadow-sm":"text-gray-500 hover:text-gray-900"),children:[(0,on.jsx)(Ms,{}),(0,on.jsx)("span",{className:"text-[10px] sm:text-sm font-medium mt-0.5 sm:mt-0 sm:ml-2",children:"Farm Deals"})]}),(0,on.jsxs)("button",{onClick:()=>n("communities"),className:"flex flex-col sm:flex-row items-center justify-center px-3 py-1.5 sm:py-2 rounded-md transition-colors ".concat("communities"===a?"bg-white text-emerald-600 shadow-sm":"text-gray-500 hover:text-gray-900"),children:[(0,on.jsx)(Bs,{}),(0,on.jsx)("span",{className:"text-[10px] sm:text-sm font-medium mt-0.5 sm:mt-0 sm:ml-2",children:"Communities"})]})]}),(0,on.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2 md:gap-4",children:[(0,on.jsxs)("button",{onClick:()=>l(!0),className:"nav-button icon-button relative p-1 sm:p-2 text-gray-400 hover:text-gray-500",children:[(0,on.jsx)("span",{className:"sr-only",children:"Shopping Cart"}),(0,on.jsx)(Ds,{}),s>0&&(0,on.jsx)("span",{className:"absolute top-0 right-0 inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-bold leading-none text-white transform translate-x-1/4 -translate-y-1/4 bg-red-600 rounded-full",children:s})]}),k&&(0,on.jsxs)("button",{onClick:()=>o(!0),className:"nav-button icon-button relative p-1 sm:p-2 text-gray-400 hover:text-gray-500",children:[(0,on.jsx)("span",{className:"sr-only",children:"Messages"}),(0,on.jsx)(Os,{}),i.filter(e=>!e.read&&e.recipient===k.username).length>0&&(0,on.jsx)("span",{className:"absolute top-0 right-0 inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-bold leading-none text-white transform translate-x-1/4 -translate-y-1/4 bg-red-600 rounded-full",children:i.filter(e=>!e.read&&e.recipient===k.username).length})]}),k&&(0,on.jsx)("button",{onClick:()=>{},className:"nav-button icon-button p-1 sm:p-2 text-gray-400 hover:text-gray-500",children:(0,on.jsx)(As,{})}),(0,on.jsx)("div",{className:"relative ml-2",children:k?(0,on.jsxs)("div",{className:"relative",children:[(0,on.jsxs)("button",{onClick:()=>d(!c),className:"flex items-center max-w-xs text-sm rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500",children:[(0,on.jsx)("span",{className:"sr-only",children:"Open user menu"}),k.profile_picture?(0,on.jsx)("img",{className:"h-8 w-8 rounded-full object-cover border-2 border-emerald-500",src:k.profile_picture,alt:""}):(0,on.jsx)("div",{className:"h-8 w-8 rounded-full bg-emerald-100 flex items-center justify-center border-2 border-emerald-500",children:(0,on.jsx)("span",{className:"text-emerald-800 font-medium text-xs",children:k.first_name?k.first_name.charAt(0).toUpperCase():"U"})}),"approved"===(null===u||void 0===u?void 0:u.status)&&(0,on.jsx)("div",{className:"absolute -bottom-1 -right-1 bg-white rounded-full p-0.5",children:(0,on.jsx)("svg",{className:"w-3 h-3 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,on.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})]}),c&&(0,on.jsxs)("div",{className:"origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-50 divide-y divide-gray-100",children:[(0,on.jsxs)("div",{className:"px-4 py-3",children:[(0,on.jsx)("p",{className:"text-sm",children:"Signed in as"}),(0,on.jsxs)("p",{className:"text-sm font-medium text-gray-900 truncate",children:["@",k.username]}),(0,on.jsx)("p",{className:"text-xs text-gray-500 mt-1 capitalize",children:null===(t=k.role)||void 0===t?void 0:t.replace("_"," ")})]}),(0,on.jsxs)("div",{className:"px-4 py-3 bg-emerald-50 border-y border-emerald-100",children:[(0,on.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,on.jsx)("p",{className:"text-xs font-semibold text-emerald-800 uppercase tracking-wide",children:"Wallet Balance"}),(0,on.jsx)("span",{className:"text-xs text-emerald-600 cursor-pointer hover:underline",onClick:()=>{d(!1),w(!0)},children:"Manage"})]}),(0,on.jsxs)("p",{className:"text-xl font-bold text-emerald-700",children:["\u20a6",(null===(r=k.wallet_balance)||void 0===r?void 0:r.toLocaleString())||"0.00"]}),k.dva_account_number?(0,on.jsxs)("div",{className:"mt-2 pt-2 border-t border-emerald-200",children:[(0,on.jsx)("p",{className:"text-[10px] text-emerald-600 uppercase font-medium",children:"Fund via Bank Transfer:"}),(0,on.jsxs)("div",{className:"flex items-center space-x-2 mt-0.5",children:[(0,on.jsx)("p",{className:"text-xs font-mono font-bold text-emerald-800 bg-white px-1 rounded border border-emerald-200",children:k.dva_account_number}),(0,on.jsx)("p",{className:"text-xs text-emerald-700",children:k.dva_bank_name})]})]}):["farmer","processor","aggregator","business"].includes(k.role)&&(0,on.jsx)("div",{className:"mt-2 pt-2 border-t border-emerald-200",children:(0,on.jsx)("button",{onClick:()=>{d(!1),N(!0)},className:"w-full py-1.5 bg-yellow-100 text-yellow-800 text-xs font-bold rounded border border-yellow-200 hover:bg-yellow-200 flex items-center justify-center animate-pulse",children:"\u26a0\ufe0f Create Virtual Account"})})]}),(0,on.jsxs)("div",{className:"py-1",children:[(0,on.jsxs)("button",{onClick:()=>{d(!1),N(!0)},className:"group flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[(0,on.jsx)("span",{className:"mr-3",children:"\u270f\ufe0f"})," Edit Profile"]}),(0,on.jsxs)("button",{onClick:()=>{d(!1),m(!0)},className:"group flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[(0,on.jsx)("span",{className:"mr-3",children:"\ud83d\udcf7"})," Change Photo"]}),"business"===k.role&&"logistics_business"===k.business_category&&(0,on.jsxs)("button",{onClick:()=>{d(!1),p(!0)},className:"group flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[(0,on.jsx)("span",{className:"mr-3",children:"\ud83d\ude9b"})," Manage Drivers"]}),"driver"!==k.role&&(0,on.jsxs)("button",{onClick:()=>{d(!1),h(!0)},className:"group flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[(0,on.jsx)("span",{className:"mr-3",children:"\ud83d\udd0d"})," Find Drivers"]}),(0,on.jsxs)("button",{onClick:()=>{d(!1),"admin"===k.role?window.location.href="/pyadmin":["farmer","business","supplier_food_produce"].includes(k.role)?x(!0):["agent","purchasing_agent"].includes(k.role)?f(!0):"function"===typeof setShowPersonalDashboard&&setShowPersonalDashboard(!0)},className:"group flex items-center w-full px-4 py-2 text-sm text-green-700 hover:bg-green-50 font-medium",children:[(0,on.jsx)("span",{className:"mr-3",children:"\u2699\ufe0f"})," My Dashboard"]}),(0,on.jsxs)("button",{onClick:()=>{d(!1),"function"===typeof window.openRequestWizard&&window.openRequestWizard()},className:"group flex items-center w-full px-4 py-2 text-sm text-purple-700 hover:bg-purple-50 font-medium border-b border-gray-100 pb-3 mb-1",children:[(0,on.jsx)("span",{className:"mr-3",children:"\u2795"})," Create Request (Bulk Buy)"]}),(0,on.jsxs)("button",{onClick:()=>{d(!1),g(!0)},className:"group flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[(0,on.jsx)("span",{className:"mr-3",children:"\ud83d\udcca"})," Market Prices"]}),"driver"===k.role&&(0,on.jsxs)(on.Fragment,{children:[(0,on.jsxs)("button",{onClick:()=>{d(!1),y(!0)},className:"group flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[(0,on.jsx)("span",{className:"mr-3",children:"\ud83d\ude9b"})," Driver Portal"]}),(0,on.jsxs)("button",{onClick:()=>{d(!1),b(!0)},className:"group flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[(0,on.jsx)("span",{className:"mr-3",children:"\ud83d\udce6"})," Deliveries"]})]}),(0,on.jsxs)("button",{onClick:()=>{d(!1),v(!0)},className:"group flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[(0,on.jsx)("span",{className:"mr-3",children:"\ud83d\udce6"})," Request Delivery"]}),(0,on.jsxs)("button",{onClick:()=>{d(!1),j(!0)},className:"group flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[(0,on.jsx)("span",{className:"mr-3",children:"\ud83d\udccd"})," Saved Locations"]}),(0,on.jsxs)("button",{onClick:()=>{d(!1),alert("KYC Status: "+((null===u||void 0===u?void 0:u.status)||"Not Started"))},className:"group flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[(0,on.jsx)("span",{className:"mr-3",children:"\u2713"})," KYC Verification"]})]}),(0,on.jsx)("div",{className:"py-1",children:(0,on.jsxs)("button",{onClick:()=>{d(!1),w(!0)},className:"group flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[(0,on.jsx)("span",{className:"mr-3",children:"\ud83d\udcb0"})," Wallet"]})}),(0,on.jsx)("div",{className:"py-1",children:(0,on.jsxs)("button",{onClick:()=>{d(!1),S()},className:"group flex items-center w-full px-4 py-2 text-sm text-red-700 hover:bg-red-50",children:[(0,on.jsx)("span",{className:"mr-3",children:"\ud83d\udeaa"})," Sign Out"]})})]})]}):(0,on.jsxs)("button",{onClick:()=>C(!0),className:"nav-button icon-button flex items-center gap-1 sm:gap-2 p-1 sm:p-1.5 md:p-2 text-gray-600 hover:text-emerald-600 transition-colors rounded-lg border border-gray-200 hover:border-emerald-500",title:"Sign In",children:[(0,on.jsx)("div",{className:"w-5 h-5 flex-shrink-0",children:(0,on.jsx)(zs,{})}),(0,on.jsx)("span",{className:"hidden md:inline text-xs md:text-sm font-medium whitespace-nowrap",children:"Sign In"})]})})]})]})})})},qs=e=>{let{availableDate:t,endDate:r}=e;const[a,s]=(0,n.useState)(""),[l,o]=(0,n.useState)("loading");return(0,n.useEffect)(()=>{const e=()=>{const e=new Date,a=new Date(t),n=r?new Date(r):null;if(e<a){const t=a-e,r=Math.floor(t/864e5),n=Math.floor(t/36e5%24),l=Math.floor(t/6e4%60),i=Math.floor(t/1e3%60);s("".concat(r,"d ").concat(n,"h ").concat(l,"m ").concat(i,"s")),o("upcoming")}else if(n&&e<n){const t=n-e,r=Math.floor(t/864e5),a=Math.floor(t/36e5%24);s("".concat(r,"d ").concat(a,"h left")),o("active")}else n&&e>=n?(s("Pre-order Ended"),o("ended")):(s("Available Now"),o("active"))};e();const a=setInterval(e,1e3);return()=>clearInterval(a)},[t,r]),"ended"!==l&&t?(0,on.jsxs)("div",{className:"rounded-lg p-2 text-center border mb-3 ".concat("upcoming"===l?"bg-orange-50 border-orange-200 text-orange-700":"bg-emerald-50 border-emerald-200 text-emerald-700"),children:[(0,on.jsx)("div",{className:"text-[10px] font-bold uppercase tracking-wider mb-0.5 opacity-80",children:"upcoming"===l?"\u23f0 Pre-Order Starts In":"\ud83d\udd25 Pre-Order Live"}),(0,on.jsx)("div",{className:"text-base font-bold font-mono leading-tight",children:a}),r&&"active"===l&&(0,on.jsxs)("div",{className:"text-[10px] mt-0.5 opacity-75",children:["Ends ",new Date(r).toLocaleDateString()]}),"upcoming"===l&&(0,on.jsxs)("div",{className:"text-[10px] mt-0.5 opacity-75",children:["Available ",new Date(t).toLocaleDateString()]})]}):null},Us=()=>(0,on.jsx)("span",{className:"inline-flex items-center justify-center w-4 h-4 bg-green-500 rounded-full ml-1",title:"Verified Seller",children:(0,on.jsx)("svg",{className:"w-2.5 h-2.5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,on.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),Hs=e=>{let{product:t,variant:r,onOpenModal:a,onAddToCart:s,onCommit:l}=e;const[o,i]=(0,n.useState)(0),c=Se(),d=t.images&&t.images.length>0?t.images:[],u=d.length>1,m=(()=>{const e=t.target_quantity||1e3,r=t.committed_quantity||0;return{committed:r,target:e,percent:Math.min(r/e*100,100)}})();return(0,on.jsxs)("div",{className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow flex flex-col min-h-0 group",children:[(0,on.jsxs)("div",{className:"relative h-48 sm:h-56 bg-gray-100 rounded-t-lg overflow-hidden cursor-pointer",onClick:()=>a(t),children:[d.length>0?(0,on.jsx)("img",{src:d[o],alt:t.title||t.product_name,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"}):(0,on.jsx)("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:(0,on.jsx)("span",{className:"text-3xl",children:"\ud83d\udce6"})}),u&&(0,on.jsxs)(on.Fragment,{children:[(0,on.jsx)("button",{onClick:e=>{e.stopPropagation(),i(e=>(e-1+d.length)%d.length)},className:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white rounded-full p-1 hover:bg-opacity-75 opacity-0 group-hover:opacity-100 transition-opacity",children:"\u2190"}),(0,on.jsx)("button",{onClick:e=>{e.stopPropagation(),i(e=>(e+1)%d.length)},className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white rounded-full p-1 hover:bg-opacity-75 opacity-0 group-hover:opacity-100 transition-opacity",children:"\u2192"}),(0,on.jsx)("div",{className:"absolute bottom-2 left-0 right-0 flex justify-center space-x-1",children:d.map((e,t)=>(0,on.jsx)("div",{className:"w-1.5 h-1.5 rounded-full ".concat(t===o?"bg-white":"bg-white bg-opacity-50")},t))})]}),"wholesale"===r&&(0,on.jsx)("div",{className:"absolute top-2 left-2 bg-orange-600 text-white px-2 py-1 rounded text-xs font-bold",children:"FARM DEAL"}),"community"===r&&(0,on.jsx)("div",{className:"absolute top-2 left-2 bg-purple-600 text-white px-2 py-1 rounded text-xs font-bold",children:"COMMUNITY"}),t.discount_value&&(0,on.jsx)("div",{className:"absolute top-2 right-2 bg-red-500 text-white px-2 py-1 rounded text-xs font-bold animate-pulse",children:"DATA SAVE"})]}),(0,on.jsxs)("div",{className:"p-3 flex-1 flex flex-col",children:[(0,on.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("h3",{className:"font-bold text-gray-900 line-clamp-1",title:t.title||t.product_name,children:t.title||t.product_name}),"retail"===r&&t.brand_name&&(0,on.jsxs)("p",{className:"text-xs text-gray-500 flex items-center",children:[t.brand_name,t.seller_is_verified&&(0,on.jsx)(Us,{})]})]}),(0,on.jsxs)("div",{className:"text-right",children:[(0,on.jsxs)("span",{className:"font-bold text-emerald-600 block",children:["\u20a6",t.price_per_unit||t.price]}),(0,on.jsxs)("span",{className:"text-xs text-gray-500",children:["/",t.unit||t.unit_of_measure]})]})]}),(0,on.jsx)("button",{onClick:e=>{e.stopPropagation();const r={title:t.title||t.product_name,text:"Check out ".concat(t.title||t.product_name," on FarmHub!"),url:window.location.href};navigator.share?navigator.share(r).catch(console.error):(navigator.clipboard.writeText(window.location.href),alert("Link copied to clipboard!"))},className:"absolute top-2 right-12 bg-white/80 hover:bg-white text-gray-700 p-1.5 rounded-full shadow-sm z-10 transition-colors",title:"Share Product",children:(0,on.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,on.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})})}),t.is_preorder&&(0,on.jsxs)("div",{className:"mb-2",children:[(0,on.jsx)(qs,{availableDate:t.preorder_available_date,endDate:t.preorder_end_date}),t.preorder_target_quantity&&(0,on.jsxs)("div",{className:"mt-2",children:[(0,on.jsxs)("div",{className:"flex justify-between text-[10px] text-gray-500 mb-1",children:[(0,on.jsxs)("span",{children:[t.quantity_available," left"]}),(0,on.jsxs)("span",{children:["Goal: ",t.preorder_target_quantity]})]}),(0,on.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:(0,on.jsx)("div",{className:"bg-emerald-500 h-1.5 rounded-full transition-all duration-500",style:{width:"".concat(Math.min(100,Math.max(0,t.quantity_available/t.preorder_target_quantity*100)),"%")}})})]})]}),(0,on.jsxs)("div",{className:"mt-auto space-y-2",children:["retail"===r&&(0,on.jsxs)("div",{className:"text-xs text-gray-500 space-y-1",children:[(0,on.jsxs)("div",{className:"flex items-center gap-1",children:[(0,on.jsx)("span",{children:"\ud83d\udce6 Min Order:"}),(0,on.jsxs)("span",{className:"font-medium text-gray-900",children:[t.minimum_order_quantity||1," ",t.unit]})]}),(0,on.jsxs)("div",{className:"flex items-center gap-1",children:[(0,on.jsx)("span",{children:"\ud83c\udff7\ufe0f Expiry:"}),(0,on.jsx)("span",{className:"font-medium text-gray-900",children:t.expiry_date?new Date(t.expiry_date).toLocaleDateString():"N/A"})]})]}),"wholesale"===r&&(0,on.jsx)("div",{className:"bg-orange-50 p-2 rounded text-xs space-y-1 border border-orange-100",children:(0,on.jsx)("span",{className:"text-orange-800 font-medium",children:"Wholesale / Farm Deal"})}),"community"===r&&(0,on.jsxs)("div",{className:"space-y-2",children:[(0,on.jsx)("div",{className:"bg-gray-200 rounded-full h-2 overflow-hidden",children:(0,on.jsx)("div",{className:"bg-purple-600 h-full transition-all duration-500",style:{width:"".concat(m.percent,"%")}})}),(0,on.jsxs)("div",{className:"flex justify-between text-xs text-purple-700 font-medium",children:[(0,on.jsxs)("span",{children:[m.committed," committed"]}),(0,on.jsxs)("span",{children:[m.target," goal"]})]})]}),(0,on.jsxs)("div",{className:"pt-2 grid grid-cols-2 gap-2",children:[(0,on.jsx)("button",{onClick:e=>{e.stopPropagation(),c("/product/".concat(t.id))},className:"px-3 py-1.5 text-xs font-bold text-gray-700 bg-gray-100 hover:bg-gray-200 rounded transition-colors",children:"More Info"}),"community"===r?(0,on.jsx)("button",{onClick:e=>{e.stopPropagation(),l(t)},className:"px-3 py-1.5 text-xs font-bold text-white bg-purple-600 hover:bg-purple-700 rounded transition-colors shadow-sm",children:"Commit"}):(0,on.jsx)("button",{onClick:e=>{e.stopPropagation(),s(t)},className:"px-3 py-1.5 text-xs font-bold text-white bg-emerald-600 hover:bg-emerald-700 rounded transition-colors shadow-sm",children:"Add Cart"})]})]})]})]})},Ws=()=>{var e,t,r,a;const{id:s}=Ce(),l=Se(),[o,i]=(0,n.useState)(null),[c,d]=(0,n.useState)([]),[u,m]=(0,n.useState)(!0),[p,h]=(0,n.useState)(null),[x,f]=(0,n.useState)(0),g="https://mvp-2-u8e9.onrender.com";if((0,n.useEffect)(()=>{s&&(async()=>{m(!0),h(null);try{const e=await fetch("".concat(g,"/api/products/").concat(s));if(!e.ok){if(404===e.status)throw new Error("Product not found");throw new Error("Failed to fetch product")}const t=await e.json();if(i(t),t.category){const e=await fetch("".concat(g,"/api/products?category=").concat(t.category,"&limit=5"));if(e.ok){const r=await e.json();d(r.products.filter(e=>e.id!==t.id))}}}catch(e){console.error(e),h(e.message)}finally{m(!1)}})()},[s,g]),u)return(0,on.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,on.jsx)("div",{className:"animate-spin h-10 w-10 border-4 border-emerald-500 border-t-transparent rounded-full"})});if(p||!o)return(0,on.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center justify-center p-4",children:[(0,on.jsx)(Is,{title:"Product Details"}),(0,on.jsxs)("div",{className:"bg-white p-8 rounded-xl shadow text-center max-w-md w-full mt-20",children:[(0,on.jsx)("span",{className:"text-5xl mb-4 block",children:"\ud83d\udd0d"}),(0,on.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Product Not Found"}),(0,on.jsx)("p",{className:"text-gray-500 mb-6",children:p||"The product you are looking for does not exist or has been removed."}),(0,on.jsx)("button",{onClick:()=>l(-1),className:"bg-emerald-600 text-white px-6 py-2 rounded-lg hover:bg-emerald-700 w-full font-medium transition-colors",children:"Go Back"})]})]});const y=(null===(e=o.images)||void 0===e?void 0:e.length)>0?o.images:[],b=e=>e?e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()):"";return(0,on.jsxs)("div",{className:"min-h-screen bg-gray-50 pb-20",children:[(0,on.jsx)(Is,{title:o.title||"Product Details"}),(0,on.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-6",children:[(0,on.jsxs)("button",{onClick:()=>l(-1),className:"flex items-center text-gray-600 hover:text-emerald-700 mb-6 font-medium transition-colors",children:[(0,on.jsx)("span",{className:"mr-2",children:"\u2190"})," Back"]}),(0,on.jsx)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden mb-12",children:(0,on.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 lg:gap-12 p-6 md:p-10",children:[(0,on.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,on.jsx)("div",{className:"relative aspect-square bg-gray-100 rounded-xl overflow-hidden border border-gray-100",children:y.length>0?(0,on.jsx)("img",{src:y[x],alt:o.title,className:"w-full h-full object-contain bg-white"}):(0,on.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center text-gray-400",children:[(0,on.jsx)("span",{className:"text-6xl mb-2",children:"\ud83d\udce6"}),(0,on.jsx)("p",{children:"No Image Available"})]})}),y.length>1&&(0,on.jsx)("div",{className:"flex space-x-3 overflow-x-auto pb-2 scrollbar-hide",children:y.map((e,t)=>(0,on.jsx)("button",{onClick:()=>f(t),className:"flex-shrink-0 w-20 h-20 rounded-lg overflow-hidden border-2 transition-all ".concat(t===x?"border-emerald-500 opacity-100":"border-transparent opacity-60 hover:opacity-100"),children:(0,on.jsx)("img",{src:e,alt:"",className:"w-full h-full object-cover"})},t))})]}),(0,on.jsxs)("div",{className:"flex flex-col",children:[(0,on.jsxs)("div",{className:"flex flex-wrap gap-2 mb-4",children:[(0,on.jsx)("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 text-xs font-bold rounded-full border border-gray-200 uppercase tracking-wide",children:b(o.category)}),o.subcategory&&(0,on.jsx)("span",{className:"px-3 py-1 bg-emerald-50 text-emerald-700 text-xs font-bold rounded-full border border-emerald-100 uppercase tracking-wide",children:b(o.subcategory)}),o.processing_level&&(0,on.jsx)("span",{className:"px-3 py-1 bg-blue-50 text-blue-700 text-xs font-bold rounded-full border border-blue-100 uppercase tracking-wide",children:b(o.processing_level)})]}),(0,on.jsx)("h1",{className:"text-3xl md:text-4xl font-extrabold text-gray-900 mb-2 leading-tight",children:o.title||o.product_name}),(0,on.jsx)("div",{className:"flex items-center text-sm text-gray-500 mb-6",children:(0,on.jsxs)("span",{className:"flex items-center",children:[(0,on.jsx)("svg",{className:"w-4 h-4 mr-1 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,on.jsx)("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),o.location,", Nigeria"]})}),(0,on.jsx)("div",{className:"bg-gray-50 rounded-xl p-5 mb-8 border border-gray-100",children:(0,on.jsxs)("div",{className:"flex items-end gap-2 mb-1",children:[(0,on.jsxs)("span",{className:"text-4xl font-black text-emerald-600",children:["\u20a6",null===(t=o.price_per_unit)||void 0===t?void 0:t.toLocaleString()]}),(0,on.jsxs)("span",{className:"text-lg text-gray-500 font-medium pb-1",children:["/ ",o.unit_of_measure]})]})}),(0,on.jsxs)("div",{className:"flex gap-4 mb-10 pb-8 border-b border-gray-100",children:[(0,on.jsxs)("button",{onClick:()=>alert("Add to cart functionality depends on variant context from parent app state."),className:"flex-1 bg-emerald-600 text-white px-8 py-4 rounded-xl font-bold text-lg hover:bg-emerald-700 shadow-md hover:shadow-lg transition-all flex items-center justify-center transform hover:-translate-y-0.5",children:[(0,on.jsx)("span",{className:"mr-2",children:"\ud83d\uded2"})," Add to Cart"]}),(0,on.jsx)("button",{onClick:async()=>{const e={title:o.title||o.product_name,text:"Check out ".concat(o.title||o.product_name," on FarmHub!"),url:window.location.href};try{navigator.share?await navigator.share(e):(await navigator.clipboard.writeText(window.location.href),alert("Product link copied to clipboard!"))}catch(t){console.error("Error sharing:",t)}},className:"p-4 bg-white border-2 border-gray-200 text-gray-700 rounded-xl hover:bg-gray-50 hover:border-gray-300 transition-colors flex items-center justify-center group",title:"Share Product",children:(0,on.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-500 group-hover:text-emerald-600 transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,on.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})})})]}),(0,on.jsxs)("div",{className:"grid grid-cols-2 gap-y-6 gap-x-8 mb-8",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("div",{className:"text-xs text-gray-500 uppercase font-bold tracking-wider mb-1",children:"Available Quantity"}),(0,on.jsxs)("div",{className:"font-semibold text-gray-900 text-lg",children:[null===(r=o.quantity_available)||void 0===r?void 0:r.toLocaleString()," ",o.unit_of_measure,"s"]})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("div",{className:"text-xs text-gray-500 uppercase font-bold tracking-wider mb-1",children:"Minimum Order"}),(0,on.jsxs)("div",{className:"font-semibold text-gray-900 text-lg",children:[(null===(a=o.minimum_order_quantity)||void 0===a?void 0:a.toLocaleString())||1," ",o.unit_of_measure,"s"]})]}),o.agent_name&&(0,on.jsxs)("div",{children:[(0,on.jsx)("div",{className:"text-xs text-gray-500 uppercase font-bold tracking-wider mb-1",children:"Listed By Agent"}),(0,on.jsxs)("div",{className:"font-semibold text-emerald-700 flex items-center text-lg",children:[o.agent_name,o.seller_is_verified&&(0,on.jsx)("svg",{className:"w-5 h-5 ml-1 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,on.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})]})]}),(o.best_before||o.expiry_date)&&(0,on.jsxs)("div",{children:[(0,on.jsx)("div",{className:"text-xs text-gray-500 uppercase font-bold tracking-wider mb-1",children:o.best_before?"Harvest/Production Date":"Expiry Date"}),(0,on.jsx)("div",{className:"font-semibold text-orange-700 text-lg",children:new Date(o.best_before||o.expiry_date).toLocaleDateString()})]})]}),o.colors&&o.colors.length>0&&(0,on.jsxs)("div",{className:"mb-8",children:[(0,on.jsx)("div",{className:"text-xs text-gray-500 uppercase font-bold tracking-wider mb-3",children:"Available Colors"}),(0,on.jsx)("div",{className:"flex flex-wrap gap-2",children:o.colors.map(e=>(0,on.jsx)("span",{className:"px-3 py-1 bg-gray-50 border rounded-lg text-sm font-medium text-gray-700 capitalize",children:e},e))})]}),(0,on.jsxs)("div",{className:"mt-2",children:[(0,on.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-3 border-b border-gray-100 pb-2",children:"Description"}),(0,on.jsx)("div",{className:"prose prose-emerald prose-sm sm:prose-base max-w-none text-gray-600 leading-relaxed whitespace-pre-wrap",children:o.description||"No detailed description provided by the seller."})]})]})]})}),c.length>0&&(0,on.jsxs)("div",{className:"mt-16 mb-8",children:[(0,on.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,on.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Similar Products"}),(0,on.jsx)("span",{className:"text-emerald-600 font-medium text-sm hover:underline cursor-pointer",children:"View more category"})]}),(0,on.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4 md:gap-6",children:c.map(e=>(0,on.jsx)(Hs,{product:e,variant:"retail",onAddToCart:()=>{},onOpenModal:()=>{},onCommit:()=>{}},e.id))})]})]})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));const Vs=()=>{const[e,t]=(0,n.useState)(""),[r,a]=(0,n.useState)(""),[s,l]=(0,n.useState)(""),[o,i]=(0,n.useState)(!1);return(0,on.jsx)("div",{className:"min-h-screen bg-black flex items-center justify-center p-4",children:(0,on.jsxs)("div",{className:"max-w-md w-full bg-zinc-900 rounded-xl border border-zinc-800 p-8 shadow-2xl",children:[(0,on.jsxs)("div",{className:"text-center mb-8",children:[(0,on.jsx)("h1",{className:"text-3xl font-bold text-green-500 mb-2",children:"Pyramyd Admin"}),(0,on.jsx)("p",{className:"text-zinc-400",children:"Secure Access Log In"})]}),s&&(0,on.jsx)("div",{className:"bg-red-500/10 border border-red-500/20 text-red-500 px-4 py-3 rounded-lg mb-6 text-sm",children:s}),(0,on.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),i(!0),l("");try{const t=await nn.post("".concat("https://mvp-2-u8e9.onrender.com","/api/auth/login"),{email_or_phone:e,password:r}),{token:a,user:n}=t.data;if("admin"!==n.role)return l("Access denied. Admin privileges required."),void i(!1);localStorage.setItem("token",a),localStorage.setItem("user",JSON.stringify(n)),window.location.href="/"}catch(s){var a,n;l((null===(a=s.response)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.detail)||"Login failed. Please check credentials.")}finally{i(!1)}},className:"space-y-6",children:[(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-zinc-400 text-sm font-medium mb-2",children:"Admin Email"}),(0,on.jsx)("input",{type:"email",value:e,onChange:e=>t(e.target.value),className:"w-full bg-black border border-zinc-800 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-green-500 transition-colors",placeholder:"admin@pyramydhub.com",required:!0})]}),(0,on.jsxs)("div",{children:[(0,on.jsx)("label",{className:"block text-zinc-400 text-sm font-medium mb-2",children:"Password"}),(0,on.jsx)("input",{type:"password",value:r,onChange:e=>a(e.target.value),className:"w-full bg-black border border-zinc-800 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-green-500 transition-colors",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",required:!0})]}),(0,on.jsx)("button",{type:"submit",disabled:o,className:"w-full bg-green-500 hover:bg-green-400 text-black font-bold py-3 rounded-lg transition-colors ".concat(o?"opacity-50 cursor-not-allowed":""),children:o?"Authenticating...":"Access Dashboard"})]})]})})};class Ys extends n.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t}),console.error("Uncaught error:",e,t)}render(){return this.state.hasError?(0,on.jsxs)("div",{style:{padding:"20px",fontFamily:"monospace",color:"red"},children:[(0,on.jsx)("h1",{children:"Something went wrong."}),(0,on.jsxs)("details",{style:{whiteSpace:"pre-wrap"},children:[this.state.error&&this.state.error.toString(),(0,on.jsx)("br",{}),this.state.errorInfo&&this.state.errorInfo.componentStack]})]}):this.props.children}}const Ks=Ys;l.createRoot(document.getElementById("root")).render((0,on.jsx)(n.StrictMode,{children:(0,on.jsx)(Ks,{children:(0,on.jsx)(vn,{children:(0,on.jsx)(Ct,{children:(0,on.jsxs)(Je,{children:[(0,on.jsx)(Ye,{path:"/pyadmin",element:(0,on.jsx)(Vs,{})}),(0,on.jsx)(Ye,{path:"/product/:id",element:(0,on.jsx)(Ws,{})}),(0,on.jsx)(Ye,{path:"*",element:(0,on.jsx)(Ls,{})})]})})})})})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()}).catch(e=>{console.error(e.message)})})();
//# sourceMappingURL=main.2d6f1158.js.map